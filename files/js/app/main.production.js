/*! jQuery v1.7.1 jquery.com | jquery.org/license */

/**
 * @license RequireJS i18n 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/i18n for details
 */

/*! jQuery UI - v1.11.1 - 2014-09-17
* http://jqueryui.com
* Includes: widget.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */

/*!
 * jQuery UI Widget 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */

/*
 * jQuery File Upload Plugin 5.42.1
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */

/*
 * jQuery File Upload Processing Plugin 1.3.0
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2012, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */

/*
 * jQuery File Upload Validation Plugin 1.1.2
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2013, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */

/*! jQuery UI - v1.9.2 - 2014-12-11
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */

/*!
 * jQuery Color Animations v2.0.0
 * http://jquery.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Mon Aug 13 13:41:02 2012 -0500
 */

/* ===================================================
 * bootstrap-transition.js v2.3.2
 * http://getbootstrap.com/2.3.2/javascript.html#transitions
 * ===================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/* ==========================================================
 * bootstrap-alert.js v2.3.2
 * http://getbootstrap.com/2.3.2/javascript.html#alerts
 * ==========================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/* ============================================================
 * bootstrap-button.js v2.3.2
 * http://getbootstrap.com/2.3.2/javascript.html#buttons
 * ============================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

/* ==========================================================
 * bootstrap-carousel.js v2.3.2
 * http://getbootstrap.com/2.3.2/javascript.html#carousel
 * ==========================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/* =============================================================
 * bootstrap-collapse.js v2.3.2
 * http://getbootstrap.com/2.3.2/javascript.html#collapse
 * =============================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

/* ============================================================
 * bootstrap-dropdown.js v2.3.2
 * http://getbootstrap.com/2.3.2/javascript.html#dropdowns
 * ============================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

/* =========================================================
 * bootstrap-modal.js v2.3.2
 * http://getbootstrap.com/2.3.2/javascript.html#modals
 * =========================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */

/* ===========================================================
 * bootstrap-tooltip.js v2.3.2
 * http://getbootstrap.com/2.3.2/javascript.html#tooltips
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ===========================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/* ===========================================================
 * bootstrap-popover.js v2.3.2
 * http://getbootstrap.com/2.3.2/javascript.html#popovers
 * ===========================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =========================================================== */

/* =============================================================
 * bootstrap-scrollspy.js v2.3.2
 * http://getbootstrap.com/2.3.2/javascript.html#scrollspy
 * =============================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================== */

/* ========================================================
 * bootstrap-tab.js v2.3.2
 * http://getbootstrap.com/2.3.2/javascript.html#tabs
 * ========================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ======================================================== */

/* =============================================================
 * bootstrap-typeahead.js v2.3.2
 * http://getbootstrap.com/2.3.2/javascript.html#typeahead
 * =============================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

/* ==========================================================
 * bootstrap-affix.js v2.3.2
 * http://getbootstrap.com/2.3.2/javascript.html#affix
 * ==========================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/*
 * jQuery UI Nested Sortable
 * v 1.3.4 / 28 apr 2011
 * http://mjsarfatti.com/sandbox/nestedSortable
 *
 * Depends:
 *	 jquery.ui.sortable.js 1.8+
 *
 * License CC BY-SA 3.0
 * Copyright 2010-2011, Manuele J Sarfatti
 */

/*
 * jQuery FlexSlider v2.2.0
 * Copyright 2012 WooThemes
 * Contributing Author: Tyler Smith
 */

/*
 * Very simple jQuery Color Picker
 * https://github.com/tkrotoff/jquery-simplecolorpicker
 *
 * Copyright (C) 2012-2013 Tanguy Krotoff <tkrotoff@gmail.com>
 *
 * Licensed under the MIT license
 */

/**
 * SWFUpload: http://www.swfupload.org, http://swfupload.googlecode.com
 *
 * mmSWFUpload 1.0: Flash upload dialog - http://profandesign.se/swfupload/,  http://www.vinterwebb.se/
 *
 * SWFUpload is (c) 2006-2007 Lars Huring, Olov Nilz�n and Mammon Media and is released under the MIT License:
 * http://www.opensource.org/licenses/mit-license.php
 *
 * SWFUpload 2 is (c) 2007-2008 Jake Roberts and is released under the MIT License:
 * http://www.opensource.org/licenses/mit-license.php
 *
 */

/*
 * SWFUpload jQuery Plugin v1.0.0
 *
 * Copyright (c) 2009 Adam Royle
 * Licensed under the MIT license.
 *
 */

/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 2011–2014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */

/**
 * Intro.js v0.8.0
 * https://github.com/usablica/intro.js
 * MIT licensed
 *
 * Copyright (C) 2013 usabli.ca - A weekend project by Afshin Mehrabani (@afshinmeh)
 */

/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.9
 *
 * Requires: jQuery 1.2.2+
 */

/* Copyright (c) 2012, 2014 Hyeonje Alex Jun and other contributors
 * Licensed under the MIT License
 */

/*
	Masked Input plugin for jQuery
	Copyright (c) 2007-2013 Josh Bush (digitalbush.com)
	Licensed under the MIT license (http://digitalbush.com/projects/masked-input-plugin/#license)
	Version: 1.3.1
*/

/**
 * Lightbox v2.7.1
 * by Lokesh Dhakar - http://lokeshdhakar.com/projects/lightbox2/
 *
 * @license http://creativecommons.org/licenses/by/2.5/
 * - Free for use in both personal and commercial projects
 * - Attribution requires leaving author name, author link, and the license info intact
 */

/*!
* FitVids 1.1
*
* Copyright 2013, Chris Coyier - http://css-tricks.com + Dave Rupert - http://daverupert.com
* Credit to Thierry Koblentz - http://www.alistapart.com/articles/creating-intrinsic-ratios-for-video/
* Released under the WTFPL license - http://sam.zoy.org/wtfpl/
*
*/

(function(e,t){function n(e){return B.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}function r(e){if(!mn[e]){var t=D.body,n=B("<"+e+">").appendTo(t),r=n.css("display");n.remove();if(r==="none"||r===""){gn||(gn=D.createElement("iframe"),gn.frameBorder=gn.width=gn.height=0),t.appendChild(gn);if(!yn||!gn.createElement)yn=(gn.contentWindow||gn.contentDocument).document,yn.write((D.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),yn.close();n=yn.createElement(e),yn.body.appendChild(n),r=B.css(n,"display"),t.removeChild(gn)}mn[e]=r}return mn[e]}function i(e,t){var n={};return B.each(Sn.concat.apply([],Sn.slice(0,t)),function(){n[this]=e}),n}function s(){xn=t}function o(){return setTimeout(s,0),xn=B.now()}function u(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function a(){try{return new e.XMLHttpRequest}catch(t){}}function f(e,n){e.dataFilter&&(n=e.dataFilter(n,e.dataType));var r=e.dataTypes,i={},s,o,u=r.length,a,f=r[0],l,c,h,p,d;for(s=1;s<u;s++){if(s===1)for(o in e.converters)typeof o=="string"&&(i[o.toLowerCase()]=e.converters[o]);l=f,f=r[s];if(f==="*")f=l;else if(l!=="*"&&l!==f){c=l+" "+f,h=i[c]||i["* "+f];if(!h){d=t;for(p in i){a=p.split(" ");if(a[0]===l||a[0]==="*"){d=i[a[1]+" "+f];if(d){p=i[p],p===!0?h=d:d===!0&&(h=p);break}}}}!h&&!d&&B.error("No conversion from "+c.replace(" "," to ")),h!==!0&&(n=h?h(n):d(p(n)))}}return n}function l(e,n,r){var i=e.contents,s=e.dataTypes,o=e.responseFields,u,a,f,l;for(a in o)a in r&&(n[o[a]]=r[a]);while(s[0]==="*")s.shift(),u===t&&(u=e.mimeType||n.getResponseHeader("content-type"));if(u)for(a in i)if(i[a]&&i[a].test(u)){s.unshift(a);break}if(s[0]in r)f=s[0];else{for(a in r){if(!s[0]||e.converters[a+" "+s[0]]){f=a;break}l||(l=a)}f=f||l}if(f)return f!==s[0]&&s.unshift(f),r[f]}function c(e,t,n,r){if(B.isArray(t))B.each(t,function(t,i){n||zt.test(e)?r(e,i):c(e+"["+(typeof i=="object"||B.isArray(i)?t:"")+"]",i,n,r)});else if(!n&&t!=null&&typeof t=="object")for(var i in t)c(e+"["+i+"]",t[i],n,r);else r(e,t)}function h(e,n){var r,i,s=B.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);i&&B.extend(!0,e,i)}function p(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u=e[s],a=0,f=u?u.length:0,l=e===sn,c;for(;a<f&&(l||!c);a++)c=u[a](n,r,i),typeof c=="string"&&(!l||o[c]?c=t:(n.dataTypes.unshift(c),c=p(e,n,r,i,c,o)));return(l||!c)&&!o["*"]&&(c=p(e,n,r,i,"*",o)),c}function d(e){return function(t,n){typeof t!="string"&&(n=t,t="*");if(B.isFunction(n)){var r=t.toLowerCase().split(en),i=0,s=r.length,o,u,a;for(;i<s;i++)o=r[i],a=/^\+/.test(o),a&&(o=o.substr(1)||"*"),u=e[o]=e[o]||[],u[a?"unshift":"push"](n)}}}function v(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=t==="width"?jt:Ft,s=0,o=i.length;if(r>0){if(n!=="border")for(;s<o;s++)n||(r-=parseFloat(B.css(e,"padding"+i[s]))||0),n==="margin"?r+=parseFloat(B.css(e,n+i[s]))||0:r-=parseFloat(B.css(e,"border"+i[s]+"Width"))||0;return r+"px"}r=It(e,t,t);if(r<0||r==null)r=e.style[t]||0;r=parseFloat(r)||0;if(n)for(;s<o;s++)r+=parseFloat(B.css(e,"padding"+i[s]))||0,n!=="padding"&&(r+=parseFloat(B.css(e,"border"+i[s]+"Width"))||0),n==="margin"&&(r+=parseFloat(B.css(e,n+i[s]))||0);return r+"px"}function m(e,t){t.src?B.ajax({url:t.src,async:!1,dataType:"script"}):B.globalEval((t.text||t.textContent||t.innerHTML||"").replace(kt,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)}function g(e){var t=D.createElement("div");return At.appendChild(t),t.innerHTML=e.outerHTML,t.firstChild}function y(e){var t=(e.nodeName||"").toLowerCase();t==="input"?b(e):t!=="script"&&typeof e.getElementsByTagName!="undefined"&&B.grep(e.getElementsByTagName("input"),b)}function b(e){if(e.type==="checkbox"||e.type==="radio")e.defaultChecked=e.checked}function w(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function E(e,t){var n;if(t.nodeType===1){t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase();if(n==="object")t.outerHTML=e.outerHTML;else if(n!=="input"||e.type!=="checkbox"&&e.type!=="radio"){if(n==="option")t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}else e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value);t.removeAttribute(B.expando)}}function S(e,t){if(t.nodeType===1&&!!B.hasData(e)){var n,r,i,s=B._data(e),o=B._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)B.event.add(t,n+(u[n][r].namespace?".":"")+u[n][r].namespace,u[n][r],u[n][r].data)}o.data&&(o.data=B.extend({},o.data))}}function x(e,t){return B.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function T(e){var t=vt.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function N(e,t,n){t=t||0;if(B.isFunction(t))return B.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return B.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=B.grep(e,function(e){return e.nodeType===1});if(ct.test(t))return B.filter(t,r,!n);t=B.filter(t,r)}return B.grep(e,function(e,r){return B.inArray(e,t)>=0===n})}function C(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function k(){return!0}function L(){return!1}function A(e,t,n){var r=t+"defer",i=t+"queue",s=t+"mark",o=B._data(e,r);o&&(n==="queue"||!B._data(e,i))&&(n==="mark"||!B._data(e,s))&&setTimeout(function(){!B._data(e,i)&&!B._data(e,s)&&(B.removeData(e,r,!0),o.fire())},0)}function O(e){for(var t in e){if(t==="data"&&B.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function M(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(q,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:B.isNumeric(r)?parseFloat(r):I.test(r)?B.parseJSON(r):r}catch(s){}B.data(e,n,r)}else r=t}return r}function _(e){var t=j[e]={},n,r;e=e.split(/\s+/);for(n=0,r=e.length;n<r;n++)t[e[n]]=!0;return t}var D=e.document,P=e.navigator,H=e.location,B=function(){function n(){if(!r.isReady){try{D.documentElement.doScroll("left")}catch(e){setTimeout(n,1);return}r.ready()}}var r=function(e,t){return new r.fn.init(e,t,o)},i=e.jQuery,s=e.$,o,u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,a=/\S/,f=/^\s+/,l=/\s+$/,c=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,h=/^[\],:{}\s]*$/,p=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,d=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,v=/(?:^|:|,)(?:\s*\[)+/g,m=/(webkit)[ \/]([\w.]+)/,g=/(opera)(?:.*version)?[ \/]([\w.]+)/,y=/(msie) ([\w.]+)/,b=/(mozilla)(?:.*? rv:([\w.]+))?/,w=/-([a-z]|[0-9])/ig,E=/^-ms-/,S=function(e,t){return(t+"").toUpperCase()},x=P.userAgent,T,N,C,k=Object.prototype.toString,L=Object.prototype.hasOwnProperty,A=Array.prototype.push,O=Array.prototype.slice,M=String.prototype.trim,_=Array.prototype.indexOf,H={};return r.fn=r.prototype={constructor:r,init:function(e,n,i){var s,o,a,f;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(e==="body"&&!n&&D.body)return this.context=D,this[0]=D.body,this.selector=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)!=="<"||e.charAt(e.length-1)!==">"||e.length<3?s=u.exec(e):s=[null,e,null];if(s&&(s[1]||!n)){if(s[1])return n=n instanceof r?n[0]:n,f=n?n.ownerDocument||n:D,a=c.exec(e),a?r.isPlainObject(n)?(e=[D.createElement(a[1])],r.fn.attr.call(e,n,!0)):e=[f.createElement(a[1])]:(a=r.buildFragment([s[1]],[f]),e=(a.cacheable?r.clone(a.fragment):a.fragment).childNodes),r.merge(this,e);o=D.getElementById(s[2]);if(o&&o.parentNode){if(o.id!==s[2])return i.find(e);this.length=1,this[0]=o}return this.context=D,this.selector=e,this}return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e)}return r.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),r.makeArray(e,this))},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return O.call(this,0)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var i=this.constructor();return r.isArray(e)?A.apply(i,e):r.merge(i,e),i.prevObject=this,i.context=this.context,t==="find"?i.selector=this.selector+(this.selector?" ":"")+n:t&&(i.selector=this.selector+"."+t+"("+n+")"),i},each:function(e,t){return r.each(this,e,t)},ready:function(e){return r.bindReady(),N.add(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(O.apply(this,arguments),"slice",O.call(arguments).join(","))},map:function(e){return this.pushStack(r.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:A,sort:[].sort,splice:[].splice},r.fn.init.prototype=r.fn,r.extend=r.fn.extend=function(){var e,n,i,s,o,u,a=arguments[0]||{},f=1,l=arguments.length,c=!1;typeof a=="boolean"&&(c=a,a=arguments[1]||{},f=2),typeof a!="object"&&!r.isFunction(a)&&(a={}),l===f&&(a=this,--f);for(;f<l;f++)if((e=arguments[f])!=null)for(n in e){i=a[n],s=e[n];if(a===s)continue;c&&s&&(r.isPlainObject(s)||(o=r.isArray(s)))?(o?(o=!1,u=i&&r.isArray(i)?i:[]):u=i&&r.isPlainObject(i)?i:{},a[n]=r.extend(c,u,s)):s!==t&&(a[n]=s)}return a},r.extend({noConflict:function(t){return e.$===r&&(e.$=s),t&&e.jQuery===r&&(e.jQuery=i),r},isReady:!1,readyWait:1,holdReady:function(e){e?r.readyWait++:r.ready(!0)},ready:function(e){if(e===!0&&!--r.readyWait||e!==!0&&!r.isReady){if(!D.body)return setTimeout(r.ready,1);r.isReady=!0;if(e!==!0&&--r.readyWait>0)return;N.fireWith(D,[r]),r.fn.trigger&&r(D).trigger("ready").off("ready")}},bindReady:function(){if(!N){N=r.Callbacks("once memory");if(D.readyState==="complete")return setTimeout(r.ready,1);if(D.addEventListener)D.addEventListener("DOMContentLoaded",C,!1),e.addEventListener("load",r.ready,!1);else if(D.attachEvent){D.attachEvent("onreadystatechange",C),e.attachEvent("onload",r.ready);var t=!1;try{t=e.frameElement==null}catch(i){}D.documentElement.doScroll&&t&&n()}}},isFunction:function(e){return r.type(e)==="function"},isArray:Array.isArray||function(e){return r.type(e)==="array"},isWindow:function(e){return e&&typeof e=="object"&&"setInterval"in e},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):H[k.call(e)]||"object"},isPlainObject:function(e){if(!e||r.type(e)!=="object"||e.nodeType||r.isWindow(e))return!1;try{if(e.constructor&&!L.call(e,"constructor")&&!L.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var i;for(i in e);return i===t||L.call(e,i)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw new Error(e)},parseJSON:function(t){if(typeof t!="string"||!t)return null;t=r.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(h.test(t.replace(p,"@").replace(d,"]").replace(v,"")))return(new Function("return "+t))();r.error("Invalid JSON: "+t)},parseXML:function(n){var i,s;try{e.DOMParser?(s=new DOMParser,i=s.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(o){i=t}return(!i||!i.documentElement||i.getElementsByTagName("parsererror").length)&&r.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(t){t&&a.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(E,"ms-").replace(w,S)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,n,i){var s,o=0,u=e.length,a=u===t||r.isFunction(e);if(i){if(a){for(s in e)if(n.apply(e[s],i)===!1)break}else for(;o<u;)if(n.apply(e[o++],i)===!1)break}else if(a){for(s in e)if(n.call(e[s],s,e[s])===!1)break}else for(;o<u;)if(n.call(e[o],o,e[o++])===!1)break;return e},trim:M?function(e){return e==null?"":M.call(e)}:function(e){return e==null?"":(e+"").replace(f,"").replace(l,"")},makeArray:function(e,t){var n=t||[];if(e!=null){var i=r.type(e);e.length==null||i==="string"||i==="function"||i==="regexp"||r.isWindow(e)?A.call(n,e):r.merge(n,e)}return n},inArray:function(e,t,n){var r;if(t){if(_)return _.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=e.length,i=0;if(typeof n.length=="number")for(var s=n.length;i<s;i++)e[r++]=n[i];else while(n[i]!==t)e[r++]=n[i++];return e.length=r,e},grep:function(e,t,n){var r=[],i;n=!!n;for(var s=0,o=e.length;s<o;s++)i=!!t(e[s],s),n!==i&&r.push(e[s]);return r},map:function(e,n,i){var s,o,u=[],a=0,f=e.length,l=e instanceof r||f!==t&&typeof f=="number"&&(f>0&&e[0]&&e[f-1]||f===0||r.isArray(e));if(l)for(;a<f;a++)s=n(e[a],a,i),s!=null&&(u[u.length]=s);else for(o in e)s=n(e[o],o,i),s!=null&&(u[u.length]=s);return u.concat.apply([],u)},guid:1,proxy:function(e,n){if(typeof n=="string"){var i=e[n];n=e,e=i}if(!r.isFunction(e))return t;var s=O.call(arguments,2),o=function(){return e.apply(n,s.concat(O.call(arguments)))};return o.guid=e.guid=e.guid||o.guid||r.guid++,o},access:function(e,n,i,s,o,u){var a=e.length;if(typeof n=="object"){for(var f in n)r.access(e,f,n[f],s,o,i);return e}if(i!==t){s=!u&&s&&r.isFunction(i);for(var l=0;l<a;l++)o(e[l],n,s?i.call(e[l],l,o(e[l],n)):i,u);return e}return a?o(e[0],n):t},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=m.exec(e)||g.exec(e)||y.exec(e)||e.indexOf("compatible")<0&&b.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,n){return new e.fn.init(t,n)}r.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(n,i){return i&&i instanceof r&&!(i instanceof e)&&(i=e(i)),r.fn.init.call(this,n,i,t)},e.fn.init.prototype=e.fn;var t=e(D);return e},browser:{}}),r.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){H["[object "+t+"]"]=t.toLowerCase()}),T=r.uaMatch(x),T.browser&&(r.browser[T.browser]=!0,r.browser.version=T.version),r.browser.webkit&&(r.browser.safari=!0),a.test(" ")&&(f=/^[\s\xA0]+/,l=/[\s\xA0]+$/),o=r(D),D.addEventListener?C=function(){D.removeEventListener("DOMContentLoaded",C,!1),r.ready()}:D.attachEvent&&(C=function(){D.readyState==="complete"&&(D.detachEvent("onreadystatechange",C),r.ready())}),r}(),j={};B.Callbacks=function(e){e=e?j[e]||_(e):{};var n=[],r=[],i,s,o,u,a,f=function(t){var r,i,s,o,u;for(r=0,i=t.length;r<i;r++)s=t[r],o=B.type(s),o==="array"?f(s):o==="function"&&(!e.unique||!c.has(s))&&n.push(s)},l=function(t,f){f=f||[],i=!e.memory||[t,f],s=!0,a=o||0,o=0,u=n.length;for(;n&&a<u;a++)if(n[a].apply(t,f)===!1&&e.stopOnFalse){i=!0;break}s=!1,n&&(e.once?i===!0?c.disable():n=[]:r&&r.length&&(i=r.shift(),c.fireWith(i[0],i[1])))},c={add:function(){if(n){var e=n.length;f(arguments),s?u=n.length:i&&i!==!0&&(o=e,l(i[0],i[1]))}return this},remove:function(){if(n){var t=arguments,r=0,i=t.length;for(;r<i;r++)for(var o=0;o<n.length;o++)if(t[r]===n[o]){s&&o<=u&&(u--,o<=a&&a--),n.splice(o--,1);if(e.unique)break}}return this},has:function(e){if(n){var t=0,r=n.length;for(;t<r;t++)if(e===n[t])return!0}return!1},empty:function(){return n=[],this},disable:function(){return n=r=i=t,this},disabled:function(){return!n},lock:function(){return r=t,(!i||i===!0)&&c.disable(),this},locked:function(){return!r},fireWith:function(t,n){return r&&(s?e.once||r.push([t,n]):(!e.once||!i)&&l(t,n)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c};var F=[].slice;B.extend({Deferred:function(e){var t=B.Callbacks("once memory"),n=B.Callbacks("once memory"),r=B.Callbacks("memory"),i="pending",s={resolve:t,reject:n,notify:r},o={done:t.add,fail:n.add,progress:r.add,state:function(){return i},isResolved:t.fired,isRejected:n.fired,then:function(e,t,n){return u.done(e).fail(t).progress(n),this},always:function(){return u.done.apply(u,arguments).fail.apply(u,arguments),this},pipe:function(e,t,n){return B.Deferred(function(r){B.each({done:[e,"resolve"],fail:[t,"reject"],progress:[n,"notify"]},function(e,t){var n=t[0],i=t[1],s;B.isFunction(n)?u[e](function(){s=n.apply(this,arguments),s&&B.isFunction(s.promise)?s.promise().then(r.resolve,r.reject,r.notify):r[i+"With"](this===u?r:this,[s])}):u[e](r[i])})}).promise()},promise:function(e){if(e==null)e=o;else for(var t in o)e[t]=o[t];return e}},u=o.promise({}),a;for(a in s)u[a]=s[a].fire,u[a+"With"]=s[a].fireWith;return u.done(function(){i="resolved"},n.disable,r.lock).fail(function(){i="rejected"},t.disable,r.lock),e&&e.call(u,u),u},when:function(e){function t(e){return function(t){o[e]=arguments.length>1?F.call(arguments,0):t,f.notifyWith(l,o)}}function n(e){return function(t){r[e]=arguments.length>1?F.call(arguments,0):t,--u||f.resolveWith(f,r)}}var r=F.call(arguments,0),i=0,s=r.length,o=Array(s),u=s,a=s,f=s<=1&&e&&B.isFunction(e.promise)?e:B.Deferred(),l=f.promise();if(s>1){for(;i<s;i++)r[i]&&r[i].promise&&B.isFunction(r[i].promise)?r[i].promise().then(n(i),f.reject,t(i)):--u;u||f.resolveWith(f,r)}else f!==e&&f.resolveWith(f,s?[e]:[]);return l}}),B.support=function(){var t,n,r,i,s,o,u,a,f,l,c,h,p,d=D.createElement("div"),v=D.documentElement;d.setAttribute("className","t"),d.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*"),r=d.getElementsByTagName("a")[0];if(!n||!n.length||!r)return{};i=D.createElement("select"),s=i.appendChild(D.createElement("option")),o=d.getElementsByTagName("input")[0],t={leadingWhitespace:d.firstChild.nodeType===3,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.55/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:o.value==="on",optSelected:s.selected,getSetAttribute:d.className!=="t",enctype:!!D.createElement("form").enctype,html5Clone:D.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,i.disabled=!0,t.optDisabled=!s.disabled;try{delete d.test}catch(m){t.deleteExpando=!1}!d.addEventListener&&d.attachEvent&&d.fireEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).fireEvent("onclick")),o=D.createElement("input"),o.value="t",o.setAttribute("type","radio"),t.radioValue=o.value==="t",o.setAttribute("checked","checked"),d.appendChild(o),a=D.createDocumentFragment(),a.appendChild(d.lastChild),t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=o.checked,a.removeChild(o),a.appendChild(d),d.innerHTML="",e.getComputedStyle&&(u=D.createElement("div"),u.style.width="0",u.style.marginRight="0",d.style.width="2px",d.appendChild(u),t.reliableMarginRight=(parseInt((e.getComputedStyle(u,null)||{marginRight:0}).marginRight,10)||0)===0);if(d.attachEvent)for(h in{submit:1,change:1,focusin:1})c="on"+h,p=c in d,p||(d.setAttribute(c,"return;"),p=typeof d[c]=="function"),t[h+"Bubbles"]=p;return a.removeChild(d),a=i=s=u=d=o=null,B(function(){var e,n,r,i,s,o,u,a,l,c,h,v=D.getElementsByTagName("body")[0];!v||(u=1,a="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",l="visibility:hidden;border:0;",c="style='"+a+"border:5px solid #000;padding:0;'",h="<div "+c+"><div></div></div>"+"<table "+c+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",e=D.createElement("div"),e.style.cssText=l+"width:0;height:0;position:static;top:0;margin-top:"+u+"px",v.insertBefore(e,v.firstChild),d=D.createElement("div"),e.appendChild(d),d.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",f=d.getElementsByTagName("td"),p=f[0].offsetHeight===0,f[0].style.display="",f[1].style.display="none",t.reliableHiddenOffsets=p&&f[0].offsetHeight===0,d.innerHTML="",d.style.width=d.style.paddingLeft="1px",B.boxModel=t.boxModel=d.offsetWidth===2,typeof d.style.zoom!="undefined"&&(d.style.display="inline",d.style.zoom=1,t.inlineBlockNeedsLayout=d.offsetWidth===2,d.style.display="",d.innerHTML="<div style='width:4px;'></div>",t.shrinkWrapBlocks=d.offsetWidth!==2),d.style.cssText=a+l,d.innerHTML=h,n=d.firstChild,r=n.firstChild,s=n.nextSibling.firstChild.firstChild,o={doesNotAddBorder:r.offsetTop!==5,doesAddBorderForTableAndCells:s.offsetTop===5},r.style.position="fixed",r.style.top="20px",o.fixedPosition=r.offsetTop===20||r.offsetTop===15,r.style.position=r.style.top="",n.style.overflow="hidden",n.style.position="relative",o.subtractsBorderForOverflowNotVisible=r.offsetTop===-5,o.doesNotIncludeMarginInBodyOffset=v.offsetTop!==u,v.removeChild(e),d=e=null,B.extend(t,o))}),t}();var I=/^(?:\{.*\}|\[.*\])$/,q=/([A-Z])/g;B.extend({cache:{},uuid:0,expando:"jQuery"+(B.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?B.cache[e[B.expando]]:e[B.expando],!!e&&!O(e)},data:function(e,n,r,i){if(!!B.acceptData(e)){var s,o,u,a=B.expando,f=typeof n=="string",l=e.nodeType,c=l?B.cache:e,h=l?e[a]:e[a]&&a,p=n==="events";if((!h||!c[h]||!p&&!i&&!c[h].data)&&f&&r===t)return;h||(l?e[a]=h=++B.uuid:h=a),c[h]||(c[h]={},l||(c[h].toJSON=B.noop));if(typeof n=="object"||typeof n=="function")i?c[h]=B.extend(c[h],n):c[h].data=B.extend(c[h].data,n);return s=o=c[h],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[B.camelCase(n)]=r),p&&!o[n]?s.events:(f?(u=o[n],u==null&&(u=o[B.camelCase(n)])):u=o,u)}},removeData:function(e,t,n){if(!!B.acceptData(e)){var r,i,s,o=B.expando,u=e.nodeType,a=u?B.cache:e,f=u?e[o]:o;if(!a[f])return;if(t){r=n?a[f]:a[f].data;if(r){B.isArray(t)||(t in r?t=[t]:(t=B.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,s=t.length;i<s;i++)delete r[t[i]];if(!(n?O:B.isEmptyObject)(r))return}}if(!n){delete a[f].data;if(!O(a[f]))return}B.support.deleteExpando||!a.setInterval?delete a[f]:a[f]=null,u&&(B.support.deleteExpando?delete e[o]:e.removeAttribute?e.removeAttribute(o):e[o]=null)}},_data:function(e,t,n){return B.data(e,t,n,!0)},acceptData:function(e){if(e.nodeName){var t=B.noData[e.nodeName.toLowerCase()];if(t)return t!==!0&&e.getAttribute("classid")===t}return!0}}),B.fn.extend({data:function(e,n){var r,i,s,o=null;if(typeof e=="undefined"){if(this.length){o=B.data(this[0]);if(this[0].nodeType===1&&!B._data(this[0],"parsedAttrs")){i=this[0].attributes;for(var u=0,a=i.length;u<a;u++)s=i[u].name,s.indexOf("data-")===0&&(s=B.camelCase(s.substring(5)),M(this[0],s,o[s]));B._data(this[0],"parsedAttrs",!0)}}return o}return typeof e=="object"?this.each(function(){B.data(this,e)}):(r=e.split("."),r[1]=r[1]?"."+r[1]:"",n===t?(o=this.triggerHandler("getData"+r[1]+"!",[r[0]]),o===t&&this.length&&(o=B.data(this[0],e),o=M(this[0],e,o)),o===t&&r[1]?this.data(r[0]):o):this.each(function(){var t=B(this),i=[r[0],n];t.triggerHandler("setData"+r[1]+"!",i),B.data(this,e,n),t.triggerHandler("changeData"+r[1]+"!",i)}))},removeData:function(e){return this.each(function(){B.removeData(this,e)})}}),B.extend({_mark:function(e,t){e&&(t=(t||"fx")+"mark",B._data(e,t,(B._data(e,t)||0)+1))},_unmark:function(e,t,n){e!==!0&&(n=t,t=e,e=!1);if(t){n=n||"fx";var r=n+"mark",i=e?0:(B._data(t,r)||1)-1;i?B._data(t,r,i):(B.removeData(t,r,!0),A(t,n,"mark"))}},queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=B._data(e,t),n&&(!r||B.isArray(n)?r=B._data(e,t,B.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=B.queue(e,t),r=n.shift(),i={};r==="inprogress"&&(r=n.shift()),r&&(t==="fx"&&n.unshift("inprogress"),B._data(e,t+".run",i),r.call(e,function(){B.dequeue(e,t)},i)),n.length||(B.removeData(e,t+"queue "+t+".run",!0),A(e,t,"queue"))}}),B.fn.extend({queue:function(e,n){return typeof e!="string"&&(n=e,e="fx"),n===t?B.queue(this[0],e):this.each(function(){var t=B.queue(this,e,n);e==="fx"&&t[0]!=="inprogress"&&B.dequeue(this,e)})},dequeue:function(e){return this.each(function(){B.dequeue(this,e)})},delay:function(e,t){return e=B.fx?B.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){function r(){--u||i.resolveWith(s,[s])}typeof e!="string"&&(n=e,e=t),e=e||"fx";var i=B.Deferred(),s=this,o=s.length,u=1,a=e+"defer",f=e+"queue",l=e+"mark",c;while(o--)if(c=B.data(s[o],a,t,!0)||(B.data(s[o],f,t,!0)||B.data(s[o],l,t,!0))&&B.data(s[o],a,B.Callbacks("once memory"),!0))u++,c.add(r);return r(),i.promise()}});var R=/[\n\t\r]/g,U=/\s+/,z=/\r/g,W=/^(?:button|input)$/i,X=/^(?:button|input|object|select|textarea)$/i,V=/^a(?:rea)?$/i,$=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,J=B.support.getSetAttribute,K,Q,G;B.fn.extend({attr:function(e,t){return B.access(this,e,t,!0,B.attr)},removeAttr:function(e){return this.each(function(){B.removeAttr(this,e)})},prop:function(e,t){return B.access(this,e,t,!0,B.prop)},removeProp:function(e){return e=B.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o,u;if(B.isFunction(e))return this.each(function(t){B(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(U);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{s=" "+i.className+" ";for(o=0,u=t.length;o<u;o++)~s.indexOf(" "+t[o]+" ")||(s+=t[o]+" ");i.className=B.trim(s)}}}return this},removeClass:function(e){var n,r,i,s,o,u,a;if(B.isFunction(e))return this.each(function(t){B(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(U);for(r=0,i=this.length;r<i;r++){s=this[r];if(s.nodeType===1&&s.className)if(e){o=(" "+s.className+" ").replace(R," ");for(u=0,a=n.length;u<a;u++)o=o.replace(" "+n[u]+" "," ");s.className=B.trim(o)}else s.className=""}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return B.isFunction(e)?this.each(function(n){B(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=B(this),u=t,a=e.split(U);while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&B._data(this,"__className__",this.className),this.className=this.className||e===!1?"":B._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(R," ").indexOf(t)>-1)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!!arguments.length)return i=B.isFunction(e),this.each(function(r){var s=B(this),o;if(this.nodeType===1){i?o=e.call(this,r,s.val()):o=e,o==null?o="":typeof o=="number"?o+="":B.isArray(o)&&(o=B.map(o,function(e){return e==null?"":e+""})),n=B.valHooks[this.nodeName.toLowerCase()]||B.valHooks[this.type];if(!n||!("set"in n)||n.set(this,o,"value")===t)this.value=o}});if(s)return n=B.valHooks[s.nodeName.toLowerCase()]||B.valHooks[s.type],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(z,""):r==null?"":r)}}),B.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,i,s=e.selectedIndex,o=[],u=e.options,a=e.type==="select-one";if(s<0)return null;n=a?s:0,r=a?s+1:u.length;for(;n<r;n++){i=u[n];if(i.selected&&(B.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!B.nodeName(i.parentNode,"optgroup"))){t=B(i).val();if(a)return t;o.push(t)}}return a&&!o.length&&u.length?B(u[s]).val():o},set:function(e,t){var n=B.makeArray(t);return B(e).find("option").each(function(){this.selected=B.inArray(B(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(e,n,r,i){var s,o,u,a=e.nodeType;if(!!e&&a!==3&&a!==8&&a!==2){if(i&&n in B.attrFn)return B(e)[n](r);if(typeof e.getAttribute=="undefined")return B.prop(e,n,r);u=a!==1||!B.isXMLDoc(e),u&&(n=n.toLowerCase(),o=B.attrHooks[n]||($.test(n)?Q:K));if(r!==t){if(r===null){B.removeAttr(e,n);return}return o&&"set"in o&&u&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,""+r),r)}return o&&"get"in o&&u&&(s=o.get(e,n))!==null?s:(s=e.getAttribute(n),s===null?t:s)}},removeAttr:function(e,t){var n,r,i,s,o=0;if(t&&e.nodeType===1){r=t.toLowerCase().split(U),s=r.length;for(;o<s;o++)i=r[o],i&&(n=B.propFix[i]||i,B.attr(e,i,""),e.removeAttribute(J?i:n),$.test(i)&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(W.test(e.nodeName)&&e.parentNode)B.error("type property can't be changed");else if(!B.support.radioValue&&t==="radio"&&B.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return K&&B.nodeName(e,"button")?K.get(e,t):t in e?e.value:null},set:function(e,t,n){if(K&&B.nodeName(e,"button"))return K.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!!e&&u!==3&&u!==8&&u!==2)return o=u!==1||!B.isXMLDoc(e),o&&(n=B.propFix[n]||n,s=B.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):X.test(e.nodeName)||V.test(e.nodeName)&&e.href?0:t}}}}),B.attrHooks.tabindex=B.propHooks.tabIndex,Q={get:function(e,n){var r,i=B.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?B.removeAttr(e,n):(r=B.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},J||(G={name:!0,id:!0},K=B.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(G[n]?r.nodeValue!=="":r.specified)?r.nodeValue:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=D.createAttribute(n),e.setAttributeNode(r)),r.nodeValue=t+""}},B.attrHooks.tabindex.set=K.set,B.each(["width","height"],function(e,t){B.attrHooks[t]=B.extend(B.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),B.attrHooks.contenteditable={get:K.get,set:function(e,t,n){t===""&&(t="false"),K.set(e,t,n)}}),B.support.hrefNormalized||B.each(["href","src","width","height"],function(e,n){B.attrHooks[n]=B.extend(B.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),B.support.style||(B.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),B.support.optSelected||(B.propHooks.selected=B.extend(B.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),B.support.enctype||(B.propFix.enctype="encoding"),B.support.checkOn||B.each(["radio","checkbox"],function(){B.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),B.each(["radio","checkbox"],function(){B.valHooks[this]=B.extend(B.valHooks[this],{set:function(e,t){if(B.isArray(t))return e.checked=B.inArray(B(e).val(),t)>=0}})});var Y=/^(?:textarea|input|select)$/i,Z=/^([^\.]*)?(?:\.(.+))?$/,et=/\bhover(\.\S+)?\b/,tt=/^key/,nt=/^(?:mouse|contextmenu)|click/,rt=/^(?:focusinfocus|focusoutblur)$/,it=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,st=function(e){var t=it.exec(e);return t&&(t[1]=(t[1]||"").toLowerCase(),t[3]=t[3]&&new RegExp("(?:^|\\s)"+t[3]+"(?:\\s|$)")),t},ot=function(e,t){var n=e.attributes||{};return(!t[1]||e.nodeName.toLowerCase()===t[1])&&(!t[2]||(n.id||{}).value===t[2])&&(!t[3]||t[3].test((n["class"]||{}).value))},ut=function(e){return B.event.special.hover?e:e.replace(et,"mouseenter$1 mouseleave$1")};B.event={add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g;if(!(e.nodeType===3||e.nodeType===8||!n||!r||!(o=B._data(e)))){r.handler&&(d=r,r=d.handler),r.guid||(r.guid=B.guid++),a=o.events,a||(o.events=a={}),u=o.handle,u||(o.handle=u=function(e){return typeof B=="undefined"||!!e&&B.event.triggered===e.type?t:B.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=B.trim(ut(n)).split(" ");for(f=0;f<n.length;f++){l=Z.exec(n[f])||[],c=l[1],h=(l[2]||"").split(".").sort(),g=B.event.special[c]||{},c=(s?g.delegateType:g.bindType)||c,g=B.event.special[c]||{},p=B.extend({type:c,origType:l[1],data:i,handler:r,guid:r.guid,selector:s,quick:st(s),namespace:h.join(".")},d),m=a[c];if(!m){m=a[c]=[],m.delegateCount=0;if(!g.setup||g.setup.call(e,i,h,u)===!1)e.addEventListener?e.addEventListener(c,u,!1):e.attachEvent&&e.attachEvent("on"+c,u)}g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),s?m.splice(m.delegateCount++,0,p):m.push(p),B.event.global[c]=!0}e=null}},global:{},remove:function(e,t,n,r,i){var s=B.hasData(e)&&B._data(e),o,u,a,f,l,c,h,p,d,v,m,g;if(!!s&&!!(p=s.events)){t=B.trim(ut(t||"")).split(" ");for(o=0;o<t.length;o++){u=Z.exec(t[o])||[],a=f=u[1],l=u[2];if(!a){for(a in p)B.event.remove(e,a+t[o],n,r,!0);continue}d=B.event.special[a]||{},a=(r?d.delegateType:d.bindType)||a,m=p[a]||[],c=m.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(h=0;h<m.length;h++)g=m[h],(i||f===g.origType)&&(!n||n.guid===g.guid)&&(!l||l.test(g.namespace))&&(!r||r===g.selector||r==="**"&&g.selector)&&(m.splice(h--,1),g.selector&&m.delegateCount--,d.remove&&d.remove.call(e,g));m.length===0&&c!==m.length&&((!d.teardown||d.teardown.call(e,l)===!1)&&B.removeEvent(e,a,s.handle),delete p[a])}B.isEmptyObject(p)&&(v=s.handle,v&&(v.elem=null),B.removeData(e,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,i,s){if(!i||i.nodeType!==3&&i.nodeType!==8){var o=n.type||n,u=[],a,f,l,c,h,p,d,v,m,g;if(rt.test(o+B.event.triggered))return;o.indexOf("!")>=0&&(o=o.slice(0,-1),f=!0),o.indexOf(".")>=0&&(u=o.split("."),o=u.shift(),u.sort());if((!i||B.event.customEvent[o])&&!B.event.global[o])return;n=typeof n=="object"?n[B.expando]?n:new B.Event(o,n):new B.Event(o),n.type=o,n.isTrigger=!0,n.exclusive=f,n.namespace=u.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+u.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,p=o.indexOf(":")<0?"on"+o:"";if(!i){a=B.cache;for(l in a)a[l].events&&a[l].events[o]&&B.event.trigger(n,r,a[l].handle.elem,!0);return}n.result=t,n.target||(n.target=i),r=r!=null?B.makeArray(r):[],r.unshift(n),d=B.event.special[o]||{};if(d.trigger&&d.trigger.apply(i,r)===!1)return;m=[[i,d.bindType||o]];if(!s&&!d.noBubble&&!B.isWindow(i)){g=d.delegateType||o,c=rt.test(g+o)?i:i.parentNode,h=null;for(;c;c=c.parentNode)m.push([c,g]),h=c;h&&h===i.ownerDocument&&m.push([h.defaultView||h.parentWindow||e,g])}for(l=0;l<m.length&&!n.isPropagationStopped();l++)c=m[l][0],n.type=m[l][1],v=(B._data(c,"events")||{})[n.type]&&B._data(c,"handle"),v&&v.apply(c,r),v=p&&c[p],v&&B.acceptData(c)&&v.apply(c,r)===!1&&n.preventDefault();return n.type=o,!s&&!n.isDefaultPrevented()&&(!d._default||d._default.apply(i.ownerDocument,r)===!1)&&(o!=="click"||!B.nodeName(i,"a"))&&B.acceptData(i)&&p&&i[o]&&(o!=="focus"&&o!=="blur"||n.target.offsetWidth!==0)&&!B.isWindow(i)&&(h=i[p],h&&(i[p]=null),B.event.triggered=o,i[o](),B.event.triggered=t,h&&(i[p]=h)),n.result}},dispatch:function(n){n=B.event.fix(n||e.event);var r=(B._data(this,"events")||{})[n.type]||[],i=r.delegateCount,s=[].slice.call(arguments,0),o=!n.exclusive&&!n.namespace,u=[],a,f,l,c,h,p,d,v,m,g,y;s[0]=n,n.delegateTarget=this;if(i&&!n.target.disabled&&(!n.button||n.type!=="click")){c=B(this),c.context=this.ownerDocument||this;for(l=n.target;l!=this;l=l.parentNode||this){p={},v=[],c[0]=l;for(a=0;a<i;a++)m=r[a],g=m.selector,p[g]===t&&(p[g]=m.quick?ot(l,m.quick):c.is(g)),p[g]&&v.push(m);v.length&&u.push({elem:l,matches:v})}}r.length>i&&u.push({elem:this,matches:r.slice(i)});for(a=0;a<u.length&&!n.isPropagationStopped();a++){d=u[a],n.currentTarget=d.elem;for(f=0;f<d.matches.length&&!n.isImmediatePropagationStopped();f++){m=d.matches[f];if(o||!n.namespace&&!m.namespace||n.namespace_re&&n.namespace_re.test(m.namespace))n.data=m.data,n.handleObj=m,h=((B.event.special[m.origType]||{}).handle||m.handler).apply(d.elem,s),h!==t&&(n.result=h,h===!1&&(n.preventDefault(),n.stopPropagation()))}}return n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,s,o=n.button,u=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||D,i=r.documentElement,s=r.body,e.pageX=n.clientX+(i&&i.scrollLeft||s&&s.scrollLeft||0)-(i&&i.clientLeft||s&&s.clientLeft||0),e.pageY=n.clientY+(i&&i.scrollTop||s&&s.scrollTop||0)-(i&&i.clientTop||s&&s.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?n.toElement:u),!e.which&&o!==t&&(e.which=o&1?1:o&2?3:o&4?2:0),e}},fix:function(e){if(e[B.expando])return e;var n,r,i=e,s=B.event.fixHooks[e.type]||{},o=s.props?this.props.concat(s.props):this.props;e=B.Event(i);for(n=o.length;n;)r=o[--n],e[r]=i[r];return e.target||(e.target=i.srcElement||D),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey===t&&(e.metaKey=e.ctrlKey),s.filter?s.filter(e,i):e},special:{ready:{setup:B.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){B.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=B.extend(new B.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?B.event.trigger(i,null,t):B.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},B.event.handle=B.event.dispatch,B.removeEvent=D.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent&&e.detachEvent("on"+t,n)},B.Event=function(e,t){if(!(this instanceof B.Event))return new B.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?k:L):this.type=e,t&&B.extend(this,t),this.timeStamp=e&&e.timeStamp||B.now(),this[B.expando]=!0},B.Event.prototype={preventDefault:function(){this.isDefaultPrevented=k;var e=this.originalEvent;!e||(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=k;var e=this.originalEvent;!e||(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=k,this.stopPropagation()},isDefaultPrevented:L,isPropagationStopped:L,isImmediatePropagationStopped:L},B.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){B.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n=this,r=e.relatedTarget,i=e.handleObj,s=i.selector,o;if(!r||r!==n&&!B.contains(n,r))e.type=i.origType,o=i.handler.apply(this,arguments),e.type=t;return o}}}),B.support.submitBubbles||(B.event.special.submit={setup:function(){if(B.nodeName(this,"form"))return!1;B.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=B.nodeName(n,"input")||B.nodeName(n,"button")?n.form:t;r&&!r._submit_attached&&(B.event.add(r,"submit._submit",function(e){this.parentNode&&!e.isTrigger&&B.event.simulate("submit",this.parentNode,e,!0)}),r._submit_attached=!0)})},teardown:function(){if(B.nodeName(this,"form"))return!1;B.event.remove(this,"._submit")}}),B.support.changeBubbles||(B.event.special.change={setup:function(){if(Y.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")B.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),B.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1,B.event.simulate("change",this,e,!0))});return!1}B.event.add(this,"beforeactivate._change",function(e){var t=e.target;Y.test(t.nodeName)&&!t._change_attached&&(B.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&B.event.simulate("change",this.parentNode,e,!0)}),t._change_attached=!0)})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return B.event.remove(this,"._change"),Y.test(this.nodeName)}}),B.support.focusinBubbles||B.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){B.event.simulate(t,e.target,B.event.fix(e),!0)};B.event.special[t]={setup:function(){n++===0&&D.addEventListener(e,r,!0)},teardown:function(){--n===0&&D.removeEventListener(e,r,!0)}}}),B.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=n,n=t);for(u in e)this.on(u,n,r,e[u],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=L;else if(!i)return this;return s===1&&(o=i,i=function(e){return B().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=B.guid++)),this.each(function(){B.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on.call(this,e,t,n,r,1)},off:function(e,n,r){if(e&&e.preventDefault&&e.handleObj){var i=e.handleObj;return B(e.delegateTarget).off(i.namespace?i.type+"."+i.namespace:i.type,i.selector,i.handler),this}if(typeof e=="object"){for(var s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=L),this.each(function(){B.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return B(this.context).on(e,this.selector,t,n),this},die:function(e,t){return B(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length==1?this.off(e,"**"):this.off(t,e,n)},trigger:function(e,t){return this.each(function(){B.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return B.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||B.guid++,r=0,i=function(n){var i=(B._data(this,"lastToggle"+e.guid)||0)%r;return B._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),B.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){B.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},B.attrFn&&(B.attrFn[t]=!0),tt.test(t)&&(B.event.fixHooks[t]=B.event.keyHooks),nt.test(t)&&(B.event.fixHooks[t]=B.event.mouseHooks)}),function(){function e(e,t,n,r,s,o){for(var u=0,a=r.length;u<a;u++){var f=r[u];if(f){var l=!1;f=f[e];while(f){if(f[i]===n){l=r[f.sizset];break}if(f.nodeType===1){o||(f[i]=n,f.sizset=u);if(typeof t!="string"){if(f===t){l=!0;break}}else if(h.filter(t,[f]).length>0){l=f;break}}f=f[e]}r[u]=l}}}function n(e,t,n,r,s,o){for(var u=0,a=r.length;u<a;u++){var f=r[u];if(f){var l=!1;f=f[e];while(f){if(f[i]===n){l=r[f.sizset];break}f.nodeType===1&&!o&&(f[i]=n,f.sizset=u);if(f.nodeName.toLowerCase()===t){l=f;break}f=f[e]}r[u]=l}}}var r=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,i="sizcache"+(Math.random()+"").replace(".",""),s=0,o=Object.prototype.toString,u=!1,a=!0,f=/\\/g,l=/\r\n/g,c=/\W/;[0,0].sort(function(){return a=!1,0});var h=function(e,t,n,i){n=n||[],t=t||D;var s=t;if(t.nodeType!==1&&t.nodeType!==9)return[];if(!e||typeof e!="string")return n;var u,a,f,l,c,p,m,g,b=!0,w=h.isXML(t),E=[],x=e;do{r.exec(""),u=r.exec(x);if(u){x=u[3],E.push(u[1]);if(u[2]){l=u[3];break}}}while(u);if(E.length>1&&v.exec(e))if(E.length===2&&d.relative[E[0]])a=S(E[0]+E[1],t,i);else{a=d.relative[E[0]]?[t]:h(E.shift(),t);while(E.length)e=E.shift(),d.relative[e]&&(e+=E.shift()),a=S(e,a,i)}else{!i&&E.length>1&&t.nodeType===9&&!w&&d.match.ID.test(E[0])&&!d.match.ID.test(E[E.length-1])&&(c=h.find(E.shift(),t,w),t=c.expr?h.filter(c.expr,c.set)[0]:c.set[0]);if(t){c=i?{expr:E.pop(),set:y(i)}:h.find(E.pop(),E.length!==1||E[0]!=="~"&&E[0]!=="+"||!t.parentNode?t:t.parentNode,w),a=c.expr?h.filter(c.expr,c.set):c.set,E.length>0?f=y(a):b=!1;while(E.length)p=E.pop(),m=p,d.relative[p]?m=E.pop():p="",m==null&&(m=t),d.relative[p](f,m,w)}else f=E=[]}f||(f=a),f||h.error(p||e);if(o.call(f)==="[object Array]")if(!b)n.push.apply(n,f);else if(t&&t.nodeType===1)for(g=0;f[g]!=null;g++)f[g]&&(f[g]===!0||f[g].nodeType===1&&h.contains(t,f[g]))&&n.push(a[g]);else for(g=0;f[g]!=null;g++)f[g]&&f[g].nodeType===1&&n.push(a[g]);else y(f,n);return l&&(h(l,s,n,i),h.uniqueSort(n)),n};h.uniqueSort=function(e){if(w){u=a,e.sort(w);if(u)for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1)}return e},h.matches=function(e,t){return h(e,null,null,t)},h.matchesSelector=function(e,t){return h(t,null,null,[e]).length>0},h.find=function(e,t,n){var r,i,s,o,u,a;if(!e)return[];for(i=0,s=d.order.length;i<s;i++){u=d.order[i];if(o=d.leftMatch[u].exec(e)){a=o[1],o.splice(1,1);if(a.substr(a.length-1)!=="\\"){o[1]=(o[1]||"").replace(f,""),r=d.find[u](o,t,n);if(r!=null){e=e.replace(d.match[u],"");break}}}}return r||(r=typeof t.getElementsByTagName!="undefined"?t.getElementsByTagName("*"):[]),{set:r,expr:e}},h.filter=function(e,n,r,i){var s,o,u,a,f,l,c,p,v,m=e,g=[],y=n,b=n&&n[0]&&h.isXML(n[0]);while(e&&n.length){for(u in d.filter)if((s=d.leftMatch[u].exec(e))!=null&&s[2]){l=d.filter[u],c=s[1],o=!1,s.splice(1,1);if(c.substr(c.length-1)==="\\")continue;y===g&&(g=[]);if(d.preFilter[u]){s=d.preFilter[u](s,y,r,g,i,b);if(!s)o=a=!0;else if(s===!0)continue}if(s)for(p=0;(f=y[p])!=null;p++)f&&(a=l(f,s,p,y),v=i^a,r&&a!=null?v?o=!0:y[p]=!1:v&&(g.push(f),o=!0));if(a!==t){r||(y=g),e=e.replace(d.match[u],"");if(!o)return[];break}}if(e===m){if(o!=null)break;h.error(e)}m=e}return y},h.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var p=h.getText=function(e){var t,n,r=e.nodeType,i="";if(r){if(r===1||r===9){if(typeof e.textContent=="string")return e.textContent;if(typeof e.innerText=="string")return e.innerText.replace(l,"");for(e=e.firstChild;e;e=e.nextSibling)i+=p(e)}else if(r===3||r===4)return e.nodeValue}else for(t=0;n=e[t];t++)n.nodeType!==8&&(i+=p(n));return i},d=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var n=typeof t=="string",r=n&&!c.test(t),i=n&&!r;r&&(t=t.toLowerCase());for(var s=0,o=e.length,u;s<o;s++)if(u=e[s]){while((u=u.previousSibling)&&u.nodeType!==1);e[s]=i||u&&u.nodeName.toLowerCase()===t?u||!1:u===t}i&&h.filter(t,e,!0)},">":function(e,t){var n,r=typeof t=="string",i=0,s=e.length;if(r&&!c.test(t)){t=t.toLowerCase();for(;i<s;i++){n=e[i];if(n){var o=n.parentNode;e[i]=o.nodeName.toLowerCase()===t?o:!1}}}else{for(;i<s;i++)n=e[i],n&&(e[i]=r?n.parentNode:n.parentNode===t);r&&h.filter(t,e,!0)}},"":function(t,r,i){var o,u=s++,a=e;typeof r=="string"&&!c.test(r)&&(r=r.toLowerCase(),o=r,a=n),a("parentNode",r,u,t,o,i)},"~":function(t,r,i){var o,u=s++,a=e;typeof r=="string"&&!c.test(r)&&(r=r.toLowerCase(),o=r,a=n),a("previousSibling",r,u,t,o,i)}},find:{ID:function(e,t,n){if(typeof t.getElementById!="undefined"&&!n){var r=t.getElementById(e[1]);return r&&r.parentNode?[r]:[]}},NAME:function(e,t){if(typeof t.getElementsByName!="undefined"){var n=[],r=t.getElementsByName(e[1]);for(var i=0,s=r.length;i<s;i++)r[i].getAttribute("name")===e[1]&&n.push(r[i]);return n.length===0?null:n}},TAG:function(e,t){if(typeof t.getElementsByTagName!="undefined")return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,r,i,s){e=" "+e[1].replace(f,"")+" ";if(s)return e;for(var o=0,u;(u=t[o])!=null;o++)u&&(i^(u.className&&(" "+u.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?n||r.push(u):n&&(t[o]=!1));return!1},ID:function(e){return e[1].replace(f,"")},TAG:function(e,t){return e[1].replace(f,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){e[2]||h.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&h.error(e[0]);return e[0]=s++,e},ATTR:function(e,t,n,r,i,s){var o=e[1]=e[1].replace(f,"");return!s&&d.attrMap[o]&&(e[1]=d.attrMap[o]),e[4]=(e[4]||e[5]||"").replace(f,""),e[2]==="~="&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,n,i,s){if(e[1]==="not"){if(!((r.exec(e[3])||"").length>1||/^\w/.test(e[3]))){var o=h.filter(e[3],t,n,!0^s);return n||i.push.apply(i,o),!1}e[3]=h(e[3],null,null,t)}else if(d.match.POS.test(e[0])||d.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&e.type!=="hidden"},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!h(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),n=e.type;return e.nodeName.toLowerCase()==="input"&&"text"===n&&(t===n||t===null)},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"submit"===e.type},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&"button"===e.type||t==="button"},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return t===0},last:function(e,t,n,r){return t===r.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,r){var i=t[1],s=d.filters[i];if(s)return s(e,n,t,r);if(i==="contains")return(e.textContent||e.innerText||p([e])||"").indexOf(t[3])>=0;if(i==="not"){var o=t[3];for(var u=0,a=o.length;u<a;u++)if(o[u]===e)return!1;return!0}h.error(i)},CHILD:function(e,t){var n,r,s,o,u,a,f,l=t[1],c=e;switch(l){case"only":case"first":while(c=c.previousSibling)if(c.nodeType===1)return!1;if(l==="first")return!0;c=e;case"last":while(c=c.nextSibling)if(c.nodeType===1)return!1;return!0;case"nth":n=t[2],r=t[3];if(n===1&&r===0)return!0;s=t[0],o=e.parentNode;if(o&&(o[i]!==s||!e.nodeIndex)){a=0;for(c=o.firstChild;c;c=c.nextSibling)c.nodeType===1&&(c.nodeIndex=++a);o[i]=s}return f=e.nodeIndex-r,n===0?f===0:f%n===0&&f/n>=0}},ID:function(e,t){return e.nodeType===1&&e.getAttribute("id")===t},TAG:function(e,t){return t==="*"&&e.nodeType===1||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],r=h.attr?h.attr(e,n):d.attrHandle[n]?d.attrHandle[n](e):e[n]!=null?e[n]:e.getAttribute(n),i=r+"",s=t[2],o=t[4];return r==null?s==="!=":!s&&h.attr?r!=null:s==="="?i===o:s==="*="?i.indexOf(o)>=0:s==="~="?(" "+i+" ").indexOf(o)>=0:o?s==="!="?i!==o:s==="^="?i.indexOf(o)===0:s==="$="?i.substr(i.length-o.length)===o:s==="|="?i===o||i.substr(0,o.length+1)===o+"-":!1:i&&r!==!1},POS:function(e,t,n,r){var i=t[2],s=d.setFilters[i];if(s)return s(e,n,t,r)}}},v=d.match.POS,m=function(e,t){return"\\"+(t-0+1)};for(var g in d.match)d.match[g]=new RegExp(d.match[g].source+/(?![^\[]*\])(?![^\(]*\))/.source),d.leftMatch[g]=new RegExp(/(^(?:.|\r|\n)*?)/.source+d.match[g].source.replace(/\\(\d+)/g,m));var y=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(D.documentElement.childNodes,0)[0].nodeType}catch(b){y=function(e,t){var n=0,r=t||[];if(o.call(e)==="[object Array]")Array.prototype.push.apply(r,e);else if(typeof e.length=="number")for(var i=e.length;n<i;n++)r.push(e[n]);else for(;e[n];n++)r.push(e[n]);return r}}var w,E;D.documentElement.compareDocumentPosition?w=function(e,t){return e===t?(u=!0,0):!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition?-1:1:e.compareDocumentPosition(t)&4?-1:1}:(w=function(e,t){if(e===t)return u=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,a=t.parentNode,f=o;if(o===a)return E(e,t);if(!o)return-1;if(!a)return 1;while(f)i.unshift(f),f=f.parentNode;f=a;while(f)s.unshift(f),f=f.parentNode;n=i.length,r=s.length;for(var l=0;l<n&&l<r;l++)if(i[l]!==s[l])return E(i[l],s[l]);return l===n?E(e,s[l],-1):E(i[l],t,1)},E=function(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}),function(){var e=D.createElement("div"),n="script"+(new Date).getTime(),r=D.documentElement;e.innerHTML="<a name='"+n+"'/>",r.insertBefore(e,r.firstChild),D.getElementById(n)&&(d.find.ID=function(e,n,r){if(typeof n.getElementById!="undefined"&&!r){var i=n.getElementById(e[1]);return i?i.id===e[1]||typeof i.getAttributeNode!="undefined"&&i.getAttributeNode("id").nodeValue===e[1]?[i]:t:[]}},d.filter.ID=function(e,t){var n=typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id");return e.nodeType===1&&n&&n.nodeValue===t}),r.removeChild(e),r=e=null}(),function(){var e=D.createElement("div");e.appendChild(D.createComment("")),e.getElementsByTagName("*").length>0&&(d.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if(e[1]==="*"){var r=[];for(var i=0;n[i];i++)n[i].nodeType===1&&r.push(n[i]);n=r}return n}),e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!="undefined"&&e.firstChild.getAttribute("href")!=="#"&&(d.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),D.querySelectorAll&&function(){var e=h,t=D.createElement("div"),n="__sizzle__";t.innerHTML="<p class='TEST'></p>";if(!t.querySelectorAll||t.querySelectorAll(".TEST").length!==0){h=function(t,r,i,s){r=r||D;if(!s&&!h.isXML(r)){var o=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(o&&(r.nodeType===1||r.nodeType===9)){if(o[1])return y(r.getElementsByTagName(t),i);if(o[2]&&d.find.CLASS&&r.getElementsByClassName)return y(r.getElementsByClassName(o[2]),i)}if(r.nodeType===9){if(t==="body"&&r.body)return y([r.body],i);if(o&&o[3]){var u=r.getElementById(o[3]);if(!u||!u.parentNode)return y([],i);if(u.id===o[3])return y([u],i)}try{return y(r.querySelectorAll(t),i)}catch(a){}}else if(r.nodeType===1&&r.nodeName.toLowerCase()!=="object"){var f=r,l=r.getAttribute("id"),c=l||n,p=r.parentNode,v=/^\s*[+~]/.test(t);l?c=c.replace(/'/g,"\\$&"):r.setAttribute("id",c),v&&p&&(r=r.parentNode);try{if(!v||p)return y(r.querySelectorAll("[id='"+c+"'] "+t),i)}catch(m){}finally{l||f.removeAttribute("id")}}}return e(t,r,i,s)};for(var r in e)h[r]=e[r];t=null}}(),function(){var e=D.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var n=!t.call(D.createElement("div"),"div"),r=!1;try{t.call(D.documentElement,"[test!='']:sizzle")}catch(i){r=!0}h.matchesSelector=function(e,i){i=i.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!h.isXML(e))try{if(r||!d.match.PSEUDO.test(i)&&!/!=/.test(i)){var s=t.call(e,i);if(s||!n||e.document&&e.document.nodeType!==11)return s}}catch(o){}return h(i,null,null,[e]).length>0}}}(),function(){var e=D.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!e.getElementsByClassName&&e.getElementsByClassName("e").length!==0){e.lastChild.className="e";if(e.getElementsByClassName("e").length===1)return;d.order.splice(1,0,"CLASS"),d.find.CLASS=function(e,t,n){if(typeof t.getElementsByClassName!="undefined"&&!n)return t.getElementsByClassName(e[1])},e=null}}(),D.documentElement.contains?h.contains=function(e,t){return e!==t&&(e.contains?e.contains(t):!0)}:D.documentElement.compareDocumentPosition?h.contains=function(e,t){return!!(e.compareDocumentPosition(t)&16)}:h.contains=function(){return!1},h.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?t.nodeName!=="HTML":!1};var S=function(e,t,n){var r,i=[],s="",o=t.nodeType?[t]:t;while(r=d.match.PSEUDO.exec(e))s+=r[0],e=e.replace(d.match.PSEUDO,"");e=d.relative[e]?e+"*":e;for(var u=0,a=o.length;u<a;u++)h(e,o[u],i,n);return h.filter(s,i)};h.attr=B.attr,h.selectors.attrMap={},B.find=h,B.expr=h.selectors,B.expr[":"]=B.expr.filters,B.unique=h.uniqueSort,B.text=h.getText,B.isXMLDoc=h.isXML,B.contains=h.contains}();var at=/Until$/,ft=/^(?:parents|prevUntil|prevAll)/,lt=/,/,ct=/^.[^:#\[\.,]*$/,ht=Array.prototype.slice,pt=B.expr.match.POS,dt={children:!0,contents:!0,next:!0,prev:!0};B.fn.extend({find:function(e){var t=this,n,r;if(typeof e!="string")return B(e).filter(function(){for(n=0,r=t.length;n<r;n++)if(B.contains(t[n],this))return!0});var i=this.pushStack("","find",e),s,o,u;for(n=0,r=this.length;n<r;n++){s=i.length,B.find(e,this[n],i);if(n>0)for(o=s;o<i.length;o++)for(u=0;u<s;u++)if(i[u]===i[o]){i.splice(o--,1);break}}return i},has:function(e){var t=B(e);return this.filter(function(){for(var e=0,n=t.length;e<n;e++)if(B.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(N(this,e,!1),"not",e)},filter:function(e){return this.pushStack(N(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?pt.test(e)?B(e,this.context).index(this[0])>=0:B.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n=[],r,i,s=this[0];if(B.isArray(e)){var o=1;while(s&&s.ownerDocument&&s!==t){for(r=0;r<e.length;r++)B(s).is(e[r])&&n.push({selector:e[r],elem:s,level:o});s=s.parentNode,o++}return n}var u=pt.test(e)||typeof e!="string"?B(e,t||this.context):0;for(r=0,i=this.length;r<i;r++){s=this[r];while(s){if(u?u.index(s)>-1:B.find.matchesSelector(s,e)){n.push(s);break}s=s.parentNode;if(!s||!s.ownerDocument||s===t||s.nodeType===11)break}}return n=n.length>1?B.unique(n):n,this.pushStack(n,"closest",e)},index:function(e){return e?typeof e=="string"?B.inArray(this[0],B(e)):B.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?B(e,t):B.makeArray(e&&e.nodeType?[e]:e),r=B.merge(this.get(),n);return this.pushStack(C(n[0])||C(r[0])?r:B.unique(r))},andSelf:function(){return this.add(this.prevObject)}}),B.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return B.dir(e,"parentNode")},parentsUntil:function(e,t,n){return B.dir(e,"parentNode",n)},next:function(e){return B.nth(e,2,"nextSibling")},prev:function(e){return B.nth(e,2,"previousSibling")},nextAll:function(e){return B.dir(e,"nextSibling")},prevAll:function(e){return B.dir(e,"previousSibling")},nextUntil:function(e,t,n){return B.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return B.dir(e,"previousSibling",n)},siblings:function(e){return B.sibling(e.parentNode.firstChild,e)},children:function(e){return B.sibling(e.firstChild)},contents:function(e){return B.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:B.makeArray(e.childNodes)}},function(e,t){B.fn[e]=function(n,r){var i=B.map(this,t,n);return at.test(e)||(r=n),r&&typeof r=="string"&&(i=B.filter(r,i)),i=this.length>1&&!dt[e]?B.unique(i):i,(this.length>1||lt.test(r))&&ft.test(e)&&(i=i.reverse()),this.pushStack(i,e,ht.call(arguments).join(","))}}),B.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?B.find.matchesSelector(t[0],e)?[t[0]]:[]:B.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!B(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},nth:function(e,t,n,r){t=t||1;var i=0;for(;e;e=e[n])if(e.nodeType===1&&++i===t)break;return e},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var vt="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",mt=/ jQuery\d+="(?:\d+|null)"/g,gt=/^\s+/,yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,bt=/<([\w:]+)/,wt=/<tbody/i,Et=/<|&#?\w+;/,St=/<(?:script|style)/i,xt=/<(?:script|object|embed|option|style)/i,Tt=new RegExp("<(?:"+vt+")","i"),Nt=/checked\s*(?:[^=]|=\s*.checked.)/i,Ct=/\/(java|ecma)script/i,kt=/^\s*<!(?:\[CDATA\[|\-\-)/,Lt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},At=T(D);Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td,B.support.htmlSerialize||(Lt._default=[1,"div<div>","</div>"]),B.fn.extend({text:function(e){return B.isFunction(e)?this.each(function(t){var n=B(this);n.text(e.call(this,t,n.text()))}):typeof e!="object"&&e!==t?this.empty().append((this[0]&&this[0].ownerDocument||D).createTextNode(e)):B.text(this)},wrapAll:function(e){if(B.isFunction(e))return this.each(function(t){B(this).wrapAll(e.call(this,t))});if(this[0]){var t=B(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return B.isFunction(e)?this.each(function(t){B(this).wrapInner(e.call(this,t))}):this.each(function(){var t=B(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=B.isFunction(e);return this.each(function(n){B(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){B.nodeName(this,"body")||B(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=B.clean(arguments);return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,B.clean(arguments)),e}},remove:function(e,t){for(var n=0,r;(r=this[n])!=null;n++)if(!e||B.filter(e,[r]).length)!t&&r.nodeType===1&&(B.cleanData(r.getElementsByTagName("*")),B.cleanData([r])),r.parentNode&&r.parentNode.removeChild(r);return this},empty:function(){for(var e=0,t;(t=this[e])!=null;e++){t.nodeType===1&&B.cleanData(t.getElementsByTagName("*"));while(t.firstChild)t.removeChild(t.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return B.clone(this,e,t)})},html:function(e){if(e===t)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(mt,""):null;if(typeof e=="string"&&!St.test(e)&&(B.support.leadingWhitespace||!gt.test(e))&&!Lt[(bt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(yt,"<$1></$2>");try{for(var n=0,r=this.length;n<r;n++)this[n].nodeType===1&&(B.cleanData(this[n].getElementsByTagName("*")),this[n].innerHTML=e)}catch(i){this.empty().append(e)}}else B.isFunction(e)?this.each(function(t){var n=B(this);n.html(e.call(this,t,n.html()))}):this.empty().append(e);return this},replaceWith:function(e){return this[0]&&this[0].parentNode?B.isFunction(e)?this.each(function(t){var n=B(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=B(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;B(this).remove(),t?B(t).before(e):B(n).append(e)})):this.length?this.pushStack(B(B.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){var i,s,o,u,a=e[0],f=[];if(!B.support.checkClone&&arguments.length===3&&typeof a=="string"&&Nt.test(a))return this.each(function(){B(this).domManip(e,n,r,!0)});if(B.isFunction(a))return this.each(function(i){var s=B(this);e[0]=a.call(this,i,n?s.html():t),s.domManip(e,n,r)});if(this[0]){u=a&&a.parentNode,B.support.parentNode&&u&&u.nodeType===11&&u.childNodes.length===this.length?i={fragment:u}:i=B.buildFragment(e,this,f),o=i.fragment,o.childNodes.length===1?s=o=o.firstChild:s=o.firstChild;if(s){n=n&&B.nodeName(s,"tr");for(var l=0,c=this.length,h=c-1;l<c;l++)r.call(n?x(this[l],s):this[l],i.cacheable||c>1&&l<h?B.clone(o,!0,!0):o)}f.length&&B.each(f,m)}return this}}),B.buildFragment=function(e,t,n){var r,i,s,o,u=e[0];return t&&t[0]&&(o=t[0].ownerDocument||t[0]),o.createDocumentFragment||(o=D),e.length===1&&typeof u=="string"&&u.length<512&&o===D&&u.charAt(0)==="<"&&!xt.test(u)&&(B.support.checkClone||!Nt.test(u))&&(B.support.html5Clone||!Tt.test(u))&&(i=!0,s=B.fragments[u],s&&s!==1&&(r=s)),r||(r=o.createDocumentFragment(),B.clean(e,o,r,n)),i&&(B.fragments[u]=s?r:1),{fragment:r,cacheable:i}},B.fragments={},B.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){B.fn[e]=function(n){var r=[],i=B(n),s=this.length===1&&this[0].parentNode;if(s&&s.nodeType===11&&s.childNodes.length===1&&i.length===1)return i[t](this[0]),this;for(var o=0,u=i.length;o<u;o++){var a=(o>0?this.clone(!0):this).get();B(i[o])[t](a),r=r.concat(a)}return this.pushStack(r,e,i.selector)}}),B.extend({clone:function(e,t,n){var r,i,s,o=B.support.html5Clone||!Tt.test("<"+e.nodeName)?e.cloneNode(!0):g(e);if((!B.support.noCloneEvent||!B.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!B.isXMLDoc(e)){E(e,o),r=w(e),i=w(o);for(s=0;r[s];++s)i[s]&&E(r[s],i[s])}if(t){S(e,o);if(n){r=w(e),i=w(o);for(s=0;r[s];++s)S(r[s],i[s])}}return r=i=null,o},clean:function(e,t,n,r){var i;t=t||D,typeof t.createElement=="undefined"&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||D);var s=[],o;for(var u=0,a;(a=e[u])!=null;u++){typeof a=="number"&&(a+="");if(!a)continue;if(typeof a=="string")if(!Et.test(a))a=t.createTextNode(a);else{a=a.replace(yt,"<$1></$2>");var f=(bt.exec(a)||["",""])[1].toLowerCase(),l=Lt[f]||Lt._default,c=l[0],h=t.createElement("div");t===D?At.appendChild(h):T(t).appendChild(h),h.innerHTML=l[1]+a+l[2];while(c--)h=h.lastChild;if(!B.support.tbody){var p=wt.test(a),d=f==="table"&&!p?h.firstChild&&h.firstChild.childNodes:l[1]==="<table>"&&!p?h.childNodes:[];for(o=d.length-1;o>=0;--o)B.nodeName(d[o],"tbody")&&!d[o].childNodes.length&&d[o].parentNode.removeChild(d[o])}!B.support.leadingWhitespace&&gt.test(a)&&h.insertBefore(t.createTextNode(gt.exec(a)[0]),h.firstChild),a=h.childNodes}var v;if(!B.support.appendChecked)if(a[0]&&typeof (v=a.length)=="number")for(o=0;o<v;o++)y(a[o]);else y(a);a.nodeType?s.push(a):s=B.merge(s,a)}if(n){i=function(e){return!e.type||Ct.test(e.type)};for(u=0;s[u];u++)if(r&&B.nodeName(s[u],"script")&&(!s[u].type||s[u].type.toLowerCase()==="text/javascript"))r.push(s[u].parentNode?s[u].parentNode.removeChild(s[u]):s[u]);else{if(s[u].nodeType===1){var m=B.grep(s[u].getElementsByTagName("script"),i);s.splice.apply(s,[u+1,0].concat(m))}n.appendChild(s[u])}}return s},cleanData:function(e){var t,n,r=B.cache,i=B.event.special,s=B.support.deleteExpando;for(var o=0,u;(u=e[o])!=null;o++){if(u.nodeName&&B.noData[u.nodeName.toLowerCase()])continue;n=u[B.expando];if(n){t=r[n];if(t&&t.events){for(var a in t.events)i[a]?B.event.remove(u,a):B.removeEvent(u,a,t.handle);t.handle&&(t.handle.elem=null)}s?delete u[B.expando]:u.removeAttribute&&u.removeAttribute(B.expando),delete r[n]}}}});var Ot=/alpha\([^)]*\)/i,Mt=/opacity=([^)]*)/,_t=/([A-Z]|^ms)/g,Dt=/^-?\d+(?:px)?$/i,Pt=/^-?\d/,Ht=/^([\-+])=([\-+.\de]+)/,Bt={position:"absolute",visibility:"hidden",display:"block"},jt=["Left","Right"],Ft=["Top","Bottom"],It,qt,Rt;B.fn.css=function(e,n){return arguments.length===2&&n===t?this:B.access(this,e,n,!0,function(e,n,r){return r!==t?B.style(e,n,r):B.css(e,n)})},B.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=It(e,"opacity","opacity");return n===""?"1":n}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":B.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!!e&&e.nodeType!==3&&e.nodeType!==8&&!!e.style){var s,o,u=B.camelCase(n),a=e.style,f=B.cssHooks[u];n=B.cssProps[u]||u;if(r===t)return f&&"get"in f&&(s=f.get(e,!1,i))!==t?s:a[n];o=typeof r,o==="string"&&(s=Ht.exec(r))&&(r=+(s[1]+1)*+s[2]+parseFloat(B.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!B.cssNumber[u]&&(r+="px");if(!f||!("set"in f)||(r=f.set(e,r))!==t)try{a[n]=r}catch(l){}}},css:function(e,n,r){var i,s;n=B.camelCase(n),s=B.cssHooks[n],n=B.cssProps[n]||n,n==="cssFloat"&&(n="float");if(s&&"get"in s&&(i=s.get(e,!0,r))!==t)return i;if(It)return It(e,n)},swap:function(e,t,n){var r={};for(var i in t)r[i]=e.style[i],e.style[i]=t[i];n.call(e);for(i in t)e.style[i]=r[i]}}),B.curCSS=B.css,B.each(["height","width"],function(e,t){B.cssHooks[t]={get:function(e,n,r){var i;if(n)return e.offsetWidth!==0?v(e,t,r):(B.swap(e,Bt,function(){i=v(e,t,r)}),i)},set:function(e,t){if(!Dt.test(t))return t;t=parseFloat(t);if(t>=0)return t+"px"}}}),B.support.opacity||(B.cssHooks.opacity={get:function(e,t){return Mt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=B.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&B.trim(s.replace(Ot,""))===""){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=Ot.test(s)?s.replace(Ot,i):s+" "+i}}),B(function(){B.support.reliableMarginRight||(B.cssHooks.marginRight={get:function(e,t){var n;return B.swap(e,{display:"inline-block"},function(){t?n=It(e,"margin-right","marginRight"):n=e.style.marginRight}),n}})}),D.defaultView&&D.defaultView.getComputedStyle&&(qt=function(e,t){var n,r,i;return t=t.replace(_t,"-$1").toLowerCase(),(r=e.ownerDocument.defaultView)&&(i=r.getComputedStyle(e,null))&&(n=i.getPropertyValue(t),n===""&&!B.contains(e.ownerDocument.documentElement,e)&&(n=B.style(e,t))),n}),D.documentElement.currentStyle&&(Rt=function(e,t){var n,r,i,s=e.currentStyle&&e.currentStyle[t],o=e.style;return s===null&&o&&(i=o[t])&&(s=i),!Dt.test(s)&&Pt.test(s)&&(n=o.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),o.left=t==="fontSize"?"1em":s||0,s=o.pixelLeft+"px",o.left=n,r&&(e.runtimeStyle.left=r)),s===""?"auto":s}),It=qt||Rt,B.expr&&B.expr.filters&&(B.expr.filters.hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight;return t===0&&n===0||!B.support.reliableHiddenOffsets&&(e.style&&e.style.display||B.css(e,"display"))==="none"},B.expr.filters.visible=function(e){return!B.expr.filters.hidden(e)});var Ut=/%20/g,zt=/\[\]$/,Wt=/\r?\n/g,Xt=/#.*$/,Vt=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,$t=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Jt=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Kt=/^(?:GET|HEAD)$/,Qt=/^\/\//,Gt=/\?/,Yt=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Zt=/^(?:select|textarea)/i,en=/\s+/,tn=/([?&])_=[^&]*/,nn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,rn=B.fn.load,sn={},on={},un,an,fn=["*/"]+["*"];try{un=H.href}catch(ln){un=D.createElement("a"),un.href="",un=un.href}an=nn.exec(un.toLowerCase())||[],B.fn.extend({load:function(e,n,r){if(typeof e!="string"&&rn)return rn.apply(this,arguments);if(!this.length)return this;var i=e.indexOf(" ");if(i>=0){var s=e.slice(i,e.length);e=e.slice(0,i)}var o="GET";n&&(B.isFunction(n)?(r=n,n=t):typeof n=="object"&&(n=B.param(n,B.ajaxSettings.traditional),o="POST"));var u=this;return B.ajax({url:e,type:o,dataType:"html",data:n,complete:function(e,t,n){n=e.responseText,e.isResolved()&&(e.done(function(e){n=e}),u.html(s?B("<div>").append(n.replace(Yt,"")).find(s):n)),r&&u.each(r,[n,t,e])}}),this},serialize:function(){return B.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?B.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Zt.test(this.nodeName)||$t.test(this.type))}).map(function(e,t){var n=B(this).val();return n==null?null:B.isArray(n)?B.map(n,function(e,n){return{name:t.name,value:e.replace(Wt,"\r\n")}}):{name:t.name,value:n.replace(Wt,"\r\n")}}).get()}}),B.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){B.fn[t]=function(e){return this.on(t,e)}}),B.each(["get","post"],function(e,n){B[n]=function(e,r,i,s){return B.isFunction(r)&&(s=s||i,i=r,r=t),B.ajax({type:n,url:e,data:r,success:i,dataType:s})}}),B.extend({getScript:function(e,n){return B.get(e,t,n,"script")},getJSON:function(e,t,n){return B.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?h(e,B.ajaxSettings):(t=e,e=B.ajaxSettings),h(e,t),e},ajaxSettings:{url:un,isLocal:Jt.test(an[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":fn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":B.parseJSON,"text xml":B.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:d(sn),ajaxTransport:d(on),ajax:function(e,n){function r(e,n,r,p){if(E!==2){E=2,b&&clearTimeout(b),y=t,m=p||"",T.readyState=e>0?4:0;var d,v,g,w=n,x=r?l(i,T,r):t,N,C;if(e>=200&&e<300||e===304){if(i.ifModified){if(N=T.getResponseHeader("Last-Modified"))B.lastModified[h]=N;if(C=T.getResponseHeader("Etag"))B.etag[h]=C}if(e===304)w="notmodified",d=!0;else try{v=f(i,x),w="success",d=!0}catch(k){w="parsererror",g=k}}else{g=w;if(!w||e)w="error",e<0&&(e=0)}T.status=e,T.statusText=""+(n||w),d?u.resolveWith(s,[v,w,T]):u.rejectWith(s,[T,w,g]),T.statusCode(c),c=t,S&&o.trigger("ajax"+(d?"Success":"Error"),[T,i,d?v:g]),a.fireWith(s,[T,w]),S&&(o.trigger("ajaxComplete",[T,i]),--B.active||B.event.trigger("ajaxStop"))}}typeof e=="object"&&(n=e,e=t),n=n||{};var i=B.ajaxSetup({},n),s=i.context||i,o=s!==i&&(s.nodeType||s instanceof B)?B(s):B.event,u=B.Deferred(),a=B.Callbacks("once memory"),c=i.statusCode||{},h,d={},v={},m,g,y,b,w,E=0,S,x,T={readyState:0,setRequestHeader:function(e,t){if(!E){var n=e.toLowerCase();e=v[n]=v[n]||e,d[e]=t}return this},getAllResponseHeaders:function(){return E===2?m:null},getResponseHeader:function(e){var n;if(E===2){if(!g){g={};while(n=Vt.exec(m))g[n[1].toLowerCase()]=n[2]}n=g[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return E||(i.mimeType=e),this},abort:function(e){return e=e||"abort",y&&y.abort(e),r(0,e),this}};u.promise(T),T.success=T.done,T.error=T.fail,T.complete=a.add,T.statusCode=function(e){if(e){var t;if(E<2)for(t in e)c[t]=[c[t],e[t]];else t=e[T.status],T.then(t,t)}return this},i.url=((e||i.url)+"").replace(Xt,"").replace(Qt,an[1]+"//"),i.dataTypes=B.trim(i.dataType||"*").toLowerCase().split(en),i.crossDomain==null&&(w=nn.exec(i.url.toLowerCase()),i.crossDomain=!(!w||w[1]==an[1]&&w[2]==an[2]&&(w[3]||(w[1]==="http:"?80:443))==(an[3]||(an[1]==="http:"?80:443)))),i.data&&i.processData&&typeof i.data!="string"&&(i.data=B.param(i.data,i.traditional)),p(sn,i,n,T);if(E===2)return!1;S=i.global,i.type=i.type.toUpperCase(),i.hasContent=!Kt.test(i.type),S&&B.active++===0&&B.event.trigger("ajaxStart");if(!i.hasContent){i.data&&(i.url+=(Gt.test(i.url)?"&":"?")+i.data,delete i.data),h=i.url;if(i.cache===!1){var N=B.now(),C=i.url.replace(tn,"$1_="+N);i.url=C+(C===i.url?(Gt.test(i.url)?"&":"?")+"_="+N:"")}}(i.data&&i.hasContent&&i.contentType!==!1||n.contentType)&&T.setRequestHeader("Content-Type",i.contentType),i.ifModified&&(h=h||i.url,B.lastModified[h]&&T.setRequestHeader("If-Modified-Since",B.lastModified[h]),B.etag[h]&&T.setRequestHeader("If-None-Match",B.etag[h])),T.setRequestHeader("Accept",i.dataTypes[0]&&i.accepts[i.dataTypes[0]]?i.accepts[i.dataTypes[0]]+(i.dataTypes[0]!=="*"?", "+fn+"; q=0.01":""):i.accepts["*"]);for(x in i.headers)T.setRequestHeader(x,i.headers[x]);if(!i.beforeSend||i.beforeSend.call(s,T,i)!==!1&&E!==2){for(x in{success:1,error:1,complete:1})T[x](i[x]);y=p(on,i,n,T);if(!y)r(-1,"No Transport");else{T.readyState=1,S&&o.trigger("ajaxSend",[T,i]),i.async&&i.timeout>0&&(b=setTimeout(function(){T.abort("timeout")},i.timeout));try{E=1,y.send(d,r)}catch(k){if(!(E<2))throw k;r(-1,k)}}return T}return T.abort(),!1},param:function(e,n){var r=[],i=function(e,t){t=B.isFunction(t)?t():t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=B.ajaxSettings.traditional);if(B.isArray(e)||e.jquery&&!B.isPlainObject(e))B.each(e,function(){i(this.name,this.value)});else for(var s in e)c(s,e[s],n,i);return r.join("&").replace(Ut,"+")}}),B.extend({active:0,lastModified:{},etag:{}});var cn=B.now(),hn=/(\=)\?(&|$)|\?\?/i;B.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return B.expando+"_"+cn++}}),B.ajaxPrefilter("json jsonp",function(t,n,r){var i=t.contentType==="application/x-www-form-urlencoded"&&typeof t.data=="string";if(t.dataTypes[0]==="jsonp"||t.jsonp!==!1&&(hn.test(t.url)||i&&hn.test(t.data))){var s,o=t.jsonpCallback=B.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,u=e[o],a=t.url,f=t.data,l="$1"+o+"$2";return t.jsonp!==!1&&(a=a.replace(hn,l),t.url===a&&(i&&(f=f.replace(hn,l)),t.data===f&&(a+=(/\?/.test(a)?"&":"?")+t.jsonp+"="+o))),t.url=a,t.data=f,e[o]=function(e){s=[e]},r.always(function(){e[o]=u,s&&B.isFunction(u)&&e[o](s[0])}),t.converters["script json"]=function(){return s||B.error(o+" was not called"),s[0]},t.dataTypes[0]="json","script"}}),B.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return B.globalEval(e),e}}}),B.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),B.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=D.head||D.getElementsByTagName("head")[0]||D.documentElement;return{send:function(i,s){n=D.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){if(i||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||s(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var pn=e.ActiveXObject?function(){for(var e in vn)vn[e](0,1)}:!1,dn=0,vn;B.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&a()||u()}:a,function(e){B.extend(B.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(B.ajaxSettings.xhr()),B.support.ajax&&B.ajaxTransport(function(n){if(!n.crossDomain||B.support.cors){var r;return{send:function(i,s){var o=n.xhr(),u,a;n.username?o.open(n.type,n.url,n.async,n.username,n.password):o.open(n.type,n.url,n.async);if(n.xhrFields)for(a in n.xhrFields)o[a]=n.xhrFields[a];n.mimeType&&o.overrideMimeType&&o.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(a in i)o.setRequestHeader(a,i[a])}catch(f){}o.send(n.hasContent&&n.data||null),r=function(e,i){var a,f,l,c,h;try{if(r&&(i||o.readyState===4)){r=t,u&&(o.onreadystatechange=B.noop,pn&&delete vn[u]);if(i)o.readyState!==4&&o.abort();else{a=o.status,l=o.getAllResponseHeaders(),c={},h=o.responseXML,h&&h.documentElement&&(c.xml=h),c.text=o.responseText;try{f=o.statusText}catch(p){f=""}!a&&n.isLocal&&!n.crossDomain?a=c.text?200:404:a===1223&&(a=204)}}}catch(d){i||s(-1,d)}c&&s(a,f,c,l)},!n.async||o.readyState===4?r():(u=++dn,pn&&(vn||(vn={},B(e).unload(pn)),vn[u]=r),o.onreadystatechange=r)},abort:function(){r&&r(0,1)}}}});var mn={},gn,yn,bn=/^(?:toggle|show|hide)$/,wn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,En,Sn=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],xn;B.fn.extend({show:function(e,t,n){var s,o;if(e||e===0)return this.animate(i("show",3),e,t,n);for(var u=0,a=this.length;u<a;u++)s=this[u],s.style&&(o=s.style.display,!B._data(s,"olddisplay")&&o==="none"&&(o=s.style.display=""),o===""&&B.css(s,"display")==="none"&&B._data(s,"olddisplay",r(s.nodeName)));for(u=0;u<a;u++){s=this[u];if(s.style){o=s.style.display;if(o===""||o==="none")s.style.display=B._data(s,"olddisplay")||""}}return this},hide:function(e,t,n){if(e||e===0)return this.animate(i("hide",3),e,t,n);var r,s,o=0,u=this.length;for(;o<u;o++)r=this[o],r.style&&(s=B.css(r,"display"),s!=="none"&&!B._data(r,"olddisplay")&&B._data(r,"olddisplay",s));for(o=0;o<u;o++)this[o].style&&(this[o].style.display="none");return this},_toggle:B.fn.toggle,toggle:function(e,t,n){var r=typeof e=="boolean";return B.isFunction(e)&&B.isFunction(t)?this._toggle.apply(this,arguments):e==null||r?this.each(function(){var t=r?e:B(this).is(":hidden");B(this)[t?"show":"hide"]()}):this.animate(i("toggle",3),e,t,n),this},fadeTo:function(e,t,n,r){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,i){function s(){o.queue===!1&&B._mark(this);var t=B.extend({},o),n=this.nodeType===1,i=n&&B(this).is(":hidden"),s,u,a,f,l,c,h,p,d;t.animatedProperties={};for(a in e){s=B.camelCase(a),a!==s&&(e[s]=e[a],delete e[a]),u=e[s],B.isArray(u)?(t.animatedProperties[s]=u[1],u=e[s]=u[0]):t.animatedProperties[s]=t.specialEasing&&t.specialEasing[s]||t.easing||"swing";if(u==="hide"&&i||u==="show"&&!i)return t.complete.call(this);n&&(s==="height"||s==="width")&&(t.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],B.css(this,"display")==="inline"&&B.css(this,"float")==="none"&&(!B.support.inlineBlockNeedsLayout||r(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}t.overflow!=null&&(this.style.overflow="hidden");for(a in e)f=new B.fx(this,t,a),u=e[a],bn.test(u)?(d=B._data(this,"toggle"+a)||(u==="toggle"?i?"show":"hide":0),d?(B._data(this,"toggle"+a,d==="show"?"hide":"show"),f[d]()):f[u]()):(l=wn.exec(u),c=f.cur(),l?(h=parseFloat(l[2]),p=l[3]||(B.cssNumber[a]?"":"px"),p!=="px"&&(B.style(this,a,(h||1)+p),c=(h||1)/f.cur()*c,B.style(this,a,c+p)),l[1]&&(h=(l[1]==="-="?-1:1)*h+c),f.custom(c,h,p)):f.custom(c,u,""));return!0}var o=B.speed(t,n,i);return B.isEmptyObject(e)?this.each(o.complete,[!1]):(e=B.extend({},e),o.queue===!1?this.each(s):this.queue(o.queue,s))},stop:function(e,n,r){return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){function t(e,t,n){var i=t[n];B.removeData(e,n,!0),i.stop(r)}var n,i=!1,s=B.timers,o=B._data(this);r||B._unmark(!0,this);if(e==null)for(n in o)o[n]&&o[n].stop&&n.indexOf(".run")===n.length-4&&t(this,o,n);else o[n=e+".run"]&&o[n].stop&&t(this,o,n);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(r?s[n](!0):s[n].saveState(),i=!0,s.splice(n,1));(!r||!i)&&B.dequeue(this,e)})}}),B.each({slideDown:i("show",1),slideUp:i("hide",1),slideToggle:i("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){B.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),B.extend({speed:function(e,t,n){var r=e&&typeof e=="object"?B.extend({},e):{complete:n||!n&&t||B.isFunction(e)&&e,duration:e,easing:n&&t||t&&!B.isFunction(t)&&t};r.duration=B.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in B.fx.speeds?B.fx.speeds[r.duration]:B.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(e){B.isFunction(r.old)&&r.old.call(this),r.queue?B.dequeue(this,r.queue):e!==!1&&B._unmark(this)},r},easing:{linear:function(e,t,n,r){return n+r*e},swing:function(e,t,n,r){return(-Math.cos(e*Math.PI)/2+.5)*r+n}},timers:[],fx:function(e,t,n){this.options=t,this.elem=e,this.prop=n,t.orig=t.orig||{}}}),B.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(B.fx.step[this.prop]||B.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var e,t=B.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?!t||t==="auto"?0:t:e}return this.elem[this.prop]},custom:function(e,n,r){function i(e){return s.step(e)}var s=this,u=B.fx;this.startTime=xn||o(),this.end=n,this.now=this.start=e,this.pos=this.state=0,this.unit=r||this.unit||(B.cssNumber[this.prop]?"":"px"),i.queue=this.options.queue,i.elem=this.elem,i.saveState=function(){s.options.hide&&B._data(s.elem,"fxshow"+s.prop)===t&&B._data(s.elem,"fxshow"+s.prop,s.start)},i()&&B.timers.push(i)&&!En&&(En=setInterval(u.tick,u.interval))},show:function(){var e=B._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||B.style(this.elem,this.prop),this.options.show=!0,e!==t?this.custom(this.cur(),e):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),B(this.elem).show()},hide:function(){this.options.orig[this.prop]=B._data(this.elem,"fxshow"+this.prop)||B.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,n,r,i=xn||o(),s=!0,u=this.elem,a=this.options;if(e||i>=a.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),a.animatedProperties[this.prop]=!0;for(t in a.animatedProperties)a.animatedProperties[t]!==!0&&(s=!1);if(s){a.overflow!=null&&!B.support.shrinkWrapBlocks&&B.each(["","X","Y"],function(e,t){u.style["overflow"+t]=a.overflow[e]}),a.hide&&B(u).hide();if(a.hide||a.show)for(t in a.animatedProperties)B.style(u,t,a.orig[t]),B.removeData(u,"fxshow"+t,!0),B.removeData(u,"toggle"+t,!0);r=a.complete,r&&(a.complete=!1,r.call(u))}return!1}return a.duration==Infinity?this.now=i:(n=i-this.startTime,this.state=n/a.duration,this.pos=B.easing[a.animatedProperties[this.prop]](this.state,n,0,1,a.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},B.extend(B.fx,{tick:function(){var e,t=B.timers,n=0;for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||B.fx.stop()},interval:13,stop:function(){clearInterval(En),En=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){B.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&e.elem.style[e.prop]!=null?e.elem.style[e.prop]=e.now+e.unit:e.elem[e.prop]=e.now}}}),B.each(["width","height"],function(e,t){B.fx.step[t]=function(e){B.style(e.elem,t,Math.max(0,e.now)+e.unit)}}),B.expr&&B.expr.filters&&(B.expr.filters.animated=function(e){return B.grep(B.timers,function(t){return e===t.elem}).length});var Tn=/^t(?:able|d|h)$/i,Nn=/^(?:body|html)$/i;"getBoundingClientRect"in D.documentElement?B.fn.offset=function(e){var t=this[0],r;if(e)return this.each(function(t){B.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return B.offset.bodyOffset(t);try{r=t.getBoundingClientRect()}catch(i){}var s=t.ownerDocument,o=s.documentElement;if(!r||!B.contains(o,t))return r?{top:r.top,left:r.left}:{top:0,left:0};var u=s.body,a=n(s),f=o.clientTop||u.clientTop||0,l=o.clientLeft||u.clientLeft||0,c=a.pageYOffset||B.support.boxModel&&o.scrollTop||u.scrollTop,h=a.pageXOffset||B.support.boxModel&&o.scrollLeft||u.scrollLeft,p=r.top+c-f,d=r.left+h-l;return{top:p,left:d}}:B.fn.offset=function(e){var t=this[0];if(e)return this.each(function(t){B.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return B.offset.bodyOffset(t);var n,r=t.offsetParent,i=t,s=t.ownerDocument,o=s.documentElement,u=s.body,a=s.defaultView,f=a?a.getComputedStyle(t,null):t.currentStyle,l=t.offsetTop,c=t.offsetLeft;while((t=t.parentNode)&&t!==u&&t!==o){if(B.support.fixedPosition&&f.position==="fixed")break;n=a?a.getComputedStyle(t,null):t.currentStyle,l-=t.scrollTop,c-=t.scrollLeft,t===r&&(l+=t.offsetTop,c+=t.offsetLeft,B.support.doesNotAddBorder&&(!B.support.doesAddBorderForTableAndCells||!Tn.test(t.nodeName))&&(l+=parseFloat(n.borderTopWidth)||0,c+=parseFloat(n.borderLeftWidth)||0),i=r,r=t.offsetParent),B.support.subtractsBorderForOverflowNotVisible&&n.overflow!=="visible"&&(l+=parseFloat(n.borderTopWidth)||0,c+=parseFloat(n.borderLeftWidth)||0),f=n}if(f.position==="relative"||f.position==="static")l+=u.offsetTop,c+=u.offsetLeft;return B.support.fixedPosition&&f.position==="fixed"&&(l+=Math.max(o.scrollTop,u.scrollTop),c+=Math.max(o.scrollLeft,u.scrollLeft)),{top:l,left:c}},B.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return B.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(B.css(e,"marginTop"))||0,n+=parseFloat(B.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=B.css(e,"position");r==="static"&&(e.style.position="relative");var i=B(e),s=i.offset(),o=B.css(e,"top"),u=B.css(e,"left"),a=(r==="absolute"||r==="fixed")&&B.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),B.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},B.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),n=this.offset(),r=Nn.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(B.css(e,"marginTop"))||0,n.left-=parseFloat(B.css(e,"marginLeft"))||0,r.top+=parseFloat(B.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(B.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||D.body;while(e&&!Nn.test(e.nodeName)&&B.css(e,"position")==="static")e=e.offsetParent;return e})}}),B.each(["Left","Top"],function(e,r){var i="scroll"+r;B.fn[i]=function(r){var s,o;return r===t?(s=this[0],s?(o=n(s),o?"pageXOffset"in o?o[e?"pageYOffset":"pageXOffset"]:B.support.boxModel&&o.document.documentElement[i]||o.document.body[i]:s[i]):null):this.each(function(){o=n(this),o?o.scrollTo(e?B(o).scrollLeft():r,e?r:B(o).scrollTop()):this[i]=r})}}),B.each(["Height","Width"],function(e,n){var r=n.toLowerCase();B.fn["inner"+n]=function(){var e=this[0];return e?e.style?parseFloat(B.css(e,r,"padding")):this[r]():null},B.fn["outer"+n]=function(e){var t=this[0];return t?t.style?parseFloat(B.css(t,r,e?"margin":"border")):this[r]():null},B.fn[r]=function(e){var i=this[0];if(!i)return e==null?null:this;if(B.isFunction(e))return this.each(function(t){var n=B(this);n[r](e.call(this,t,n[r]()))});if(B.isWindow(i)){var s=i.document.documentElement["client"+n],o=i.document.body;return i.document.compatMode==="CSS1Compat"&&s||o&&o["client"+n]||s}if(i.nodeType===9)return Math.max(i.documentElement["client"+n],i.body["scroll"+n],i.documentElement["scroll"+n],i.body["offset"+n],i.documentElement["offset"+n]);if(e===t){var u=B.css(i,r),a=parseFloat(u);return B.isNumeric(a)?a:u}return this.css(r,typeof e=="string"?e:e+"px")}}),e.jQuery=e.$=B,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return B})})(window),function(){function t(e,t,n,r,i,s){t[e]&&(n.push(e),(t[e]===!0||t[e]===1)&&r.push(i+e+"/"+s))}function n(e,t,n,r,i){var s=r+t+"/"+i;require._fileExists(e.toUrl(s))&&n.push(s)}function r(e,t,n){var i;for(i in t)t.hasOwnProperty(i)&&(!e.hasOwnProperty(i)||n)?e[i]=t[i]:typeof t[i]=="object"&&r(e[i],t[i],n)}var e=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(i){var s=i.config();return{version:"2.0.1",load:function(i,o,u,a){a=a||{},a.locale&&(s.locale=a.locale);var f,l=e.exec(i),c=l[1],h=l[4],p=l[5],d=h.split("-"),v=[],m={},g,y,b="";l[5]?(c=l[1],f=c+p):(f=i,p=l[4],h=s.locale,h||(h=s.locale=typeof navigator=="undefined"?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),d=h.split("-"));if(a.isBuild){v.push(f),n(o,"root",v,c,p);for(g=0;g<d.length;g++)y=d[g],b+=(b?"-":"")+y,n(o,b,v,c,p);o(v,function(){u()})}else o([f],function(e){var n=[],i;t("root",e,n,v,c,p);for(g=0;g<d.length;g++)i=d[g],b+=(b?"-":"")+i,t(b,e,n,v,c,p);o(v,function(){var t,i,s;for(t=n.length-1;t>-1&&n[t];t--){s=n[t],i=e[s];if(i===!0||i===1)i=o(c+s+"/"+p);r(m,i)}u(m)})})}}})}(),define("nls/logo.lang",{root:{but_logo_text:"Yazı Modu",but_logo_upload:"Fotoğraf Modu",str_logo_edit:"Düzenlemek için tıklayın.",err_logo_len:"Opps. Logo en az 3 en fazla 250 karakter olabilir..",err_footer_len:"Opps. Alt metin en az 3 karakter olabilir."}}),define("nls/photos.lang",{root:{str_delete_photo:"Bu fotoğrafı sil!",confirm_delete_photo:"Seçilen fotoğrafı silmek istediğinizden emin misiniz?",str_file_desc:"Resim dosyaları",info_success_upload:"Başarılı bir şekilde yüklendi",info_error_upload:"Dosya boyutu çok büyük ya da başka bir hata oluştu."}}),function(e){typeof define=="function"&&define.amd?define("jquery.ui.widget",["jquery"],e):e(jQuery)}(function(e){var t=0,n=Array.prototype.slice;e.cleanData=function(t){return function(n){var r,i,s;for(s=0;(i=n[s])!=null;s++)try{r=e._data(i,"events"),r&&r.remove&&e(i).triggerHandler("remove")}catch(o){}t(n)}}(e.cleanData),e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];return t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){if(!e.isFunction(r)){a[t]=r;return}a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=i,s=r.apply(this,arguments),this._super=t,this._superApply=n,s}}()}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix||t:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){var r=n.call(arguments,1),i=0,s=r.length,o,u;for(;i<s;i++)for(o in r[i])u=r[i][o],r[i].hasOwnProperty(o)&&u!==undefined&&(e.isPlainObject(u)?t[o]=e.isPlainObject(t[o])?e.widget.extend({},t[o],u):e.widget.extend({},u):t[o]=u);return t},e.widget.bridge=function(t,r){var i=r.prototype.widgetFullName||t;e.fn[t]=function(s){var o=typeof s=="string",u=n.call(arguments,1),a=this;return s=!o&&u.length?e.widget.extend.apply(null,[s].concat(u)):s,o?this.each(function(){var n,r=e.data(this,i);if(s==="instance")return a=r,!1;if(!r)return e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+s+"'");if(!e.isFunction(r[s])||s.charAt(0)==="_")return e.error("no such method '"+s+"' for "+t+" widget instance");n=r[s].apply(r,u);if(n!==r&&n!==undefined)return a=n&&n.jquery?a.pushStack(n.get()):n,!1}):this.each(function(){var t=e.data(this,i);t?(t.option(s||{}),t._init&&t._init()):e.data(this,i,new r(s,this))}),a}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(n,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),n),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var r=t,i,s,o;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof t=="string"){r={},i=t.split("."),t=i.shift();if(i.length){s=r[t]=e.widget.extend({},this.options[t]);for(o=0;o<i.length-1;o++)s[i[o]]=s[i[o]]||{},s=s[i[o]];t=i.pop();if(arguments.length===1)return s[t]===undefined?null:s[t];s[t]=n}else{if(arguments.length===1)return this.options[t]===undefined?null:this.options[t];r[t]=n}}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^([\w:-]*)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}});var r=e.widget}),function(e){typeof define=="function"&&define.amd?define("jquery.fileupload",["jquery","jquery.ui.widget"],e):e(window.jQuery)}(function(e){function t(t){var n=t==="dragover";return function(r){r.dataTransfer=r.originalEvent&&r.originalEvent.dataTransfer;var i=r.dataTransfer;i&&e.inArray("Files",i.types)!==-1&&this._trigger(t,e.Event(t,{delegatedEvent:r}))!==!1&&(r.preventDefault(),n&&(i.dropEffect="copy"))}}e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))")).test(window.navigator.userAgent)&&!e('<input type="file">').prop("disabled"),e.support.xhrFileUpload=!!window.ProgressEvent&&!!window.FileReader,e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:undefined,fileInput:undefined,replaceFileInput:!0,paramName:undefined,singleFileUploads:!0,limitMultiFileUploads:undefined,limitMultiFileUploadSize:undefined,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:undefined,forceIframeTransport:!1,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:!0,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,n){return t=this.messages[t]||t.toString(),n&&e.each(n,function(e,n){t=t.replace("{"+e+"}",n)}),t},formData:function(e){return e.serializeArray()},add:function(t,n){if(t.isDefaultPrevented())return!1;(n.autoUpload||n.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&n.process().done(function(){n.submit()})},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,n){var r=e-this.timestamp;if(!this.bitrate||!n||r>n)this.bitrate=(t-this.loaded)*(1e3/r)*8,this.loaded=t,this.timestamp=e;return this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var n;return e.type(t.formData)==="function"?t.formData(t.form):e.isArray(t.formData)?t.formData:e.type(t.formData)==="object"?(n=[],e.each(t.formData,function(e,t){n.push({name:e,value:t})}),n):[]},_getTotal:function(t){var n=0;return e.each(t,function(e,t){n+=t.size||1}),n},_initProgressObject:function(t){var n={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,n):t._progress=n},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(t,n){if(t.lengthComputable){var r=Date.now?Date.now():(new Date).getTime(),i;if(n._time&&n.progressInterval&&r-n._time<n.progressInterval&&t.loaded!==t.total)return;n._time=r,i=Math.floor(t.loaded/t.total*(n.chunkSize||n._progress.total))+(n.uploadedBytes||0),this._progress.loaded+=i-n._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(r,this._progress.loaded,n.bitrateInterval),n._progress.loaded=n.loaded=i,n._progress.bitrate=n.bitrate=n._bitrateTimer.getBitrate(r,i,n.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),n),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var n=this,r=t.xhr?t.xhr():e.ajaxSettings.xhr();r.upload&&(e(r.upload).bind("progress",function(e){var r=e.originalEvent;e.lengthComputable=r.lengthComputable,e.loaded=r.loaded,e.total=r.total,n._onProgress(e,t)}),t.xhr=function(){return r})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var n=this,r,i=t.files[0],s=t.multipart||!e.support.xhrFileUpload,o=e.type(t.paramName)==="array"?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange);if(!s||t.blob||!this._isInstanceOf("File",i))t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(i.name)+'"';s?e.support.xhrFormDataFileUpload&&(t.postMessage?(r=this._getFormData(t),t.blob?r.push({name:o,value:t.blob}):e.each(t.files,function(n,i){r.push({name:e.type(t.paramName)==="array"&&t.paramName[n]||o,value:i})})):(n._isInstanceOf("FormData",t.formData)?r=t.formData:(r=new FormData,e.each(this._getFormData(t),function(e,t){r.append(t.name,t.value)})),t.blob?r.append(o,t.blob,i.name):e.each(t.files,function(i,s){(n._isInstanceOf("File",s)||n._isInstanceOf("Blob",s))&&r.append(e.type(t.paramName)==="array"&&t.paramName[i]||o,s,s.uploadName||s.name)})),t.data=r):(t.contentType=i.type||"application/octet-stream",t.data=t.blob||i),t.blob=null},_initIframeSettings:function(t){var n=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&n&&n!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var n=e(t.fileInput),r=t.paramName;return r?e.isArray(r)||(r=[r]):(r=[],n.each(function(){var t=e(this),n=t.prop("name")||"files[]",i=(t.prop("files")||[1]).length;while(i)r.push(n),i-=1}),r.length||(r=[n.prop("name")||"files[]"])),r},_initFormSettings:function(t){if(!t.form||!t.form.length)t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")));t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||e.type(t.form.prop("method"))==="string"&&t.form.prop("method")||"").toUpperCase(),t.type!=="POST"&&t.type!=="PUT"&&t.type!=="PATCH"&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var n=e.extend({},this.options,t);return this._initFormSettings(n),this._initDataSettings(n),n},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,n,r){var i=e.Deferred(),s=i.promise();return n=n||this.options.context||s,t===!0?i.resolveWith(n,r):t===!1&&i.rejectWith(n,r),s.abort=i.promise,this._enhancePromise(s)},_addConvenienceMethods:function(t,n){var r=this,i=function(t){return e.Deferred().resolveWith(r,t).promise()};n.process=function(t,s){if(t||s)n._processQueue=this._processQueue=(this._processQueue||i([this])).pipe(function(){return n.errorThrown?e.Deferred().rejectWith(r,[n]).promise():i(arguments)}).pipe(t,s);return this._processQueue||i([this])},n.submit=function(){return this.state()!=="pending"&&(n.jqXHR=this.jqXHR=r._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)!==!1&&r._onSend(t,this)),this.jqXHR||r._getXHRPromise()},n.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",r._trigger("fail",null,this),r._getXHRPromise(!1))},n.state=function(){if(this.jqXHR)return r._getDeferredState(this.jqXHR);if(this._processQueue)return r._getDeferredState(this._processQueue)},n.processing=function(){return!this.jqXHR&&this._processQueue&&r._getDeferredState(this._processQueue)==="pending"},n.progress=function(){return this._progress},n.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),n=t&&t.split("-"),r=n&&n.length>1&&parseInt(n[1],10);return r&&r+1},_chunkedUpload:function(t,n){t.uploadedBytes=t.uploadedBytes||0;var r=this,i=t.files[0],s=i.size,o=t.uploadedBytes,u=t.maxChunkSize||s,a=this._blobSlice,f=e.Deferred(),l=f.promise(),c,h;return!(this._isXHRUpload(t)&&a&&(o||u<s))||t.data?!1:n?!0:o>=s?(i.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",i.error])):(h=function(){var n=e.extend({},t),l=n._progress.loaded;n.blob=a.call(i,o,o+u,i.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+o+"-"+(o+n.chunkSize-1)+"/"+s,r._initXHRData(n),r._initProgressListener(n),c=(r._trigger("chunksend",null,n)!==!1&&e.ajax(n)||r._getXHRPromise(!1,n.context)).done(function(i,u,a){o=r._getUploadedBytes(a)||o+n.chunkSize,l+n.chunkSize-n._progress.loaded&&r._onProgress(e.Event("progress",{lengthComputable:!0,loaded:o-n.uploadedBytes,total:o-n.uploadedBytes}),n),t.uploadedBytes=n.uploadedBytes=o,n.result=i,n.textStatus=u,n.jqXHR=a,r._trigger("chunkdone",null,n),r._trigger("chunkalways",null,n),o<s?h():f.resolveWith(n.context,[i,u,a])}).fail(function(e,t,i){n.jqXHR=e,n.textStatus=t,n.errorThrown=i,r._trigger("chunkfail",null,n),r._trigger("chunkalways",null,n),f.rejectWith(n.context,[e,t,i])})},this._enhancePromise(l),l.abort=function(){return c.abort()},h(),l)},_beforeSend:function(e,t){this._active===0&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,n,r,i){var s=i._progress.total,o=i._response;i._progress.loaded<s&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:s,total:s}),i),o.result=i.result=t,o.textStatus=i.textStatus=n,o.jqXHR=i.jqXHR=r,this._trigger("done",null,i)},_onFail:function(e,t,n,r){var i=r._response;r.recalculateProgress&&(this._progress.loaded-=r._progress.loaded,this._progress.total-=r._progress.total),i.jqXHR=r.jqXHR=e,i.textStatus=r.textStatus=t,i.errorThrown=r.errorThrown=n,this._trigger("fail",null,r)},_onAlways:function(e,t,n,r){this._trigger("always",null,r)},_onSend:function(t,n){n.submit||this._addConvenienceMethods(t,n);var r=this,i,s,o,u,a=r._getAJAXSettings(n),f=function(){return r._sending+=1,a._bitrateTimer=new r._BitrateTimer,i=i||((s||r._trigger("send",e.Event("send",{delegatedEvent:t}),a)===!1)&&r._getXHRPromise(!1,a.context,s)||r._chunkedUpload(a)||e.ajax(a)).done(function(e,t,n){r._onDone(e,t,n,a)}).fail(function(e,t,n){r._onFail(e,t,n,a)}).always(function(e,t,n){r._onAlways(e,t,n,a),r._sending-=1,r._active-=1;if(a.limitConcurrentUploads&&a.limitConcurrentUploads>r._sending){var i=r._slots.shift();while(i){if(r._getDeferredState(i)==="pending"){i.resolve();break}i=r._slots.shift()}}r._active===0&&r._trigger("stop")}),i};return this._beforeSend(t,a),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(o=e.Deferred(),this._slots.push(o),u=o.pipe(f)):(this._sequence=this._sequence.pipe(f,f),u=this._sequence),u.abort=function(){return s=[undefined,"abort","abort"],i?i.abort():(o&&o.rejectWith(a.context,s),f())},this._enhancePromise(u)):f()},_onAdd:function(t,n){var r=this,i=!0,s=e.extend({},this.options,n),o=n.files,u=o.length,a=s.limitMultiFileUploads,f=s.limitMultiFileUploadSize,l=s.limitMultiFileUploadSizeOverhead,c=0,h=this._getParamName(s),p,d,v,m,g=0;f&&(!u||o[0].size===undefined)&&(f=undefined);if(!(s.singleFileUploads||a||f)||!this._isXHRUpload(s))v=[o],p=[h];else if(!s.singleFileUploads&&!f&&a){v=[],p=[];for(m=0;m<u;m+=a)v.push(o.slice(m,m+a)),d=h.slice(m,m+a),d.length||(d=h),p.push(d)}else if(!s.singleFileUploads&&f){v=[],p=[];for(m=0;m<u;m+=1){c+=o[m].size+l;if(m+1===u||c+o[m+1].size+l>f||a&&m+1-g>=a)v.push(o.slice(g,m+1)),d=h.slice(g,m+1),d.length||(d=h),p.push(d),g=m+1,c=0}}else p=h;return n.originalFiles=o,e.each(v||o,function(s,o){var u=e.extend({},n);return u.files=v?o:[o],u.paramName=p[s],r._initResponseObject(u),r._initProgressObject(u),r._addConvenienceMethods(t,u),i=r._trigger("add",e.Event("add",{delegatedEvent:t}),u),i}),i},_replaceFileInput:function(t){var n=t.fileInput,r=n.clone(!0);t.fileInputClone=r,e("<form></form>").append(r)[0].reset(),n.after(r).detach(),e.cleanData(n.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,t){return t===n[0]?r[0]:t}),n[0]===this.element[0]&&(this.element=r)},_handleFileTreeEntry:function(t,n){var r=this,i=e.Deferred(),s=function(e){e&&!e.entry&&(e.entry=t),i.resolve([e])},o=function(e){r._handleFileTreeEntries(e,n+t.name+"/").done(function(e){i.resolve(e)}).fail(s)},u=function(){a.readEntries(function(e){e.length?(f=f.concat(e),u()):o(f)},s)},a,f=[];return n=n||"",t.isFile?t._file?(t._file.relativePath=n,i.resolve(t._file)):t.file(function(e){e.relativePath=n,i.resolve(e)},s):t.isDirectory?(a=t.createReader(),u()):i.resolve([]),i.promise()},_handleFileTreeEntries:function(t,n){var r=this;return e.when.apply(e,e.map(t,function(e){return r._handleFileTreeEntry(e,n)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var n=t.items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(e.map(n,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var n=t.prop("webkitEntries")||t.prop("entries"),r,i;if(n&&n.length)return this._handleFileTreeEntries(n);r=e.makeArray(t.prop("files"));if(!r.length){i=t.prop("value");if(!i)return e.Deferred().resolve([]).promise();r=[{name:i.replace(/^.*\\/,"")}]}else r[0].name===undefined&&r[0].fileName&&e.each(r,function(e,t){t.name=t.fileName,t.size=t.fileSize});return e.Deferred().resolve(r).promise()},_getFileInputFiles:function(t){return t instanceof e&&t.length!==1?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var n=this,r={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(r.fileInput).always(function(i){r.files=i,n.options.replaceFileInput&&n._replaceFileInput(r),n._trigger("change",e.Event("change",{delegatedEvent:t}),r)!==!1&&n._onAdd(t,r)})},_onPaste:function(t){var n=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,r={files:[]};n&&n.length&&(e.each(n,function(e,t){var n=t.getAsFile&&t.getAsFile();n&&r.files.push(n)}),this._trigger("paste",e.Event("paste",{delegatedEvent:t}),r)!==!1&&this._onAdd(t,r))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var n=this,r=t.dataTransfer,i={};r&&r.files&&r.files.length&&(t.preventDefault(),this._getDroppedFiles(r).always(function(r){i.files=r,n._trigger("drop",e.Event("drop",{delegatedEvent:t}),i)!==!1&&n._onAdd(t,i)}))},_onDragOver:t("dragover"),_onDragEnter:t("dragenter"),_onDragLeave:t("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,n){var r=e.inArray(t,this._specialOptions)!==-1;r&&this._destroyEventHandlers(),this._super(t,n),r&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;t.fileInput===undefined?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),n=t.pop();return t.shift(),new RegExp(t.join("/"),n)},_isRegExpOption:function(t,n){return t!=="url"&&e.type(n)==="string"&&/^\/.*\/[igm]{0,3}$/.test(n)},_initDataAttributes:function(){var t=this,n=this.options,r=e(this.element[0].cloneNode(!1)),i=r.data();r.remove(),e.each(i,function(e,i){var s="data-"+e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();r.attr(s)&&(t._isRegExpOption(e,i)&&(i=t._getRegExp(i)),n[e]=i)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var n=this;if(!t||this.options.disabled)return;t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,n._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var n=this,r=e.Deferred(),i=r.promise(),s,o;return i.abort=function(){return o=!0,s?s.abort():(r.reject(null,"abort","abort"),i)},this._getFileInputFiles(t.fileInput).always(function(e){if(o)return;if(!e.length){r.reject();return}t.files=e,s=n._onSend(null,t),s.then(function(e,t,n){r.resolve(e,t,n)},function(e,t,n){r.reject(e,t,n)})}),this._enhancePromise(i)}t.files=e.makeArray(t.files);if(t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),function(e){typeof define=="function"&&define.amd?define("jquery.fileupload-process",["jquery","./jquery.fileupload"],e):e(window.jQuery)}(function(e){var t=e.blueimp.fileupload.prototype.options.add;e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{processQueue:[],add:function(n,r){var i=e(this);r.process(function(){return i.fileupload("process",r)}),t.call(this,n,r)}},processActions:{},_processFile:function(t,n){var r=this,i=e.Deferred().resolveWith(r,[t]),s=i.promise();return this._trigger("process",null,t),e.each(t.processQueue,function(t,i){var o=function(t){return n.errorThrown?e.Deferred().rejectWith(r,[n]).promise():r.processActions[i.action].call(r,t,i)};s=s.pipe(o,i.always&&o)}),s.done(function(){r._trigger("processdone",null,t),r._trigger("processalways",null,t)}).fail(function(){r._trigger("processfail",null,t),r._trigger("processalways",null,t)}),s},_transformProcessQueue:function(t){var n=[];e.each(t.processQueue,function(){var r={},i=this.action,s=this.prefix===!0?i:this.prefix;e.each(this,function(n,i){e.type(i)==="string"&&i.charAt(0)==="@"?r[n]=t[i.slice(1)||(s?s+n.charAt(0).toUpperCase()+n.slice(1):n)]:r[n]=i}),n.push(r)}),t.processQueue=n},processing:function(){return this._processing},process:function(t){var n=this,r=e.extend({},this.options,t);return r.processQueue&&r.processQueue.length&&(this._transformProcessQueue(r),this._processing===0&&this._trigger("processstart"),e.each(t.files,function(i){var s=i?e.extend({},r):r,o=function(){return t.errorThrown?e.Deferred().rejectWith(n,[t]).promise():n._processFile(s,t)};s.index=i,n._processing+=1,n._processingQueue=n._processingQueue.pipe(o,o).always(function(){n._processing-=1,n._processing===0&&n._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=e.Deferred().resolveWith(this).promise()}})}),function(e){typeof define=="function"&&define.amd?define("jquery.fileupload.validate",["jquery","./jquery.fileupload-process"],e):e(window.jQuery)}(function(e){e.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"}),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{getNumberOfFiles:e.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(t,n){if(n.disabled)return t;var r=e.Deferred(),i=this.options,s=t.files[t.index],o;if(n.minFileSize||n.maxFileSize)o=s.size;return e.type(n.maxNumberOfFiles)==="number"&&(i.getNumberOfFiles()||0)+t.files.length>n.maxNumberOfFiles?s.error=i.i18n("maxNumberOfFiles"):n.acceptFileTypes&&!n.acceptFileTypes.test(s.type)&&!n.acceptFileTypes.test(s.name)?s.error=i.i18n("acceptFileTypes"):o>n.maxFileSize?s.error=i.i18n("maxFileSize"):e.type(o)==="number"&&o<n.minFileSize?s.error=i.i18n("minFileSize"):delete s.error,s.error||t.files.error?(t.files.error=!0,r.rejectWith(this,[t])):r.resolveWith(this,[t]),r.promise()}}})}),define("helpers/photos",["i18n!nls/photos.lang","jquery.fileupload","jquery.fileupload.validate"],function(e){return{multi:!0,options:{acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,maxFileSize:"10000000",swfupload:{file_types:"*.jpg; .jpeg; *.png; *.gif; *.JPG; *.JPEG; *.PNG; *.GIF",file_size_limit:"10240"}},is_ie:function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("msie")!=-1?parseInt(e.split("msie")[1]):!1},init:function(){var t=this;$(".pic_del").canTip({html:e.str_delete_photo}),$("body").on("click",".pic_del",function(){var n=$(this).parent(),r=confirm(e.confirm_delete_photo);r==1&&t.del(n)}),$("body").on("click",".pic_box",function(){var e=$(this);t.multi==0&&e.parent().find(".active_pic").removeClass("active_pic"),e.hasClass("active_pic")?e.removeClass("active_pic"):e.addClass("active_pic"),t.active_but()})},active_but:function(){$(".active_pic").length<1?$("#addPhotoBut").attr("disabled","disabled"):$("#addPhotoBut").removeAttr("disabled")},del:function(e){var t=e.attr("id"),n=this;t=t.split("_"),t=t[1],$.post(base_url+"manage/photos/del",{site_id:site_id,pic_id:t},function(t){$.canToast(t),e.fadeOut("fast",function(){$(this).remove(),n.active_but()})})},add:function(e){e=typeof e!="undefined"?e:1,this.multi=e;var t=this,n=$("#loading");n.show(),$.ajax({url:base_url+"manage/photos/add",type:"POST",async:!1,data:{site_id:site_id},success:function(e){$("#modal").html(e).children(":first-child").modal().on("hidden",function(){$("#fileupload").fileupload("destroy")}),t.is_ie()<10&&t.is_ie()!=0?t.swf_upload():t.jquery_upload(),n.hide()}})},serialize:function(){var e=this,t=$(".active_pic");if(t.size()<1)return!1;var n="";return t.each(function(){var t=$(this).attr("id");t=e.id_splitter(t),n+="photos[]="+t+"&"}),n},jquery_upload:function(){var t=this,n=0,r=0,i=0,s=t.options;$(".fileupload-area").show(),$("#fileupload").fileupload({dataType:"html",acceptFileTypes:s.acceptFileTypes,maxFileSize:s.maxFileSize,paramName:"Filedata",url:base_url+"manage/upload/doupload",progressall:function(e,t){var n=parseInt(t.loaded/t.total*100,10);$("#progressbar div").css("width",n+"%"),$("#progressbar div").html(n+"%")},fail:function(t,r){n++,n==r.originalFiles.length&&($("#progressbar").hide(),n=0),$.canToast('<div class="error">'+e.info_error_upload+"</div>")},done:function(r,i){var s=0;$("#progressbar div").css("width",s+"%"),$("#progressbar div").html(s+"%"),n++,n==i.originalFiles.length&&($("#progressbar").hide(),n=0);var o=i.result;$.each(i.files,function(n,r){if(o=="storage_limit_error")return $.canToast('<div class="error">Dosya yükleme limiti aşıldı. Lütfen bazı dosyaları silip tekrar deneyiniz.</div>'),!1;$.canToast('<div class="success">'+e.info_success_upload+" {"+r.name+"}</div>");var i=$(o);i.hide(),$(".pictures").prepend(i),i.fadeIn("slow"),t.active_but()})}}).on("fileuploadadd",function(e,t){var r=0;$.each(t.files,function(e,t){s.acceptFileTypes&&!s.acceptFileTypes.test(t.type)&&!s.acceptFileTypes.test(t.name)?(r=1,$.canToast('<div class="error">Bu dosya tipini yükleyemezsiniz. ('+t.name+")</div>")):t.size>s.maxFileSize&&(r=1,$.canToast('<div class="error">Dosya boyutu büyük. ('+t.name+")</div>"))}),t.context=$("<div/>").appendTo("#files"),r==0?$("#progressbar").show():n++,n==t.originalFiles.length&&($("#progressbar").hide(),n=0)})},swf_upload:function(){var t=this,n=t.options;$("#swfupload-control").show(),$("#swfupload-control").swfupload({upload_url:base_url+"manage/upload/doupload",file_size_limit:n.swfupload.file_size_limit,file_types:n.swfupload.file_types,file_types_description:e.str_file_desc,file_upload_limit:"0",flash_url:base_url+"files/js/app/plugins/swfupload/swfupload.swf",button_image_url:base_url+"files/js/app/plugins/swfupload/upload-but.png",button_window_mode:"transparent",button_width:180,button_height:40,button_placeholder:$("#button")[0],debug:!1,post_params:{token:$("#token").val(),_token:_token}}).bind("swfuploadLoaded",function(e){$("#swfupload-control").animate({marginLeft:"+=1px"},500)}).bind("fileQueued",function(e,t){$(this).swfupload("startUpload")}).bind("fileQueueError",function(e,t,n,r){}).bind("fileDialogStart",function(e){}).bind("fileDialogComplete",function(e,t,n){}).bind("uploadStart",function(e,t){$("#progressbar").show()}).bind("uploadProgress",function(e,t,n,r){var i=100*n/r;i=Math.round(i),$("#progressbar div").animate({width:i+"%"},{duration:500,queue:!1}).html(i+"%")}).bind("uploadSuccess",function(n,r,i){$("#progressbar").hide();if(i=="storage_limit_error")return $.canToast('<div class="error">Dosya yükleme limiti aşıldı. Lütfen bazı dosyaları silip tekrar deneyiniz.</div>'),!1;$.canToast('<div class="success">'+e.info_success_upload+" {"+r.name+"}</div>");var s=$(i);s.hide(),$(".pictures").prepend(s),s.fadeIn("slow"),t.active_but()}).bind("uploadComplete",function(e,t){$(this).swfupload("startUpload")}).bind("uploadError",function(t,n,r,i){$("#progressbar").hide(),$.canToast('<div class="error">'+e.info_error_upload+"</div>")})},id_splitter:function(e){return e=e.split("_"),e=e[1],e}}}),function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=t.length?!0:!1,e.ui.ie6=parseFloat(t[1],10)===6}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})}(jQuery),function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a=t.split(".")[0];t=t.split(".")[1],i=a+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[a]=e[a]||{},s=e[a][t],o=e[a][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,i){e.isFunction(i)&&(r[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=r,s=i.apply(this,arguments),this._super=t,this._superApply=n,s}}())}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix:t},r,{constructor:o,namespace:a,widgetName:t,widgetBaseClass:i,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName||n;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new i(o,this))}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetName,this),e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^(\w+)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&(e.effects.effect[u]||e.uiBackCompat!==!1&&e.effects[u])?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})}(jQuery),function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return!e.ui.ie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(jQuery),function(e,t){function h(e,t,n){return[parseInt(e[0],10)*(l.test(e[0])?t/100:1),parseInt(e[1],10)*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}e.ui=e.ui||{};var n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var r,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return e("body").append(s),r=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,r===i&&(i=s[0].clientWidth),s.remove(),n=r-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:i?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var n,l,d,v,m,g=e(t.of),y=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(y),w=g[0],E=(t.collision||"flip").split(" "),S={};return w.nodeType===9?(l=g.width(),d=g.height(),v={top:0,left:0}):e.isWindow(w)?(l=g.width(),d=g.height(),v={top:g.scrollTop(),left:g.scrollLeft()}):w.preventDefault?(t.at="left top",l=d=0,v={top:w.pageY,left:w.pageX}):(l=g.outerWidth(),d=g.outerHeight(),v=g.offset()),m=e.extend({},v),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),S[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),E.length===1&&(E[1]=E[0]),t.at[0]==="right"?m.left+=l:t.at[0]==="center"&&(m.left+=l/2),t.at[1]==="bottom"?m.top+=d:t.at[1]==="center"&&(m.top+=d/2),n=h(S.at,l,d),m.left+=n[0],m.top+=n[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),w=p(this,"marginLeft"),x=p(this,"marginTop"),T=f+w+p(this,"marginRight")+b.width,N=c+x+p(this,"marginBottom")+b.height,C=e.extend({},m),k=h(S.my,a.outerWidth(),a.outerHeight());t.my[0]==="right"?C.left-=f:t.my[0]==="center"&&(C.left-=f/2),t.my[1]==="bottom"?C.top-=c:t.my[1]==="center"&&(C.top-=c/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),o={marginLeft:w,marginTop:x},e.each(["left","top"],function(r,i){e.ui.position[E[r]]&&e.ui.position[E[r]][i](C,{targetWidth:l,targetHeight:d,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:t.my,at:t.at,within:y,elem:a})}),e.fn.bgiframe&&a.bgiframe(),t.using&&(u=function(e){var n=v.left-C.left,s=n+l-f,o=v.top-C.top,u=o+d-c,h={target:{element:g,left:v.left,top:v.top,width:l,height:d},element:{element:a,left:C.left,top:C.top,width:f,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};l<f&&i(n+s)<l&&(h.horizontal="center"),d<c&&i(o+u)<d&&(h.vertical="middle"),r(i(n),i(s))>r(i(o),i(u))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),a.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-r;if(p<0||p<i(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||i(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(v<0||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&i<11,t.innerHTML="",n.removeChild(t)}(),e.uiBackCompat!==!1&&function(e){var n=e.fn.position;e.fn.position=function(r){if(!r||!r.offset)return n.call(this,r);var i=r.offset.split(" "),s=r.at.split(" ");return i.length===1&&(i[1]=i[0]),/^\d/.test(i[0])&&(i[0]="+"+i[0]),/^\d/.test(i[1])&&(i[1]="+"+i[1]),s.length===1&&(/left|center|right/.test(s[0])?s[1]="center":(s[1]=s[0],s[0]="center")),n.call(this,e.extend(r,{at:s[0]+i[0]+" "+s[1]+i[1],offset:t}))}}(jQuery)}(jQuery),function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);var r=this.element[0],i=!1;while(r&&(r=r.parentNode))r==document&&(i=!0);if(!i&&this.options.helper==="original")return!1;if(this.options.revert=="invalid"&&!n||this.options.revert=="valid"&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var s=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){s._trigger("stop",t)!==!1&&s._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo=="parent"?this.element[0].parentNode:n.appendTo),r[0]!=this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[t.containment=="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t.containment=="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(t.containment=="document"?0:e(window).scrollLeft())+e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(t.containment=="document"?0:e(window).scrollTop())+(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)&&t.containment.constructor!=Array){var n=e(t.containment),r=n[0];if(!r)return;var i=n.offset(),s=e(r).css("overflow")!="hidden";this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(s?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}else t.containment.constructor==Array&&(this.containment=t.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName),s=t.pageX,o=t.pageY;if(this.originalPosition){var u;if(this.containment){if(this.relative_container){var a=this.relative_container.offset();u=[this.containment[0]+a.left,this.containment[1]+a.top,this.containment[2]+a.left,this.containment[3]+a.top]}else u=this.containment;t.pageX-this.offset.click.left<u[0]&&(s=u[0]+this.offset.click.left),t.pageY-this.offset.click.top<u[1]&&(o=u[1]+this.offset.click.top),t.pageX-this.offset.click.left>u[2]&&(s=u[2]+this.offset.click.left),t.pageY-this.offset.click.top>u[3]&&(o=u[3]+this.offset.click.top)}if(n.grid){var f=n.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY;o=u?f-this.offset.click.top<u[1]||f-this.offset.click.top>u[3]?f-this.offset.click.top<u[1]?f+n.grid[1]:f-n.grid[1]:f:f;var l=n.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX;s=u?l-this.offset.click.left<u[0]||l-this.offset.click.left>u[2]?l-this.offset.click.left<u[0]?l+n.grid[0]:l-n.grid[0]:l:l}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("draggable"),i=this,s=function(t){var n=this.offset.click.top,r=this.offset.click.left,i=this.positionAbs.top,s=this.positionAbs.left,o=t.height,u=t.width,a=t.top,f=t.left;return e.ui.isOver(i+n,s+r,a,f,o,u)};e.each(r.sortables,function(s){var o=!1,u=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!=u&&this.instance._intersectsWith(this.instance.containerCache)&&e.ui.contains(u.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n){var r=e("body"),i=e(this).data("draggable").options;r.css("cursor")&&(i._cursor=r.css("cursor")),r.css("cursor",i.cursor)},stop:function(t,n){var r=e(this).data("draggable").options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,n){var r=e(this).data("draggable");r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"&&(r.overflowOffset=r.scrollParent.offset())},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=!1;if(r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"){if(!i.axis||i.axis!="x")r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop-i.scrollSpeed);if(!i.axis||i.axis!="y")r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft-i.scrollSpeed)}else{if(!i.axis||i.axis!="x")t.pageY-e(document).scrollTop()<i.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed));if(!i.axis||i.axis!="y")t.pageX-e(document).scrollLeft()<i.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))}s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n){var r=e(this).data("draggable"),i=r.options;r.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!=r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=i.snapTolerance,o=n.offset.left,u=o+r.helperProportions.width,a=n.offset.top,f=a+r.helperProportions.height;for(var l=r.snapElements.length-1;l>=0;l--){var c=r.snapElements[l].left,h=c+r.snapElements[l].width,p=r.snapElements[l].top,d=p+r.snapElements[l].height;if(!(c-s<o&&o<h+s&&p-s<a&&a<d+s||c-s<o&&o<h+s&&p-s<f&&f<d+s||c-s<u&&u<h+s&&p-s<a&&a<d+s||c-s<u&&u<h+s&&p-s<f&&f<d+s)){r.snapElements[l].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=!1;continue}if(i.snapMode!="inner"){var v=Math.abs(p-f)<=s,m=Math.abs(d-a)<=s,g=Math.abs(c-u)<=s,y=Math.abs(h-o)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p-r.helperProportions.height,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h}).left-r.margins.left)}var b=v||m||g||y;if(i.snapMode!="outer"){var v=Math.abs(p-a)<=s,m=Math.abs(d-f)<=s,g=Math.abs(c-o)<=s,y=Math.abs(h-u)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d-r.helperProportions.height,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h-r.helperProportions.width}).left-r.margins.left)}!r.snapElements[l].snapping&&(v||m||g||y||b)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=v||m||g||y||b}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n){var r=e(this).data("draggable").options,i=e.makeArray(e(r.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!i.length)return;var s=parseInt(i[0].style.zIndex)||0;e(i).each(function(e){this.style.zIndex=s+e}),this[0].style.zIndex=s+i.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})}(jQuery),function(e,t){e.widget("ui.droppable",{version:"1.9.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,n=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];for(var n=0;n<t.length;n++)t[n]==this&&t.splice(n,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){t=="accept"&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current;if(!r||(r.currentItem||r.element)[0]==this.element[0])return!1;var i=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope==r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(t,n,r){if(!n.offset)return!1;var i=(t.positionAbs||t.position.absolute).left,s=i+t.helperProportions.width,o=(t.positionAbs||t.position.absolute).top,u=o+t.helperProportions.height,a=n.offset.left,f=a+n.proportions.width,l=n.offset.top,c=l+n.proportions.height;switch(r){case"fit":return a<=i&&s<=f&&l<=o&&u<=c;case"intersect":return a<i+t.helperProportions.width/2&&s-t.helperProportions.width/2<f&&l<o+t.helperProportions.height/2&&u-t.helperProportions.height/2<c;case"pointer":var h=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,p=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,d=e.ui.isOver(p,h,l,a,n.proportions.height,n.proportions.width);return d;case"touch":return(o>=l&&o<=c||u>=l&&u<=c||o<l&&u>c)&&(i>=a&&i<=f||s>=a&&s<=f||i<a&&s>f);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r=e.ui.ddmanager.droppables[t.options.scope]||[],i=n?n.type:null,s=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var o=0;o<r.length;o++){if(r[o].options.disabled||t&&!r[o].accept.call(r[o].element[0],t.currentItem||t.element))continue;for(var u=0;u<s.length;u++)if(s[u]==r[o].element[0]){r[o].proportions.height=0;continue e}r[o].visible=r[o].element.css("display")!="none";if(!r[o].visible)continue;i=="mousedown"&&r[o]._activate.call(r[o],n),r[o].offset=r[o].element.offset(),r[o].proportions={width:r[o].element[0].offsetWidth,height:r[o].element[0].offsetHeight}}},drop:function(t,n){var r=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r=e.ui.intersect(t,this,this.options.tolerance),i=!r&&this.isover==1?"isout":r&&this.isover==0?"isover":null;if(!i)return;var s;if(this.options.greedy){var o=this.options.scope,u=this.element.parents(":data(droppable)").filter(function(){return e.data(this,"droppable").options.scope===o});u.length&&(s=e.data(u[0],"droppable"),s.greedyChild=i=="isover"?1:0)}s&&i=="isover"&&(s.isover=0,s.isout=1,s._out.call(s,n)),this[i]=1,this[i=="isout"?"isover":"isout"]=0,this[i=="isover"?"_over":"_out"].call(this,n),s&&i=="isout"&&(s.isout=0,s.isover=1,s._over.call(s,n))})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(jQuery),function(e,t){e.widget("ui.resizable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,n=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=n.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var r=this.handles.split(",");this.handles={};for(var i=0;i<r.length;i++){var s=e.trim(r[i]),o="ui-resizable-"+s,u=e('<div class="ui-resizable-handle '+o+'"></div>');u.css({zIndex:n.zIndex}),"se"==s&&u.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(u)}}this._renderAxis=function(t){t=t||this.element;for(var n in this.handles){this.handles[n].constructor==String&&(this.handles[n]=e(this.handles[n],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var r=e(this.handles[n],this.element),i=0;i=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth();var s=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");t.css(s,i),this._proportionallyResize()}if(!e(this.handles[n]).length)continue}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),n.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(n.disabled)return;e(this).removeClass("ui-resizable-autohide"),t._handles.show()}).mouseleave(function(){if(n.disabled)return;t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var n=this.element;this.originalElement.css({position:n.css("position"),width:n.outerWidth(),height:n.outerHeight(),top:n.css("top"),left:n.css("left")}).insertAfter(n),n.remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var n=!1;for(var r in this.handles)e(this.handles[r])[0]==t.target&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var r=this.options,i=this.element.position(),s=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(s.is(".ui-draggable")||/absolute/.test(s.css("position")))&&s.css({position:"absolute",top:i.top,left:i.left}),this._renderProxy();var o=n(this.helper.css("left")),u=n(this.helper.css("top"));r.containment&&(o+=e(r.containment).scrollLeft()||0,u+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:o,top:u},this.size=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalPosition={left:o,top:u},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof r.aspectRatio=="number"?r.aspectRatio:this.originalSize.width/this.originalSize.height||1;var a=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor",a=="auto"?this.axis+"-resize":a),s.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(e){var t=this.helper,n=this.options,r={},i=this,s=this.originalMousePosition,o=this.axis,u=e.pageX-s.left||0,a=e.pageY-s.top||0,f=this._change[o];if(!f)return!1;var l=f.apply(this,[e,u,a]);this._updateVirtualBoundaries(e.shiftKey);if(this._aspectRatio||e.shiftKey)l=this._updateRatio(l,e);return l=this._respectSize(l,e),this._propagate("resize",e),t.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",e,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n=this.options,r=this;if(this._helper){var i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:r.sizeDiff.height,u=s?0:r.sizeDiff.width,a={width:r.helper.width()-u,height:r.helper.height()-o},f=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,l=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;n.animate||this.element.css(e.extend(a,{top:l,left:f})),r.helper.height(r.size.height),r.helper.width(r.size.width),this._helper&&!n.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t=this.options,n,i,s,o,u;u={minWidth:r(t.minWidth)?t.minWidth:0,maxWidth:r(t.maxWidth)?t.maxWidth:Infinity,minHeight:r(t.minHeight)?t.minHeight:0,maxHeight:r(t.maxHeight)?t.maxHeight:Infinity};if(this._aspectRatio||e)n=u.minHeight*this.aspectRatio,s=u.minWidth/this.aspectRatio,i=u.maxHeight*this.aspectRatio,o=u.maxWidth/this.aspectRatio,n>u.minWidth&&(u.minWidth=n),s>u.minHeight&&(u.minHeight=s),i<u.maxWidth&&(u.maxWidth=i),o<u.maxHeight&&(u.maxHeight=o);this._vBoundaries=u},_updateCache:function(e){var t=this.options;this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e,t){var n=this.options,i=this.position,s=this.size,o=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),o=="sw"&&(e.left=i.left+(s.width-e.width),e.top=null),o=="nw"&&(e.top=i.top+(s.height-e.height),e.left=i.left+(s.width-e.width)),e},_respectSize:function(e,t){var n=this.helper,i=this._vBoundaries,s=this._aspectRatio||t.shiftKey,o=this.axis,u=r(e.width)&&i.maxWidth&&i.maxWidth<e.width,a=r(e.height)&&i.maxHeight&&i.maxHeight<e.height,f=r(e.width)&&i.minWidth&&i.minWidth>e.width,l=r(e.height)&&i.minHeight&&i.minHeight>e.height;f&&(e.width=i.minWidth),l&&(e.height=i.minHeight),u&&(e.width=i.maxWidth),a&&(e.height=i.maxHeight);var c=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,p=/sw|nw|w/.test(o),d=/nw|ne|n/.test(o);f&&p&&(e.left=c-i.minWidth),u&&p&&(e.left=c-i.maxWidth),l&&d&&(e.top=h-i.minHeight),a&&d&&(e.top=h-i.maxHeight);var v=!e.width&&!e.height;return v&&!e.left&&e.top?e.top=null:v&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){var t=this.options;if(!this._proportionallyResizeElements.length)return;var n=this.helper||this.element;for(var r=0;r<this._proportionallyResizeElements.length;r++){var i=this._proportionallyResizeElements[r];if(!this.borderDif){var s=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],o=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];this.borderDif=e.map(s,function(e,t){var n=parseInt(e,10)||0,r=parseInt(o[t],10)||0;return n+r})}i.css({height:n.height()-this.borderDif[0]-this.borderDif[2]||0,width:n.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset();if(this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var r=e.ui.ie6?1:0,i=e.ui.ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+i,height:this.element.outerHeight()+i,position:"absolute",left:this.elementOffset.left-r+"px",top:this.elementOffset.top-r+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t,n){return{width:this.originalSize.width+t}},w:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{top:s.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","alsoResize",{start:function(t,n){var r=e(this).data("resizable"),i=r.options,s=function(t){e(t).each(function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};typeof i.alsoResize=="object"&&!i.alsoResize.parentNode?i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e)}):s(i.alsoResize)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("resizable-alsoresize"),s={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e,t){a(e,t)}):a(i.alsoResize)},stop:function(t,n){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),u=o&&e.ui.hasScroll(s[0],"left")?0:r.sizeDiff.height,a=o?0:r.sizeDiff.width,f={width:r.size.width-a,height:r.size.height-u},l=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,c=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;r.element.animate(e.extend(f,c&&l?{top:c,left:l}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var n={width:parseInt(r.element.css("width"),10),height:parseInt(r.element.css("height"),10),top:parseInt(r.element.css("top"),10),left:parseInt(r.element.css("left"),10)};s&&s.length&&e(s[0]).css({width:n.width,height:n.height}),r._updateCache(n),r._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(t,r){var i=e(this).data("resizable"),s=i.options,o=i.element,u=s.containment,a=u instanceof e?u.get(0):/parent/.test(u)?o.parent().get(0):u;if(!a)return;i.containerElement=e(a);if(/document/.test(u)||u==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var f=e(a),l=[];e(["Top","Right","Left","Bottom"]).each(function(e,t){l[e]=n(f.css("padding"+t))}),i.containerOffset=f.offset(),i.containerPosition=f.position(),i.containerSize={height:f.innerHeight()-l[3],width:f.innerWidth()-l[1]};var c=i.containerOffset,h=i.containerSize.height,p=i.containerSize.width,d=e.ui.hasScroll(a,"left")?a.scrollWidth:p,v=e.ui.hasScroll(a)?a.scrollHeight:h;i.parentData={element:a,left:c.left,top:c.top,width:d,height:v}}},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.containerSize,o=r.containerOffset,u=r.size,a=r.position,f=r._aspectRatio||t.shiftKey,l={top:0,left:0},c=r.containerElement;c[0]!=document&&/static/.test(c.css("position"))&&(l=o),a.left<(r._helper?o.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-o.left:r.position.left-l.left),f&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=i.helper?o.left:0),a.top<(r._helper?o.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-o.top:r.position.top),f&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?o.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top;var h=Math.abs((r._helper?r.offset.left-l.left:r.offset.left-l.left)+r.sizeDiff.width),p=Math.abs((r._helper?r.offset.top-l.top:r.offset.top-o.top)+r.sizeDiff.height),d=r.containerElement.get(0)==r.element.parent().get(0),v=/relative|absolute/.test(r.containerElement.css("position"));d&&v&&(h-=r.parentData.left),h+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-h,f&&(r.size.height=r.size.width/r.aspectRatio)),p+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-p,f&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.position,o=r.containerOffset,u=r.containerPosition,a=r.containerElement,f=e(r.helper),l=f.offset(),c=f.outerWidth()-r.sizeDiff.width,h=f.outerHeight()-r.sizeDiff.height;r._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:c,height:h}),r._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:c,height:h})}}),e.ui.plugin.add("resizable","ghost",{start:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size;r.ghost=r.originalElement.clone(),r.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof i.ghost=="string"?i.ghost:""),r.ghost.appendTo(r.helper)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.ghost.css({position:"relative",height:r.size.height,width:r.size.width})},stop:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.helper&&r.helper.get(0).removeChild(r.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size,o=r.originalSize,u=r.originalPosition,a=r.axis,f=i._aspectRatio||t.shiftKey;i.grid=typeof i.grid=="number"?[i.grid,i.grid]:i.grid;var l=Math.round((s.width-o.width)/(i.grid[0]||1))*(i.grid[0]||1),c=Math.round((s.height-o.height)/(i.grid[1]||1))*(i.grid[1]||1);/^(se|s|e)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c):/^(ne)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c,r.position.top=u.top-c):/^(sw)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c,r.position.left=u.left-l):(r.size.width=o.width+l,r.size.height=o.height+c,r.position.top=u.top-c,r.position.left=u.left-l)}});var n=function(e){return parseInt(e,10)||0},r=function(e){return!isNaN(parseInt(e,10))}}(jQuery),function(e,t){e.widget("ui.sortable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?e.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){t==="disabled"?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(t);var i=null,s=e(t.target).parents().each(function(){if(e.data(this,r.widgetName+"-item")==r)return i=e(this),!1});e.data(t.target,r.widgetName+"-item")==r&&(i=e(t.target));if(!i)return!1;if(this.options.handle&&!n){var o=!1;e(this.options.handle,i).find("*").andSelf().each(function(){this==t.target&&(o=!0)});if(!o)return!1}return this.currentItem=i,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),i.containment&&this._setContainment(),i.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",i.cursor)),i.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",i.opacity)),i.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",i.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(var s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var n=this.options,r=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-e(document).scrollTop()<n.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),t.pageX-e(document).scrollLeft()<n.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var i=this.items.length-1;i>=0;i--){var s=this.items[i],o=s.item[0],u=this._intersectsWithPointer(s);if(!u)continue;if(s.instance!==this.currentContainer)continue;if(o!=this.currentItem[0]&&this.placeholder[u==1?"next":"prev"]()[0]!=o&&!e.contains(this.placeholder[0],o)&&(this.options.type=="semi-dynamic"?!e.contains(this.element[0],o):!0)){this.direction=u==1?"down":"up";if(this.options.tolerance!="pointer"&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&r+f<a&&t+l>s&&t+l<o;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(t){var n=this.options.axis==="x"||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),r=this.options.axis==="y"||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=n&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&o=="right"||s=="down"?2:1:s&&(s=="down"?2:1):!1},_intersectsWithSides:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),r=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?s=="right"&&r||s=="left"&&!r:i&&(i=="down"&&n||i=="up"&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!=0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!=0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n=[],r=[],i=this._connectWith();if(i&&t)for(var s=i.length-1;s>=0;s--){var o=e(i[s]);for(var u=o.length-1;u>=0;u--){var a=e.data(o[u],this.widgetName);a&&a!=this&&!a.options.disabled&&r.push([e.isFunction(a.options.items)?a.options.items.call(a.element):e(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a])}}r.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var s=r.length-1;s>=0;s--)r[s][0].each(function(){n.push(this)});return e(n)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]==e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n=this.items,r=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],i=this._connectWith();if(i&&this.ready)for(var s=i.length-1;s>=0;s--){var o=e(i[s]);for(var u=o.length-1;u>=0;u--){var a=e.data(o[u],this.widgetName);a&&a!=this&&!a.options.disabled&&(r.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a))}}for(var s=r.length-1;s>=0;s--){var f=r[s][1],l=r[s][0];for(var u=0,c=l.length;u<c;u++){var h=e(l[u]);h.data(this.widgetName+"-item",f),n.push({item:h,instance:f,width:0,height:0,left:0,top:0})}}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var n=this.items.length-1;n>=0;n--){var r=this.items[n];if(r.instance!=this.currentContainer&&this.currentContainer&&r.item[0]!=this.currentItem[0])continue;var i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item;t||(r.width=i.outerWidth(),r.height=i.outerHeight());var s=i.offset();r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var n=this.containers.length-1;n>=0;n--){var s=this.containers[n].element.offset();this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}return this},_createPlaceholder:function(t){t=t||this;var n=t.options;if(!n.placeholder||n.placeholder.constructor==String){var r=n.placeholder;n.placeholder={element:function(){var n=e(document.createElement(t.currentItem[0].nodeName)).addClass(r||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return r||(n.style.visibility="hidden"),n},update:function(e,i){if(r&&!n.forcePlaceholderSize)return;i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}}}t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var n=null,r=null;for(var i=this.containers.length-1;i>=0;i--){if(e.contains(this.currentItem[0],this.containers[i].element[0]))continue;if(this._intersectsWith(this.containers[i].containerCache)){if(n&&e.contains(this.containers[i].element[0],n.element[0]))continue;n=this.containers[i],r=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0)}if(!n)return;if(this.containers.length===1)this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1;else{var s=1e4,o=null,u=this.containers[r].floating?"left":"top",a=this.containers[r].floating?"width":"height",f=this.positionAbs[u]+this.offset.click[u];for(var l=this.items.length-1;l>=0;l--){if(!e.contains(this.containers[r].element[0],this.items[l].item[0]))continue;if(this.items[l].item[0]==this.currentItem[0])continue;var c=this.items[l].item.offset()[u],h=!1;Math.abs(c-f)>Math.abs(c+this.items[l][a]-f)&&(h=!0,c+=this.items[l][a]),Math.abs(c-f)<s&&(s=Math.abs(c-f),o=this.items[l],this.direction=h?"up":"down")}if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[r],o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[r].element,!0),this._trigger("change",t,this._uiHash()),this.containers[r]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper=="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(r[0].style.width==""||n.forceHelperSize)&&r.width(this.currentItem.width()),(r[0].style.height==""||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)){var n=e(t.containment)[0],r=e(t.containment).offset(),i=e(n).css("overflow")!="hidden";this.containment=[r.left+(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0)-this.margins.top,r.left+(i?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(i?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var s=t.pageX,o=t.pageY;if(this.originalPosition){this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top));if(n.grid){var u=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1];o=this.containment?u-this.offset.click.top<this.containment[1]||u-this.offset.click.top>this.containment[3]?u-this.offset.click.top<this.containment[1]?u+n.grid[1]:u-n.grid[1]:u:u;var a=this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0];s=this.containment?a-this.offset.click.left<this.containment[0]||a-this.offset.click.left>this.containment[2]?a-this.offset.click.left<this.containment[0]?a+n.grid[0]:a-n.grid[0]:a:a}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i==this.counter&&this.refreshPositions(!r)})},_clear:function(t,n){this.reverting=!1;var r=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var i in this._storedCSS)if(this._storedCSS[i]=="auto"||this._storedCSS[i]=="static")this._storedCSS[i]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!n&&r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(n||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(var i=this.containers.length-1;i>=0;i--)n||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(var i=0;i<r.length;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!n){for(var i=0;i<r.length;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(jQuery),jQuery.effects||function(e,t){var n=e.uiBackCompat!==!1,r="ui-effects-";e.effects={effect:{}},function(t,n){function p(e,t,n){var r=a[t.type]||{};return e==null?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:r.max<e?r.max:e)}function d(e){var n=o(),r=n._rgba=[];return e=e.toLowerCase(),h(s,function(t,i){var s,o=i.re.exec(e),a=o&&i.parse(o),f=i.space||"rgba";if(a)return s=n[f](a),n[u[f].cache]=s[u[f].cache],r=n._rgba=s._rgba,!1}),r.length?(r.join()==="0,0,0,0"&&t.extend(r,c.transparent),n):c[e]}function v(e,t,n){return n=(n+1)%1,n*6<1?e+(t-e)*n*6:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}var r="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),i=/^([\-+])=\s*(\d+\.?\d*)/,s=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1]*2.55,e[2]*2.55,e[3]*2.55,e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],o=t.Color=function(e,n,r,i){return new t.Color.fn.parse(e,n,r,i)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},a={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},f=o.support={},l=t("<p>")[0],c,h=t.each;l.style.cssText="background-color:rgba(1,1,1,.5)",f.rgba=l.style.backgroundColor.indexOf("rgba")>-1,h(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),o.fn=t.extend(o.prototype,{parse:function(r,i,s,a){if(r===n)return this._rgba=[null,null,null,null],this;if(r.jquery||r.nodeType)r=t(r).css(i),i=n;var f=this,l=t.type(r),v=this._rgba=[];i!==n&&(r=[r,i,s,a],l="array");if(l==="string")return this.parse(d(r)||c._default);if(l==="array")return h(u.rgba.props,function(e,t){v[t.idx]=p(r[t.idx],t)}),this;if(l==="object")return r instanceof o?h(u,function(e,t){r[t.cache]&&(f[t.cache]=r[t.cache].slice())}):h(u,function(t,n){var i=n.cache;h(n.props,function(e,t){if(!f[i]&&n.to){if(e==="alpha"||r[e]==null)return;f[i]=n.to(f._rgba)}f[i][t.idx]=p(r[e],t,!0)}),f[i]&&e.inArray(null,f[i].slice(0,3))<0&&(f[i][3]=1,n.from&&(f._rgba=n.from(f[i])))}),this},is:function(e){var t=o(e),n=!0,r=this;return h(u,function(e,i){var s,o=t[i.cache];return o&&(s=r[i.cache]||i.to&&i.to(r._rgba)||[],h(i.props,function(e,t){if(o[t.idx]!=null)return n=o[t.idx]===s[t.idx],n})),n}),n},_space:function(){var e=[],t=this;return h(u,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var n=o(e),r=n._space(),i=u[r],s=this.alpha()===0?o("transparent"):this,f=s[i.cache]||i.to(s._rgba),l=f.slice();return n=n[i.cache],h(i.props,function(e,r){var i=r.idx,s=f[i],o=n[i],u=a[r.type]||{};if(o===null)return;s===null?l[i]=o:(u.mod&&(o-s>u.mod/2?s+=u.mod:s-o>u.mod/2&&(s-=u.mod)),l[i]=p((o-s)*t+s,r))}),this[r](l)},blend:function(e){if(this._rgba[3]===1)return this;var n=this._rgba.slice(),r=n.pop(),i=o(e)._rgba;return o(t.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var e="rgba(",n=t.map(this._rgba,function(e,t){return e==null?t>2?1:0:e});return n[3]===1&&(n.pop(),e="rgb("),e+n.join()+")"},toHslaString:function(){var e="hsla(",n=t.map(this.hsla(),function(e,t){return e==null&&(e=t>2?1:0),t&&t<3&&(e=Math.round(e*100)+"%"),e});return n[3]===1&&(n.pop(),e="hsl("),e+n.join()+")"},toHexString:function(e){var n=this._rgba.slice(),r=n.pop();return e&&n.push(~~(r*255)),"#"+t.map(n,function(e){return e=(e||0).toString(16),e.length===1?"0"+e:e}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),o.fn.parse.prototype=o.fn,u.hsla.to=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=e[3],s=Math.max(t,n,r),o=Math.min(t,n,r),u=s-o,a=s+o,f=a*.5,l,c;return o===s?l=0:t===s?l=60*(n-r)/u+360:n===s?l=60*(r-t)/u+120:l=60*(t-n)/u+240,f===0||f===1?c=f:f<=.5?c=u/a:c=u/(2-a),[Math.round(l)%360,c,f,i==null?1:i]},u.hsla.from=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],i=e[3],s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;return[Math.round(v(o,s,t+1/3)*255),Math.round(v(o,s,t)*255),Math.round(v(o,s,t-1/3)*255),i]},h(u,function(e,r){var s=r.props,u=r.cache,a=r.to,f=r.from;o.fn[e]=function(e){a&&!this[u]&&(this[u]=a(this._rgba));if(e===n)return this[u].slice();var r,i=t.type(e),l=i==="array"||i==="object"?e:arguments,c=this[u].slice();return h(s,function(e,t){var n=l[i==="object"?e:t.idx];n==null&&(n=c[t.idx]),c[t.idx]=p(n,t)}),f?(r=o(f(c)),r[u]=c,r):o(c)},h(s,function(n,r){if(o.fn[n])return;o.fn[n]=function(s){var o=t.type(s),u=n==="alpha"?this._hsla?"hsla":"rgba":e,a=this[u](),f=a[r.idx],l;return o==="undefined"?f:(o==="function"&&(s=s.call(this,f),o=t.type(s)),s==null&&r.empty?this:(o==="string"&&(l=i.exec(s),l&&(s=f+parseFloat(l[2])*(l[1]==="+"?1:-1))),a[r.idx]=s,this[u](a)))}})}),h(r,function(e,n){t.cssHooks[n]={set:function(e,r){var i,s,u="";if(t.type(r)!=="string"||(i=d(r))){r=o(i||r);if(!f.rgba&&r._rgba[3]!==1){s=n==="backgroundColor"?e.parentNode:e;while((u===""||u==="transparent")&&s&&s.style)try{u=t.css(s,"backgroundColor"),s=s.parentNode}catch(a){}r=r.blend(u&&u!=="transparent"?u:"_default")}r=r.toRgbaString()}try{e.style[n]=r}catch(l){}}},t.fx.step[n]=function(e){e.colorInit||(e.start=o(e.elem,n),e.end=o(e.end),e.colorInit=!0),t.cssHooks[n].set(e.elem,e.start.transition(e.end,e.pos))}}),t.cssHooks.borderColor={expand:function(e){var t={};return h(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},c=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(){var t=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,n={},r,i;if(t&&t.length&&t[0]&&t[t[0]]){i=t.length;while(i--)r=t[i],typeof t[r]=="string"&&(n[e.camelCase(r)]=t[r])}else for(r in t)typeof t[r]=="string"&&(n[r]=t[r]);return n}function s(t,n){var i={},s,o;for(s in n)o=n[s],t[s]!==o&&!r[s]&&(e.fx.step[s]||!isNaN(parseFloat(o)))&&(i[s]=o);return i}var n=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){if(e.end!=="none"&&!e.setAttr||e.pos===1&&!e.setAttr)jQuery.style(e.elem,n,e.end),e.setAttr=!0}}),e.effects.animateClass=function(t,r,o,u){var a=e.speed(r,o,u);return this.queue(function(){var r=e(this),o=r.attr("class")||"",u,f=a.children?r.find("*").andSelf():r;f=f.map(function(){var t=e(this);return{el:t,start:i.call(this)}}),u=function(){e.each(n,function(e,n){t[n]&&r[n+"Class"](t[n])})},u(),f=f.map(function(){return this.end=i.call(this.el[0]),this.diff=s(this.start,this.end),this}),r.attr("class",o),f=f.map(function(){var t=this,n=e.Deferred(),r=jQuery.extend({},a,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,r),n.promise()}),e.when.apply(e,f.get()).done(function(){u(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),a.complete.call(r[0])})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,n,r,i){return n?e.effects.animateClass.call(this,{add:t},n,r,i):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,n,r,i){return n?e.effects.animateClass.call(this,{remove:t},n,r,i):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(n,r,i,s,o){return typeof r=="boolean"||r===t?i?e.effects.animateClass.call(this,r?{add:n}:{remove:n},i,s,o):this._toggleClass(n,r):e.effects.animateClass.call(this,{toggle:n},r,i,s)},switchClass:function(t,n,r,i,s){return e.effects.animateClass.call(this,{add:n,remove:t},r,i,s)}})}(),function(){function i(t,n,r,i){e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},n==null&&(n={}),e.isFunction(n)&&(i=n,r=null,n={});if(typeof n=="number"||e.fx.speeds[n])i=r,r=n,n={};return e.isFunction(r)&&(i=r,r=null),n&&e.extend(t,n),r=r||n.duration,t.duration=e.fx.off?0:typeof r=="number"?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,t.complete=i||n.complete,t}function s(t){return!t||typeof t=="number"||e.fx.speeds[t]?!0:typeof t=="string"&&!e.effects.effect[t]?n&&e.effects[t]?!1:!0:!1}e.extend(e.effects,{version:"1.9.2",save:function(e,t){for(var n=0;n<t.length;n++)t[n]!==null&&e.data(r+t[n],e[0].style[t[n]])},restore:function(e,n){var i,s;for(s=0;s<n.length;s++)n[s]!==null&&(i=e.data(r+n[s]),i===t&&(i=""),e.css(n[s],i))},setMode:function(e,t){return t==="toggle"&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(o){s=document.body}return t.wrap(r),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),r=t.parent(),t.css("position")==="static"?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),r.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(){function a(n){function u(){e.isFunction(i)&&i.call(r[0]),e.isFunction(n)&&n()}var r=e(this),i=t.complete,s=t.mode;(r.is(":hidden")?s==="hide":s==="show")?u():o.call(r[0],t,u)}var t=i.apply(this,arguments),r=t.mode,s=t.queue,o=e.effects.effect[t.effect],u=!o&&n&&e.effects[t.effect];return e.fx.off||!o&&!u?r?this[r](t.duration,t.complete):this.each(function(){t.complete&&t.complete.call(this)}):o?s===!1?this.each(a):this.queue(s||"fx",a):u.call(this,{options:t,duration:t.duration,callback:t.complete,mode:t.mode})},_show:e.fn.show,show:function(e){if(s(e))return this._show.apply(this,arguments);var t=i.apply(this,arguments);return t.mode="show",this.effect.call(this,t)},_hide:e.fn.hide,hide:function(e){if(s(e))return this._hide.apply(this,arguments);var t=i.apply(this,arguments);return t.mode="hide",this.effect.call(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(s(t)||typeof t=="boolean"||e.isFunction(t))return this.__toggle.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)},cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,n=4;while(e<((t=Math.pow(2,--n))-1)/11);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?n(e*2)/2:1-n(e*-2+2)/2}})}()}(jQuery),function(e,t){var n=/up|down|vertical/,r=/up|left|vertical|horizontal/;e.effects.effect.blind=function(t,i){var s=e(this),o=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(s,t.mode||"hide"),a=t.direction||"up",f=n.test(a),l=f?"height":"width",c=f?"top":"left",h=r.test(a),p={},d=u==="show",v,m,g;s.parent().is(".ui-effects-wrapper")?e.effects.save(s.parent(),o):e.effects.save(s,o),s.show(),v=e.effects.createWrapper(s).css({overflow:"hidden"}),m=v[l](),g=parseFloat(v.css(c))||0,p[l]=d?m:0,h||(s.css(f?"bottom":"right",0).css(f?"top":"left","auto").css({position:"absolute"}),p[c]=d?g:m+g),d&&(v.css(l,0),h||v.css(c,g+m)),v.animate(p,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){u==="hide"&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),i()}})}}(jQuery),function(e,t){e.effects.effect.bounce=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=s==="hide",u=s==="show",a=t.direction||"up",f=t.distance,l=t.times||5,c=l*2+(u||o?1:0),h=t.duration/c,p=t.easing,d=a==="up"||a==="down"?"top":"left",v=a==="up"||a==="left",m,g,y,b=r.queue(),w=b.length;(u||o)&&i.push("opacity"),e.effects.save(r,i),r.show(),e.effects.createWrapper(r),f||(f=r[d==="top"?"outerHeight":"outerWidth"]()/3),u&&(y={opacity:1},y[d]=0,r.css("opacity",0).css(d,v?-f*2:f*2).animate(y,h,p)),o&&(f/=Math.pow(2,l-1)),y={},y[d]=0;for(m=0;m<l;m++)g={},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p).animate(y,h,p),f=o?f*2:f/2;o&&(g={opacity:0},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p)),r.queue(function(){o&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,c+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.clip=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"vertical",a=u==="vertical",f=a?"height":"width",l=a?"top":"left",c={},h,p,d;e.effects.save(r,i),r.show(),h=e.effects.createWrapper(r).css({overflow:"hidden"}),p=r[0].tagName==="IMG"?h:r,d=p[f](),o&&(p.css(f,0),p.css(l,d/2)),c[f]=o?d:0,c[l]=o?0:d/2,p.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o||r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e,t){e.effects.effect.drop=function(t,n){var r=e(this),i=["position","top","bottom","left","right","opacity","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left"?"pos":"neg",l={opacity:o?1:0},c;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),c=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0)/2,o&&r.css("opacity",0).css(a,f==="pos"?-c:c),l[a]=(o?f==="pos"?"+=":"-=":f==="pos"?"-=":"+=")+c,r.animate(l,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e,t){e.effects.effect.explode=function(t,n){function y(){c.push(this),c.length===r*i&&b()}function b(){s.css({visibility:"visible"}),e(c).remove(),u||s.hide(),n()}var r=t.pieces?Math.round(Math.sqrt(t.pieces)):3,i=r,s=e(this),o=e.effects.setMode(s,t.mode||"hide"),u=o==="show",a=s.show().css("visibility","hidden").offset(),f=Math.ceil(s.outerWidth()/i),l=Math.ceil(s.outerHeight()/r),c=[],h,p,d,v,m,g;for(h=0;h<r;h++){v=a.top+h*l,g=h-(r-1)/2;for(p=0;p<i;p++)d=a.left+p*f,m=p-(i-1)/2,s.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-p*f,top:-h*l}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:f,height:l,left:d+(u?m*f:0),top:v+(u?g*l:0),opacity:u?0:1}).animate({left:d+(u?0:m*f),top:v+(u?0:g*l),opacity:u?1:0},t.duration||500,t.easing,y)}}}(jQuery),function(e,t){e.effects.effect.fade=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"toggle");r.animate({opacity:i},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}}(jQuery),function(e,t){e.effects.effect.fold=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=s==="hide",a=t.size||15,f=/([0-9]+)%/.exec(a),l=!!t.horizFirst,c=o!==l,h=c?["width","height"]:["height","width"],p=t.duration/2,d,v,m={},g={};e.effects.save(r,i),r.show(),d=e.effects.createWrapper(r).css({overflow:"hidden"}),v=c?[d.width(),d.height()]:[d.height(),d.width()],f&&(a=parseInt(f[1],10)/100*v[u?0:1]),o&&d.css(l?{height:0,width:a}:{height:a,width:0}),m[h[0]]=o?v[0]:a,g[h[1]]=o?v[1]:0,d.animate(m,p,t.easing).animate(g,p,t.easing,function(){u&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()})}}(jQuery),function(e,t){e.effects.effect.highlight=function(t,n){var r=e(this),i=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(r,t.mode||"show"),o={backgroundColor:r.css("backgroundColor")};s==="hide"&&(o.opacity=0),e.effects.save(r,i),r.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),n()}})}}(jQuery),function(e,t){e.effects.effect.pulsate=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"show"),s=i==="show",o=i==="hide",u=s||i==="hide",a=(t.times||5)*2+(u?1:0),f=t.duration/a,l=0,c=r.queue(),h=c.length,p;if(s||!r.is(":visible"))r.css("opacity",0).show(),l=1;for(p=1;p<a;p++)r.animate({opacity:l},f,t.easing),l=1-l;r.animate({opacity:l},f,t.easing),r.queue(function(){o&&r.hide(),n()}),h>1&&c.splice.apply(c,[1,0].concat(c.splice(h,a+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.puff=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"hide"),s=i==="hide",o=parseInt(t.percent,10)||150,u=o/100,a={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:i,complete:n,percent:s?o:100,from:s?a:{height:a.height*u,width:a.width*u,outerHeight:a.outerHeight*u,outerWidth:a.outerWidth*u}}),r.effect(t)},e.effects.effect.scale=function(t,n){var r=e(this),i=e.extend(!0,{},t),s=e.effects.setMode(r,t.mode||"effect"),o=parseInt(t.percent,10)||(parseInt(t.percent,10)===0?0:s==="hide"?0:100),u=t.direction||"both",a=t.origin,f={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},l={y:u!=="horizontal"?o/100:1,x:u!=="vertical"?o/100:1};i.effect="size",i.queue=!1,i.complete=n,s!=="effect"&&(i.origin=a||["middle","center"],i.restore=!0),i.from=t.from||(s==="show"?{height:0,width:0,outerHeight:0,outerWidth:0}:f),i.to={height:f.height*l.y,width:f.width*l.x,outerHeight:f.outerHeight*l.y,outerWidth:f.outerWidth*l.x},i.fade&&(s==="show"&&(i.from.opacity=0,i.to.opacity=1),s==="hide"&&(i.from.opacity=1,i.to.opacity=0)),r.effect(i)},e.effects.effect.size=function(t,n){var r,i,s,o=e(this),u=["position","top","bottom","left","right","width","height","overflow","opacity"],a=["position","top","bottom","left","right","overflow","opacity"],f=["width","height","overflow"],l=["fontSize"],c=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),d=t.restore||p!=="effect",v=t.scale||"both",m=t.origin||["middle","center"],g=o.css("position"),y=d?u:a,b={height:0,width:0,outerHeight:0,outerWidth:0};p==="show"&&o.show(),r={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},t.mode==="toggle"&&p==="show"?(o.from=t.to||b,o.to=t.from||r):(o.from=t.from||(p==="show"?b:r),o.to=t.to||(p==="hide"?b:r)),s={from:{y:o.from.height/r.height,x:o.from.width/r.width},to:{y:o.to.height/r.height,x:o.to.width/r.width}};if(v==="box"||v==="both")s.from.y!==s.to.y&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,s.from.y,o.from),o.to=e.effects.setTransition(o,c,s.to.y,o.to)),s.from.x!==s.to.x&&(y=y.concat(h),o.from=e.effects.setTransition(o,h,s.from.x,o.from),o.to=e.effects.setTransition(o,h,s.to.x,o.to));(v==="content"||v==="both")&&s.from.y!==s.to.y&&(y=y.concat(l).concat(f),o.from=e.effects.setTransition(o,l,s.from.y,o.from),o.to=e.effects.setTransition(o,l,s.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),m&&(i=e.effects.getBaseline(m,r),o.from.top=(r.outerHeight-o.outerHeight())*i.y,o.from.left=(r.outerWidth-o.outerWidth())*i.x,o.to.top=(r.outerHeight-o.to.outerHeight)*i.y,o.to.left=(r.outerWidth-o.to.outerWidth)*i.x),o.css(o.from);if(v==="content"||v==="both")c=c.concat(["marginTop","marginBottom"]).concat(l),h=h.concat(["marginLeft","marginRight"]),f=u.concat(c).concat(h),o.find("*[width]").each(function(){var n=e(this),r={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};d&&e.effects.save(n,f),n.from={height:r.height*s.from.y,width:r.width*s.from.x,outerHeight:r.outerHeight*s.from.y,outerWidth:r.outerWidth*s.from.x},n.to={height:r.height*s.to.y,width:r.width*s.to.x,outerHeight:r.height*s.to.y,outerWidth:r.width*s.to.x},s.from.y!==s.to.y&&(n.from=e.effects.setTransition(n,c,s.from.y,n.from),n.to=e.effects.setTransition(n,c,s.to.y,n.to)),s.from.x!==s.to.x&&(n.from=e.effects.setTransition(n,h,s.from.x,n.from),n.to=e.effects.setTransition(n,h,s.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.easing,function(){d&&e.effects.restore(n,f)})});o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o.to.opacity===0&&o.css("opacity",o.from.opacity),p==="hide"&&o.hide(),e.effects.restore(o,y),d||(g==="static"?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,n){var r=parseInt(n,10),i=e?o.to.left:o.to.top;return n==="auto"?i+"px":r+i+"px"})})),e.effects.removeWrapper(o),n()}})}}(jQuery),function(e,t){e.effects.effect.shake=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=t.direction||"left",u=t.distance||20,a=t.times||3,f=a*2+1,l=Math.round(t.duration/f),c=o==="up"||o==="down"?"top":"left",h=o==="up"||o==="left",p={},d={},v={},m,g=r.queue(),y=g.length;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),p[c]=(h?"-=":"+=")+u,d[c]=(h?"+=":"-=")+u*2,v[c]=(h?"-=":"+=")+u*2,r.animate(p,l,t.easing);for(m=1;m<a;m++)r.animate(d,l,t.easing).animate(v,l,t.easing);r.animate(d,l,t.easing).animate(p,l/2,t.easing).queue(function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),y>1&&g.splice.apply(g,[1,0].concat(g.splice(y,f+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.slide=function(t,n){var r=e(this),i=["position","top","bottom","left","right","width","height"],s=e.effects.setMode(r,t.mode||"show"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left",l,c={};e.effects.save(r,i),r.show(),l=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),o&&r.css(a,f?isNaN(l)?"-"+l:-l:l),c[a]=(o?f?"+=":"-=":f?"-=":"+=")+l,r.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e,t){e.effects.effect.transfer=function(t,n){var r=e(this),i=e(t.to),s=i.css("position")==="fixed",o=e("body"),u=s?o.scrollTop():0,a=s?o.scrollLeft():0,f=i.offset(),l={top:f.top-u,left:f.left-a,height:i.innerHeight(),width:i.innerWidth()},c=r.offset(),h=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.className).css({top:c.top-u,left:c.left-a,height:r.innerHeight(),width:r.innerWidth(),position:s?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){h.remove(),n()})}}(jQuery),define("jqueryui",function(){}),define("bootstrap",["jquery"],function(e){!function(e){e(function(){e.support.transition=function(){var e=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n;for(n in t)if(e.style[n]!==undefined)return t[n]}();return e&&{end:e}}()})}(window.jQuery),!function(e){var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function s(){i.trigger("closed").remove()}var n=e(this),r=n.attr("data-target"),i;r||(r=n.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),i=e(r),t&&t.preventDefault(),i.length||(i=n.hasClass("alert")?n:n.parent()),i.trigger(t=e.Event("close"));if(t.isDefaultPrevented())return;i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.on(e.support.transition.end,s):s()};var r=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var r=e(this),i=r.data("alert");i||r.data("alert",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=r,this},e(document).on("click.alert.data-api",t,n.prototype.close)}(window.jQuery),!function(e){var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,n)};t.prototype.setState=function(e){var t="disabled",n=this.$element,r=n.data(),i=n.is("input")?"val":"html";e+="Text",r.resetText||n.data("resetText",n[i]()),n[i](r[e]||this.options[e]),setTimeout(function(){e=="loadingText"?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=function(n){return this.each(function(){var r=e(this),i=r.data("button"),s=typeof n=="object"&&n;i||r.data("button",i=new t(this,s)),n=="toggle"?i.toggle():n&&i.setState(n)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})}(window.jQuery),!function(e){var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.options.pause=="hover"&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.prototype={cycle:function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(t){var n=this.getActiveIndex(),r=this;if(t>this.$items.length-1||t<0)return;return this.sliding?this.$element.one("slid",function(){r.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",e(this.$items[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(t,n){var r=this.$element.find(".item.active"),i=n||r[t](),s=this.interval,o=t=="next"?"left":"right",u=t=="next"?"first":"last",a=this,f;this.sliding=!0,s&&this.pause(),i=i.length?i:this.$element.find(".item")[u](),f=e.Event("slide",{relatedTarget:i[0],direction:o});if(i.hasClass("active"))return;this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var t=e(a.$indicators.children()[a.getActiveIndex()]);t&&t.addClass("active")}));if(e.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(f);if(f.isDefaultPrevented())return;i.addClass(t),i[0].offsetWidth,r.addClass(o),i.addClass(o),this.$element.one(e.support.transition.end,function(){i.removeClass([t,o].join(" ")).addClass("active"),r.removeClass(["active",o].join(" ")),a.sliding=!1,setTimeout(function(){a.$element.trigger("slid")},0)})}else{this.$element.trigger(f);if(f.isDefaultPrevented())return;r.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return s&&this.cycle(),this}};var n=e.fn.carousel;e.fn.carousel=function(n){return this.each(function(){var r=e(this),i=r.data("carousel"),s=e.extend({},e.fn.carousel.defaults,typeof n=="object"&&n),o=typeof n=="string"?n:s.slide;i||r.data("carousel",i=new t(this,s)),typeof n=="number"?i.to(n):o?i[o]():s.interval&&i.pause().cycle()})},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this},e(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(t){var n=e(this),r,i=e(n.attr("data-target")||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")),s=e.extend({},i.data(),n.data()),o;i.carousel(s),(o=n.attr("data-slide-to"))&&i.data("carousel").pause().to(o).cycle(),t.preventDefault()})}(window.jQuery),!function(e){var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,n),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,n,r,i;if(this.transitioning||this.$element.hasClass("in"))return;t=this.dimension(),n=e.camelCase(["scroll",t].join("-")),r=this.$parent&&this.$parent.find("> .accordion-group > .in");if(r&&r.length){i=r.data("collapse");if(i&&i.transitioning)return;r.collapse("hide"),i||r.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][n])},hide:function(){var t;if(this.transitioning||!this.$element.hasClass("in"))return;t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0)},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[e!==null?"addClass":"removeClass"]("collapse"),this},transition:function(t,n,r){var i=this,s=function(){n.type=="show"&&i.reset(),i.transitioning=0,i.$element.trigger(r)};this.$element.trigger(n);if(n.isDefaultPrevented())return;this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,s):s()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var r=e(this),i=r.data("collapse"),s=e.extend({},e.fn.collapse.defaults,r.data(),typeof n=="object"&&n);i||r.data("collapse",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.collapse.data-api","[data-toggle=collapse]",function(t){var n=e(this),r,i=n.attr("data-target")||t.preventDefault()||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""),s=e(i).data("collapse")?"toggle":n.data();n[e(i).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(i).collapse(s)})}(window.jQuery),!function(e){function r(){e(".dropdown-backdrop").remove(),e(t).each(function(){i(e(this)).removeClass("open")})}function i(t){var n=t.attr("data-target"),r;n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),r=n&&e(n);if(!r||!r.length)r=t.parent();return r}var t="[data-toggle=dropdown]",n=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};n.prototype={constructor:n,toggle:function(t){var n=e(this),s,o;if(n.is(".disabled, :disabled"))return;return s=i(n),o=s.hasClass("open"),r(),o||("ontouchstart"in document.documentElement&&e('<div class="dropdown-backdrop"/>').insertBefore(e(this)).on("click",r),s.toggleClass("open")),n.focus(),!1},keydown:function(n){var r,s,o,u,a,f;if(!/(38|40|27)/.test(n.keyCode))return;r=e(this),n.preventDefault(),n.stopPropagation();if(r.is(".disabled, :disabled"))return;u=i(r),a=u.hasClass("open");if(!a||a&&n.keyCode==27)return n.which==27&&u.find(t).focus(),r.click();s=e("[role=menu] li:not(.divider):visible a",u);if(!s.length)return;f=s.index(s.filter(":focus")),n.keyCode==38&&f>0&&f--,n.keyCode==40&&f<s.length-1&&f++,~f||(f=0),s.eq(f).focus()}};var s=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var r=e(this),i=r.data("dropdown");i||r.data("dropdown",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.dropdown.Constructor=n,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.dropdown.data-api",r).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api",t,n.prototype.toggle).on("keydown.dropdown.data-api",t+", [role=menu]",n.prototype.keydown)}(window.jQuery),!function(e){var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n);if(this.isShown||n.isDefaultPrevented())return;this.isShown=!0,this.escape(),this.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),n?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")})},hide:function(t){t&&t.preventDefault();var n=this;t=e.Event("hide"),this.$element.trigger(t);if(!this.isShown||t.isDefaultPrevented())return;this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]!==e.target&&!t.$element.has(e.target).length&&t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){t.which==27&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&r;this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.$backdrop.click(this.options.backdrop=="static"?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in");if(!t)return;i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t):t()):t&&t()}};var n=e.fn.modal;e.fn.modal=function(n){return this.each(function(){var r=e(this),i=r.data("modal"),s=e.extend({},e.fn.modal.defaults,r.data(),typeof n=="object"&&n);i||r.data("modal",i=new t(this,s)),typeof n=="string"?i[n]():s.show&&i.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r=n.attr("href"),i=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},i.data(),n.data());t.preventDefault(),i.modal(s).one("hide",function(){n.focus()})})}(window.jQuery),!function(e){var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,r){var i,s,o,u,a;this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.enabled=!0,o=this.options.trigger.split(" ");for(a=o.length;a--;)u=o[a],u=="click"?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):u!="manual"&&(i=u=="hover"?"mouseenter":"focus",s=u=="hover"?"mouseleave":"blur",this.$element.on(i+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=e.fn[this.type].defaults,r={},i;this._options&&e.each(this._options,function(e,t){n[e]!=t&&(r[e]=t)},this),i=e(t.currentTarget)[this.type](r).data(this.type);if(!i.options.delay||!i.options.delay.show)return i.show();clearTimeout(this.timeout),i.hoverState="in",this.timeout=setTimeout(function(){i.hoverState=="in"&&i.show()},i.options.delay.show)},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!n.options.delay||!n.options.delay.hide)return n.hide();n.hoverState="out",this.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},show:function(){var t,n,r,i,s,o,u=e.Event("show");if(this.hasContent()&&this.enabled){this.$element.trigger(u);if(u.isDefaultPrevented())return;t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),s=typeof this.options.placement=="function"?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),n=this.getPosition(),r=t[0].offsetWidth,i=t[0].offsetHeight;switch(s){case"bottom":o={top:n.top+n.height,left:n.left+n.width/2-r/2};break;case"top":o={top:n.top-i,left:n.left+n.width/2-r/2};break;case"left":o={top:n.top+n.height/2-i/2,left:n.left-r};break;case"right":o={top:n.top+n.height/2-i/2,left:n.left+n.width}}this.applyPlacement(o,s),this.$element.trigger("shown")}},applyPlacement:function(e,t){var n=this.tip(),r=n[0].offsetWidth,i=n[0].offsetHeight,s,o,u,a;n.offset(e).addClass(t).addClass("in"),s=n[0].offsetWidth,o=n[0].offsetHeight,t=="top"&&o!=i&&(e.top=e.top+i-o,a=!0),t=="bottom"||t=="top"?(u=0,e.left<0&&(u=e.left*-2,e.left=0,n.offset(e),s=n[0].offsetWidth,o=n[0].offsetHeight),this.replaceArrow(u-r+s,s,"left")):this.replaceArrow(o-i,o,"top"),a&&n.offset(e)},replaceArrow:function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function i(){var t=setTimeout(function(){n.off(e.support.transition.end).detach()},500);n.one(e.support.transition.end,function(){clearTimeout(t),n.detach()})}var t=this,n=this.tip(),r=e.Event("hide");this.$element.trigger(r);if(r.isDefaultPrevented())return;return n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?i():n.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},typeof t.getBoundingClientRect=="function"?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title),e},tip:function(){return this.$tip=this.$tip||e(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var n=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;n.tip().hasClass("in")?n.hide():n.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("tooltip"),s=typeof n=="object"&&n;i||r.data("tooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(window.jQuery),!function(e){var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"html":"text"](n),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,n=this.options;return e=(typeof n.content=="function"?n.content.call(t[0]):n.content)||t.attr("data-content"),e},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var r=e(this),i=r.data("popover"),s=typeof n=="object"&&n;i||r.data("popover",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(window.jQuery),!function(e){function t(t,n){var r=e.proxy(this.process,this),i=e(t).is("body")?e(window):e(t),s;this.options=e.extend({},e.fn.scrollspy.defaults,n),this.$scrollElement=i.on("scroll.scroll-spy.data-api",r),this.selector=(this.options.target||(s=e(t).attr("href"))&&s.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=e("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t=this,n;this.offsets=e([]),this.targets=e([]),n=this.$body.find(this.selector).map(function(){var n=e(this),r=n.data("target")||n.attr("href"),i=/^#\w/.test(r)&&e(r);return i&&i.length&&[[i.position().top+(!e.isWindow(t.$scrollElement.get(0))&&t.$scrollElement.scrollTop()),r]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},process:function(){var e=this.$scrollElement.scrollTop()+this.options.offset,t=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=t-this.$scrollElement.height(),r=this.offsets,i=this.targets,s=this.activeTarget,o;if(e>=n)return s!=(o=i.last()[0])&&this.activate(o);for(o=r.length;o--;)s!=i[o]&&e>=r[o]&&(!r[o+1]||e<=r[o+1])&&this.activate(i[o])},activate:function(t){var n,r;this.activeTarget=t,e(this.selector).parent(".active").removeClass("active"),r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(r).parent("li").addClass("active"),n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate")}};var n=e.fn.scrollspy;e.fn.scrollspy=function(n){return this.each(function(){var r=e(this),i=r.data("scrollspy"),s=typeof n=="object"&&n;i||r.data("scrollspy",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),!function(e){var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.attr("data-target"),i,s,o;r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));if(t.parent("li").hasClass("active"))return;i=n.find(".active:last a")[0],o=e.Event("show",{relatedTarget:i}),t.trigger(o);if(o.isDefaultPrevented())return;s=e(r),this.activate(t.parent("li"),n),this.activate(s,s.parent(),function(){t.trigger({type:"shown",relatedTarget:i})})},activate:function(t,n,r){function o(){i.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),r&&r()}var i=n.find("> .active"),s=r&&e.support.transition&&i.hasClass("fade");s?i.one(e.support.transition.end,o):o(),i.removeClass("in")}};var n=e.fn.tab;e.fn.tab=function(n){return this.each(function(){var r=e(this),i=r.data("tab");i||r.data("tab",i=new t(this)),typeof n=="string"&&i[n]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(window.jQuery),!function(e){var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=e(this.options.menu),this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var n;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(n=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,n?this.process(n):this)},process:function(t){var n=this;return t=e.grep(t,function(e){return n.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){var t=[],n=[],r=[],i;while(i=e.shift())i.toLowerCase().indexOf(this.query.toLowerCase())?~i.indexOf(this.query)?n.push(i):r.push(i):t.push(i);return t.concat(n,r)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var n=this;return t=e(t).map(function(t,r){return t=e(n.options.item).attr("data-value",r),t.find("a").html(n.highlighter(r)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(t){var n=this.$menu.find(".active").removeClass("active"),r=n.next();r.length||(r=e(this.$menu.find("li")[0])),r.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last()),n.addClass("active")},listen:function(){this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this))},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t=typeof this.$element[e]=="function"),t},move:function(e){if(!this.shown)return;switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){if(this.suppressKeyPressRepeat)return;this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(e){this.focused=!0},blur:function(e){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")},mouseleave:function(e){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var n=e.fn.typeahead;e.fn.typeahead=function(n){return this.each(function(){var r=e(this),i=r.data("typeahead"),s=typeof n=="object"&&n;i||r.data("typeahead",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=n,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var n=e(this);if(n.data("typeahead"))return;n.typeahead(n.data())})}(window.jQuery),!function(e){var t=function(t,n){this.options=e.extend({},e.fn.affix.defaults,n),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)).on("click.affix.data-api",e.proxy(function(){setTimeout(e.proxy(this.checkPosition,this),1)},this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var t=e(document).height(),n=this.$window.scrollTop(),r=this.$element.offset(),i=this.options.offset,s=i.bottom,o=i.top,u="affix affix-top affix-bottom",a;typeof i!="object"&&(s=o=i),typeof o=="function"&&(o=i.top()),typeof s=="function"&&(s=i.bottom()),a=this.unpin!=null&&n+this.unpin<=r.top?!1:s!=null&&r.top+this.$element.height()>=t-s?"bottom":o!=null&&n<=o?"top":!1;if(this.affixed===a)return;this.affixed=a,this.unpin=a=="bottom"?r.top-n:null,this.$element.removeClass(u).addClass("affix"+(a?"-"+a:""))};var n=e.fn.affix;e.fn.affix=function(n){return this.each(function(){var r=e(this),i=r.data("affix"),s=typeof n=="object"&&n;i||r.data("affix",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(window.jQuery)}),define("canTip",["jquery"],function(e){(function(e){var t='<div id="canTip"><div id="tipArrow"></div><div id="tipContent"></div></div>';this.init=function(){e(document).ready(function(){e("body").append(t)})}(),e.fn.canTip=function(t){function r(n){if(n.hasClass("ui-draggable-dragging"))return;e("#tipContent").html(t.html);var r=e("#canTip").innerWidth(),i=Math.round(r/2),s=Math.round(n.width()/2),o=n.offset(),u=o.left,a=n.innerHeight(),f=o.top+a+5,l=u-i+s,c=i-8;l<0&&(l=0,c=8),e("#canTip").css({left:l,top:f}),e("#tipArrow").css({marginLeft:c}),e("#canTip").show()}t=e.extend({html:null},t);var n=this.selector;e("body").on("mouseover.cantip",n,function(t){r(e(this))}),e("body").on("mouseleave.cantip",n,function(){e("#canTip").hide(),e("#tipArrow").css({marginLeft:0})}),e("body").on("click.cantip",n,function(){e("#canTip").hide(),e("#tipArrow").css({marginLeft:0})}),e("body").on("dblclick.cantip",n,function(){r(e(this)),e("#canTip").effect("bounce")})}})(e)}),define("canToast",["jquery"],function(e){(function(e){var t='<div id="toastPar"></div>';this.init=function(){e("body").append(t)}(),e.canToast=e.fn.canToast=function(t){var n=e("<div />").addClass("closeToast"),r=e("<div />").addClass("canToast").append(n).append(t).hide().fadeIn();e("#toastPar").append(r),setTimeout(function(){r.slideUp(function(){e(this).remove()})},5e3),n.click(function(){r.slideUp(function(){e(this).remove()})})}})(e)}),define("modules/logo",["jquery","i18n!nls/logo.lang","helpers/photos","jqueryui","bootstrap","canTip","canToast"],function(e,t,n){return{init:function(){var t=this;this.drag(),t.resizableLogo(e("#logoImg")),this.binder(),this.logo_text_edit_binder(),this.footer_text_edit_binder()},photo_add_binder:function(){var t=this;n.add(!1),e("#photoForm").submit(function(){var r=e(".active_pic").attr("id");return r=n.id_splitter(r),e(this).find("input[type=submit]").button("loading"),t.send_to_backend(r),!1})},binder:function(){var n=this,r=e("#loading");e("#logoTextBut").canTip({html:t.but_logo_text}),e("#logoPhotoBut").canTip({html:t.but_logo_upload}),e("body").on("click","#logoPhotoBut",function(){n.photo_add_binder()}),e("body").on("click","#logoTextBut",function(){r.show(),e.post(base_url+"manage/logo/mode_text",{site_id:site_id,prefix:prefix},function(t){r.hide();var n=e.parseJSON(t);e.canToast(n.info),e("#logo").html(n.html),e("#logoText").attr("contenteditable","true")})})},logo_text_edit_binder:function(){var n=e("#loading");e("#logoText").canTip({html:t.str_logo_edit}),e("#logoText").attr("contenteditable","true"),e("body").on("focus","#logoText",function(){e(this).addClass("logoEditing")}),e("body").on("blur","#logoText",function(r){e(this).removeClass("logoEditing");var i=e(this).html(),s=i.length;if(s<3||s>250)return e.canToast('<div class="error">'+t.err_logo_len+"</div>"),!1;n.show(),e.post(base_url+"manage/logo/update_logo",{site_id:site_id,logo:i,prefix:prefix},function(t){n.hide(),e.canToast(t)})}),e("body").on("keypress","#logoText",function(t){var n=t.keyCode?t.keyCode:t.which;if(n==13)return e(this).blur(),!1})},footer_text_edit_binder:function(){e("#footerText").canTip({html:t.str_logo_edit}),e("#footerText").attr("contenteditable","true"),e("body").on("focus","#footerText",function(){e(this).addClass("logoEditing")}),e("body").on("blur","#footerText",function(){e(this).removeClass("logoEditing");var n=e(this).html(),r=n.length;if(r<3)return e.canToast('<div class="error">'+t.err_footer_len+"</div>"),!1;var i=e("loading");i.show(),e.post(base_url+"manage/logo/update_footer",{site_id:site_id,text:n,prefix:prefix},function(t){e.canToast(t),i.hide()})})},resizableLogo:function(t){var n=t.attr("ratio"),r=t.attr("src");if(t.width()==0)return!1;t.resizable({containment:"#header",stop:function(t,n){var i=e(this).width(),s=e(this).height(),o=e("#loading");o.show(),e.post(base_url+"manage/logo/resize",{site_id:site_id,width:i,height:s,prefix:prefix},function(t){e.canToast(t),o.hide();var n=(new Date).getTime(),i=r+"?"+n;e("#logoImg").attr("src",i)})}})},send_to_backend:function(t){var n=this;e.ajax({type:"post",data:"site_id="+site_id+"&pic_id="+t+"&prefix="+prefix,url:base_url+"manage/logo/update_image",success:function(t){e("#photoForm").modal("hide");var r=e.parseJSON(t);e.canToast(r.info),e("#logo").html(r.html),e("#logoImg").load(function(){n.resizableLogo(e(this))})}})},drag:function(){e("#logo").draggable({containment:"#header",scroll:!1,handle:"#logoMoveBut",stop:function(t,n){var r=n.position.left,i=n.position.top,s=e("#loading");s.show(),e.post(base_url+"manage/logo/position",{site_id:site_id,left:r,top:i,prefix:prefix},function(t){s.hide(),e.canToast(t)})}})}}}),define("modules/long_menu",["jquery"],function(e){return{init:function(){var t=this;t.wrap(),e("body").addClass("js-ready"),e("window").resize(function(){t.wrap()})},wrap:function(){var t=this,n=e("#nav_bar"),r=0,i=n.width(),s=null,o="Dahası...";n.append('<li class="more"><a href="#">'+o+"</a></li>");var u=e(".more");r=u.outerWidth(!0),n.find("li").each(function(t,n){var o=e(n),u=e(n).parent();if(!u.is("ul")||u.attr("id")=="nav_bar")r+=e(n).outerWidth(!0),r>=i&&s==null&&(s=e(n))}),e(".more").remove();if(s!=null){var a=s.nextAll().andSelf();a.wrapAll('<li class="more">').parent().prepend('<a href="#" class="more_link">'+o+"</a>"),a.wrapAll('<ul class="more_ul"/>')}}}}),define("nls/pages.lang",{root:{str_new_page:"Yeni Sayfa",str_page_hidden:"Gizli",str_page_external:"Dışarı Link",str_page_seo:"Seo",err_no_name:"Lütfen isim giriniz.",err_sel_page:"Lütfen düzenlemek için en az bir tane sayfa seçin.",err_sel_for_delete:"Lütfen silmek için en az bir tane sayfa seçin.",err_sel_for_seo:"Ayar yapmak için lütfen en az bir tane sayfa seçin."}}),define("plugins/jquery.ui.nestedSortable",["jquery","jqueryui"],function(e){(function(e){e.widget("ui.nestedSortable",e.extend({},e.ui.sortable.prototype,{options:{tabSize:20,disableNesting:"ui-nestedSortable-no-nesting",errorClass:"ui-nestedSortable-error",listType:"ol",maxLevels:0,noJumpFix:0},_create:function(){return this.noJumpFix==0&&this.element.height(this.element.height()),this.element.data("sortable",this.element.data("nestedSortable")),e.ui.sortable.prototype._create.apply(this,arguments)},_mouseDrag:function(t){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var n=this.options,r=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-e(document).scrollTop()<n.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),t.pageX-e(document).scrollLeft()<n.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var i=this.items.length-1;i>=0;i--){var s=this.items[i],o=s.item[0],u=this._intersectsWithPointer(s);if(!u)continue;if(o!=this.currentItem[0]&&this.placeholder[u==1?"next":"prev"]()[0]!=o&&!e.contains(this.placeholder[0],o)&&(this.options.type=="semi-dynamic"?!e.contains(this.element[0],o):!0)){this.direction=u==1?"down":"up";if(this.options.tolerance!="pointer"&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._clearEmpty(o),this._trigger("change",t,this._uiHash());break}}var a=this.placeholder[0].parentNode.parentNode&&e(this.placeholder[0].parentNode.parentNode).closest(".ui-sortable").length?e(this.placeholder[0].parentNode.parentNode):null,f=this._getLevel(this.placeholder),l=this._getChildLevels(this.helper),c=this.placeholder[0].previousSibling?e(this.placeholder[0].previousSibling):null;if(c!=null)while(c[0].nodeName.toLowerCase()!="li"||c[0]==this.currentItem[0]){if(!c[0].previousSibling){c=null;break}c=e(c[0].previousSibling)}return newList=document.createElement(n.listType),this.beyondMaxLevels=0,a!=null&&this.positionAbs.left<a.offset().left?(a.after(this.placeholder[0]),this._clearEmpty(a[0]),this._trigger("change",t,this._uiHash())):c!=null&&this.positionAbs.left>c.offset().left+n.tabSize?(this._isAllowed(c,f+l+1),c.children(n.listType).length||c[0].appendChild(newList),c.children(n.listType)[0].appendChild(this.placeholder[0]),this._trigger("change",t,this._uiHash())):this._isAllowed(a,f+l),this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(this.beyondMaxLevels){var r=this.placeholder.parent().closest(this.options.items);for(var i=this.beyondMaxLevels-1;i>0;i--)r=r.parent().closest(this.options.items);this.placeholder.removeClass(this.options.errorClass),r.after(this.placeholder),this._trigger("change",t,this._uiHash())}e.ui.sortable.prototype._mouseStop.apply(this,arguments)},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/),i=(e(t.item||this).parent(t.listType).parent("li").attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);n&&r.push((t.key||n[1]+"["+(t.key&&t.expression?n[1]:n[2])+"]")+"="+(i?t.key&&t.expression?i[1]:i[2]:"root"))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toHierarchy:function(t){function i(n){var r=(e(n).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);if(r!=null){var s={id:r[2]};return e(n).children(t.listType).children("li").length>0&&(s.children=[],e(n).children(t.listType).children("li").each(function(){var t=i(e(this));s.children.push(t)})),s}}t=t||{};var n=t.startDepthCount||0,r=[];return e(this.element).children("li").each(function(){var t=i(e(this));r.push(t)}),r},toArray:function(t){function s(e,t){return e.left-t.left}function o(i,s,u){return right=u+1,e(i).children(t.listType).children("li").length>0&&(s++,e(i).children(t.listType).children("li").each(function(){right=o(e(this),s,right)}),s--),id=e(i).attr(t.attribute||"id").match(t.expression||/(.+)[-=_](.+)/),s===n+1?pid="root":(parentItem=e(i).parent(t.listType).parent("li").attr("id").match(t.expression||/(.+)[-=_](.+)/),pid=parentItem[2]),id!=null&&r.push({item_id:id[2],parent_id:pid,depth:s,left:u,right:right}),u=right+1}t=t||{};var n=t.startDepthCount||0,r=[],i=2;return r.push({item_id:"root",parent_id:"none",depth:n,left:"1",right:(e("li",this.element).length+1)*2}),e(this.element).children("li").each(function(){i=o(this,n+1,i)}),r=r.sort(s),r},_clear:function(t,n){e.ui.sortable.prototype._clear.apply(this,arguments);for(var r=this.items.length-1;r>=0;r--){var i=this.items[r].item[0];this._clearEmpty(i)}return!0},_clearEmpty:function(e){e.children[1]&&e.children[1].children.length==0&&e.removeChild(e.children[1])},_getLevel:function(e){var t=1;if(this.options.listType){var n=e.closest(this.options.listType);while(!n.is(".ui-sortable"))t++,n=n.parent().closest(this.options.listType)}return t},_getChildLevels:function(t,n){var r=this,i=this.options,s=0;return n=n||0,e(t).children(i.listType).children(i.items).each(function(e,t){s=Math.max(r._getChildLevels(t,n+1),s)}),n?s+1:s},_isAllowed:function(e,t){var n=this.options;e==null||!e.hasClass(n.disableNesting)?n.maxLevels<t&&n.maxLevels!=0?(this.placeholder.addClass(n.errorClass),this.beyondMaxLevels=t-n.maxLevels):(this.placeholder.removeClass(n.errorClass),this.beyondMaxLevels=0):(this.placeholder.addClass(n.errorClass),n.maxLevels<t&&n.maxLevels!=0?this.beyondMaxLevels=t-n.maxLevels:this.beyondMaxLevels=1)}})),e.ui.nestedSortable.prototype.options=e.extend({},e.ui.sortable.prototype.options,e.ui.nestedSortable.prototype.options)})(e)}),define("modules/pages",["jquery","modules/long_menu","i18n!nls/pages.lang","jqueryui","plugins/jquery.ui.nestedSortable","bootstrap","canTip","canToast"],function(e,t,n){return{init:function(){this.serilite(),this.binder(),this.placeholder(),this.page_add_do_binder(),e("#pagesBut").click(function(){var t=e("#pages-dialog"),n=e(this),r=n.offset().right;return t.hasClass("hide")?(n.addClass("active"),t.removeClass("hide")):(t.addClass("hide"),n.removeClass("active")),!1})},tooltip:function(){e(".pageHiddenIcon").canTip({html:n.str_page_hidden}),e(".pageExternalIcon").canTip({html:n.str_page_external}),e(".pageSeoIcon").canTip({html:n.str_page_seo})},callback:function(){this.serilite(),this.binder()},placeholder:function(){e(".placeholder-page-add").click(function(){e(this).prev().focus()}),e(".placeholding-page-add").find("input").focus(function(){e(this).next().css({color:"#d1d1d1"})}).blur(function(){var t=e(this).next();t.css({color:"#999"}),e(this).val().length==0&&t.show()}).keypress(function(t){e(this).next().hide()})},serilite:function(){var t=this;e(".sortable").nestedSortable({disableNesting:"no-nest",forcePlaceholderSize:!0,handle:"div",helper:"clone",items:"li",maxLevels:3,opacity:.6,placeholder:"placeholder",revert:250,tabSize:25,tolerance:"pointer",toleranceElement:"> div",update:function(){var n=e("ol.sortable").nestedSortable("serialize"),r=e("#loading");r.show(),e.ajax({type:"post",data:n+"&site_id="+site_id+"&page_id="+page_id+"&prefix="+prefix,url:base_url+"manage/pages/sort",success:function(e){r.hide(),t._update(e)}})}})},_update:function(n){var r=e.parseJSON(n);e.canToast(r.info),e("#nav_bar").html(r.navigation),e("#pagesForm").html(r.pages_content),e("#page-switcher-div").html(r.pages_switcher),this.serilite(),t.wrap()},update_area:function(t,n){e("#pagesForm").html(t),e("#page-switcher-div").html(n),this.serilite()},binder:function(){var t=this;e("#editPageBut").click(function(r){var i=e(this),s=e("#pagesForm").serialize();return s=s+"&prefix="+prefix,s==""?(e.canToast('<div class="error">'+n.err_sel_page+"</div>"),!1):(i.attr("disabled","disabled"),e.ajax({type:"post",data:s+"&page_id="+page_id+"&site_id="+site_id,url:base_url+"manage/pages/edit",success:function(n){e("#modal").html(n).children(":first-child").modal(),t.edit_do_binder(),i.removeAttr("disabled")}}),!1)}),e("#delPageBut").click(function(){var t=e("#pagesForm").serialize();if(t==""){e.canToast('<div class="error">'+n.err_sel_for_delete+"</div>");return}var r=e(this),i=e("#deleteDialog");i.hasClass("hide")&&(r.attr("disabled","disable"),i.removeClass("hide"))}),e("#delCancelBut").click(function(){e("#deleteDialog").addClass("hide"),e("#delPageBut").removeAttr("disabled")}),e("#delDoBut").click(function(){var r=e(this),i=e("#pagesForm").serialize(),s=e("#pagesForm").serializeArray();return i==""?(e.canToast('<div class="error">'+n.err_sel_for_delete+"</div>"),!1):(r.attr("disabled","disabled"),e.ajax({type:"post",data:i+"&page_id="+page_id+"&site_id="+site_id,url:base_url+"manage/pages/delete_do",success:function(n){t._update(n),r.removeAttr("disabled"),e("#deleteDialog").addClass("hide"),e("#delPageBut").removeAttr("disabled"),e.each(s,function(e,t){t.value==page_id&&(window.location="index.html")})}}),!1)}),e("#seoPageBut").click(function(){var r=e(this),i=e("#pagesForm").serialize();return i==""?(e.canToast('<div class="error">'+n.err_sel_for_seo+"</div>"),!1):(r.attr("disabled","disabled"),e.ajax({type:"post",data:i+"page_id="+page_id+"&site_id="+site_id,url:base_url+"manage/pages/seo",success:function(n){e("#modal").html(n).children(":first-child").modal(),t.seo_do_binder(),r.removeAttr("disabled")}}),!1)})},page_add_do_binder:function(){var t=this;e("#pageAddForm").submit(function(){var r=e(this).find("input[name=pagename]"),i=e(this).find("input[type=submit]"),s=r.val();return s==""?(e.canToast('<div class="error">'+n.err_no_name+"</div>"),!1):(i.attr("disabled","disabled"),e.ajax({type:"post",data:"pagename="+s+"&page_id="+page_id+"&site_id="+site_id+"&prefix="+prefix,url:base_url+"manage/pages/add_do",success:function(e){t._update(e),r.val(""),i.removeAttr("disabled"),r.next().show()}}),!1)})},edit_do_binder:function(){var t=this;e("#pageEditForm").submit(function(){var n=e(this),r=n.serialize();r=r+"&prefix="+prefix;var i=n.find("[type=submit]");return i.button("loading"),e.ajax({type:"post",data:r+"&page_id="+page_id+"&site_id="+site_id,url:base_url+"manage/pages/edit_do",success:function(e){t._update(e),n.modal("hide")}}),!1}),e(".switch-external").click(function(){var t=e(this),n=t.parent().next(),r=t.parents().eq(1).next().find("input"),i=r[0].defaultValue,s=n.attr("firstVal");n.val()=="1"?(n.val("0"),t.animate({left:"-56px"},200),s=="1"?r.val(""):r.val(i),r.animate({width:"80px"},function(){r.next().show()})):(n.val("1"),t.animate({left:"0px"},200),s=="1"?r.val(i):r.val("http://"),r.next().hide(),r.animate({width:"150px"}))}),e(".switch-hidden").click(function(){var t=e(this),n=t.next();n.val()=="1"?(n.val("0"),t.animate({left:"-56px"},200)):(n.val("1"),t.animate({left:"0px"},200))})},seo_do_binder:function(){var t=this;e(".switch-seo").click(function(){var t=e(this),n=t.next(),r=t.parent().parent().next().find("input"),i=t.parent().parent().next().next().find("textarea");n.val()=="1"?(n.val("0"),t.animate({left:"-56px"},200),r.hide(),i.hide()):(n.val("1"),t.animate({left:"0px"},200),r.show(),i.show())}),e("#pageSeoForm").submit(function(){var n=e(this),r=n.find("[type=submit]"),i=n.serialize();return i=i+"&prefix="+prefix,r.button("loading"),e.ajax({type:"post",data:i+"&page_id="+page_id+"&site_id="+site_id,url:base_url+"manage/pages/seo_do",success:function(e){t._update(e),n.modal("hide")}}),!1})}}}),define("modules/settings",["jquery","bootstrap"],function(e){return{init:function(){this.binder()},binder:function(){var t=this;e("#settingsBut").click(function(){var n=e("#loading"),r=base_url+"manage/settings/index";return n.show(),e.post(r,{site_id:site_id,prefix:prefix},function(r){n.hide(),e("#modal").html(r).children(":first-child").modal(),t.do_binder()}),!1})},do_binder:function(){e("#pageEditForm").submit(function(){var t=e(this),n=t.find("[type=submit]"),r=e("#settingsLog"),i=t.serialize();i=i+"&prefix="+prefix;var s=base_url+"manage/settings/set_settings";return n.button("loading"),r.hide(),e.post(s,i,function(e){r.html(e).fadeIn(),n.button("complete")}),!1})}}}),define("modules/social_media",["jquery","bootstrap"],function(e){return{init:function(){this.binder()},binder:function(){var t=this;e("#socialBut").click(function(){var n=e("#loading"),r=base_url+"manage/social/index";return n.show(),e.post(r,{site_id:site_id,prefix:prefix},function(r){n.hide(),e("#modal").html(r).children(":first-child").modal().on("hidden",function(){e("#social").effect("bounce")}),t.do_binder()}),!1})},do_binder:function(){e(".switch-social").click(function(){var t=e(this),n=t.next(),r=t.data("input"),i=e('[name="'+r+'"]');n.val()=="1"?(n.val("0"),t.animate({left:"-56px"},200),i.hide().val("")):(n.val("1"),t.animate({left:"0px"},200),i.show())}),e("#socialEditForm").submit(function(){var t=e(this),n=t.find("[type=submit]"),r=t.serialize();r=r+"&prefix="+prefix;var i=base_url+"manage/social/post";return n.button("loading"),e.post(i,r,function(t){n.button("complete"),e.canToast('<div class="success">Sosyal medya simgeleriniz başarıyla güncellendi.</div>'),e("#social").html(t)}),!1})}}}),define("nls/extension.lang",{root:{str_drag_drop_this:"Bunu aşağıdaki <strong>beyaz</strong> alana sürükleyip, bırakın.",str_merge:"Sağdaki ve soldaki alanları birleştirmek için tıklayın.",str_ext_delete:"Bu eklentiyi silmek için tıklayın.",confirm_ext_delete:"Bu eklentiyi silmek istediğinizden emin misiniz?"}}),define("nls/grids.lang",{root:{str_drag_drop_here:"Eklentileri buraya sürükleyip bırakın.",confirm_merge:"Sağdaki ve soldaki alanları birleştirmek istediğinize emin minisiniz?"}}),define("nls/htmls.lang",{root:{str_please_wait:"Lütfen bekleyin",str_edit_html:"Htmli düzenlemek için tıklayın.",succ_edit_html:"Html başarıyla düzenlendi",str_html_title:"Htmli Düzenle",label_new_field:"#Yeni Alan...",but_close:"Kapat",but_edit_html:"Düzenle"}}),define("modules/htmls",["jquery","i18n!nls/htmls.lang","bootstrap","canTip","canToast"],function(e,t){return{firstRun:function(t){var n=e("#ext_"+t).find(".htmlArea").attr("id");n=n.split("_"),n=n[1],this.html_dialog("",n)},init:function(){this.binder(),e(".htmlEditBut").canTip({html:t.str_edit_html})},binder:function(){var t=this;e("body").on("click",".htmlEditBut",function(){var n=e(this).parent().next().attr("id");n=n.split("_"),n=n[1],e.post(base_url+"manage/htmls/get_html",{site_id:site_id,html_id:n},function(e){t.html_dialog(e,n)})})},edit_binder:function(){e("#htmlEditForm").submit(function(){var n=e(this),r=n.find("[type=submit]"),i=n.attr("data-html-id"),s=e("#htmlEditContent").val();return r.button("loading"),e.post(base_url+"manage/htmls/set_html",{site_id:site_id,html_id:i,content:s},function(r){e("#html_"+i).html(r),e.canToast('<div class="info">'+t.succ_edit_html+"</div>"),n.modal("hide")}),!1})},html_dialog:function(n,r){var i='<form class="modal fade" name="htmEditForm" id="htmlEditForm" data-html-id="'+r+'" action="#" method="post">';i+='<div class="modal-header"><a class="close" data-dismiss="modal">×</a><h3>'+t.str_html_title+"</h3></div>",i+='<div class="modal-body">',i+='<textarea id="htmlEditContent" class="htmleditor">'+n+"</textarea>",i+="</div>",i+='<div class="modal-footer"><a class="btn" data-dismiss="modal">'+t.but_close+"</a>",i+='<input type="submit" class="btn btn-primary" data-loading-text="'+t.str_please_wait+'" data-complete-text="'+t.but_edit_html+'" value="'+t.but_edit_html+'"/>',i+="</div></form>",e("#modal").html(i).children(":first-child").modal(),this.edit_binder()}}}),define("nls/photo_cloud.lang",{root:{but_select_photo:"Fotoğraf yüklemek için tıklayın.",err_select_photo:"Opps. Lütfen fotoğraf seçin.",str_file_desc:"Resim dosyaları",info_success_upload:"Başarılı bir şekilde yüklendi",info_error_upload:"Dosya boyutu çok büyük ya da başka bir hata oluştu.",str_no_photo:"Bu albümde hiç fotoğraf yok"}}),define("modules/photo_cloud",["jquery","i18n!nls/photo_cloud.lang","helpers/photos","jqueryui","bootstrap","canTip","canToast"],function(e,t,n){return{firstRun:function(t){var r=e("#ext_"+t).find(".photo_cloud").attr("id");r=n.id_splitter(r),this.photo_add_binder(r)},init:function(){var t=this;this.binder(),this.sortable_do(),n.init(),e(".photoEditBut").canTip({html:"Düzenlemek için tıklayın."}),e("body").on("click",".photoEditBut",function(){var r=e(this).parent().next().attr("id");r=n.id_splitter(r),e.post(base_url+"manage/photo_cloud/get_modal",{site_id:site_id,cloud_id:r},function(n){e("#modal").html(n).children(":first-child").modal(),e("#sort-slider tbody").sortable().disableSelection(),t.bind_form(r)})})},bind_form:function(t){e("#photoSetForm").submit(function(){var n=e(this).serialize(),r=e(this).data("action");e("#photoSetSubmit").button("loading");var i=e("#photoCloud_"+t);return e.post(r,n,function(t){i.html(t),e("#photoSetSubmit").button("complete"),e("#modal").children(":first-child").modal("hide"),e.canToast('<div class="success">Fotoğraf Albümü başarıyla güncellendi.</div>')}),!1})},photo_add_binder:function(r){var i=this;n.add(),e("#photoForm").submit(function(){var s=e(this),o=n.serialize();if(o==0){e.canToast('<div class="error">'+t.err_select_photo+"</div> ");return}return s.find("input[type=submit]").button("loading"),i.send_to_backend(r,o),!1})},binder:function(){var r=this;e(".photoSelectBut").canTip({html:t.but_select_photo}),e("body").on("click",".photoSelectBut",function(){var t=e(this).parent().next().attr("id");t=n.id_splitter(t),r.photo_add_binder(t)}),e("body").on("mouseenter",".thumbPhoto",function(){e(this).find(".remove_photo").show()}),e("body").on("mouseleave",".thumbPhoto",function(){e(this).find(".remove_photo").hide()}),e("body").on("click",".remove_photo",function(){var r=e(this).parent(),i=r.attr("id");i=n.id_splitter(i),e.ajax({type:"post",data:"site_id="+site_id+"&photo_id="+i,url:base_url+"manage/photo_cloud/delete",success:function(n){e.canToast(n),r.fadeOut(function(){r.siblings().size()<1&&r.after(t.str_no_photo),e(this).remove()})}})})},sortable_do:function(){e(".photo_cloud").sortable({update:function(){var t=e(this).sortable("serialize");e.ajax({type:"post",data:t+"&site_id="+site_id,url:base_url+"manage/photo_cloud/sort",success:function(t){e.canToast(t)}})}})},send_to_backend:function(t,n){var r=this;e.ajax({type:"post",data:n+"&site_id="+site_id+"&cloud_id="+t,url:base_url+"manage/photo_cloud/add",success:function(n){e("#photoForm").modal("hide"),e("#photoCloud_"+t).html(n),r.sortable_do(),e(".photo_cloud").sortable("refreshPositions")}})}}}),define("nls/slider_cloud.lang",{root:{str_slider_add_but:"Fotoğraf eklemek için tıklayın.",str_slider_del_but:"Kaldır",str_slider_edit_but:"Düzenlemek için tıklayın.",err_select_photo:"Eklemek için lütfen fotoğraf seçin."}}),define("plugins/jquery.flexslider",["jquery"],function(e){(function(e){e.flexslider=function(t,n,r){var i=e(t);i.vars=e.extend({},e.flexslider.defaults,n);var s=i.vars.namespace,o=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,u=("ontouchstart"in window||o||window.DocumentTouch&&document instanceof DocumentTouch)&&i.vars.touch,a="click touchend MSPointerUp",f="",l,c=i.vars.direction==="vertical",h=i.vars.reverse,p=i.vars.itemWidth>0,d=i.vars.animation==="fade",v=i.vars.asNavFor!=="",m={},g=!0,r=typeof r!="undefined"?r++:0;e.data(t,"flexslider",i),m={init:function(){i.id=r,i.animating=!1,i.currentSlide=parseInt(i.vars.startAt?i.vars.startAt:0),isNaN(i.currentSlide)&&(i.currentSlide=0),i.animatingTo=i.currentSlide,i.atEnd=i.currentSlide===0||i.currentSlide===i.last,i.containerSelector=i.vars.selector.substr(0,i.vars.selector.search(" ")),i.slides=e(i.vars.selector,i),i.container=e(i.containerSelector,i),i.count=i.slides.length,i.syncExists=e(i.vars.sync).length>0,i.vars.animation==="slide"&&(i.vars.animation="swing"),i.prop=c?"top":"marginLeft",i.args={},i.manualPause=!1,i.stopped=!1,i.started=!1,i.startTimeout=null,i.transitions=!i.vars.video&&!d&&i.vars.useCSS&&function(){var e=document.createElement("div"),t=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var n in t)if(e.style[t[n]]!==undefined)return i.pfx=t[n].replace("Perspective","").toLowerCase(),i.prop="-"+i.pfx+"-transform",!0;return!1}(),i.vars.controlsContainer!==""&&(i.controlsContainer=e(i.vars.controlsContainer).length>0&&e(i.vars.controlsContainer)),i.vars.manualControls!==""&&(i.manualControls=e(i.vars.manualControls).length>0&&e(i.vars.manualControls)),i.vars.randomize&&(i.slides.sort(function(){return Math.round(Math.random())-.5}),i.container.empty().append(i.slides)),i.doMath(),i.setup("init"),i.vars.controlNav&&m.controlNav.setup(),i.vars.directionNav&&m.directionNav.setup(),i.vars.keyboard&&(e(i.containerSelector).length===1||i.vars.multipleKeyboard)&&e(document).bind("keyup"+i.vars.eventNamespace+"-"+i.id,function(e){var t=e.keyCode;if(!i.animating&&(t===39||t===37)){var n=t===39?i.getTarget("next"):t===37?i.getTarget("prev"):!1;i.flexAnimate(n,i.vars.pauseOnAction)}}),i.vars.mousewheel&&i.bind("mousewheel"+i.vars.eventNamespace,function(e,t,n,r){e.preventDefault();var s=t<0?i.getTarget("next"):i.getTarget("prev");i.flexAnimate(s,i.vars.pauseOnAction)}),i.vars.pausePlay&&m.pausePlay.setup(),i.vars.slideshow&&i.vars.pauseInvisible&&m.pauseInvisible.init();if(i.vars.slideshow){i.vars.pauseOnHover&&i.hover(function(){!i.manualPlay&&!i.manualPause&&i.pause()},function(){!i.manualPause&&!i.manualPlay&&!i.stopped&&i.play()});if(!i.vars.pauseInvisible||!m.pauseInvisible.isHidden())i.vars.initDelay>0?i.startTimeout=setTimeout(i.play,i.vars.initDelay):i.play()}v&&m.asNav.setup(),u&&i.vars.touch&&m.touch(),(!d||d&&i.vars.smoothHeight)&&e(window).bind("resize"+i.vars.eventNamespace+"-"+i.id+" orientationchange"+i.vars.eventNamespace+"-"+i.id+" focus"+i.vars.eventNamespace+"-"+i.id,m.resize),i.find("img").attr("draggable","false"),setTimeout(function(){i.vars.start(i)},200)},asNav:{setup:function(){i.asNav=!0,i.animatingTo=Math.floor(i.currentSlide/i.move),i.currentItem=i.currentSlide,i.slides.removeClass(s+"active-slide").eq(i.currentItem).addClass(s+"active-slide"),o?(t._slider=i,i.slides.each(function(){var t=this;t._gesture=new MSGesture,t._gesture.target=t,t.addEventListener("MSPointerDown",function(e){e.preventDefault(),e.currentTarget._gesture&&e.currentTarget._gesture.addPointer(e.pointerId)},!1),t.addEventListener("MSGestureTap",function(t){t.preventDefault();var n=e(this),r=n.index();!e(i.vars.asNavFor).data("flexslider").animating&&!n.hasClass("active")&&(i.direction=i.currentItem<r?"next":"prev",i.flexAnimate(r,i.vars.pauseOnAction,!1,!0,!0))})})):i.slides.on("click"+i.vars.eventNamespace,function(t){t.preventDefault();var n=e(this),r=n.index(),o=n.offset().left-e(i).scrollLeft();o<=0&&n.hasClass(s+"active-slide")?i.flexAnimate(i.getTarget("prev"),!0):!e(i.vars.asNavFor).data("flexslider").animating&&!n.hasClass(s+"active-slide")&&(i.direction=i.currentItem<r?"next":"prev",i.flexAnimate(r,i.vars.pauseOnAction,!1,!0,!0))})}},controlNav:{setup:function(){i.manualControls?m.controlNav.setupManual():m.controlNav.setupPaging()},setupPaging:function(){var t=i.vars.controlNav==="thumbnails"?"control-thumbs":"control-paging",n=1,r,o;i.controlNavScaffold=e('<ol class="'+s+"control-nav "+s+t+'"></ol>');if(i.pagingCount>1)for(var u=0;u<i.pagingCount;u++){o=i.slides.eq(u),r=i.vars.controlNav==="thumbnails"?'<img src="'+o.attr("data-thumb")+'"/>':"<a>"+n+"</a>";if("thumbnails"===i.vars.controlNav&&!0===i.vars.thumbCaptions){var l=o.attr("data-thumbcaption");""!=l&&undefined!=l&&(r+='<span class="'+s+'caption">'+l+"</span>")}i.controlNavScaffold.append("<li>"+r+"</li>"),n++}i.controlsContainer?e(i.controlsContainer).append(i.controlNavScaffold):i.append(i.controlNavScaffold),m.controlNav.set(),m.controlNav.active(),i.controlNavScaffold.delegate("a, img",a,function(t){t.preventDefault();if(f===""||f===t.type){var n=e(this),r=i.controlNav.index(n);n.hasClass(s+"active")||(i.direction=r>i.currentSlide?"next":"prev",i.flexAnimate(r,i.vars.pauseOnAction))}f===""&&(f=t.type),m.setToClearWatchedEvent()})},setupManual:function(){i.controlNav=i.manualControls,m.controlNav.active(),i.controlNav.bind(a,function(t){t.preventDefault();if(f===""||f===t.type){var n=e(this),r=i.controlNav.index(n);n.hasClass(s+"active")||(r>i.currentSlide?i.direction="next":i.direction="prev",i.flexAnimate(r,i.vars.pauseOnAction))}f===""&&(f=t.type),m.setToClearWatchedEvent()})},set:function(){var t=i.vars.controlNav==="thumbnails"?"img":"a";i.controlNav=e("."+s+"control-nav li "+t,i.controlsContainer?i.controlsContainer:i)},active:function(){i.controlNav.removeClass(s+"active").eq(i.animatingTo).addClass(s+"active")},update:function(t,n){i.pagingCount>1&&t==="add"?i.controlNavScaffold.append(e("<li><a>"+i.count+"</a></li>")):i.pagingCount===1?i.controlNavScaffold.find("li").remove():i.controlNav.eq(n).closest("li").remove(),m.controlNav.set(),i.pagingCount>1&&i.pagingCount!==i.controlNav.length?i.update(n,t):m.controlNav.active()}},directionNav:{setup:function(){var t=e('<ul class="'+s+'direction-nav"><li><a class="'+s+'prev" href="#">'+i.vars.prevText+'</a></li><li><a class="'+s+'next" href="#">'+i.vars.nextText+"</a></li></ul>");i.controlsContainer?(e(i.controlsContainer).append(t),i.directionNav=e("."+s+"direction-nav li a",i.controlsContainer)):(i.append(t),i.directionNav=e("."+s+"direction-nav li a",i)),m.directionNav.update(),i.directionNav.bind(a,function(t){t.preventDefault();var n;if(f===""||f===t.type)n=e(this).hasClass(s+"next")?i.getTarget("next"):i.getTarget("prev"),i.flexAnimate(n,i.vars.pauseOnAction);f===""&&(f=t.type),m.setToClearWatchedEvent()})},update:function(){var e=s+"disabled";i.pagingCount===1?i.directionNav.addClass(e).attr("tabindex","-1"):i.vars.animationLoop?i.directionNav.removeClass(e).removeAttr("tabindex"):i.animatingTo===0?i.directionNav.removeClass(e).filter("."+s+"prev").addClass(e).attr("tabindex","-1"):i.animatingTo===i.last?i.directionNav.removeClass(e).filter("."+s+"next").addClass(e).attr("tabindex","-1"):i.directionNav.removeClass(e).removeAttr("tabindex")}},pausePlay:{setup:function(){var t=e('<div class="'+s+'pauseplay"><a></a></div>');i.controlsContainer?(i.controlsContainer.append(t),i.pausePlay=e("."+s+"pauseplay a",i.controlsContainer)):(i.append(t),i.pausePlay=e("."+s+"pauseplay a",i)),m.pausePlay.update(i.vars.slideshow?s+"pause":s+"play"),i.pausePlay.bind(a,function(t){t.preventDefault();if(f===""||f===t.type)e(this).hasClass(s+"pause")?(i.manualPause=!0,i.manualPlay=!1,i.pause()):(i.manualPause=!1,i.manualPlay=!0,i.play());f===""&&(f=t.type),m.setToClearWatchedEvent()})},update:function(e){e==="play"?i.pausePlay.removeClass(s+"pause").addClass(s+"play").html(i.vars.playText):i.pausePlay.removeClass(s+"play").addClass(s+"pause").html(i.vars.pauseText)}},touch:function(){var e,n,r,s,u,a,f=!1,l=0,v=0,m=0;if(!o){t.addEventListener("touchstart",g,!1);function g(o){if(i.animating)o.preventDefault();else if(window.navigator.msPointerEnabled||o.touches.length===1)i.pause(),s=c?i.h:i.w,a=Number(new Date),l=o.touches[0].pageX,v=o.touches[0].pageY,r=p&&h&&i.animatingTo===i.last?0:p&&h?i.limit-(i.itemW+i.vars.itemMargin)*i.move*i.animatingTo:p&&i.currentSlide===i.last?i.limit:p?(i.itemW+i.vars.itemMargin)*i.move*i.currentSlide:h?(i.last-i.currentSlide+i.cloneOffset)*s:(i.currentSlide+i.cloneOffset)*s,e=c?v:l,n=c?l:v,t.addEventListener("touchmove",y,!1),t.addEventListener("touchend",b,!1)}function y(o){l=o.touches[0].pageX,v=o.touches[0].pageY,u=c?e-v:e-l,f=c?Math.abs(u)<Math.abs(l-n):Math.abs(u)<Math.abs(v-n);var h=500;!f||Number(new Date)-a>h?(o.preventDefault(),!d&&i.transitions&&(i.vars.animationLoop||(u/=i.currentSlide===0&&u<0||i.currentSlide===i.last&&u>0?Math.abs(u)/s+2:1),i.setProps(r+u,"setTouch"))):t.removeEventListener("touchmove",y,!1)}function b(o){t.removeEventListener("touchmove",y,!1);if(i.animatingTo===i.currentSlide&&!f&&u!==null){var l=h?-u:u,c=l>0?i.getTarget("next"):i.getTarget("prev");i.canAdvance(c)&&(Number(new Date)-a<550&&Math.abs(l)>50||Math.abs(l)>s/2)?i.flexAnimate(c,i.vars.pauseOnAction):d||i.flexAnimate(i.currentSlide,i.vars.pauseOnAction,!0)}t.removeEventListener("touchend",b,!1),e=null,n=null,u=null,r=null}}else{t.style.msTouchAction="none",t._gesture=new MSGesture,t._gesture.target=t,t.addEventListener("MSPointerDown",w,!1),t._slider=i,t.addEventListener("MSGestureChange",E,!1),t.addEventListener("MSGestureEnd",S,!1);function w(e){e.stopPropagation(),i.animating?e.preventDefault():(i.pause(),t._gesture.addPointer(e.pointerId),m=0,s=c?i.h:i.w,a=Number(new Date),r=p&&h&&i.animatingTo===i.last?0:p&&h?i.limit-(i.itemW+i.vars.itemMargin)*i.move*i.animatingTo:p&&i.currentSlide===i.last?i.limit:p?(i.itemW+i.vars.itemMargin)*i.move*i.currentSlide:h?(i.last-i.currentSlide+i.cloneOffset)*s:(i.currentSlide+i.cloneOffset)*s)}function E(e){e.stopPropagation();var n=e.target._slider;if(!n)return;var i=-e.translationX,o=-e.translationY;m+=c?o:i,u=m,f=c?Math.abs(m)<Math.abs(-i):Math.abs(m)<Math.abs(-o);if(e.detail===e.MSGESTURE_FLAG_INERTIA){setImmediate(function(){t._gesture.stop()});return}if(!f||Number(new Date)-a>500)e.preventDefault(),!d&&n.transitions&&(n.vars.animationLoop||(u=m/(n.currentSlide===0&&m<0||n.currentSlide===n.last&&m>0?Math.abs(m)/s+2:1)),n.setProps(r+u,"setTouch"))}function S(t){t.stopPropagation();var i=t.target._slider;if(!i)return;if(i.animatingTo===i.currentSlide&&!f&&u!==null){var o=h?-u:u,l=o>0?i.getTarget("next"):i.getTarget("prev");i.canAdvance(l)&&(Number(new Date)-a<550&&Math.abs(o)>50||Math.abs(o)>s/2)?i.flexAnimate(l,i.vars.pauseOnAction):d||i.flexAnimate(i.currentSlide,i.vars.pauseOnAction,!0)}e=null,n=null,u=null,r=null,m=0}}},resize:function(){!i.animating&&i.is(":visible")&&(p||i.doMath(),d?m.smoothHeight():p?(i.slides.width(i.computedW),i.update(i.pagingCount),i.setProps()):c?(i.viewport.height(i.h),i.setProps(i.h,"setTotal")):(i.vars.smoothHeight&&m.smoothHeight(),i.newSlides.width(i.computedW),i.setProps(i.computedW,"setTotal")))},smoothHeight:function(e){if(!c||d){var t=d?i:i.viewport;e?t.animate({height:i.slides.eq(i.animatingTo).height()},e):t.height(i.slides.eq(i.animatingTo).height())}},sync:function(t){var n=e(i.vars.sync).data("flexslider"),r=i.animatingTo;switch(t){case"animate":n.flexAnimate(r,i.vars.pauseOnAction,!1,!0);break;case"play":!n.playing&&!n.asNav&&n.play();break;case"pause":n.pause()}},pauseInvisible:{visProp:null,init:function(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)e[t]+"Hidden"in document&&(m.pauseInvisible.visProp=e[t]+"Hidden");if(m.pauseInvisible.visProp){var n=m.pauseInvisible.visProp.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(n,function(){m.pauseInvisible.isHidden()?i.startTimeout?clearTimeout(i.startTimeout):i.pause():i.started?i.play():i.vars.initDelay>0?setTimeout(i.play,i.vars.initDelay):i.play()})}},isHidden:function(){return document[m.pauseInvisible.visProp]||!1}},setToClearWatchedEvent:function(){clearTimeout(l),l=setTimeout(function(){f=""},3e3)}},i.flexAnimate=function(t,n,r,o,a){!i.vars.animationLoop&&t!==i.currentSlide&&(i.direction=t>i.currentSlide?"next":"prev"),v&&i.pagingCount===1&&(i.direction=i.currentItem<t?"next":"prev");if(!i.animating&&(i.canAdvance(t,a)||r)&&i.is(":visible")){if(v&&o){var f=e(i.vars.asNavFor).data("flexslider");i.atEnd=t===0||t===i.count-1,f.flexAnimate(t,!0,!1,!0,a),i.direction=i.currentItem<t?"next":"prev",f.direction=i.direction;if(Math.ceil((t+1)/i.visible)-1===i.currentSlide||t===0)return i.currentItem=t,i.slides.removeClass(s+"active-slide").eq(t).addClass(s+"active-slide"),!1;i.currentItem=t,i.slides.removeClass(s+"active-slide").eq(t).addClass(s+"active-slide"),t=Math.floor(t/i.visible)}i.animating=!0,i.animatingTo=t,n&&i.pause(),i.vars.before(i),i.syncExists&&!a&&m.sync("animate"),i.vars.controlNav&&m.controlNav.active(),p||i.slides.removeClass(s+"active-slide").eq(t).addClass(s+"active-slide"),i.atEnd=t===0||t===i.last,i.vars.directionNav&&m.directionNav.update(),t===i.last&&(i.vars.end(i),i.vars.animationLoop||i.pause());if(!d){var l=c?i.slides.filter(":first").height():i.computedW,g,y,b;p?(g=i.vars.itemMargin,b=(i.itemW+g)*i.move*i.animatingTo,y=b>i.limit&&i.visible!==1?i.limit:b):i.currentSlide===0&&t===i.count-1&&i.vars.animationLoop&&i.direction!=="next"?y=h?(i.count+i.cloneOffset)*l:0:i.currentSlide===i.last&&t===0&&i.vars.animationLoop&&i.direction!=="prev"?y=h?0:(i.count+1)*l:y=h?(i.count-1-t+i.cloneOffset)*l:(t+i.cloneOffset)*l,i.setProps(y,"",i.vars.animationSpeed);if(i.transitions){if(!i.vars.animationLoop||!i.atEnd)i.animating=!1,i.currentSlide=i.animatingTo;i.container.unbind("webkitTransitionEnd"+i.vars.eventNamespace+" transitionend"+i.vars.eventNamespace),+i.container.bind("webkitTransitionEnd"+i.vars.eventNamespace+" transitionend"+i.vars.eventNamespace,function(){i.wrapup(l)})}else i.container.animate(i.args,i.vars.animationSpeed,i.vars.easing,function(){i.wrapup(l)})}else u?(i.slides.eq(i.currentSlide).css({opacity:0,zIndex:1}),i.slides.eq(t).css({opacity:1,zIndex:2}),i.wrapup(l)):(i.slides.eq(i.currentSlide).css({zIndex:1}).animate({opacity:0},i.vars.animationSpeed,i.vars.easing),i.slides.eq(t).css({zIndex:2}).animate({opacity:1},i.vars.animationSpeed,i.vars.easing,i.wrapup));i.vars.smoothHeight&&m.smoothHeight(i.vars.animationSpeed)}},i.wrapup=function(e){!d&&!p&&(i.currentSlide===0&&i.animatingTo===i.last&&i.vars.animationLoop?i.setProps(e,"jumpEnd"):i.currentSlide===i.last&&i.animatingTo===0&&i.vars.animationLoop&&i.setProps(e,"jumpStart")),i.animating=!1,i.currentSlide=i.animatingTo,i.vars.after(i)},i.animateSlides=function(){!i.animating&&g&&i.flexAnimate(i.getTarget("next"))},i.pause=function(){clearInterval(i.animatedSlides),i.animatedSlides=null,i.playing=!1,i.vars.pausePlay&&m.pausePlay.update("play"),i.syncExists&&m.sync("pause")},i.play=function(){i.playing&&clearInterval(i.animatedSlides),i.animatedSlides=i.animatedSlides||setInterval(i.animateSlides,i.vars.slideshowSpeed),i.started=i.playing=!0,i.vars.pausePlay&&m.pausePlay.update("pause"),i.syncExists&&m.sync("play")},i.stop=function(){i.pause(),i.stopped=!0},i.canAdvance=function(e,t){var n=v?i.pagingCount-1:i.last;return t?!0:v&&i.currentItem===i.count-1&&e===0&&i.direction==="prev"?!0:v&&i.currentItem===0&&e===i.pagingCount-1&&i.direction!=="next"?!1:e===i.currentSlide&&!v?!1:i.vars.animationLoop?!0:i.atEnd&&i.currentSlide===0&&e===n&&i.direction!=="next"?!1:i.atEnd&&i.currentSlide===n&&e===0&&i.direction==="next"?!1:!0},i.getTarget=function(e){return i.direction=e,e==="next"?i.currentSlide===i.last?0:i.currentSlide+1:i.currentSlide===0?i.last:i.currentSlide-1},i.setProps=function(e,t,n){var r=function(){var n=e?e:(i.itemW+i.vars.itemMargin)*i.move*i.animatingTo,r=function(){if(p)return t==="setTouch"?e:h&&i.animatingTo===i.last?0:h?i.limit-(i.itemW+i.vars.itemMargin)*i.move*i.animatingTo:i.animatingTo===i.last?i.limit:n;switch(t){case"setTotal":return h?(i.count-1-i.currentSlide+i.cloneOffset)*e:(i.currentSlide+i.cloneOffset)*e;case"setTouch":return h?e:e;case"jumpEnd":return h?e:i.count*e;case"jumpStart":return h?i.count*e:e;default:return e}}();return r*-1+"px"}();i.transitions&&(r=c?"translate3d(0,"+r+",0)":"translate3d("+r+",0,0)",n=n!==undefined?n/1e3+"s":"0s",i.container.css("-"+i.pfx+"-transition-duration",n)),i.args[i.prop]=r,(i.transitions||n===undefined)&&i.container.css(i.args)},i.setup=function(t){if(!d){var n,r;t==="init"&&(i.viewport=e('<div class="'+s+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(i).append(i.container),i.cloneCount=0,i.cloneOffset=0,h&&(r=e.makeArray(i.slides).reverse(),i.slides=e(r),i.container.empty().append(i.slides))),i.vars.animationLoop&&!p&&(i.cloneCount=2,i.cloneOffset=1,t!=="init"&&i.container.find(".clone").remove(),i.container.append(i.slides.first().clone().addClass("clone").attr("aria-hidden","true")).prepend(i.slides.last().clone().addClass("clone").attr("aria-hidden","true"))),i.newSlides=e(i.vars.selector,i),n=h?i.count-1-i.currentSlide+i.cloneOffset:i.currentSlide+i.cloneOffset,c&&!p?(i.container.height((i.count+i.cloneCount)*200+"%").css("position","absolute").width("100%"),setTimeout(function(){i.newSlides.css({display:"block"}),i.doMath(),i.viewport.height(i.h),i.setProps(n*i.h,"init")},t==="init"?100:0)):(i.container.width((i.count+i.cloneCount)*200+"%"),i.setProps(n*i.computedW,"init"),setTimeout(function(){i.doMath(),i.newSlides.css({width:i.computedW,"float":"left",display:"block"}),i.vars.smoothHeight&&m.smoothHeight()},t==="init"?100:0))}else i.slides.css({width:"100%","float":"left",marginRight:"-100%",position:"relative"}),t==="init"&&(u?i.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+i.vars.animationSpeed/1e3+"s ease",zIndex:1}).eq(i.currentSlide).css({opacity:1,zIndex:2}):i.slides.css({opacity:0,display:"block",zIndex:1}).eq(i.currentSlide).css({zIndex:2}).animate({opacity:1},i.vars.animationSpeed,i.vars.easing)),i.vars.smoothHeight&&m.smoothHeight();p||i.slides.removeClass(s+"active-slide").eq(i.currentSlide).addClass(s+"active-slide")},i.doMath=function(){var e=i.slides.first(),t=i.vars.itemMargin,n=i.vars.minItems,r=i.vars.maxItems;i.w=i.viewport===undefined?i.width():i.viewport.width(),i.h=e.height(),i.boxPadding=e.outerWidth()-e.width(),p?(i.itemT=i.vars.itemWidth+t,i.minW=n?n*i.itemT:i.w,i.maxW=r?r*i.itemT-t:i.w,i.itemW=i.minW>i.w?(i.w-t*(n-1))/n:i.maxW<i.w?(i.w-t*(r-1))/r:i.vars.itemWidth>i.w?i.w:i.vars.itemWidth,i.visible=Math.floor(i.w/i.itemW),i.move=i.vars.move>0&&i.vars.move<i.visible?i.vars.move:i.visible,i.pagingCount=Math.ceil((i.count-i.visible)/i.move+1),i.last=i.pagingCount-1,i.limit=i.pagingCount===1?0:i.vars.itemWidth>i.w?i.itemW*(i.count-1)+t*(i.count-1):(i.itemW+t)*i.count-i.w-t):(i.itemW=i.w,i.pagingCount=i.count,i.last=i.count-1),i.computedW=i.itemW-i.boxPadding},i.update=function(e,t){i.doMath(),p||(e<i.currentSlide?i.currentSlide+=1:e<=i.currentSlide&&e!==0&&(i.currentSlide-=1),i.animatingTo=i.currentSlide);if(i.vars.controlNav&&!i.manualControls)if(t==="add"&&!p||i.pagingCount>i.controlNav.length)m.controlNav.update("add");else if(t==="remove"&&!p||i.pagingCount<i.controlNav.length)p&&i.currentSlide>i.last&&(i.currentSlide-=1,i.animatingTo-=1),m.controlNav.update("remove",i.last);i.vars.directionNav&&m.directionNav.update()},i.addSlide=function(t,n){var r=e(t);i.count+=1,i.last=i.count-1,c&&h?n!==undefined?i.slides.eq(i.count-n).after(r):i.container.prepend(r):n!==undefined?i.slides.eq(n).before(r):i.container.append(r),i.update(n,"add"),i.slides=e(i.vars.selector+":not(.clone)",i),i.setup(),i.vars.added(i)},i.removeSlide=function(t){var n=isNaN(t)?i.slides.index(e(t)):t;i.count-=1,i.last=i.count-1,isNaN(t)?e(t,i.slides).remove():c&&h?i.slides.eq(i.last).remove():i.slides.eq(t).remove(),i.doMath(),i.update(n,"remove"),i.slides=e(i.vars.selector+":not(.clone)",i),i.setup(),i.vars.removed(i)},i.destroy=function(){var t="."+i.vars.namespace;i.vars.controlNav&&i.controlNav.closest(t+"control-nav").remove(),i.vars.directionNav&&i.directionNav.closest(t+"direction-nav").remove(),i.vars.pausePlay&&i.pausePlay.closest(t+"pauseplay").remove(),i.find(".clone").remove(),i.unbind(i.vars.eventNamespace),i.vars.animation!="fade"&&i.container.unwrap(),i.container.removeAttr("style"),i.container.unbind(i.vars.eventNamespace),i.slides.removeAttr("style"),i.slides.filter(t+"active-slide").removeClass(i.vars.namespace+"active-slide"),i.slides.unbind(i.vars.eventNamespace),e(document).unbind(i.vars.eventNamespace+"-"+i.id),e(window).unbind(i.vars.eventNamespace+"-"+i.id),i.stop(),i.removeData("flexslider")},m.init()},e(window).blur(function(e){focused=!1}).focus(function(e){focused=!0}),e.flexslider.defaults={namespace:"flex-",eventNamespace:".flexslider",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:!0,smoothHeight:!1,startAt:0,slideshow:!0,slideshowSpeed:7e3,animationSpeed:600,initDelay:0,randomize:!1,thumbCaptions:!1,pauseOnAction:!0,pauseOnHover:!1,pauseInvisible:!0,useCSS:!0,touch:!0,video:!1,controlNav:!0,directionNav:!0,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:!1,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:1,maxItems:0,move:0,allowOneSlide:!0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){}};var t=0;e.fn.flexslider=function(n){n===undefined&&(n={});if(typeof n=="object")return this.each(function(){var r=e(this),i=n.selector?n.selector:".slides > li",s=r.find(i);s.length===1&&n.allowOneSlide===!0||s.length===0?(s.fadeIn(400),n.start&&n.start(r)):r.data("flexslider")===undefined&&new e.flexslider(this,n,t++)});var r=e(this).data("flexslider");switch(n){case"play":r.play();break;case"pause":r.pause();break;case"stop":r.stop();break;case"next":r.flexAnimate(r.getTarget("next"),!0);break;case"prev":case"previous":r.flexAnimate(r.getTarget("prev"),!0);break;case"destroy":r.destroy();break;default:typeof n=="number"&&r.flexAnimate(n,!0)}}})(e)}),define("common/slider_cloud",["jquery","plugins/jquery.flexslider"],function(e,t){var n=new Array,r=!1;return{init:function(){e(".flexslider").addClass("flex-active").flexslider()}}}),define("modules/slider_cloud",["jquery","i18n!nls/slider_cloud.lang","helpers/photos","common/slider_cloud","jqueryui","bootstrap","canTip","canToast"],function(e,t,n,r){return{firstRun:function(t){var r=e("#ext_"+t).find(".flexslider").attr("id");r=n.id_splitter(r),this.photo_add_binder(r)},init:function(){e(".sliderUploadBut").canTip({html:t.str_slider_add_but}),e(".sliderRemoveBut").canTip({html:t.str_slider_del_but}),e(".sliderOpenBut").canTip({html:t.str_slider_edit_but}),this.binder(),r.init()},photo_add_binder:function(r){var i=this;n.add(),e("#photoForm").submit(function(){var s=e(this),o=n.serialize();if(o==0){e.canToast('<div class="error">'+t.err_select_photo+"</div> ");return}return s.find("input[type=submit]").button("loading"),i.send_to_backend(r,o),!1})},binder:function(){var t=this;e("body").on("click",".sliderUploadBut",function(){var r=e(this).parent().next().attr("id");r=n.id_splitter(r),t.photo_add_binder(r)}),e("body").on("click",".sliderOpenBut",function(){var r=e(this).parent().next().attr("id");r=n.id_splitter(r),e.post(base_url+"manage/slider_cloud/get_modal",{site_id:site_id,cloud_id:r},function(n){e("#modal").html(n).children(":first-child").modal(),e("#sort-slider tbody").sortable().disableSelection(),t.bind_form(r)})}),e("body").on("click",".btn-remove-slide",function(){var t=e(this);return t.next().val(1),t.parent().parent().fadeOut(),!1})},bind_form:function(t){e("#sliderSetForm").submit(function(){var n=e(this).serialize(),r=e(this).data("action");e("#sliderSetSubmit").button("loading");var i=e("#sliderCloud_"+t);return e.post(r,n,function(t){i.flexslider("destroy"),i.html(t),i.flexslider(),e("#sliderSetSubmit").button("complete"),e("#modal").children(":first-child").modal("hide"),e.canToast('<div class="success">Slider başarıyla güncellendi.</div>')}),!1})},send_to_backend:function(t,n){var r=this;e.ajax({type:"post",data:n+"&site_id="+site_id+"&cloud_id="+t,url:base_url+"manage/slider_cloud/add",success:function(n){var r=e.parseJSON(n),i=e("#sliderCloud_"+t);e("#photoForm").modal("hide"),i.hasClass("flex-active")&&i.flexslider("destroy"),e("#sliderCloud_"+t).html(r.main),e("#sliderCloud_"+t).addClass("flex-active").flexslider()}})}}}),define("modules/maps",["jquery","canToast"],function(e){var t=!1,n=new Array,r=new Array;return{firstRun:function(){t==1?(this.loadMap(),this.mapPlaceholder()):this.init()},init:function(){var n=this;e(".maps").size()>0&&(require(["https://www.google.com/jsapi"],function(){google.load("maps","3",{callback:function(){n.loadMap(),n.mapPlaceholder(),t=!0},other_params:"key=AIzaSyC4_GQiImJfsCCrfVdeiKRFG4lLXzxSfKU&sensor=false&libraries=places"})}),this.binder())},binder:function(){var t=this;e("body").on("click",".mapSearchBut",function(){var n=e(this).prev(),r=n.val(),i=n.attr("data-map-id");return i="map_"+i,t._getAddress(r,i),!1}),e("body").on("click",".mapSaveBut",function(){var t=e(this),n=t.parents().eq(2).next(),r="",i=t.attr("data-map-id"),s=n.attr("data-latitude"),o=n.attr("data-longitude"),u=n.attr("data-zoom"),a="site_id="+site_id+"&map_id="+i+"&map_title="+r+"&latitude="+s+"&longitude="+o+"&zoom="+u;t.attr("disabled","disabled"),e.ajax({type:"post",data:a,url:base_url+"manage/maps/save",success:function(n){e.canToast(n),t.removeAttr("disabled"),t.hide()}})})},_showSaveBut:function(t){t=t.split("_"),t=t[1],e("#mapSave_"+t).show()},loadMap:function(){var t=this,i;e(".maps").each(function(){var s=e(this),o=s.attr("id"),u=s.attr("data-latitude"),a=s.attr("data-longitude"),f=parseInt(s.attr("data-zoom")),l=new google.maps.LatLng(u,a);i={center:l,zoom:f,mapTypeId:google.maps.MapTypeId.ROADMAP},n[o]=new google.maps.Map(document.getElementById(o),i),r[o]=new google.maps.Marker({position:l,map:n[o],draggable:!0});var c=s.prev().find("[name=adressbar]")[0],h=new google.maps.places.Autocomplete(c);h.bindTo("bounds",n[o]),google.maps.event.addListener(h,"place_changed",function(){var e=h.getPlace();if(e.geometry==undefined)return t._getAddress(c.value,o),!1;e.geometry.viewport?n[o].fitBounds(e.geometry.viewport):(n[o].setCenter(e.geometry.location),n[o].setZoom(17)),r[o].setPosition(e.geometry.location),s.attr("data-latitude",e.geometry.location.lat()),s.attr("data-longitude",e.geometry.location.lng()),s.attr("data-zoom","17"),t._showSaveBut(o)}),google.maps.event.addListener(r[o],"dragend",function(e){s.attr("data-latitude",e.latLng.lat()),s.attr("data-longitude",e.latLng.lng()),t._showSaveBut(o)}),google.maps.event.addListener(n[o],"zoom_changed",function(){var e=n[o].getZoom();s.attr("data-zoom",e),t._showSaveBut(o)})})},_getAddress:function(t,i){var s=this;r[i]!=null&&r[i].setMap(null);var o=new google.maps.Geocoder;o.geocode({address:t},function(t,o){o==google.maps.GeocoderStatus.OK?(n[i].setCenter(t[0].geometry.location),e("#"+i).attr("data-latitude",t[0].geometry.location.lat()).attr("data-longitude",t[0].geometry.location.lng()),r[i]=new google.maps.Marker({map:n[i],draggable:!0,animation:google.maps.Animation.DROP,position:t[0].geometry.location}),n[i].setZoom(8),s._showSaveBut(i)):alert("Geocode was not successful for the following reason: "+o)})},mapPlaceholder:function(){var t=this.hasPlaceholderSupport();t==0&&e(".mapSettings").find("[placeholder]").each(function(){var t=e(this);t.val(t.attr("placeholder"))}),e(".mapSettings").on("focus","[placeholder]",function(){var n=e(this);n.css("color","#000"),t==0&&n.val()==n.attr("placeholder")&&n.val("")}),e(".mapSettings").on("blur","[placeholder]",function(){var n=e(this);n.val()==""&&n.css("color","#666"),t==0&&n.val()==""&&n.val(n.attr("placeholder"))})},hasPlaceholderSupport:function(){var e=document.createElement("input");return"placeholder"in e}}}),define("modules/menus",["jquery","i18n!nls/htmls.lang","modules/pages","bootstrap","canTip","canToast"],function(e,t,n){return{firstRun:function(t){var n=e("#ext_"+t).find(".menuArea").attr("id");n=n.split("_"),n=n[1],this.menu_modal(site_id,n)},init:function(){this.binder(),this.delete_binder(),this.bind_sortable(e(".nav-stacked")),e(".menuEditBut").canTip({html:"Menüyü düzenlemek için tıklayın."})},binder:function(){var t=this;e("body").on("click",".menuEditBut",function(){var n=e(this).parent().next().attr("id");n=n.split("_"),n=n[1],t.menu_modal(site_id,n)}),e("body").on("mouseenter",".nav-stacked > li",function(){e(this).find("span").fadeIn()}),e("body").on("mouseleave",".nav-stacked > li",function(){e(this).find("span").hide()})},delete_binder:function(){e("body").on("click",".delete-menu",function(){var t=e(this).parent(),n=t.attr("id");n=n.split("_"),n=n[1],t.fadeOut(),e.post(base_url+"/manage/menu/remove",{site_id:site_id,prefix:prefix,id:n},function(t){e.canToast('<div class="success">Menü elemanı başarılı bir şekilde silinmiştir.</div>')})})},bind_sortable:function(t){e(".nav-stacked").sortable({update:function(t,n){var r=e(this).sortable("serialize");r+="&site_id="+site_id,e.post(base_url+"manage/menu/sort",r,function(t){e.canToast('<div class="success">Menü sıralaması başarılı bir şekilde güncellendi.</div>')})}})},menu_modal:function(t,n){var r=this;e.post(base_url+"manage/menu/get_modal",{site_id:t,menu_id:n,prefix:prefix},function(t){e("#modal").html(t).children(":first-child").modal(),r.bind_radio(),r.bind_form(n)})},bind_radio:function(){e('input[name="page_type"]').change(function(){var t=e(this).val();t=="existing"?(e("#menu_page_id").show(),e("#menu_page_title").hide()):(e("#menu_page_id").hide(),e("#menu_page_title").show())})},bind_form:function(t){var r=this;e("#menu_page_add").submit(function(){if(e('input[name="page_type"]:checked').val()=="new"&&e("#menu_page_title").val()=="")return e.canToast('<div class="error">Lütfen sayfa başlığı giriniz.</div>'),!1;var i=e("#subPageAddBut");i.button("loading");var s=e(this).serialize(),o=e(this).data("action");return console.log(s),e.post(o,s,function(s){e.canToast('<div class="success">Sayfa başarılı bir şekilde eklenmiştir.</div>'),s=e.parseJSON(s),i.button("complete");var o=e("#menu_"+t).find("ul");o.sortable("destroy"),o.html(s.main),o.find("ul").sortable("refrestPosition"),r.bind_sortable(o),n.update_area(s.pages_content,s.pages_switcher)}),!1})}}}),define("nls/toolbar.lang",{root:{succ_edit_html:"Seçtiğiniz alanın html'i başarıyla düzenlendi.",str_enter_link:"Adresi girin",str_edit_html:"Html'i düzenlemek için tıklayın.",str_html_title:"Html'i düzenle",but_edit_html:"Düzenle",but_close:"Kapat",err_cut_b_support:"Kullandınız tarayıcı bu işlemi desteklemiyor. Lütfen klavye kısayollarını kullanın.",info_success_add_photo:"Seçilen fotoğraflar başarılı bir şekilde eklendi.",err_select_photo:"Lütfen eklemek için fotoğraf seçin"}}),define("plugins/jquery.simplecolorpicker",["jquery"],function(e){(function(e){var t=function(e,t){this.init("simplecolorpicker",e,t)};t.prototype={constructor:t,init:function(t,n,r){var i=this;i.type=t,i.$select=e(n),i.$select.hide(),i.options=e.extend({},e.fn.simplecolorpicker.defaults,r),i.$colorList=null;if(i.options.picker===!0){var s=i.$select.find("> option:selected").text();i.$icon=e('<span class="simplecolorpicker icon" title="'+s+'"'+' style="background-color: '+i.$select.val()+';"'+' role="button" tabindex="0">'+"</span>").insertAfter(i.$select),i.$icon.on("click."+i.type,e.proxy(i.showPicker,i)),i.$picker=e('<span class="simplecolorpicker picker '+i.options.theme+'"></span>').appendTo(document.body),i.$colorList=i.$picker,e(document).on("mousedown."+i.type,e.proxy(i.hidePicker,i)),i.$picker.on("mousedown."+i.type,e.proxy(i.mousedown,i))}else i.$inline=e('<span class="simplecolorpicker inline '+i.options.theme+'"></span>').insertAfter(i.$select),i.$colorList=i.$inline;i.$select.find("> option").each(function(){var t=e(this),n=t.val(),r=t.is(":selected"),s=t.is(":disabled"),o="";r===!0&&(o=" data-selected");var u="";s===!0&&(u=" data-disabled");var a="";s===!1&&(a=' title="'+t.text()+'"');var f="";s===!1&&(f=' role="button" tabindex="0"');var l=e('<span class="color"'+a+' style="background-color: '+n+';"'+' data-color="'+n+'"'+o+u+f+">"+"</span>");i.$colorList.append(l),l.on("click."+i.type,e.proxy(i.colorSpanClicked,i));var c=t.next();c.is("optgroup")===!0&&i.$colorList.append('<span class="vr"></span>')})},selectColor:function(t){var n=this,r=n.$colorList.find("> span.color").filter(function(){return e(this).data("color").toLowerCase()===t.toLowerCase()});r.length>0?n.selectColorSpan(r):console.error("The given color '"+t+"' could not be found")},showPicker:function(){var e=this.$icon.offset();this.$picker.css({left:e.left-6,top:e.top+this.$icon.outerHeight()}),this.$picker.show(this.options.pickerDelay)},hidePicker:function(){this.$picker.hide(this.options.pickerDelay)},selectColorSpan:function(e){var t=e.data("color"),n=e.prop("title");e.siblings().removeAttr("data-selected"),e.attr("data-selected",""),this.options.picker===!0&&(this.$icon.css("background-color",t),this.$icon.prop("title",n),this.hidePicker()),this.$select.val(t)},colorSpanClicked:function(t){e(t.target).is("[data-disabled]")===!1&&(this.selectColorSpan(e(t.target)),this.$select.trigger("change"))},mousedown:function(e){e.stopPropagation(),e.preventDefault()},destroy:function(){this.options.picker===!0&&(this.$icon.off("."+this.type),this.$icon.remove(),e(document).off("."+this.type)),this.$colorList.off("."+this.type),this.$colorList.remove(),this.$select.removeData(this.type),this.$select.show()}},e.fn.simplecolorpicker=function(n){var r=e.makeArray(arguments);return r.shift(),this.each(function(){var i=e(this),s=i.data("simplecolorpicker"),o=typeof n=="object"&&n;s===undefined&&i.data("simplecolorpicker",s=new t(this,o)),typeof n=="string"&&s[n].apply(s,r)})},e.fn.simplecolorpicker.defaults={theme:"",picker:!1,pickerDelay:0}})(e)}),define("helpers/toolbar",["i18n!nls/toolbar.lang","helpers/photos","plugins/jquery.simplecolorpicker"],function(e,t){var n;return{init:function(){},insert_video:function(e){var t=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,n=e.match(t),r=/\/\/instagram.com\/p\/(.[a-zA-Z0-9]*)/,i=e.match(r),s=/\/\/vine.co\/v\/(.[a-zA-Z0-9]*)/,o=e.match(s),u=/\/\/(player.)?vimeo.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/,a=e.match(u),f=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/,l=e.match(f),c;if(n&&n[2].length===11){var h=n[2];c=$("<iframe>").attr("src","//www.youtube.com/embed/"+h).attr("width","640").attr("height","360")}else i&&i[0].length>0?c=$("<iframe>").attr("src",i[0]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true"):o&&o[0].length>0?c=$("<iframe>").attr("src",o[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed"):a&&a[3].length>0?c=$("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("src","//player.vimeo.com/video/"+a[3]).attr("width","640").attr("height","360"):l&&l[2].length>0&&(c=$("<iframe>").attr("src","//www.dailymotion.com/embed/video/"+l[2]).attr("width","640").attr("height","360"));if(c){c.attr("frameborder",0);var p=this.obj_to_s(c);tinyMCE.execCommand("mceInsertContent",!1,p)}},photo_callback:function(){var n=this;t.add(),$("#photoForm").submit(function(){var r=$(this).find("[type=submit]"),i=$("body")[0],s=$.data(i,"elementId");s=t.id_splitter(s);var o=t.serialize();if(o==0){$.canToast('<div class="error">'+e.err_select_photo+"</div> ");return}return r.button("loading"),n.send_to_backend(s,o),!1})},blog_photo_callback:function(){var n=this;t.add(),$("#photoForm").submit(function(){var r=$(this).find("[type=submit]"),i=t.serialize();if(i==0){$.canToast('<div class="error">'+e.err_select_photo+"</div> ");return}return r.button("loading"),n.send_to_blog_backend(i),!1})},send_to_blog_backend:function(e){var t=this,n=$("#post_blog_id").val();$.ajax({type:"post",data:e+"&site_id="+site_id+"&blog_id="+n,url:base_url+"manage/blog/photo",success:function(e){var n=$.parseJSON(e);t.restoreSelection(),$.each(n.photos,function(e,t){var n='<img src="'+t.path+'" data-blog_pic_id="'+t.blog_pic_id+'" />';tinyMCE.execCommand("mceInsertContent",!1,n)}),$("#photoForm").modal("hide")}})},send_to_backend:function(e,t){var n=this;$.ajax({type:"post",data:t+"&site_id="+site_id+"&paragraph_id="+e,url:base_url+"manage/paragraphs/photo",success:function(e){var t=$.parseJSON(e);n.restoreSelection(),$.each(t.photos,function(e,t){var n=$(document.createElement("img"));n.css({"float":"left"}).attr("src",t.path).attr("data-p_pic_id",t.p_pic_id).attr("data-ratio",t.ratio);var r='<img src="'+t.path+'" data-p_pic_id="'+t.p_pic_id+'" />';tinyMCE.execCommand("mceInsertContent",!1,r)}),$("#photoForm").modal("hide")}})},obj_to_s:function(e){var t=jQuery("<div>");return jQuery.each(e,function(e,n){jQuery.nodeName(n,"script")||t.append(n)}),t.html()},resizableImg:function(e){var t=e.attr("data-ratio"),n=e.attr("src");e.resizable({create:function(t,n){var r=e.css("float");$(t.target).css({"z-index":1e3,"float":r})},start:function(){$(document).disableSelection()},stop:function(t,r){$(document).enableSelection();var i=e.attr("data-p_pic_id"),s=$(this).width(),o=$(this).height();$.post(base_url+"manage/paragraphs/resize",{site_id:site_id,p_pic_id:i,width:s,height:o},function(t){$.canToast(t);var r,i=(new Date).getTime(),s=n.split("?");s[0]?r=s[0]+"?"+i:r=n+"?"+i,e.attr("src",r)})}})},videoEditor:function(){var t=$("body")[0],n=$.data(t,"elementId"),r=this;this.saveSelection();var r=this,i='<form class="modal fade" name="toolVideoForm" id="toolVideoForm" action="#" method="post">';i+='<div class="modal-header"><a class="close" data-dismiss="modal">×</a><h3>Video Ekle</h3></div>',i+='<div class="modal-body">',i+='<input type="text" id="videoUrl" class="htmleditor" value="http://"/>',i+="Desteklenen siteler: Youtube, vimeo, instagram, dailymotion",i+="</div>",i+='<div class="modal-footer"><a class="btn" data-dismiss="modal">'+e.but_close+"</a>",i+='<input type="submit" class="btn btn-primary" value="Ekle"/>',i+="</div></form>",$("#modal").html(i).children(":first-child").modal(),$("#toolVideoForm").submit(function(e){e.preventDefault();var t=$("#videoUrl").val();r.restoreSelection(),r.insert_video(t),$("#"+n).fitVids(),$("#toolVideoForm").modal("hide")})},saveSelection:function(){var e=$("body")[0],t=$.data(e,"elementId");$("#"+t).focus(),window.getSelection?n=window.getSelection().getRangeAt(0):document.selection&&(n=document.selection.createRange())},restoreSelection:function(){if(n!=null)if(window.getSelection){var e=window.getSelection();e.rangeCount>0&&e.removeAllRanges(),e.addRange(n)}else document.createRange?window.getSelection().addRange(n):document.selection&&n.select()}}}),!function(e,t){function n(e,t){for(var n,r=[],i=0;i<e.length;++i){if(n=u[e[i]]||s(e[i]),!n)throw"module definition dependecy not found: "+e[i];r.push(n)}t.apply(null,r)}function r(e,r,i){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(i===t)throw"invalid module definition, definition function must be specified";n(r,function(){u[e]=i.apply(null,arguments)})}function i(e){return!!u[e]}function s(t){for(var n=e,r=t.split(/[.\/]/),i=0;i<r.length;++i){if(!n[r[i]])return;n=n[r[i]]}return n}function o(n){for(var r=0;r<n.length;r++){for(var i=e,s=n[r],o=s.split(/[.\/]/),a=0;a<o.length-1;++a)i[o[a]]===t&&(i[o[a]]={}),i=i[o[a]];i[o[o.length-1]]=u[s]}}var u={},a="tinymce/dom/Sizzle",f="tinymce/dom/EventUtils",l="tinymce/util/Tools",c="tinymce/Env",h="tinymce/dom/DomQuery",p="tinymce/html/Styles",d="tinymce/dom/TreeWalker",v="tinymce/dom/Range",m="tinymce/html/Entities",g="tinymce/dom/StyleSheetLoader",y="tinymce/dom/DOMUtils",b="tinymce/dom/ScriptLoader",w="tinymce/AddOnManager",E="tinymce/dom/RangeUtils",S="tinymce/NodeChange",x="tinymce/html/Node",T="tinymce/html/Schema",N="tinymce/html/SaxParser",C="tinymce/html/DomParser",k="tinymce/html/Writer",L="tinymce/html/Serializer",A="tinymce/dom/Serializer",O="tinymce/dom/TridentSelection",M="tinymce/util/VK",_="tinymce/dom/ControlSelection",D="tinymce/dom/BookmarkManager",P="tinymce/dom/Selection",H="tinymce/dom/ElementUtils",B="tinymce/fmt/Preview",j="tinymce/Formatter",F="tinymce/UndoManager",I="tinymce/EnterKey",q="tinymce/ForceBlocks",R="tinymce/EditorCommands",U="tinymce/util/URI",z="tinymce/util/Class",W="tinymce/util/EventDispatcher",X="tinymce/ui/Selector",V="tinymce/ui/Collection",$="tinymce/ui/DomUtils",J="tinymce/ui/Control",K="tinymce/ui/Factory",Q="tinymce/ui/KeyboardNavigation",G="tinymce/ui/Container",Y="tinymce/ui/DragHelper",Z="tinymce/ui/Scrollable",et="tinymce/ui/Panel",tt="tinymce/ui/Movable",nt="tinymce/ui/Resizable",rt="tinymce/ui/FloatPanel",it="tinymce/ui/Window",st="tinymce/ui/MessageBox",ot="tinymce/WindowManager",ut="tinymce/util/Quirks",at="tinymce/util/Observable",ft="tinymce/EditorObservable",lt="tinymce/Shortcuts",ct="tinymce/Editor",ht="tinymce/util/I18n",pt="tinymce/FocusManager",dt="tinymce/EditorManager",vt="tinymce/LegacyInput",mt="tinymce/util/XHR",gt="tinymce/util/JSON",yt="tinymce/util/JSONRequest",bt="tinymce/util/JSONP",wt="tinymce/util/LocalStorage",Et="tinymce/Compat",St="tinymce/ui/Layout",xt="tinymce/ui/AbsoluteLayout",Tt="tinymce/ui/Tooltip",Nt="tinymce/ui/Widget",Ct="tinymce/ui/Button",kt="tinymce/ui/ButtonGroup",Lt="tinymce/ui/Checkbox",At="tinymce/ui/ComboBox",Ot="tinymce/ui/ColorBox",Mt="tinymce/ui/PanelButton",_t="tinymce/ui/ColorButton",Dt="tinymce/util/Color",Pt="tinymce/ui/ColorPicker",Ht="tinymce/ui/Path",Bt="tinymce/ui/ElementPath",jt="tinymce/ui/FormItem",Ft="tinymce/ui/Form",It="tinymce/ui/FieldSet",qt="tinymce/ui/FilePicker",Rt="tinymce/ui/FitLayout",Ut="tinymce/ui/FlexLayout",zt="tinymce/ui/FlowLayout",Wt="tinymce/ui/FormatControls",Xt="tinymce/ui/GridLayout",Vt="tinymce/ui/Iframe",$t="tinymce/ui/Label",Jt="tinymce/ui/Toolbar",Kt="tinymce/ui/MenuBar",Qt="tinymce/ui/MenuButton",Gt="tinymce/ui/ListBox",Yt="tinymce/ui/MenuItem",Zt="tinymce/ui/Menu",en="tinymce/ui/Radio",tn="tinymce/ui/ResizeHandle",nn="tinymce/ui/Spacer",rn="tinymce/ui/SplitButton",sn="tinymce/ui/StackLayout",on="tinymce/ui/TabPanel",un="tinymce/ui/TextBox",an="tinymce/ui/Throbber";r(a,[],function(){if(!window.jQuery)throw new Error("Load jQuery first");return jQuery.find}),r(f,[],function(){function e(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)}function t(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)}function n(e,t){function n(){return!1}function r(){return!0}var i,s=t||{},a;for(i in e)u[i]||(s[i]=e[i]);if(s.target||(s.target=s.srcElement||document),e&&o.test(e.type)&&e.pageX===a&&e.clientX!==a){var f=s.target.ownerDocument||document,l=f.documentElement,c=f.body;s.pageX=e.clientX+(l&&l.scrollLeft||c&&c.scrollLeft||0)-(l&&l.clientLeft||c&&c.clientLeft||0),s.pageY=e.clientY+(l&&l.scrollTop||c&&c.scrollTop||0)-(l&&l.clientTop||c&&c.clientTop||0)}return s.preventDefault=function(){s.isDefaultPrevented=r,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},s.stopPropagation=function(){s.isPropagationStopped=r,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},s.stopImmediatePropagation=function(){s.isImmediatePropagationStopped=r,s.stopPropagation()},s.isDefaultPrevented||(s.isDefaultPrevented=n,s.isPropagationStopped=n,s.isImmediatePropagationStopped=n),s}function r(n,r,i){function s(){i.domLoaded||(i.domLoaded=!0,r(f))}function o(){("complete"===a.readyState||"interactive"===a.readyState&&a.body)&&(t(a,"readystatechange",o),s())}function u(){try{a.documentElement.doScroll("left")}catch(e){return void setTimeout(u,0)}s()}var a=n.document,f={type:"ready"};return i.domLoaded?void r(f):(a.addEventListener?"complete"===a.readyState?s():e(n,"DOMContentLoaded",s):(e(a,"readystatechange",o),a.documentElement.doScroll&&n.self===n.top&&u()),void e(n,"load",s))}function i(){function i(e,t){var n,r,i,s,o=u[t];if(n=o&&o[e.type])for(r=0,i=n.length;i>r;r++)if(s=n[r],s&&s.func.call(s.scope,e)===!1&&e.preventDefault(),e.isImmediatePropagationStopped())return}var o=this,u={},a,f,l,c,h;f=s+(+(new Date)).toString(32),c="onmouseenter"in document.documentElement,l="onfocusin"in document.documentElement,h={mouseenter:"mouseover",mouseleave:"mouseout"},a=1,o.domLoaded=!1,o.events=u,o.bind=function(t,s,p,d){function v(e){i(n(e||x.event),m)}var m,g,y,b,w,E,S,x=window;if(t&&3!==t.nodeType&&8!==t.nodeType){for(t[f]?m=t[f]:(m=a++,t[f]=m,u[m]={}),d=d||t,s=s.split(" "),y=s.length;y--;)b=s[y],E=v,w=S=!1,"DOMContentLoaded"===b&&(b="ready"),o.domLoaded&&"ready"===b&&"complete"==t.readyState?p.call(d,n({type:b})):(c||(w=h[b],w&&(E=function(e){var t,r;if(t=e.currentTarget,r=e.relatedTarget,r&&t.contains)r=t.contains(r);else for(;r&&r!==t;)r=r.parentNode;r||(e=n(e||x.event),e.type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,i(e,m))})),l||"focusin"!==b&&"focusout"!==b||(S=!0,w="focusin"===b?"focus":"blur",E=function(e){e=n(e||x.event),e.type="focus"===e.type?"focusin":"focusout",i(e,m)}),g=u[m][b],g?"ready"===b&&o.domLoaded?p({type:b}):g.push({func:p,scope:d}):(u[m][b]=g=[{func:p,scope:d}],g.fakeName=w,g.capture=S,g.nativeHandler=E,"ready"===b?r(t,E,o):e(t,w||b,E,S)));return t=g=0,p}},o.unbind=function(e,n,r){var i,s,a,l,c,h;if(!e||3===e.nodeType||8===e.nodeType)return o;if(i=e[f]){if(h=u[i],n){for(n=n.split(" "),a=n.length;a--;)if(c=n[a],s=h[c]){if(r)for(l=s.length;l--;)if(s[l].func===r){var p=s.nativeHandler,d=s.fakeName,v=s.capture;s=s.slice(0,l).concat(s.slice(l+1)),s.nativeHandler=p,s.fakeName=d,s.capture=v,h[c]=s}r&&0!==s.length||(delete h[c],t(e,s.fakeName||c,s.nativeHandler,s.capture))}}else{for(c in h)s=h[c],t(e,s.fakeName||c,s.nativeHandler,s.capture);h={}}for(c in h)return o;delete u[i];try{delete e[f]}catch(m){e[f]=null}}return o},o.fire=function(e,t,r){var s;if(!e||3===e.nodeType||8===e.nodeType)return o;r=n(null,r),r.type=t,r.target=e;do s=e[f],s&&i(r,s),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow;while(e&&!r.isPropagationStopped());return o},o.clean=function(e){var t,n,r=o.unbind;if(!e||3===e.nodeType||8===e.nodeType)return o;if(e[f]&&r(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(r(e),n=e.getElementsByTagName("*"),t=n.length;t--;)e=n[t],e[f]&&r(e);return o},o.destroy=function(){u={}},o.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}}var s="mce-data-",o=/^(?:mouse|contextmenu)|click/,u={keyLocation:1,layerX:1,layerY:1,returnValue:1};return i.Event=new i,i.Event.bind(window,"ready",function(){}),i}),r(l,[],function(){function e(e){return null===e||e===t?"":(""+e).replace(v,"")}function n(e,n){return n?"array"==n&&m(e)?!0:typeof e==n:e!==t}function r(e){var t=e,n,r;if(!m(e))for(t=[],n=0,r=e.length;r>n;n++)t[n]=e[n];return t}function i(e,t,n){var r;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),n=n||{},r=e.length;r--;)n[e[r]]={};return n}function s(e,n,r){var i,s;if(!e)return 0;if(r=r||e,e.length!==t){for(i=0,s=e.length;s>i;i++)if(n.call(r,e[i],i,e)===!1)return 0}else for(i in e)if(e.hasOwnProperty(i)&&n.call(r,e[i],i,e)===!1)return 0;return 1}function o(e,t){var n=[];return s(e,function(e){n.push(t(e))}),n}function u(e,t){var n=[];return s(e,function(e){(!t||t(e))&&n.push(e)}),n}function a(e,t,n){var r=this,i,s,o,u,a,f=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),o=e[3].match(/(^|\.)(\w+)$/i)[2],s=r.createNS(e[3].replace(/\.\w+$/,""),n),!s[o]){if("static"==e[2])return s[o]=t,void (this.onCreate&&this.onCreate(e[2],e[3],s[o]));t[o]||(t[o]=function(){},f=1),s[o]=t[o],r.extend(s[o].prototype,t),e[5]&&(i=r.resolve(e[5]).prototype,u=e[5].match(/\.(\w+)$/i)[1],a=s[o],s[o]=f?function(){return i[u].apply(this,arguments)}:function(){return this.parent=i[u],a.apply(this,arguments)},s[o].prototype[o]=s[o],r.each(i,function(e,t){s[o].prototype[t]=i[t]}),r.each(t,function(e,t){i[t]?s[o].prototype[t]=function(){return this.parent=i[t],e.apply(this,arguments)}:t!=o&&(s[o].prototype[t]=e)})),r.each(t["static"],function(e,t){s[o][t]=e})}}function f(e,t){var n,r;if(e)for(n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}function l(e,n){var r,i,s,o=arguments,u;for(r=1,i=o.length;i>r;r++){n=o[r];for(s in n)n.hasOwnProperty(s)&&(u=n[s],u!==t&&(e[s]=u))}return e}function c(e,t,n,r){r=r||this,e&&(n&&(e=e[n]),s(e,function(e,i){return t.call(r,e,i,n)===!1?!1:void c(e,t,n,r)}))}function h(e,t){var n,r;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)r=e[n],t[r]||(t[r]={}),t=t[r];return t}function p(e,t){var n,r;for(t=t||window,e=e.split("."),n=0,r=e.length;r>n&&(t=t[e[n]],t);n++);return t}function d(t,r){return!t||n(t,"array")?t:o(t.split(r||","),e)}var v=/^\s*|\s*$/g,m=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return{trim:e,isArray:m,is:n,toArray:r,makeMap:i,each:s,map:o,grep:u,inArray:f,extend:l,create:a,walk:c,createNS:h,resolve:p,explode:d}}),r(c,[],function(){var e=navigator,t=e.userAgent,n,r,i,s,o,u,a;n=window.opera&&window.opera.buildNumber,r=/WebKit/.test(t),i=!r&&!n&&/MSIE/gi.test(t)&&/Explorer/gi.test(e.appName),i=i&&/MSIE (\w+)\./.exec(t)[1],s=-1==t.indexOf("Trident/")||-1==t.indexOf("rv:")&&-1==e.appName.indexOf("Netscape")?!1:11,i=i||s,o=!r&&!s&&/Gecko/.test(t),u=-1!=t.indexOf("Mac"),a=/(iPad|iPhone)/.test(t);var f=!a||t.match(/AppleWebKit\/(\d*)/)[1]>=534;return{opera:n,webkit:r,ie:i,gecko:o,mac:u,iOS:a,contentEditable:f,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=i,range:window.getSelection&&"Range"in window,documentMode:i?document.documentMode||7:10}}),r(h,[f,a,l,c],function(e,n,r,i){function s(e){return"undefined"!=typeof e}function o(e){return"string"==typeof e}function u(e,t){var n,r,i;for(t=t||b,i=t.createElement("div"),n=t.createDocumentFragment(),i.innerHTML=e;r=i.firstChild;)n.appendChild(r);return n}function a(e,t,n,r){var i;if(o(t))t=u(t);else if(t.length&&!t.nodeType){if(t=c.makeArray(t),r)for(i=t.length-1;i>=0;i--)a(e,t[i],n,r);else for(i=0;i<t.length;i++)a(e,t[i],n,r);return e}if(t.nodeType)for(i=e.length;i--;)n.call(e[i],t);return e}function f(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")}function l(e,t,n){var r,i;return t=c(t)[0],e.each(function(){var e=this;n&&r==e.parentNode?i.appendChild(e):(r=e.parentNode,i=t.cloneNode(!1),e.parentNode.insertBefore(i,e),i.appendChild(e))}),e}function c(e,t){return new c.fn.init(e,t)}function h(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1}function p(e){return null===e||e===T?"":(""+e).replace(M,"")}function d(e,t){var n,r,i,s,o;if(e)if(n=e.length,n===s){for(r in e)if(e.hasOwnProperty(r)&&(o=e[r],t.call(o,r,o)===!1))break}else for(i=0;n>i&&(o=e[i],t.call(o,i,o)!==!1);i++);return e}function v(e,n,r){var i=[],s=e[n];for("string"!=typeof r&&r instanceof c&&(r=r[0]);s&&9!==s.nodeType;){if(r!==t){if(s===r)break;if("string"==typeof r&&c(s).is(r))break}1===s.nodeType&&i.push(s),s=s[n]}return i}function m(e,n,r,i){var s=[];for(i instanceof c&&(i=i[0]);e;e=e[n])if(!r||e.nodeType===r){if(i!==t){if(e===i)break;if("string"==typeof i&&c(e).is(i))break}s.push(e)}return s}function g(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType==n)return e;return null}function y(e,t,n){d(n,function(n,r){e[n]=e[n]||{},e[n][t]=r})}var b=document,w=Array.prototype.push,E=Array.prototype.slice,S=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,x=e.Event,T,N=r.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),C=r.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),k={"for":"htmlFor","class":"className",readonly:"readOnly"},L={"float":"cssFloat"},A={},O={},M=/^\s*|\s*$/g;return c.fn=c.prototype={constructor:c,selector:"",context:null,length:0,init:function(e,t){var n=this,r,i;if(!e)return n;if(e.nodeType)return n.context=n[0]=e,n.length=1,n;if(t&&t.nodeType)n.context=t;else{if(t)return c(e).attr(t);n.context=t=document}if(o(e)){if(n.selector=e,r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:S.exec(e),!r)return c(t).find(e);if(r[1])for(i=u(e,t).firstChild;i;)w.call(n,i),i=i.nextSibling;else{if(i=b.getElementById(r[2]),i.id!==r[2])return n.find(e);n.length=1,n[0]=i}}else this.add(e,!1);return n},toArray:function(){return r.toArray(this)},add:function(e,t){var n=this,r,i;if(o(e))return n.add(c(e));if(e.nodeType)return n.add([e]);if(t!==!1)for(r=c.unique(n.toArray().concat(c.makeArray(e))),n.length=r.length,i=0;i<r.length;i++)n[i]=r[i];else w.apply(n,c.makeArray(e));return n},attr:function(e,t){var n=this,r;if("object"==typeof e)d(e,function(e,t){n.attr(e,t)});else{if(!s(t)){if(n[0]&&1===n[0].nodeType){if(r=A[e],r&&r.get)return r.get(n[0],e);if(C[e])return n.prop(e)?e:T;t=n[0].getAttribute(e,2),null===t&&(t=T)}return t}this.each(function(){var n;if(1===this.nodeType){if(n=A[e],n&&n.set)return void n.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}})}return n},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if(e=k[e]||e,"object"==typeof e)d(e,function(e,t){n.prop(e,t)});else{if(!s(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1==this.nodeType&&(this[e]=t)})}return n},css:function(e,t){function n(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})}function r(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})}var i=this,o,u;if("object"==typeof e)d(e,function(e,t){i.css(e,t)});else if(s(t))e=n(e),"number"!=typeof t||N[e]||(t+="px"),i.each(function(){var n=this.style;if(u=O[e],u&&u.set)return void u.set(this,t);try{this.style[L[e]||e]=t}catch(i){}(null===t||""===t)&&(n.removeProperty?n.removeProperty(r(e)):n.removeAttribute(e))});else{if(o=i[0],u=O[e],u&&u.get)return u.get(o);if(o.ownerDocument.defaultView)try{return o.ownerDocument.defaultView.getComputedStyle(o,null).getPropertyValue(r(e))}catch(a){return T}else if(o.currentStyle)return o.currentStyle[n(e)]}return i},remove:function(){for(var e=this,t,n=this.length;n--;)t=e[n],x.clean(t),t.parentNode&&t.parentNode.removeChild(t);return this},empty:function(){for(var e=this,t,n=this.length;n--;)for(t=e[n];t.firstChild;)t.removeChild(t.firstChild);return this},html:function(e){var t=this,n;if(s(e)){n=t.length;try{for(;n--;)t[n].innerHTML=e}catch(r){c(t[n]).empty().append(e)}return t}return t[0]?t[0].innerHTML:""},text:function(e){var t=this,n;if(s(e)){for(n=t.length;n--;)"innerText"in t[n]?t[n].innerText=e:t[0].textContent=e;return t}return t[0]?t[0].innerText||t[0].textContent:""},append:function(){return a(this,arguments,function(e){1===this.nodeType&&this.appendChild(e)})},prepend:function(){return a(this,arguments,function(e){1===this.nodeType&&this.insertBefore(e,this.firstChild)},!0)},before:function(){var e=this;return e[0]&&e[0].parentNode?a(e,arguments,function(e){this.parentNode.insertBefore(e,this)}):e},after:function(){var e=this;return e[0]&&e[0].parentNode?a(e,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):e},appendTo:function(e){return c(e).append(this),this},prependTo:function(e){return c(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return l(this,e)},wrapAll:function(e){return l(this,e,!0)},wrapInner:function(e){return this.each(function(){c(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){c(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),c(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return"string"!=typeof e?n:(-1!==e.indexOf(" ")?d(e.split(" "),function(){n.toggleClass(this,t)}):n.each(function(n,r){var i,s;s=f(r,e),s!==t&&(i=r.className,s?r.className=p((" "+i+" ").replace(" "+e+" "," ")):r.className+=i?" "+e:e)}),n)},hasClass:function(e){return f(this[0],e)},each:function(e){return d(this,e)},on:function(e,t){return this.each(function(){x.bind(this,e,t)})},off:function(e,t){return this.each(function(){x.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?x.fire(this,e.type,e):x.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new c(E.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,r=[];for(t=0,n=this.length;n>t;t++)c.find(e,this[t],r);return c(r)},filter:function(e){return c(c.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof c&&(e=e[0]),this.each(function(n,r){for(;r;){if("string"==typeof e&&c(r).is(e)){t.push(r);break}if(r==e){t.push(r);break}r=r.parentNode}}),c(t)},push:w,sort:[].sort,splice:[].splice},r.extend(c,{extend:r.extend,makeArray:r.toArray,inArray:h,isArray:r.isArray,each:d,trim:p,find:n,expr:n.selectors,unique:n.uniqueSort,text:n.getText,contains:n.contains,filter:function(e,t,n){return n&&(e=":not("+e+")"),t=1===t.length?c.find.matchesSelector(t[0],e)?[t[0]]:[]:c.find.matches(e,t)}}),d({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return v(e,"parentNode")},next:function(e){return g(e,"nextSibling",1)},prev:function(e){return g(e,"previousSibling",1)},children:function(e){return m(e.firstChild,"nextSibling",1)},contents:function(e){return r.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){c.fn[e]=function(n){var r=this,i=[];return r.each(function(){var e=t.call(i,this,n,i);e&&(c.isArray(e)?i.push.apply(i,e):i.push(e))}),this.length>1&&(i=c.unique(i),0===e.indexOf("parents")&&(i=i.reverse())),i=c(i),n?i.filter(n):i}}),d({parentsUntil:function(e,t){return v(e,"parentNode",t)},nextUntil:function(e,t){return m(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return m(e,"previousSibling",1,t).slice(1)}},function(e,t){c.fn[e]=function(n,r){var i=this,s=[];return i.each(function(){var e=t.call(s,this,n,s);e&&(c.isArray(e)?s.push.apply(s,e):s.push(e))}),this.length>1&&(s=c.unique(s),(0===e.indexOf("parents")||"prevUntil"===e)&&(s=s.reverse())),s=c(s),r?s.filter(r):s}}),c.fn.is=function(e){return!!e&&this.filter(e).length>0},c.fn.init.prototype=c.fn,c.overrideDefaults=function(e){function t(r,i){return n=n||e(),0===arguments.length&&(r=n.element),i||(i=n.context),new t.fn.init(r,i)}var n;return c.extend(t,this),t},i.ie&&i.ie<8&&(y(A,"get",{maxlength:function(e){var t=e.maxLength;return 2147483647===t?T:t},size:function(e){var t=e.size;return 20===t?T:t},"class":function(e){return e.className},style:function(e){var t=e.style.cssText;return 0===t.length?T:t}}),y(A,"set",{"class":function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),i.ie&&i.ie<9&&(L.float="styleFloat",y(O,"set",{opacity:function(e,t){var n=e.style;null===t||""===t?n.removeAttribute("filter"):(n.zoom=1,n.filter="alpha(opacity="+100*t+")")}})),c.attrHooks=A,c.cssHooks=O,c}),r(p,[],function(){return function(e,t){function n(e,t,n,r){function i(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+i(t)+i(n)+i(r)}var r=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,i=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,u,a,f={},l,c,h,p="﻿";for(e=e||{},t&&(c=t.getValidStyles(),h=t.getInvalidStyles()),l=("\\\" \\' \\; \\: ; : "+p).split(" "),a=0;a<l.length;a++)f[l[a]]=p+a,f[p+a]=l[a];return{toHex:function(e){return e.replace(r,n)},parse:function(t){function u(e,t,n){var r,i,s,o;if(r=v[e+"-top"+t],r&&(i=v[e+"-right"+t],i&&(s=v[e+"-bottom"+t],s&&(o=v[e+"-left"+t])))){var u=[r,i,s,o];for(a=u.length-1;a--&&u[a]===u[a+1];);a>-1&&n||(v[e+t]=-1==a?u[0]:u.join(" "),delete v[e+"-top"+t],delete v[e+"-right"+t],delete v[e+"-bottom"+t],delete v[e+"-left"+t])}}function l(e){var t=v[e],n;if(t){for(t=t.split(" "),n=t.length;n--;)if(t[n]!==t[0])return!1;return v[e]=t[0],!0}}function c(e,t,n,r){l(t)&&l(n)&&l(r)&&(v[e]=v[t]+" "+v[n]+" "+v[r],delete v[t],delete v[n],delete v[r])}function h(e){return b=!0,f[e]}function p(e,t){return b&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return f[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e}function d(t,n,r,i,s,o){if(s=s||o)return s=p(s),"'"+s.replace(/\'/g,"\\'")+"'";if(n=p(n||r||i),!e.allow_script_urls){var u=n.replace(/[\s\r\n]+/,"");if(/(java|vb)script:/i.test(u))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(u))return""}return w&&(n=w.call(E,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"}var v={},m,g,y,b,w=e.url_converter,E=e.url_converter_scope||this;if(t){for(t=t.replace(/[\u0000-\u001F]/g,""),t=t.replace(/\\[\"\';:\uFEFF]/g,h).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,h)});m=s.exec(t);){if(g=m[1].replace(o,"").toLowerCase(),y=m[2].replace(o,""),y=y.replace(/\\[0-9a-f]+/g,function(e){return String.fromCharCode(parseInt(e.substr(1),16))}),g&&y.length>0){if(!e.allow_script_urls&&("behavior"==g||/expression\s*\(|\/\*|\*\//.test(y)))continue;"font-weight"===g&&"700"===y?y="bold":("color"===g||"background-color"===g)&&(y=y.toLowerCase()),y=y.replace(r,n),y=y.replace(i,d),v[g]=b?p(y,!0):y}s.lastIndex=m.index+m[0].length}u("border","",!0),u("border","-width"),u("border","-color"),u("border","-style"),u("padding",""),u("margin",""),c("border","border-width","border-style","border-color"),"medium none"===v.border&&delete v.border,"none"===v["border-image"]&&delete v["border-image"]}return v},serialize:function(e,t){function n(t){var n,r,s,o;if(n=c[t])for(r=0,s=n.length;s>r;r++)t=n[r],o=e[t],o!==u&&o.length>0&&(i+=(i.length>0?" ":"")+t+": "+o+";")}function r(e,t){var n;return n=h["*"],n&&n[e]?!1:(n=h[t],n&&n[e]?!1:!0)}var i="",s,o;if(t&&c)n("*"),n(t);else for(s in e)o=e[s],o!==u&&o.length>0&&(!h||r(s,t))&&(i+=(i.length>0?" ":"")+s+": "+o+";");return i}}}}),r(d,[],function(){return function(e,t){function n(e,n,r,i){var s,o;if(e){if(!i&&e[n])return e[n];if(e!=t){if(s=e[r])return s;for(o=e.parentNode;o&&o!=t;o=o.parentNode)if(s=o[r])return s}}}var r=e;this.current=function(){return r},this.next=function(e){return r=n(r,"firstChild","nextSibling",e)},this.prev=function(e){return r=n(r,"lastChild","previousSibling",e)}}}),r(v,[l],function(e){function t(n){function r(){return H.createDocumentFragment()}function i(e,t){x(I,e,t)}function s(e,t){x(q,e,t)}function o(e){i(e.parentNode,V(e))}function u(e){i(e.parentNode,V(e)+1)}function a(e){s(e.parentNode,V(e))}function f(e){s(e.parentNode,V(e)+1)}function l(e){e?(P[z]=P[U],P[W]=P[R]):(P[U]=P[z],P[R]=P[W]),P.collapsed=I}function c(e){o(e),f(e)}function h(e){i(e,0),s(e,1===e.nodeType?e.childNodes.length:e.nodeValue.length)}function p(e,t){var n=P[U],r=P[R],i=P[z],s=P[W],o=t.startContainer,u=t.startOffset,a=t.endContainer,f=t.endOffset;return 0===e?S(n,r,o,u):1===e?S(i,s,o,u):2===e?S(i,s,a,f):3===e?S(n,r,a,f):void 0}function d(){T(F)}function v(){return T(B)}function m(){return T(j)}function g(e){var t=this[U],r=this[R],i,s;3!==t.nodeType&&4!==t.nodeType||!t.nodeValue?(t.childNodes.length>0&&(s=t.childNodes[r]),s?t.insertBefore(e,s):3==t.nodeType?n.insertAfter(e,t):t.appendChild(e)):r?r>=t.nodeValue.length?n.insertAfter(e,t):(i=t.splitText(r),t.parentNode.insertBefore(e,i)):t.parentNode.insertBefore(e,t)}function y(e){var t=P.extractContents();P.insertNode(e),e.appendChild(t),P.selectNode(e)}function b(){return X(new t(n),{startContainer:P[U],startOffset:P[R],endContainer:P[z],endOffset:P[W],collapsed:P.collapsed,commonAncestorContainer:P.commonAncestorContainer})}function w(e,t){var n;if(3==e.nodeType)return e;if(0>t)return e;for(n=e.firstChild;n&&t>0;)--t,n=n.nextSibling;return n?n:e}function E(){return P[U]==P[z]&&P[R]==P[W]}function S(e,t,r,i){var s,o,u,a,f,l;if(e==r)return t==i?0:i>t?-1:1;for(s=r;s&&s.parentNode!=e;)s=s.parentNode;if(s){for(o=0,u=e.firstChild;u!=s&&t>o;)o++,u=u.nextSibling;return o>=t?-1:1}for(s=e;s&&s.parentNode!=r;)s=s.parentNode;if(s){for(o=0,u=r.firstChild;u!=s&&i>o;)o++,u=u.nextSibling;return i>o?-1:1}for(a=n.findCommonAncestor(e,r),f=e;f&&f.parentNode!=a;)f=f.parentNode;for(f||(f=a),l=r;l&&l.parentNode!=a;)l=l.parentNode;if(l||(l=a),f==l)return 0;for(u=a.firstChild;u;){if(u==f)return-1;if(u==l)return 1;u=u.nextSibling}}function x(e,t,r){var i,s;for(e?(P[U]=t,P[R]=r):(P[z]=t,P[W]=r),i=P[z];i.parentNode;)i=i.parentNode;for(s=P[U];s.parentNode;)s=s.parentNode;s==i?S(P[U],P[R],P[z],P[W])>0&&P.collapse(e):P.collapse(e),P.collapsed=E(),P.commonAncestorContainer=n.findCommonAncestor(P[U],P[z])}function T(e){var t,n=0,r=0,i,s,o,u,a,f;if(P[U]==P[z])return N(e);for(t=P[z],i=t.parentNode;i;t=i,i=i.parentNode){if(i==P[U])return C(t,e);++n}for(t=P[U],i=t.parentNode;i;t=i,i=i.parentNode){if(i==P[z])return k(t,e);++r}for(s=r-n,o=P[U];s>0;)o=o.parentNode,s--;for(u=P[z];0>s;)u=u.parentNode,s++;for(a=o.parentNode,f=u.parentNode;a!=f;a=a.parentNode,f=f.parentNode)o=a,u=f;return L(o,u,e)}function N(e){var t,n,i,s,o,u,a,f,l;if(e!=F&&(t=r()),P[R]==P[W])return t;if(3==P[U].nodeType){if(n=P[U].nodeValue,i=n.substring(P[R],P[W]),e!=j&&(s=P[U],f=P[R],l=P[W]-P[R],0===f&&l>=s.nodeValue.length-1?s.parentNode.removeChild(s):s.deleteData(f,l),P.collapse(I)),e==F)return;return i.length>0&&t.appendChild(H.createTextNode(i)),t}for(s=w(P[U],P[R]),o=P[W]-P[R];s&&o>0;)u=s.nextSibling,a=_(s,e),t&&t.appendChild(a),--o,s=u;return e!=j&&P.collapse(I),t}function C(e,t){var n,i,s,o,u,a;if(t!=F&&(n=r()),i=A(e,t),n&&n.appendChild(i),s=V(e),o=s-P[R],0>=o)return t!=j&&(P.setEndBefore(e),P.collapse(q)),n;for(i=e.previousSibling;o>0;)u=i.previousSibling,a=_(i,t),n&&n.insertBefore(a,n.firstChild),--o,i=u;return t!=j&&(P.setEndBefore(e),P.collapse(q)),n}function k(e,t){var n,i,s,o,u,a;for(t!=F&&(n=r()),s=O(e,t),n&&n.appendChild(s),i=V(e),++i,o=P[W]-i,s=e.nextSibling;s&&o>0;)u=s.nextSibling,a=_(s,t),n&&n.appendChild(a),--o,s=u;return t!=j&&(P.setStartAfter(e),P.collapse(I)),n}function L(e,t,n){var i,s,o,u,a,f,l;for(n!=F&&(s=r()),i=O(e,n),s&&s.appendChild(i),o=V(e),u=V(t),++o,a=u-o,f=e.nextSibling;a>0;)l=f.nextSibling,i=_(f,n),s&&s.appendChild(i),f=l,--a;return i=A(t,n),s&&s.appendChild(i),n!=j&&(P.setStartAfter(e),P.collapse(I)),s}function A(e,t){var n=w(P[z],P[W]-1),r,i,s,o,u,a=n!=P[z];if(n==e)return M(n,a,q,t);for(r=n.parentNode,i=M(r,q,q,t);r;){for(;n;)s=n.previousSibling,o=M(n,a,q,t),t!=F&&i.insertBefore(o,i.firstChild),a=I,n=s;if(r==e)return i;n=r.previousSibling,r=r.parentNode,u=M(r,q,q,t),t!=F&&u.appendChild(i),i=u}}function O(e,t){var n=w(P[U],P[R]),r=n!=P[U],i,s,o,u,a;if(n==e)return M(n,r,I,t);for(i=n.parentNode,s=M(i,q,I,t);i;){for(;n;)o=n.nextSibling,u=M(n,r,I,t),t!=F&&s.appendChild(u),r=I,n=o;if(i==e)return s;n=i.nextSibling,i=i.parentNode,a=M(i,q,I,t),t!=F&&a.appendChild(s),s=a}}function M(e,t,r,i){var s,o,u,a,f;if(t)return _(e,i);if(3==e.nodeType){if(s=e.nodeValue,r?(a=P[R],o=s.substring(a),u=s.substring(0,a)):(a=P[W],o=s.substring(0,a),u=s.substring(a)),i!=j&&(e.nodeValue=u),i==F)return;return f=n.clone(e,q),f.nodeValue=o,f}if(i!=F)return n.clone(e,q)}function _(e,t){return t!=F?t==j?n.clone(e,I):e:void e.parentNode.removeChild(e)}function D(){return n.create("body",null,m()).outerText}var P=this,H=n.doc,B=0,j=1,F=2,I=!0,q=!1,R="startOffset",U="startContainer",z="endContainer",W="endOffset",X=e.extend,V=n.nodeIndex;return X(P,{startContainer:H,startOffset:0,endContainer:H,endOffset:0,collapsed:I,commonAncestorContainer:H,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:i,setEnd:s,setStartBefore:o,setStartAfter:u,setEndBefore:a,setEndAfter:f,collapse:l,selectNode:c,selectNodeContents:h,compareBoundaryPoints:p,deleteContents:d,extractContents:v,cloneContents:m,insertNode:g,surroundContents:y,cloneRange:b,toStringIE:D}),P}return t.prototype.toString=function(){return this.toStringIE()},t}),r(m,[l],function(e){function t(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.textContent||t.innerText||e}function n(e,t){var n,r,i,o={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r=String.fromCharCode(parseInt(e[n],t)),s[r]||(i="&"+e[n+1]+";",o[r]=i,o[i]=r);return o}}var r=e.makeMap,i,s,o,u=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,a=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=/[<>&\"\']/g,l=/&(#x|#)?([\w]+);/g,c={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};s={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},o={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},i=n("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var h={encodeRaw:function(e,t){return e.replace(t?u:a,function(e){return s[e]||e})},encodeAllRaw:function(e){return(""+e).replace(f,function(e){return s[e]||e})},encodeNumeric:function(e,t){return e.replace(t?u:a,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":s[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,n){return n=n||i,e.replace(t?u:a,function(e){return s[e]||n[e]||e})},getEncodeFunc:function(e,t){function o(e,n){return e.replace(n?u:a,function(e){return s[e]||t[e]||"&#"+e.charCodeAt(0)+";"||e})}function f(e,n){return h.encodeNamed(e,n,t)}return t=n(t)||i,e=r(e.replace(/\+/g,",")),e.named&&e.numeric?o:e.named?t?f:h.encodeNamed:e.numeric?h.encodeNumeric:h.encodeRaw},decode:function(e){return e.replace(l,function(e,n,r){return n?(r=parseInt(r,2===n.length?16:10),r>65535?(r-=65536,String.fromCharCode(55296+(r>>10),56320+(1023&r))):c[r]||String.fromCharCode(r)):o[e]||i[e]||t(e)})}};return h}),r(g,[],function(){return function(e,t){function n(t){e.getElementsByTagName("head")[0].appendChild(t)}function r(t,r,u){function a(){for(var e=g.passed,t=e.length;t--;)e[t]();g.status=2,g.passed=[],g.failed=[]}function f(){for(var e=g.failed,t=e.length;t--;)e[t]();g.status=3,g.passed=[],g.failed=[]}function l(){var e=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(e&&e[1]<536)}function c(e,t){e()||((new Date).getTime()-m<o?window.setTimeout(t,0):f())}function h(){c(function(){for(var t=e.styleSheets,n,r=t.length,i;r--;)if(n=t[r],i=n.ownerNode?n.ownerNode:n.owningElement,i&&i.id===d.id)return a(),!0},h)}function p(){c(function(){try{var e=v.sheet.cssRules;return a(),!!e}catch(t){}},p)}var d,v,m,g;if(s[t]?g=s[t]:(g={passed:[],failed:[]},s[t]=g),r&&g.passed.push(r),u&&g.failed.push(u),1!=g.status){if(2==g.status)return void a();if(3==g.status)return void f();if(g.status=1,d=e.createElement("link"),d.rel="stylesheet",d.type="text/css",d.id="u"+i++,d.async=!1,d.defer=!1,m=(new Date).getTime(),"onload"in d&&!l())d.onload=h,d.onerror=f;else{if(navigator.userAgent.indexOf("Firefox")>0)return v=e.createElement("style"),v.textContent='@import "'+t+'"',p(),void n(v);h()}n(d),d.href=t}}var i=0,s={},o;t=t||{},o=t.maxLoadTime||5e3,this.load=r}}),r(y,[a,h,p,f,d,v,m,c,l,g],function(e,n,r,i,s,o,u,a,f,l){function c(e,t){var n={},r=t.keep_values,i;return i={set:function(n,r,i){t.url_converter&&(r=t.url_converter.call(t.url_converter_scope||e,r,i,n[0])),n.attr("data-mce-"+i,r).attr(i,r)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}},n={style:{set:function(e,t){return null!==t&&"object"==typeof t?void e.css(t):(r&&e.attr("data-mce-style",t),void e.attr("style",t))},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return n=e.serializeStyle(e.parseStyle(n),t[0].nodeName)}}},r&&(n.href=n.src=i),n}function h(e,t){var s=this,o;s.doc=e,s.win=window,s.files={},s.counter=0,s.stdMode=!g||e.documentMode>=8,s.boxModel=!g||"CSS1Compat"==e.compatMode||s.stdMode,s.styleSheetLoader=new l(e),s.boundEvents=[],s.settings=t=t||{},s.schema=t.schema,s.styles=new r({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),s.fixDoc(e),s.events=t.ownEvents?new i(t.proxy):i.Event,s.attrHooks=c(s,t),o=t.schema?t.schema.getBlockElements():{},s.$=n.overrideDefaults(function(){return{context:e,element:s.getRoot()}}),s.isBlock=function(e){if(!e)return!1;var t=e.nodeType;return t?1===t&&!!o[e.nodeName]:!!o[e]}}var p=f.each,d=f.is,v=f.grep,m=f.trim,g=a.ie,y=/^([a-z0-9],?)+$/i,b=/^[ \t\r\n]*$/;return h.prototype={$$:function(e){return"string"==typeof e&&(e=this.get(e)),this.$(e)},root:null,fixDoc:function(e){var t=this.settings,n;if(g&&t.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){e.createElement(t)});for(n in t.schema.getCustomElements())e.createElement(n)}},clone:function(e,t){var n=this,r,i;return!g||1!==e.nodeType||t?e.cloneNode(t):(i=n.doc,t?r.firstChild:(r=i.createElement(e.nodeName),p(n.getAttribs(e),function(t){n.setAttrib(r,t.nodeName,n.getAttrib(e,t.nodeName))}),r))},getRoot:function(){var e=this;return e.get(e.settings.root_element)||e.doc.body},getViewPort:function(e){var t,n;return e=e?e:this.win,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t=this,n,r;return e=t.get(e),n=t.getPos(e),r=t.getSize(e),{x:n.x,y:n.y,w:r.w,h:r.h}},getSize:function(e){var t=this,n,r;return e=t.get(e),n=t.getStyle(e,"width"),r=t.getStyle(e,"height"),-1===n.indexOf("px")&&(n=0),-1===r.indexOf("px")&&(r=0),{w:parseInt(n,10)||e.offsetWidth||e.clientWidth,h:parseInt(r,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,n,r,i){var s=this,o,u=[];for(e=s.get(e),i=i===t,r=r||("BODY"!=s.getRoot().nodeName?s.getRoot().parentNode:null),d(n,"string")&&(o=n,n="*"===n?function(e){return 1==e.nodeType}:function(e){return s.is(e,o)});e&&e!=r&&e.nodeType&&9!==e.nodeType;){if(!n||n(e)){if(!i)return e;u.push(e)}e=e.parentNode}return i?u:null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,e=this.doc.getElementById(e),e&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(t,n){var r=this;return e(t,r.get(n)||r.get(r.settings.root_element)||r.doc,[])},is:function(n,r){var i;if(n.length===t){if("*"===r)return 1==n.nodeType;if(y.test(r)){for(r=r.toLowerCase().split(/,/),n=n.nodeName.toLowerCase(),i=r.length-1;i>=0;i--)if(r[i]==n)return!0;return!1}}if(n.nodeType&&1!=n.nodeType)return!1;var s=n.nodeType?[n]:n;return e(r,s[0].ownerDocument||s[0],null,s).length>0},add:function(e,t,n,r,i){var s=this;return this.run(e,function(e){var o;return o=d(t,"string")?s.doc.createElement(t):t,s.setAttribs(o,n),r&&(r.nodeType?o.appendChild(r):s.setHTML(o,r)),i?o:e.appendChild(o)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var r="",i;r+="<"+e;for(i in t)t.hasOwnProperty(i)&&null!==t[i]&&"undefined"!=typeof t[i]&&(r+=" "+i+'="'+this.encode(t[i])+'"');return"undefined"!=typeof n?r+">"+n+"</"+e+">":r+" />"},createFragment:function(e){var t,n,r=this.doc,i;for(i=r.createElement("div"),t=r.createDocumentFragment(),e&&(i.innerHTML=e);n=i.firstChild;)t.appendChild(n);return t},remove:function(e,t){return e=this.$$(e),t?e.each(function(){for(var e;e=this.firstChild;)3==e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}).remove():e.remove(),e.length>1?e.toArray():e[0]},setStyle:function(e,t,n){e=this.$$(e).css(t,n),this.settings.update_styles&&e.attr("data-mce-style",null)},getStyle:function(e,n,r){return e=this.$$(e),r?e.css(n):(n=n.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"float"==n&&(n=g?"styleFloat":"cssFloat"),e[0].style?e[0].style[n]:t)},setStyles:function(e,t){this.$$(e).css(t)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,t,n){var r=this,i,s,o=r.settings;""===n&&(n=null),e=r.$$(e),i=e.attr(t),s=r.attrHooks[t],s&&s.set?s.set(e,n,t):e.attr(t,n),i!=n&&o.onSetAttrib&&o.onSetAttrib({attrElm:e,attrName:t,attrValue:n})},setAttribs:function(e,t){var n=this;n.$$(e).each(function(e,r){p(t,function(e,t){n.setAttrib(r,t,e)})})},getAttrib:function(e,t,n){var r=this,i,s;return e=r.$$(e),i=r.attrHooks[t],s=i&&i.get?i.get(e,t):e.attr(t),"undefined"==typeof s&&(s=n||""),s},getPos:function(e,t){var n=this,r=0,i=0,s,o=n.doc,u;if(e=n.get(e),t=t||o.body,e){if(t===o.body&&e.getBoundingClientRect)return u=e.getBoundingClientRect(),t=n.boxModel?o.documentElement:o.body,r=u.left+(o.documentElement.scrollLeft||o.body.scrollLeft)-t.clientLeft,i=u.top+(o.documentElement.scrollTop||o.body.scrollTop)-t.clientTop,{x:r,y:i};for(s=e;s&&s!=t&&s.nodeType;)r+=s.offsetLeft||0,i+=s.offsetTop||0,s=s.offsetParent;for(s=e.parentNode;s&&s!=t&&s.nodeType;)r-=s.scrollLeft||0,i-=s.scrollTop||0,s=s.parentNode}return{x:r,y:i}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t=this,n=t.doc,r,i;if(t!==h.DOM&&n===document){var s=h.DOM.addedStyles;if(s=s||[],s[e])return;s[e]=!0,h.DOM.addedStyles=s}i=n.getElementById("mceDefaultStyles"),i||(i=n.createElement("style"),i.id="mceDefaultStyles",i.type="text/css",r=n.getElementsByTagName("head")[0],r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i)),i.styleSheet?i.styleSheet.cssText+=e:i.appendChild(n.createTextNode(e))},loadCSS:function(e){var t=this,n=t.doc,r;return t!==h.DOM&&n===document?void h.DOM.loadCSS(e):(e||(e=""),r=n.getElementsByTagName("head")[0],void p(e.split(","),function(e){var i;t.files[e]||(t.files[e]=!0,i=t.create("link",{rel:"stylesheet",href:e}),g&&n.documentMode&&n.recalc&&(i.onload=function(){n.recalc&&n.recalc(),i.onload=null}),r.appendChild(i))}))},addClass:function(e,t){this.$$(e).addClass(t)},removeClass:function(e,t){this.toggleClass(e,t,!1)},hasClass:function(e,t){return this.$$(e).hasClass(t)},toggleClass:function(e,t,r){this.$$(e).toggleClass(t,r).each(function(){""===this.className&&n(this).attr("class",null)})},show:function(e){this.$$(e).show()},hide:function(e){this.$$(e).hide()},isHidden:function(e){return"none"==this.$$(e).css("display")},uniqueId:function(e){return(e?e:"mce_")+this.counter++},setHTML:function(e,t){e=this.$$(e),g?e.each(function(e,r){if(r.canHaveHTML!==!1){for(;r.firstChild;)r.removeChild(r.firstChild);try{r.innerHTML="<br>"+t,r.removeChild(r.firstChild)}catch(i){n("<div>").html("<br>"+t).contents().slice(1).appendTo(r)}return t}}):e.html(t)},getOuterHTML:function(e){return e=this.get(e),1==e.nodeType?e.outerHTML:n("<div>").append(n(e).clone()).html()},setOuterHTML:function(e,t){var r=this;r.$$(e).each(function(){try{this.outerHTML=t}catch(e){r.remove(n(this).html(t),!0)}})},decode:u.decode,encode:u.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n,r;return n=t.parentNode,r=t.nextSibling,r?n.insertBefore(e,r):n.appendChild(e),e})},replace:function(e,t,n){var r=this;return r.run(t,function(t){return d(t,"array")&&(e=e.cloneNode(!0)),n&&p(v(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},rename:function(e,t){var n=this,r;return e.nodeName!=t.toUpperCase()&&(r=n.create(t),p(n.getAttribs(e),function(t){n.setAttrib(r,t.nodeName,n.getAttrib(e,t.nodeName))}),n.replace(r,e,1)),r||e},findCommonAncestor:function(e,t){for(var n=e,r;n;){for(r=t;r&&n!=r;)r=r.parentNode;if(n==r)break;n=n.parentNode}return!n&&e.ownerDocument?e.ownerDocument.documentElement:n},toHex:function(e){return this.styles.toHex(f.trim(e))},run:function(e,t,n){var r=this,i;return"string"==typeof e&&(e=r.get(e)),e?(n=n||this,e.nodeType||!e.length&&0!==e.length?t.call(n,e):(i=[],p(e,function(e,s){e&&("string"==typeof e&&(e=r.get(e)),i.push(t.call(n,e,s)))}),i)):!1},getAttribs:function(e){var t;if(e=this.get(e),!e)return[];if(g){if(t=[],"OBJECT"==e.nodeName)return e.attributes;"OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"});var n=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi;return e.cloneNode(!1).outerHTML.replace(n,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t}return e.attributes},isEmpty:function(e,t){var n=this,r,i,o,u,a,f=0;if(e=e.firstChild){u=new s(e,e.parentNode),t=t||n.schema?n.schema.getNonEmptyElements():null;do{if(o=e.nodeType,1===o){if(e.getAttribute("data-mce-bogus"))continue;if(a=e.nodeName.toLowerCase(),t&&t[a]){if("br"===a){f++;continue}return!1}for(i=n.getAttribs(e),r=i.length;r--;)if(a=i[r].nodeName,"name"===a||"data-mce-bookmark"===a)return!1}if(8==o)return!1;if(3===o&&!b.test(e.nodeValue))return!1}while(e=u.next())}return 1>=f},createRng:function(){var e=this.doc;return e.createRange?e.createRange():new o(this)},nodeIndex:function(e,t){var n=0,r,i;if(e)for(r=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)i=e.nodeType,(!t||3!=i||i!=r&&e.nodeValue.length)&&(n++,r=i);return n},split:function(e,t,n){function r(e){function t(e){var t=e.previousSibling&&"SPAN"==e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"==e.nextSibling.nodeName;return t&&n}var n,s=e.childNodes,o=e.nodeType;if(1!=o||"bookmark"!=e.getAttribute("data-mce-type")){for(n=s.length-1;n>=0;n--)r(s[n]);if(9!=o){if(3==o&&e.nodeValue.length>0){var u=m(e.nodeValue).length;if(!i.isBlock(e.parentNode)||u>0||0===u&&t(e))return}else if(1==o&&(s=e.childNodes,1==s.length&&s[0]&&1==s[0].nodeType&&"bookmark"==s[0].getAttribute("data-mce-type")&&e.parentNode.insertBefore(s[0],e),s.length||/^(br|hr|input|img)$/i.test(e.nodeName)))return;i.remove(e)}return e}}var i=this,s=i.createRng(),o,u,a;return e&&t?(s.setStart(e.parentNode,i.nodeIndex(e)),s.setEnd(t.parentNode,i.nodeIndex(t)),o=s.extractContents(),s=i.createRng(),s.setStart(t.parentNode,i.nodeIndex(t)+1),s.setEnd(e.parentNode,i.nodeIndex(e)+1),u=s.extractContents(),a=e.parentNode,a.insertBefore(r(o),e),n?a.replaceChild(n,t):a.insertBefore(t,e),a.insertBefore(r(u),e),i.remove(e),n||t):void 0},bind:function(e,t,n,r){var i=this;if(f.isArray(e)){for(var s=e.length;s--;)e[s]=i.bind(e[s],t,n,r);return e}return!i.settings.collect||e!==i.doc&&e!==i.win||i.boundEvents.push([e,t,n,r]),i.events.bind(e,t,n,r||i)},unbind:function(e,t,n){var r=this,i;if(f.isArray(e)){for(i=e.length;i--;)e[i]=r.unbind(e[i],t,n);return e}if(r.boundEvents&&(e===r.doc||e===r.win))for(i=r.boundEvents.length;i--;){var s=r.boundEvents[i];e!=s[0]||t&&t!=s[1]||n&&n!=s[2]||this.events.unbind(s[0],s[1],s[2])}return this.events.unbind(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;return e&&1==e.nodeType?(t=e.getAttribute("data-mce-contenteditable"),t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null):null},getContentEditableParent:function(e){for(var t=this.getRoot(),n=null;e&&e!==t&&(n=this.getContentEditable(e),null===n);e=e.parentNode);return n},destroy:function(){var t=this;if(t.boundEvents){for(var n=t.boundEvents.length;n--;){var r=t.boundEvents[n];this.events.unbind(r[0],r[1],r[2])}t.boundEvents=null}e.setDocument&&e.setDocument(),t.win=t.doc=t.root=t.events=t.frag=null},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},_findSib:function(e,t,n){var r=this,i=t;if(e)for("string"==typeof i&&(i=function(e){return r.is(e,t)}),e=e[n];e;e=e[n])if(i(e))return e;return null}},h.DOM=new h(document),h}),r(b,[y,l],function(e,t){function n(){function e(e,t){function n(){s.remove(u),o&&(o.onreadystatechange=o.onload=o=null),t()}function i(){"undefined"!=typeof console&&console.log&&console.log("Failed to load: "+e)}var s=r,o,u;u=s.uniqueId(),o=document.createElement("script"),o.id=u,o.type="text/javascript",o.src=e,"onreadystatechange"in o?o.onreadystatechange=function(){/loaded|complete/.test(o.readyState)&&n()}:o.onload=n,o.onerror=i,(document.getElementsByTagName("head")[0]||document.body).appendChild(o)}var t=0,n=1,o=2,u={},a=[],f={},l=[],c=0,h;this.isDone=function(e){return u[e]==o},this.markDone=function(e){u[e]=o},this.add=this.load=function(e,n,r){var i=u[e];i==h&&(a.push(e),u[e]=t),n&&(f[e]||(f[e]=[]),f[e].push({func:n,scope:r||this}))},this.loadQueue=function(e,t){this.loadScripts(a,e,t)},this.loadScripts=function(t,r,a){function p(e){i(f[e],function(e){e.func.call(e.scope)}),f[e]=h}var d;l.push({func:r,scope:a||this}),(d=function(){var r=s(t);t.length=0,i(r,function(t){return u[t]==o?void p(t):void (u[t]!=n&&(u[t]=n,c++,e(t,function(){u[t]=o,c--,p(t),d()})))}),c||(i(l,function(e){e.func.call(e.scope)}),l.length=0)})()}}var r=e.DOM,i=t.each,s=t.grep;return n.ScriptLoader=new n,n}),r(w,[b,l],function(e,n){function r(){var e=this;e.items=[],e.urls={},e.lookup={}}var i=n.each;return r.prototype={get:function(e){return this.lookup[e]?this.lookup[e].instance:t},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(t,n){var i=r.language;if(i&&r.languageLoad!==!1){if(n)if(n=","+n+",",-1!=n.indexOf(","+i.substr(0,2)+","))i=i.substr(0,2);else if(-1==n.indexOf(","+i+","))return;e.ScriptLoader.add(this.urls[t]+"/langs/"+i+".js")}},add:function(e,t,n){return this.items.push(t),this.lookup[e]={instance:t,dependencies:n},t},createUrl:function(e,t){return"object"==typeof t?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(t,n){var r=this.urls[t];i(n,function(t){e.ScriptLoader.add(r+"/"+t)})},load:function(n,s,o,u){function a(){var r=f.dependencies(n);i(r,function(e){var n=f.createUrl(s,e);f.load(n.resource,n,t,t)}),o&&o.call(u?u:e)}var f=this,l=s;f.urls[n]||("object"==typeof s&&(l=s.prefix+s.resource+s.suffix),0!==l.indexOf("/")&&-1==l.indexOf("://")&&(l=r.baseURL+"/"+l),f.urls[n]=l.substring(0,l.lastIndexOf("/")),f.lookup[n]?a():e.ScriptLoader.add(l,a,u))}},r.PluginManager=new r,r.ThemeManager=new r,r}),r(E,[l,d],function(e,t){function n(e,t){var n=e.childNodes;return t--,t>n.length-1?t=n.length-1:0>t&&(t=0),n[t]||e}function r(e){this.walk=function(t,r){function s(e){var t;return t=e[0],3===t.nodeType&&t===f&&l>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===h&&e.length>0&&t===c&&3===t.nodeType&&e.splice(e.length-1,1),e}function o(e,t,n){for(var r=[];e&&e!=n;e=e[t])r.push(e);return r}function u(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function a(e,t,n){var i=n?"nextSibling":"previousSibling";for(m=e,g=m.parentNode;m&&m!=t;m=g)g=m.parentNode,y=o(m==e?m:m[i],i),y.length&&(n||y.reverse(),r(s(y)))}var f=t.startContainer,l=t.startOffset,c=t.endContainer,h=t.endOffset,p,d,v,m,g,y,b;if(b=e.select("td.mce-item-selected,th.mce-item-selected"),b.length>0)return void i(b,function(e){r([e])});if(1==f.nodeType&&f.hasChildNodes()&&(f=f.childNodes[l]),1==c.nodeType&&c.hasChildNodes()&&(c=n(c,h)),f==c)return r(s([f]));for(p=e.findCommonAncestor(f,c),m=f;m;m=m.parentNode){if(m===c)return a(f,p,!0);if(m===p)break}for(m=c;m;m=m.parentNode){if(m===f)return a(c,p);if(m===p)break}d=u(f,p)||f,v=u(c,p)||c,a(f,d,!0),y=o(d==f?d:d.nextSibling,"nextSibling",v==c?v.nextSibling:v),y.length&&r(s(y)),a(c,v)},this.split=function(e){function t(e,t){return e.splitText(t)}var n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset;return n==i&&3==n.nodeType?r>0&&r<n.nodeValue.length&&(i=t(n,r),n=i.previousSibling,s>r?(s-=r,n=i=t(i,s).previousSibling,s=i.nodeValue.length,r=0):s=0):(3==n.nodeType&&r>0&&r<n.nodeValue.length&&(n=t(n,r),r=0),3==i.nodeType&&s>0&&s<i.nodeValue.length&&(i=t(i,s).previousSibling,s=i.nodeValue.length)),{startContainer:n,startOffset:r,endContainer:i,endOffset:s}},this.normalize=function(n){function r(r){function o(n,r){for(var i=new t(n,e.getParent(n.parentNode,e.isBlock)||h);n=i[r?"prev":"next"]();)if("BR"===n.nodeName)return!0}function u(e,t){return e.previousSibling&&e.previousSibling.nodeName==t}function a(n,r){var o,u,a;if(r=r||f,a=e.getParent(r.parentNode,e.isBlock)||h,n&&"BR"==r.nodeName&&m&&e.isEmpty(a))return f=r.parentNode,l=e.nodeIndex(r),void (i=!0);for(o=new t(r,a);p=o[n?"prev":"next"]();){if("false"===e.getContentEditableParent(p))return;if(3===p.nodeType&&p.nodeValue.length>0)return f=p,l=n?p.nodeValue.length:0,void (i=!0);if(e.isBlock(p)||d[p.nodeName.toLowerCase()])return;u=p}s&&u&&(f=u,i=!0,l=0)}var f,l,c,h=e.getRoot(),p,d,v,m;if(f=n[(r?"start":"end")+"Container"],l=n[(r?"start":"end")+"Offset"],m=1==f.nodeType&&l===f.childNodes.length,d=e.schema.getNonEmptyElements(),v=r,1==f.nodeType&&l>f.childNodes.length-1&&(v=!1),9===f.nodeType&&(f=e.getRoot(),l=0),f===h){if(v&&(p=f.childNodes[l>0?l-1:0],p&&(d[p.nodeName]||"TABLE"==p.nodeName)))return;if(f.hasChildNodes()&&(l=Math.min(!v&&l>0?l-1:l,f.childNodes.length-1),f=f.childNodes[l],l=0,f.hasChildNodes()&&!/TABLE/.test(f.nodeName))){p=f,c=new t(f,h);do{if(3===p.nodeType&&p.nodeValue.length>0){l=v?0:p.nodeValue.length,f=p,i=!0;break}if(d[p.nodeName.toLowerCase()]){l=e.nodeIndex(p),f=p.parentNode,"IMG"!=p.nodeName||v||l++,i=!0;break}}while(p=v?c.next():c.prev())}}s&&(3===f.nodeType&&0===l&&a(!0),1===f.nodeType&&(p=f.childNodes[l],p||(p=f.childNodes[l-1]),!p||"BR"!==p.nodeName||u(p,"A")||o(p)||o(p,!0)||a(!0,p))),v&&!s&&3===f.nodeType&&l===f.nodeValue.length&&a(!1),i&&n["set"+(r?"Start":"End")](f,l)}var i,s;return s=n.collapsed,r(!0),s||r(),i&&s&&n.collapse(!0),i}}var i=e.each;return r.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1},r}),r(S,[E],function(e){return function(t){function n(e){var n,r;if(r=t.$(e).parentsUntil(t.getBody()).add(e),r.length===i.length){for(n=r.length;n>=0&&r[n]===i[n];n--);if(-1===n)return i=r,!0}return i=r,!1}var r,i=[];"onselectionchange"in t.getDoc()||t.on("NodeChange Click MouseUp KeyUp",function(n){var i,s;i=t.selection.getRng(),s={startContainer:i.startContainer,startOffset:i.startOffset,endContainer:i.endContainer,endOffset:i.endOffset},"nodechange"!=n.type&&e.compareRanges(s,r)||t.fire("SelectionChange"),r=s}),t.on("SelectionChange",function(){var e=t.selection.getStart();!n(e)&&t.dom.isChildOf(e,t.getBody())&&t.nodeChanged({selectionChange:!0})}),this.nodeChanged=function(e){var n=t.selection,r,i,s;!t.initialized||t.settings.disable_nodechange||t.settings.readonly||(s=t.getBody(),r=n.getStart()||s,r=r.ownerDocument!=t.getDoc()?t.getBody():r,"IMG"==r.nodeName&&n.isCollapsed()&&(r=r.parentNode),i=[],t.dom.getParent(r,function(e){return e===s?!0:void i.push(e)}),e=e||{},e.element=r,e.parents=i,t.fire("NodeChange",e))}}}),r(x,[],function(){function e(e,t,n){var r,i,s=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[s])return e[s];if(e!==t){if(r=e[o])return r;for(i=e.parent;i&&i!==t;i=i.parent)if(r=i[o])return r}}function t(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}var n=/^[ \t\r\n]*$/,r={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};return t.prototype={replace:function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},attr:function(e,t){var n=this,r,i,s;if("string"!=typeof e){for(i in e)n.attr(i,e[i]);return n}if(r=n.attributes){if(t!==s){if(null===t){if(e in r.map)for(delete r.map[e],i=r.length;i--;)if(r[i].name===e)return r=r.splice(i,1),n;return n}if(e in r.map){for(i=r.length;i--;)if(r[i].name===e){r[i].value=t;break}}else r.push({name:e,value:t});return r.map[e]=t,n}return r.map[e]}},clone:function(){var e=this,n=new t(e.name,e.type),r,i,s,o,u;if(s=e.attributes){for(u=[],u.map={},r=0,i=s.length;i>r;r++)o=s[r],"id"!==o.name&&(u[u.length]={name:o.name,value:o.value},u.map[o.name]=o.value);n.attributes=u}return n.value=e.value,n.shortEnded=e.shortEnded,n},wrap:function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},unwrap:function(){var e=this,t,n;for(t=e.firstChild;t;)n=t.next,e.insert(t,e,!0),t=n;e.remove()},remove:function(){var e=this,t=e.parent,n=e.next,r=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):r.next=n,t.lastChild===e?(t.lastChild=r,r&&(r.next=null)):n.prev=r,e.parent=e.next=e.prev=null),e},append:function(e){var t=this,n;return e.parent&&e.remove(),n=t.lastChild,n?(n.next=e,e.prev=n,t.lastChild=e):t.lastChild=t.firstChild=e,e.parent=t,e},insert:function(e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=r,e},getAll:function(t){var n=this,r,i=[];for(r=n.firstChild;r;r=e(r,n))r.name===t&&i.push(r);return i},empty:function(){var t=this,n,r,i;if(t.firstChild){for(n=[],i=t.firstChild;i;i=e(i,t))n.push(i);for(r=n.length;r--;)i=n[r],i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}return t.firstChild=t.lastChild=null,t},isEmpty:function(t){var r=this,i=r.firstChild,s,o;if(i)do{if(1===i.type){if(i.attributes.map["data-mce-bogus"])continue;if(t[i.name])return!1;for(s=i.attributes.length;s--;)if(o=i.attributes[s].name,"name"===o||0===o.indexOf("data-mce-"))return!1}if(8===i.type)return!1;if(3===i.type&&!n.test(i.value))return!1}while(i=e(i,r));return!0},walk:function(t){return e(this,null,t)}},t.create=function(e,n){var i,s;if(i=new t(e,r[e]||1),n)for(s in n)i.attr(s,n[s]);return i},t}),r(T,[l],function(e){function t(e,t){return e?e.split(t||" "):[]}function n(e){function n(e,n,r){function i(e){var t={},n,r;for(n=0,r=e.length;r>n;n++)t[e[n]]={};return t}var o,a,f,l=arguments;for(r=r||[],n=n||"","string"==typeof r&&(r=t(r)),a=3;a<l.length;a++)"string"==typeof l[a]&&(l[a]=t(l[a])),r.push.apply(r,l[a]);for(e=t(e),o=e.length;o--;)f=[].concat(u,t(n)),s[e[o]]={attributes:i(f),attributesOrder:f,children:i(r)}}function r(e,n){var r,i,o,u;for(e=t(e),r=e.length,n=t(n);r--;)for(i=s[e[r]],o=0,u=n.length;u>o;o++)i.attributes[n[o]]={},i.attributesOrder.push(n[o])}var s={},u,a,f,l,c,h;return i[e]?i[e]:(u=t("id accesskey class dir lang style tabindex title"),a=t("address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul"),f=t("a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment"),"html4"!=e&&(u.push.apply(u,t("contenteditable contextmenu draggable dropzone hidden spellcheck translate")),a.push.apply(a,t("article aside details dialog figure header footer hgroup section nav")),f.push.apply(f,t("audio canvas command datalist mark meter output progress time wbr video ruby bdi keygen"))),"html5-strict"!=e&&(u.push("xml:lang"),h=t("acronym applet basefont big font strike tt"),f.push.apply(f,h),o(h,function(e){n(e,"",f)}),c=t("center dir isindex noframes"),a.push.apply(a,c),l=[].concat(a,f),o(c,function(e){n(e,"",l)})),l=l||[].concat(a,f),n("html","manifest","head body"),n("head","","base command link meta noscript script style title"),n("title hr noscript br"),n("base","href target"),n("link","href rel media hreflang type sizes hreflang"),n("meta","name http-equiv content charset"),n("style","media type scoped"),n("script","src async defer type charset"),n("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",l),n("address dt dd div caption","",l),n("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",f),n("blockquote","cite",l),n("ol","reversed start type","li"),n("ul","","li"),n("li","value",l),n("dl","","dt dd"),n("a","href target rel media hreflang type",f),n("q","cite",f),n("ins del","cite datetime",l),n("img","src alt usemap ismap width height"),n("iframe","src name width height",l),n("embed","src type width height"),n("object","data type typemustmatch name usemap form width height",l,"param"),n("param","name value"),n("map","name",l,"area"),n("area","alt coords shape href target rel media hreflang type"),n("table","border","caption colgroup thead tfoot tbody tr"+("html4"==e?" col":"")),n("colgroup","span","col"),n("col","span"),n("tbody thead tfoot","","tr"),n("tr","","td th"),n("td","colspan rowspan headers",l),n("th","colspan rowspan headers scope abbr",l),n("form","accept-charset action autocomplete enctype method name novalidate target",l),n("fieldset","disabled form name",l,"legend"),n("label","form for",f),n("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),n("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==e?l:f),n("select","disabled form multiple name required size","option optgroup"),n("optgroup","disabled label","option"),n("option","disabled label selected value"),n("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),n("menu","type label",l,"li"),n("noscript","",l),"html4"!=e&&(n("wbr"),n("ruby","",f,"rt rp"),n("figcaption","",l),n("mark rt rp summary bdi","",f),n("canvas","width height",l),n("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",l,"track source"),n("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",l,"track source"),n("source","src type media"),n("track","kind src srclang label default"),n("datalist","",f,"option"),n("article section nav aside header footer","",l),n("hgroup","","h1 h2 h3 h4 h5 h6"),n("figure","",l,"figcaption"),n("time","datetime",f),n("dialog","open",l),n("command","type label icon disabled checked radiogroup command"),n("output","for form name",f),n("progress","value max",f),n("meter","value min max low high optimum",f),n("details","open",l,"summary"),n("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!=e&&(r("script","language xml:space"),r("style","xml:space"),r("object","declare classid code codebase codetype archive standby align border hspace vspace"),r("embed","align name hspace vspace"),r("param","valuetype type"),r("a","charset name rev shape coords"),r("br","clear"),r("applet","codebase archive code object alt name width height align hspace vspace"),r("img","name longdesc align border hspace vspace"),r("iframe","longdesc frameborder marginwidth marginheight scrolling align"),r("font basefont","size color face"),r("input","usemap align"),r("select","onchange"),r("textarea"),r("h1 h2 h3 h4 h5 h6 div p legend caption","align"),r("ul","type compact"),r("li","type"),r("ol dl menu dir","compact"),r("pre","width xml:space"),r("hr","align noshade size width"),r("isindex","prompt"),r("table","summary width frame rules cellspacing cellpadding align bgcolor"),r("col","width align char charoff valign"),r("colgroup","width align char charoff valign"),r("thead","align char charoff valign"),r("tr","align char charoff valign bgcolor"),r("th","axis align char charoff valign nowrap bgcolor width height"),r("form","accept"),r("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),r("tfoot","align char charoff valign"),r("tbody","align char charoff valign"),r("area","nohref"),r("body","background bgcolor text link vlink alink")),"html4"!=e&&(r("input button select textarea","autofocus"),r("input textarea","placeholder"),r("a","download"),r("link script img","crossorigin"),r("iframe","sandbox seamless allowfullscreen")),o(t("a form meter progress dfn"),function(e){s[e]&&delete s[e].children[e]}),delete s.caption.children.table,i[e]=s,s)}function r(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),o(e,function(e,r){n[r]="map"==t?s(e,/[, ]/):a(e,/[, ]/)})),n}var i={},s=e.makeMap,o=e.each,u=e.extend,a=e.explode,f=e.inArray;return function(e){function l(t,n,r){var o=e[t];return o?o=s(o,/[, ]/,s(o.toUpperCase(),/[, ]/)):(o=i[t],o||(o=s(n," ",s(n.toUpperCase()," ")),o=u(o,r),i[t]=o)),o}function c(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function h(e){var n,r,i,o,u,a,l,h,p,d,v,m,g,b,E,S,x,T,N,C=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,k=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,L=/[*?+]/;if(e)for(e=t(e,","),y["@"]&&(S=y["@"].attributes,x=y["@"].attributesOrder),n=0,r=e.length;r>n;n++)if(u=C.exec(e[n])){if(b=u[1],p=u[2],E=u[3],h=u[5],m={},g=[],a={attributes:m,attributesOrder:g},"#"===b&&(a.paddEmpty=!0),"-"===b&&(a.removeEmpty=!0),"!"===u[4]&&(a.removeEmptyAttrs=!0),S){for(T in S)m[T]=S[T];g.push.apply(g,x)}if(h)for(h=t(h,"|"),i=0,o=h.length;o>i;i++)if(u=k.exec(h[i])){if(l={},v=u[1],d=u[2].replace(/::/g,":"),b=u[3],N=u[4],"!"===v&&(a.attributesRequired=a.attributesRequired||[],a.attributesRequired.push(d),l.required=!0),"-"===v){delete m[d],g.splice(f(g,d),1);continue}b&&("="===b&&(a.attributesDefault=a.attributesDefault||[],a.attributesDefault.push({name:d,value:N}),l.defaultValue=N),":"===b&&(a.attributesForced=a.attributesForced||[],a.attributesForced.push({name:d,value:N}),l.forcedValue=N),"<"===b&&(l.validValues=s(N,"?"))),L.test(d)?(a.attributePatterns=a.attributePatterns||[],l.pattern=c(d),a.attributePatterns.push(l)):(m[d]||g.push(d),m[d]=l)}S||"@"!=p||(S=m,x=g),E&&(a.outputName=p,y[E]=a),L.test(p)?(a.pattern=c(p),w.push(a)):y[p]=a}}function p(e){y={},w=[],h(e),o(x,function(e,t){b[t]=e.children})}function d(e){var n=/^(~)?(.+)$/;e&&(i.text_block_elements=i.block_elements=null,o(t(e,","),function(e){var t=n.exec(e),r="~"===t[1],i=r?"span":"div",s=t[2];if(b[s]=b[i],D[s]=i,r||(A[s.toUpperCase()]={},A[s]={}),!y[s]){var a=y[i];a=u({},a),delete a.removeEmptyAttrs,delete a.removeEmpty,y[s]=a}o(b,function(e,t){e[i]&&(b[t]=e=u({},b[t]),e[s]=e[i])})}))}function v(e){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;e&&o(t(e,","),function(e){var r=n.exec(e),i,s;r&&(s=r[1],i=s?b[r[2]]:b[r[2]]={"#comment":{}},i=b[r[2]],o(t(r[3],"|"),function(e){"-"===s?(b[r[2]]=i=u({},b[r[2]]),delete i[e]):i[e]={}}))})}function m(e){var t=y[e],n;if(t)return t;for(n=w.length;n--;)if(t=w[n],t.pattern.test(e))return t}var g=this,y={},b={},w=[],E,S,x,T,N,C,k,L,A,O,M,_,D={},P={};e=e||{},x=n(e.schema),e.verify_html===!1&&(e.valid_elements="*[*]"),E=r(e.valid_styles),S=r(e.invalid_styles,"map"),L=r(e.valid_classes,"map"),T=l("whitespace_elements","pre script noscript style textarea video audio iframe object"),N=l("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),C=l("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),k=l("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),O=l("non_empty_elements","td th iframe video audio object script",C),M=l("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),A=l("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup",M),_=l("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),o((e.special||"script noscript style textarea").split(" "),function(e){P[e]=new RegExp("</"+e+"[^>]*>","gi")}),e.valid_elements?p(e.valid_elements):(o(x,function(e,t){y[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},b[t]=e.children}),"html5"!=e.schema&&o(t("strong/b em/i"),function(e){e=t(e,"/"),y[e[1]].outputName=e[0]}),y.img.attributesDefault=[{name:"alt",value:""}],o(t("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){y[e]&&(y[e].removeEmpty=!0)}),o(t("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(e){y[e].paddEmpty=!0}),o(t("span"),function(e){y[e].removeEmptyAttrs=!0})),d(e.custom_elements),v(e.valid_children),h(e.extended_valid_elements),v("+ol[ul|ol],+ul[ul|ol]"),e.invalid_elements&&o(a(e.invalid_elements),function(e){y[e]&&delete y[e]}),m("span")||h("span[!data-mce-type|*]"),g.children=b,g.getValidStyles=function(){return E},g.getInvalidStyles=function(){return S},g.getValidClasses=function(){return L},g.getBoolAttrs=function(){return k},g.getBlockElements=function(){return A},g.getTextBlockElements=function(){return M},g.getTextInlineElements=function(){return _},g.getShortEndedElements=function(){return C},g.getSelfClosingElements=function(){return N},g.getNonEmptyElements=function(){return O},g.getWhiteSpaceElements=function(){return T},g.getSpecialElements=function(){return P},g.isValidChild=function(e,t){var n=b[e];return!!n&&!!n[t]},g.isValid=function(e,t){var n,r,i=m(e);if(i){if(!t)return!0;if(i.attributes[t])return!0;if(n=i.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1},g.getElementRule=m,g.getCustomElements=function(){return D},g.addValidElements=h,g.setValidElements=p,g.addCustomElements=d,g.addValidChildren=v,g.elements=y}}),r(N,[T,m,l],function(e,t,n){function r(e,t,n){var r=1,i,s,o,u;for(u=e.getShortEndedElements(),o=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g,o.lastIndex=i=n;s=o.exec(t);){if(i=o.lastIndex,"/"===s[1])r--;else if(!s[1]){if(s[2]in u)continue;r++}if(0===r)break}return i}function i(i,o){function u(){}var a=this;i=i||{},a.schema=o=o||new e,i.fix_self_closing!==!1&&(i.fix_self_closing=!0),s("comment cdata text start end pi doctype".split(" "),function(e){e&&(a[e]=i[e]||u)}),a.parse=function(e){function s(e){var t,n;for(t=p.length;t--&&p[t].name!==e;);if(t>=0){for(n=p.length-1;n>=t;n--)e=p[n],e.valid&&a.end(e.name);p.length=t}}function u(e,t,n,r,s){var o,u,a=/[\s\u0000-\u001F]+/g;if(t=t.toLowerCase(),n=t in E?t:q(n||r||s||""),x&&!y&&0!==t.indexOf("data-")){if(o=L[t],!o&&A){for(u=A.length;u--&&(o=A[u],!o.pattern.test(t)););-1===u&&(o=null)}if(!o)return;if(o.validValues&&!(n in o.validValues))return}if(U[t]&&!i.allow_script_urls){var f=n.replace(a,"");try{f=decodeURIComponent(f)}catch(l){f=unescape(f)}if(z.test(f))return;if(!i.allow_html_data_urls&&W.test(f)&&!/^data:image\//i.test(f))return}d.map[t]=n,d.push({name:t,value:n})}var a=this,f,l=0,c,h,p=[],d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I=0,q=t.decode,R,U=n.makeMap("src,href,data,background,formaction,poster"),z=/((java|vb)script|mhtml):/i,W=/^data:/i;for(H=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-_\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),B=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,w=o.getShortEndedElements(),P=i.self_closing_elements||o.getSelfClosingElements(),E=o.getBoolAttrs(),x=i.validate,b=i.remove_internals,R=i.fix_self_closing,j=o.getSpecialElements();f=H.exec(e);){if(l<f.index&&a.text(q(e.substr(l,f.index-l))),c=f[6])c=c.toLowerCase(),":"===c.charAt(0)&&(c=c.substr(1)),s(c);else if(c=f[7]){if(c=c.toLowerCase(),":"===c.charAt(0)&&(c=c.substr(1)),S=c in w,R&&P[c]&&p.length>0&&p[p.length-1].name===c&&s(c),!x||(T=o.getElementRule(c))){if(N=!0,x&&(L=T.attributes,A=T.attributePatterns),(k=f[8])?(y=-1!==k.indexOf("data-mce-type"),y&&b&&(N=!1),d=[],d.map={},k.replace(B,u)):(d=[],d.map={}),x&&!y){if(O=T.attributesRequired,M=T.attributesDefault,_=T.attributesForced,D=T.removeEmptyAttrs,D&&!d.length&&(N=!1),_)for(v=_.length;v--;)C=_[v],g=C.name,F=C.value,"{$uid}"===F&&(F="mce_"+I++),d.map[g]=F,d.push({name:g,value:F});if(M)for(v=M.length;v--;)C=M[v],g=C.name,g in d.map||(F=C.value,"{$uid}"===F&&(F="mce_"+I++),d.map[g]=F,d.push({name:g,value:F}));if(O){for(v=O.length;v--&&!(O[v]in d.map););-1===v&&(N=!1)}if(C=d.map["data-mce-bogus"]){if("all"===C){l=r(o,e,H.lastIndex),H.lastIndex=l;continue}N=!1}}N&&a.start(c,d,S)}else N=!1;if(h=j[c]){h.lastIndex=l=f.index+f[0].length,(f=h.exec(e))?(N&&(m=e.substr(l,f.index-l)),l=f.index+f[0].length):(m=e.substr(l),l=e.length),N&&(m.length>0&&a.text(m,!0),a.end(c)),H.lastIndex=l;continue}S||(k&&k.indexOf("/")==k.length-1?N&&a.end(c):p.push({name:c,valid:N}))}else(c=f[1])?(">"===c.charAt(0)&&(c=" "+c),i.allow_conditional_comments||"[if"!==c.substr(0,3)||(c=" "+c),a.comment(c)):(c=f[2])?a.cdata(c):(c=f[3])?a.doctype(c):(c=f[4])&&a.pi(c,f[5]);l=f.index+f[0].length}for(l<e.length&&a.text(q(e.substr(l))),v=p.length-1;v>=0;v--)c=p[v],c.valid&&a.end(c.name)}}var s=n.each;return i.findEndTag=r,i}),r(C,[x,T,N,l],function(e,t,n,r){var i=r.makeMap,s=r.each,o=r.explode,u=r.extend;return function(r,a){function f(t){var n,r,s,o,u,f,c,h,p,d,v,m,g,y;for(v=i("tr,td,th,tbody,thead,tfoot,table"),d=a.getNonEmptyElements(),m=a.getTextBlockElements(),n=0;n<t.length;n++)if(r=t[n],r.parent&&!r.fixed)if(m[r.name]&&"li"==r.parent.name){for(g=r.next;g&&m[g.name];)g.name="li",g.fixed=!0,r.parent.insert(g,r.parent),g=g.next;r.unwrap(r)}else{for(o=[r],s=r.parent;s&&!a.isValidChild(s.name,r.name)&&!v[s.name];s=s.parent)o.push(s);if(s&&o.length>1){for(o.reverse(),u=f=l.filterNode(o[0].clone()),p=0;p<o.length-1;p++){for(a.isValidChild(f.name,o[p].name)?(c=l.filterNode(o[p].clone()),f.append(c)):c=f,h=o[p].firstChild;h&&h!=o[p+1];)y=h.next,c.append(h),h=y;f=c}u.isEmpty(d)?s.insert(r,o[0],!0):(s.insert(u,o[0],!0),s.insert(r,u)),s=o[0],(s.isEmpty(d)||s.firstChild===s.lastChild&&"br"===s.firstChild.name)&&s.empty().remove()}else if(r.parent){if("li"===r.name){if(g=r.prev,!g||"ul"!==g.name&&"ul"!==g.name){if(g=r.next,!g||"ul"!==g.name&&"ul"!==g.name){r.wrap(l.filterNode(new e("ul",1)));continue}g.insert(r,g.firstChild,!0);continue}g.append(r);continue}a.isValidChild(r.parent.name,"div")&&a.isValidChild("div",r.name)?r.wrap(l.filterNode(new e("div",1))):"style"===r.name||"script"===r.name?r.empty().remove():r.unwrap()}}}var l=this,c={},h=[],p={},d={};r=r||{},r.validate="validate"in r?r.validate:!0,r.root_name=r.root_name||"body",l.schema=a=a||new t,l.filterNode=function(e){var t,n,r;n in c&&(r=p[n],r?r.push(e):p[n]=[e]),t=h.length;for(;t--;)n=h[t].name,n in e.attributes.map&&(r=d[n],r?r.push(e):d[n]=[e]);return e},l.addNodeFilter=function(e,t){s(o(e),function(e){var n=c[e];n||(c[e]=n=[]),n.push(t)})},l.addAttributeFilter=function(e,t){s(o(e),function(e){var n;for(n=0;n<h.length;n++)if(h[n].name===e)return void h[n].callbacks.push(t);h.push({name:e,callbacks:[t]})})},l.parse=function(t,s){function o(){function e(e){e&&(t=e.firstChild,t&&3==t.type&&(t.value=t.value.replace(A,"")),t=e.lastChild,t&&3==t.type&&(t.value=t.value.replace(_,"")))}var t=y.firstChild,n,i;if(a.isValidChild(y.name,F.toLowerCase())){for(;t;)n=t.next,3==t.type||1==t.type&&"p"!==t.name&&!L[t.name]&&!t.attr("data-mce-type")?i?i.append(t):(i=l(F,1),i.attr(r.forced_root_block_attrs),y.insert(i,t),i.append(t)):(e(i),i=null),t=n;e(i)}}function l(t,n){var r=new e(t,n),i;return t in c&&(i=p[t],i?i.push(r):p[t]=[r]),r}function v(e){var t,n,r;for(t=e.prev;t&&3===t.type;)n=t.value.replace(_,""),n.length>0?(t.value=n,t=t.prev):(r=t.prev,t.remove(),t=r)}function m(e){var t,n={};for(t in e)"li"!==t&&"p"!=t&&(n[t]=e[t]);return n}var g,y,b,w,E,S,x,T,N,C,k,L,A,O=[],M,_,D,P,H,B,j,F;if(s=s||{},p={},d={},L=u(i("script,style,head,html,body,title,meta,param"),a.getBlockElements()),j=a.getNonEmptyElements(),B=a.children,k=r.validate,F="forced_root_block"in s?s.forced_root_block:r.forced_root_block,H=a.getWhiteSpaceElements(),A=/^[ \t\r\n]+/,_=/[ \t\r\n]+$/,D=/[ \t\r\n]+/g,P=/^[ \t\r\n]+$/,g=new n({validate:k,allow_script_urls:r.allow_script_urls,allow_conditional_comments:r.allow_conditional_comments,self_closing_elements:m(a.getSelfClosingElements()),cdata:function(e){b.append(l("#cdata",4)).value=e},text:function(e,t){var n;M||(e=e.replace(D," "),b.lastChild&&L[b.lastChild.name]&&(e=e.replace(A,""))),0!==e.length&&(n=l("#text",3),n.raw=!!t,b.append(n).value=e)},comment:function(e){b.append(l("#comment",8)).value=e},pi:function(e,t){b.append(l(e,7)).value=t,v(b)},doctype:function(e){var t;t=b.append(l("#doctype",10)),t.value=e,v(b)},start:function(e,t,n){var r,i,s,o,u;if(s=k?a.getElementRule(e):{}){for(r=l(s.outputName||e,1),r.attributes=t,r.shortEnded=n,b.append(r),u=B[b.name],u&&B[r.name]&&!u[r.name]&&O.push(r),i=h.length;i--;)o=h[i].name,o in t.map&&(N=d[o],N?N.push(r):d[o]=[r]);L[e]&&v(r),n||(b=r),!M&&H[e]&&(M=!0)}},end:function(t){var n,r,i,s,o;if(r=k?a.getElementRule(t):{}){if(L[t]&&!M){if(n=b.firstChild,n&&3===n.type)if(i=n.value.replace(A,""),i.length>0)n.value=i,n=n.next;else for(s=n.next,n.remove(),n=s;n&&3===n.type;)i=n.value,s=n.next,(0===i.length||P.test(i))&&(n.remove(),n=s),n=s;if(n=b.lastChild,n&&3===n.type)if(i=n.value.replace(_,""),i.length>0)n.value=i,n=n.prev;else for(s=n.prev,n.remove(),n=s;n&&3===n.type;)i=n.value,s=n.prev,(0===i.length||P.test(i))&&(n.remove(),n=s),n=s}if(M&&H[t]&&(M=!1),(r.removeEmpty||r.paddEmpty)&&b.isEmpty(j))if(r.paddEmpty)b.empty().append(new e("#text","3")).value=" ";else if(!b.attributes.map.name&&!b.attributes.map.id)return o=b.parent,b.unwrap(),void (b=o);b=b.parent}}},a),y=b=new e(s.context||r.root_name,11),g.parse(t),k&&O.length&&(s.context?s.invalid=!0:f(O)),F&&("body"==y.name||s.isRootContent)&&o(),!s.invalid){for(C in p){for(N=c[C],w=p[C],x=w.length;x--;)w[x].parent||w.splice(x,1);for(E=0,S=N.length;S>E;E++)N[E](w,C,s)}for(E=0,S=h.length;S>E;E++)if(N=h[E],N.name in d){for(w=d[N.name],x=w.length;x--;)w[x].parent||w.splice(x,1);for(x=0,T=N.callbacks.length;T>x;x++)N.callbacks[x](w,N.name,s)}}return y},r.remove_trailing_brs&&l.addNodeFilter("br",function(t){var n,r=t.length,i,s=u({},a.getBlockElements()),o=a.getNonEmptyElements(),f,l,c,h,p,d;for(s.body=1,n=0;r>n;n++)if(i=t[n],f=i.parent,s[i.parent.name]&&i===f.lastChild){for(c=i.prev;c;){if(h=c.name,"span"!==h||"bookmark"!==c.attr("data-mce-type")){if("br"!==h)break;if("br"===h){i=null;break}}c=c.prev}i&&(i.remove(),f.isEmpty(o)&&(p=a.getElementRule(f.name),p&&(p.removeEmpty?f.remove():p.paddEmpty&&(f.empty().append(new e("#text",3)).value=" "))))}else{for(l=i;f&&f.firstChild===l&&f.lastChild===l&&(l=f,!s[f.name]);)f=f.parent;l===f&&(d=new e("#text",3),d.value=" ",i.replace(d))}}),r.allow_html_in_named_anchor||l.addAttributeFilter("id,name",function(e){for(var t=e.length,n,r,i,s;t--;)if(s=e[t],"a"===s.name&&s.firstChild&&!s.attr("href")){i=s.parent,n=s.lastChild;do r=n.prev,i.insert(n,s),n=r;while(n)}}),r.validate&&a.getValidClasses()&&l.addAttributeFilter("class",function(e){for(var t=e.length,n,r,i,s,o,u=a.getValidClasses(),f,l;t--;){for(n=e[t],r=n.attr("class").split(" "),o="",i=0;i<r.length;i++)s=r[i],l=!1,f=u["*"],f&&f[s]&&(l=!0),f=u[n.name],l||!f||f[s]||(l=!0),l&&(o&&(o+=" "),o+=s);o.length||(o=null),n.attr("class",o)}})}}),r(k,[m,l],function(e,t){var n=t.makeMap;return function(t){var r=[],i,s,o,u,a;return t=t||{},i=t.indent,s=n(t.indent_before||""),o=n(t.indent_after||""),u=e.getEncodeFunc(t.entity_encoding||"raw",t.entities),a="html"==t.element_format,{start:function(e,t,n){var f,l,c,h;if(i&&s[e]&&r.length>0&&(h=r[r.length-1],h.length>0&&"\n"!==h&&r.push("\n")),r.push("<",e),t)for(f=0,l=t.length;l>f;f++)c=t[f],r.push(" ",c.name,'="',u(c.value,!0),'"');r[r.length]=!n||a?">":" />",n&&i&&o[e]&&r.length>0&&(h=r[r.length-1],h.length>0&&"\n"!==h&&r.push("\n"))},end:function(e){var t;r.push("</",e,">"),i&&o[e]&&r.length>0&&(t=r[r.length-1],t.length>0&&"\n"!==t&&r.push("\n"))},text:function(e,t){e.length>0&&(r[r.length]=t?e:u(e))},cdata:function(e){r.push("<![CDATA[",e,"]]>")},comment:function(e){r.push("<!--",e,"-->")},pi:function(e,t){t?r.push("<?",e," ",t,"?>"):r.push("<?",e,"?>"),i&&r.push("\n")},doctype:function(e){r.push("<!DOCTYPE",e,">",i?"\n":"")},reset:function(){r.length=0},getContent:function(){return r.join("").replace(/\n$/,"")}}}}),r(L,[k,T],function(e,t){return function(n,r){var i=this,s=new e(n);n=n||{},n.validate="validate"in n?n.validate:!0,i.schema=r=r||new t,i.writer=s,i.serialize=function(e){function t(e){var n=i[e.type],u,a,f,l,c,h,p,d,v;if(n)n(e);else{if(u=e.name,a=e.shortEnded,f=e.attributes,o&&f&&f.length>1){for(h=[],h.map={},v=r.getElementRule(e.name),p=0,d=v.attributesOrder.length;d>p;p++)l=v.attributesOrder[p],l in f.map&&(c=f.map[l],h.map[l]=c,h.push({name:l,value:c}));for(p=0,d=f.length;d>p;p++)l=f[p].name,l in h.map||(c=f.map[l],h.map[l]=c,h.push({name:l,value:c}));f=h}if(s.start(e.name,f,a),!a){if(e=e.firstChild)do t(e);while(e=e.next);s.end(u)}}}var i,o;return o=n.validate,i={3:function(e){s.text(e.value,e.raw)},8:function(e){s.comment(e.value)},7:function(e){s.pi(e.name,e.value)},10:function(e){s.doctype(e.value)},4:function(e){s.cdata(e.value)},11:function(e){if(e=e.firstChild)do t(e);while(e=e.next)}},s.reset(),1!=e.type||n.inner?i[11](e):t(e),s.getContent()}}}),r(A,[y,C,m,L,x,T,c,l],function(e,t,n,r,i,s,o,u){var a=u.each,f=u.trim,l=e.DOM;return function(e,i){var u,c,h;return i&&(u=i.dom,c=i.schema),u=u||l,c=c||new s(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0,h=new t(e,c),h.addAttributeFilter("data-mce-tabindex",function(e,t){for(var n=e.length,r;n--;)r=e[n],r.attr("tabindex",r.attributes.map["data-mce-tabindex"]),r.attr(t,null)}),h.addAttributeFilter("src,href,style",function(t,n){for(var r=t.length,i,s,o="data-mce-"+n,a=e.url_converter,f=e.url_converter_scope,l;r--;)i=t[r],s=i.attributes.map[o],s!==l?(i.attr(n,s.length>0?s:null),i.attr(o,null)):(s=i.attributes.map[n],"style"===n?s=u.serializeStyle(u.parseStyle(s),i.name):a&&(s=a.call(f,s,n,i.name)),i.attr(n,s.length>0?s:null))}),h.addAttributeFilter("class",function(e){for(var t=e.length,n,r;t--;)n=e[t],r=n.attr("class"),r&&(r=n.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),n.attr("class",r.length>0?r:null))}),h.addAttributeFilter("data-mce-type",function(e,t,n){for(var r=e.length,i;r--;)i=e[r],"bookmark"!==i.attributes.map["data-mce-type"]||n.cleanup||i.remove()}),h.addNodeFilter("noscript",function(e){for(var t=e.length,r;t--;)r=e[t].firstChild,r&&(r.value=n.decode(r.value))}),h.addNodeFilter("script,style",function(e,t){function n(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var r=e.length,i,s,o;r--;)i=e[r],s=i.firstChild?i.firstChild.value:"","script"===t?(o=i.attr("type"),o&&i.attr("type","mce-no/type"==o?null:o.replace(/^mce\-/,"")),s.length>0&&(i.firstChild.value="// <![CDATA[\n"+n(s)+"\n// ]]>")):s.length>0&&(i.firstChild.value="<!--\n"+n(s)+"\n-->")}),h.addNodeFilter("#comment",function(e){for(var t=e.length,n;t--;)n=e[t],0===n.value.indexOf("[CDATA[")?(n.name="#cdata",n.type=4,n.value=n.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===n.value.indexOf("mce:protected ")&&(n.name="#text",n.type=3,n.raw=!0,n.value=unescape(n.value).substr(14))}),h.addNodeFilter("xml:namespace,input",function(e,t){for(var n=e.length,r;n--;)r=e[n],7===r.type?r.remove():1===r.type&&("input"!==t||"type"in r.attributes.map||r.attr("type","text"))}),e.fix_list_elements&&h.addNodeFilter("ul,ol",function(e){for(var t=e.length,n,r;t--;)n=e[t],r=n.parent,("ul"===r.name||"ol"===r.name)&&n.prev&&"li"===n.prev.name&&n.prev.append(n)}),h.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),{schema:c,addNodeFilter:h.addNodeFilter,addAttributeFilter:h.addAttributeFilter,serialize:function(t,n){var i=this,s,l,p,d,v;return o.ie&&u.select("script,style,select,map").length>0?(v=t.innerHTML,t=t.cloneNode(!1),u.setHTML(t,v)):t=t.cloneNode(!0),s=t.ownerDocument.implementation,s.createHTMLDocument&&(l=s.createHTMLDocument(""),a("BODY"==t.nodeName?t.childNodes:[t],function(e){l.body.appendChild(l.importNode(e,!0))}),t="BODY"!=t.nodeName?l.body.firstChild:l.body,p=u.doc,u.doc=l),n=n||{},n.format=n.format||"html",n.selection&&(n.forced_root_block=""),n.no_events||(n.node=t,i.onPreProcess(n)),d=new r(e,c),n.content=d.serialize(h.parse(f(n.getInner?t.innerHTML:u.getOuterHTML(t)),n)),n.cleanup||(n.content=n.content.replace(/\uFEFF/g,"")),n.no_events||i.onPostProcess(n),p&&(u.doc=p),n.node=null,n.content},addRules:function(e){c.addValidElements(e)},setRules:function(e){c.setValidElements(e)},onPreProcess:function(e){i&&i.fire("PreProcess",e)},onPostProcess:function(e){i&&i.fire("PostProcess",e)}}}}),r(O,[],function(){function e(e){function t(t,n){var r,i=0,s,o,u,a,f,l,c=-1,h;if(r=t.duplicate(),r.collapse(n),h=r.parentElement(),h.ownerDocument===e.dom.doc){for(;"false"===h.contentEditable;)h=h.parentNode;if(!h.hasChildNodes())return{node:h,inside:1};for(u=h.children,s=u.length-1;s>=i;)if(l=Math.floor((i+s)/2),a=u[l],r.moveToElementText(a),c=r.compareEndPoints(n?"StartToStart":"EndToEnd",t),c>0)s=l-1;else{if(!(0>c))return{node:a};i=l+1}if(0>c)for(a?r.collapse(!1):(r.moveToElementText(h),r.collapse(!0),a=h,o=!0),f=0;0!==r.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==r.move("character",1)&&h==r.parentElement();)f++;else for(r.collapse(!0),f=0;0!==r.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==r.move("character",-1)&&h==r.parentElement();)f++;return{node:a,position:c,offset:f,inside:o}}}function n(){function n(e){var n=t(s,e),r,i,u=0,a,f,l;if(r=n.node,i=n.offset,n.inside&&!r.hasChildNodes())return void o[e?"setStart":"setEnd"](r,0);if(i===f)return void o[e?"setStartBefore":"setEndAfter"](r);if(n.position<0){if(a=n.inside?r.firstChild:r.nextSibling,!a)return void o[e?"setStartAfter":"setEndAfter"](r);if(!i)return void (3==a.nodeType?o[e?"setStart":"setEnd"](a,0):o[e?"setStartBefore":"setEndBefore"](a));for(;a;){if(3==a.nodeType&&(l=a.nodeValue,u+=l.length,u>=i)){r=a,u-=i,u=l.length-u;break}a=a.nextSibling}}else{if(a=r.previousSibling,!a)return o[e?"setStartBefore":"setEndBefore"](r);if(!i)return void (3==r.nodeType?o[e?"setStart":"setEnd"](a,r.nodeValue.length):o[e?"setStartAfter":"setEndAfter"](a));for(;a;){if(3==a.nodeType&&(u+=a.nodeValue.length,u>=i)){r=a,u-=i;break}a=a.previousSibling}}o[e?"setStart":"setEnd"](r,u)}var s=e.getRng(),o=i.createRng(),u,a,f,l,c;if(u=s.item?s.item(0):s.parentElement(),u.ownerDocument!=i.doc)return o;if(a=e.isCollapsed(),s.item)return o.setStart(u.parentNode,i.nodeIndex(u)),o.setEnd(o.startContainer,o.startOffset+1),o;try{n(!0),a||n()}catch(h){if(-2147024809!=h.number)throw h;c=r.getBookmark(2),f=s.duplicate(),f.collapse(!0),u=f.parentElement(),a||(f=s.duplicate(),f.collapse(!1),l=f.parentElement(),l.innerHTML=l.innerHTML),u.innerHTML=u.innerHTML,r.moveToBookmark(c),s=e.getRng(),n(!0),a||n()}return o}var r=this,i=e.dom,s=!1;this.getBookmark=function(n){function r(e){var t,n,r,s,o=[];for(t=e.parentNode,n=i.getRoot().parentNode;t!=n&&9!==t.nodeType;){for(r=t.children,s=r.length;s--;)if(e===r[s]){o.push(s);break}e=t,t=t.parentNode}return o}function s(e){var n;return n=t(o,e),n?{position:n.position,offset:n.offset,indexes:r(n.node),inside:n.inside}:void 0}var o=e.getRng(),u={};return 2===n&&(o.item?u.start={ctrl:!0,indexes:r(o.item(0))}:(u.start=s(!0),e.isCollapsed()||(u.end=s()))),u},this.moveToBookmark=function(e){function t(e){var t,n,r,s;for(t=i.getRoot(),n=e.length-1;n>=0;n--)s=t.children,r=e[n],r<=s.length-1&&(t=s[r]);return t}function n(n){var i=e[n?"start":"end"],o,u,a,f;i&&(o=i.position>0,u=s.createTextRange(),u.moveToElementText(t(i.indexes)),f=i.offset,f!==a?(u.collapse(i.inside||o),u.moveStart("character",o?-f:f)):u.collapse(n),r.setEndPoint(n?"StartToStart":"EndToStart",u),n&&r.collapse(!0))}var r,s=i.doc.body;e.start&&(e.start.ctrl?(r=s.createControlRange(),r.addElement(t(e.start.indexes)),r.select()):(r=s.createTextRange(),n(!0),n(),r.select()))},this.addRange=function(t){function n(e){var t,n,o,c,d;o=i.create("a"),t=e?u:f,n=e?a:l,c=r.duplicate(),(t==h||t==h.documentElement)&&(t=p,n=0),3==t.nodeType?(t.parentNode.insertBefore(o,t),c.moveToElementText(o),c.moveStart("character",n),i.remove(o),r.setEndPoint(e?"StartToStart":"EndToEnd",c)):(d=t.childNodes,d.length?(n>=d.length?i.insertAfter(o,d[d.length-1]):t.insertBefore(o,d[n]),c.moveToElementText(o)):t.canHaveHTML&&(t.innerHTML="<span>&#xFEFF;</span>",o=t.firstChild,c.moveToElementText(o),c.collapse(s)),r.setEndPoint(e?"StartToStart":"EndToEnd",c),i.remove(o))}var r,o,u,a,f,l,c,h=e.dom.doc,p=h.body,d,v;if(u=t.startContainer,a=t.startOffset,f=t.endContainer,l=t.endOffset,r=p.createTextRange(),u==f&&1==u.nodeType){if(a==l&&!u.hasChildNodes()){if(u.canHaveHTML)return c=u.previousSibling,c&&!c.hasChildNodes()&&i.isBlock(c)?c.innerHTML="&#xFEFF;":c=null,u.innerHTML="<span>&#xFEFF;</span><span>&#xFEFF;</span>",r.moveToElementText(u.lastChild),r.select(),i.doc.selection.clear(),u.innerHTML="",void (c&&(c.innerHTML=""));a=i.nodeIndex(u),u=u.parentNode}if(a==l-1)try{if(v=u.childNodes[a],o=p.createControlRange(),o.addElement(v),o.select(),d=e.getRng(),d.item&&v===d.item(0))return}catch(m){}}n(!0),n(),r.select()},this.getRangeAt=n}return e}),r(M,[c],function(e){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey},metaKeyPressed:function(t){return e.mac?t.metaKey:t.ctrlKey&&!t.altKey}}}),r(_,[M,l,c],function(e,t,n){return function(r,i){function s(e){var t=i.settings.object_resizing;return t===!1||n.iOS?!1:("string"!=typeof t&&(t="table,img,div"),"false"===e.getAttribute("data-mce-resize")?!1:i.dom.is(e,t))}function o(t){var n,r,s,o,u;n=t.screenX-L,r=t.screenY-A,B=n*C[2]+_,j=r*C[3]+D,B=5>B?5:B,j=5>j?5:j,s="IMG"==S.nodeName&&i.settings.resize_img_proportional!==!1?!e.modifierPressed(t):e.modifierPressed(t)||"IMG"==S.nodeName&&C[2]*C[3]!==0,s&&(R(n)>R(r)?(j=U(B*P),B=U(j/P)):(B=U(j/P),j=U(B*P))),w.setStyles(x,{width:B,height:j}),o=C.startPos.x+n,u=C.startPos.y+r,o=o>0?o:0,u=u>0?u:0,w.setStyles(T,{left:o,top:u,display:"block"}),T.innerHTML=B+" &times; "+j,C[2]<0&&x.clientWidth<=B&&w.setStyle(x,"left",O+(_-B)),C[3]<0&&x.clientHeight<=j&&w.setStyle(x,"top",M+(D-j)),n=z.scrollWidth-W,r=z.scrollHeight-X,n+r!==0&&w.setStyles(T,{left:o-n,top:u-r}),H||(i.fire("ObjectResizeStart",{target:S,width:_,height:D}),H=!0)}function u(){function e(e,t){t&&(S.style[e]||!i.schema.isValid(S.nodeName.toLowerCase(),e)?w.setStyle(S,e,t):w.setAttrib(S,e,t))}H=!1,e("width",B),e("height",j),w.unbind(F,"mousemove",o),w.unbind(F,"mouseup",u),I!=F&&(w.unbind(I,"mousemove",o),w.unbind(I,"mouseup",u)),w.remove(x),w.remove(T),q&&"TABLE"!=S.nodeName||a(S),i.fire("ObjectResized",{target:S,width:B,height:j}),i.nodeChanged()}function a(e,t,r){var a,l,c,h,p;m(),a=w.getPos(e,z),O=a.x,M=a.y,p=e.getBoundingClientRect(),l=p.width||p.right-p.left,c=p.height||p.bottom-p.top,S!=e&&(v(),S=e,B=j=0),h=i.fire("ObjectSelected",{target:e}),s(e)&&!h.isDefaultPrevented()?E(N,function(e,i){function s(t){L=t.screenX,A=t.screenY,_=S.clientWidth,D=S.clientHeight,P=D/_,C=e,e.startPos={x:l*e[0]+O,y:c*e[1]+M},W=z.scrollWidth,X=z.scrollHeight,x=S.cloneNode(!0),w.addClass(x,"mce-clonedresizable"),w.setAttrib(x,"data-mce-bogus","all"),x.contentEditable=!1,x.unSelectabe=!0,w.setStyles(x,{left:O,top:M,margin:0}),x.removeAttribute("data-mce-selected"),z.appendChild(x),w.bind(F,"mousemove",o),w.bind(F,"mouseup",u),I!=F&&(w.bind(I,"mousemove",o),w.bind(I,"mouseup",u)),T=w.add(z,"div",{"class":"mce-resize-helper","data-mce-bogus":"all"},_+" &times; "+D)}var a,f;return t?void (i==t&&s(r)):(a=w.get("mceResizeHandle"+i),a?w.show(a):(f=z,a=w.add(f,"div",{id:"mceResizeHandle"+i,"data-mce-bogus":"all","class":"mce-resizehandle",unselectable:!0,style:"cursor:"+i+"-resize; margin:0; padding:0"}),n.ie&&(a.contentEditable=!1)),e.elm||(w.bind(a,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),s(e)}),e.elm=a),void w.setStyles(a,{left:l*e[0]+O-a.offsetWidth/2,top:c*e[1]+M-a.offsetHeight/2}))}):f(),S.setAttribute("data-mce-selected","1")}function f(){var e,t;m(),S&&S.removeAttribute("data-mce-selected");for(e in N)t=w.get("mceResizeHandle"+e),t&&(w.unbind(t),w.remove(t))}function l(e){function t(e,t){if(e)do if(e===t)return!0;while(e=e.parentNode)}var n;return E(w.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),n="mousedown"==e.type?e.target:r.getNode(),n=w.$(n).closest(q?"table":"table,img,hr")[0],t(n,z)&&(g(),t(r.getStart(),n)&&t(r.getEnd(),n)&&(!q||n!=r.getStart()&&"IMG"!==r.getStart().nodeName))?void a(n):void f()}function c(e,t,n){e&&e.attachEvent&&e.attachEvent("on"+t,n)}function h(e,t,n){e&&e.detachEvent&&e.detachEvent("on"+t,n)}function p(e){var t=e.srcElement,n,r,s,o,u,f,l;n=t.getBoundingClientRect(),f=k.clientX-n.left,l=k.clientY-n.top;for(r in N)if(s=N[r],o=t.offsetWidth*s[0],u=t.offsetHeight*s[1],R(o-f)<8&&R(u-l)<8){C=s;break}H=!0,i.fire("ObjectResizeStart",{target:S,width:S.clientWidth,height:S.clientHeight}),i.getDoc().selection.empty(),a(t,r,k)}function d(e){var t=e.srcElement;if(t!=S){if(i.fire("ObjectSelected",{target:t}),v(),0===t.id.indexOf("mceResizeHandle"))return void (e.returnValue=!1);("IMG"==t.nodeName||"TABLE"==t.nodeName)&&(f(),S=t,c(t,"resizestart",p))}}function v(){h(S,"resizestart",p)}function m(){for(var e in N){var t=N[e];t.elm&&(w.unbind(t.elm),delete t.elm)}}function g(){try{i.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}}function y(e){var t;if(q){t=F.body.createControlRange();try{return t.addElement(e),t.select(),!0}catch(n){}}}function b(){S=x=null,q&&(v(),h(z,"controlselect",d))}var w=i.dom,E=t.each,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F=i.getDoc(),I=document,q=n.ie&&n.ie<11,R=Math.abs,U=Math.round,z=i.getBody(),W,X;N={n:[.5,0,0,-1],e:[1,.5,1,0],s:[.5,1,0,1],w:[0,.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var V=".mce-content-body";return i.contentStyles.push(V+" div.mce-resizehandle {position: absolute;border: 1px solid black;background: #FFF;width: 5px;height: 5px;z-index: 10000}"+V+" .mce-resizehandle:hover {background: #000}"+V+" img[data-mce-selected], hr[data-mce-selected] {outline: 1px solid black;resize: none}"+V+" .mce-clonedresizable {position: absolute;"+(n.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+V+" .mce-resize-helper {background-color: #555;background-color: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}"),i.on("init",function(){q?(i.on("ObjectResized",function(e){"TABLE"!=e.target.nodeName&&(f(),y(e.target))}),c(z,"controlselect",d),i.on("mousedown",function(e){k=e})):(g(),n.ie>=11&&(i.on("mouseup",function(e){var t=e.target.nodeName;/^(TABLE|IMG|HR)$/.test(t)&&(i.selection.select(e.target,"TABLE"==t),i.nodeChanged())}),i.dom.bind(z,"mscontrolselect",function(e){/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"==e.target.tagName&&window.setTimeout(function(){i.selection.select(e.target)},0))}))),i.on("nodechange mousedown mouseup ResizeEditor",l),i.on("keydown keyup",function(e){S&&"TABLE"==S.nodeName&&l(e)}),i.on("hide",f)}),i.on("remove",m),{isResizable:s,showResizeRect:a,hideResizeRect:f,updateResizeRect:l,controlSelect:y,destroy:b}}}),r(D,[c,l],function(e,t){function n(n){var r=n.dom;this.getBookmark=function(e,i){function s(e,n){var i=0;return t.each(r.select(e),function(e,t){e==n&&(i=t)}),i}function o(e){function t(t){var n,r,i,s=t?"start":"end";n=e[s+"Container"],r=e[s+"Offset"],1==n.nodeType&&"TR"==n.nodeName&&(i=n.childNodes,n=i[Math.min(t?r:r-1,i.length-1)],n&&(r=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,r)))}return t(!0),t(),e}function u(){function e(e,t){var n=e[t?"startContainer":"endContainer"],o=e[t?"startOffset":"endOffset"],u=[],a,f,l=0;if(3==n.nodeType){if(i)for(a=n.previousSibling;a&&3==a.nodeType;a=a.previousSibling)o+=a.nodeValue.length;u.push(o)}else f=n.childNodes,o>=f.length&&f.length&&(l=1,o=Math.max(0,f.length-1)),u.push(r.nodeIndex(f[o],i)+l);for(;n&&n!=s;n=n.parentNode)u.push(r.nodeIndex(n,i));return u}var t=n.getRng(!0),s=r.getRoot(),o={};return o.start=e(t,!0),n.isCollapsed()||(o.end=e(t)),o}var a,f,l,c,h,p,d="&#xFEFF;",v;if(2==e)return p=n.getNode(),h=p?p.nodeName:null,"IMG"==h?{name:h,index:s(h,p)}:n.tridentSel?n.tridentSel.getBookmark(e):u();if(e)return{rng:n.getRng()};if(a=n.getRng(),l=r.uniqueId(),c=n.isCollapsed(),v="overflow:hidden;line-height:0px",a.duplicate||a.item){if(a.item)return p=a.item(0),h=p.nodeName,{name:h,index:s(h,p)};f=a.duplicate();try{a.collapse(),a.pasteHTML('<span data-mce-type="bookmark" id="'+l+'_start" style="'+v+'">'+d+"</span>"),c||(f.collapse(!1),a.moveToElementText(f.parentElement()),0===a.compareEndPoints("StartToEnd",f)&&f.move("character",-1),f.pasteHTML('<span data-mce-type="bookmark" id="'+l+'_end" style="'+v+'">'+d+"</span>"))}catch(m){return null}}else{if(p=n.getNode(),h=p.nodeName,"IMG"==h)return{name:h,index:s(h,p)};f=o(a.cloneRange()),c||(f.collapse(!1),f.insertNode(r.create("span",{"data-mce-type":"bookmark",id:l+"_end",style:v},d))),a=o(a),a.collapse(!0),a.insertNode(r.create("span",{"data-mce-type":"bookmark",id:l+"_start",style:v},d))}return n.moveToBookmark({id:l,keep:1}),{id:l}},this.moveToBookmark=function(i){function s(e){var t=i[e?"start":"end"],n,r,s,o;if(t){for(s=t[0],r=f,n=t.length-1;n>=1;n--){if(o=r.childNodes,t[n]>o.length-1)return;r=o[t[n]]}3===r.nodeType&&(s=Math.min(t[0],r.nodeValue.length)),1===r.nodeType&&(s=Math.min(t[0],r.childNodes.length)),e?a.setStart(r,s):a.setEnd(r,s)}return!0}function o(n){var s=r.get(i.id+"_"+n),o,u,a,f,d=i.keep;if(s&&(o=s.parentNode,"start"==n?(d?(o=s.firstChild,u=1):u=r.nodeIndex(s),l=c=o,h=p=u):(d?(o=s.firstChild,u=1):u=r.nodeIndex(s),c=o,p=u),!d)){for(f=s.previousSibling,a=s.nextSibling,t.each(t.grep(s.childNodes),function(e){3==e.nodeType&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});s=r.get(i.id+"_"+n);)r.remove(s,1);f&&a&&f.nodeType==a.nodeType&&3==f.nodeType&&!e.opera&&(u=f.nodeValue.length,f.appendData(a.nodeValue),r.remove(a),"start"==n?(l=c=f,h=p=u):(c=f,p=u))}}function u(t){return!r.isBlock(t)||t.innerHTML||e.ie||(t.innerHTML='<br data-mce-bogus="1" />'),t}var a,f,l,c,h,p;if(i)if(i.start){if(a=r.createRng(),f=r.getRoot(),n.tridentSel)return n.tridentSel.moveToBookmark(i);s(!0)&&s()&&n.setRng(a)}else i.id?(o("start"),o("end"),l&&(a=r.createRng(),a.setStart(u(l),h),a.setEnd(u(c),p),n.setRng(a))):i.name?n.select(r.select(i.name)[i.index]):i.rng&&n.setRng(i.rng)}}return n.isBookmarkNode=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},n}),r(P,[d,O,_,E,D,c,l],function(e,n,r,i,s,o,u){function a(e,t,i,o){var u=this;u.dom=e,u.win=t,u.serializer=i,u.editor=o,u.bookmarkManager=new s(u),u.controlSelection=new r(u,o),u.win.getSelection||(u.tridentSel=new n(u))}var f=u.each,l=u.trim,c=o.ie;return a.prototype={setCursorLocation:function(e,t){var n=this,r=n.dom.createRng();e?(r.setStart(e,t),r.setEnd(e,t),n.setRng(r),n.collapse(!1)):(n._moveEndPoint(r,n.editor.getBody(),!0),n.setRng(r))},getContent:function(e){var n=this,r=n.getRng(),i=n.dom.create("body"),s=n.getSel(),o,u,a;return e=e||{},o=u="",e.get=!0,e.format=e.format||"html",e.selection=!0,n.editor.fire("BeforeGetContent",e),"text"==e.format?n.isCollapsed()?"":r.text||(s.toString?s.toString():""):(r.cloneContents?(a=r.cloneContents(),a&&i.appendChild(a)):r.item!==t||r.htmlText!==t?(i.innerHTML="<br>"+(r.item?r.item(0).outerHTML:r.htmlText),i.removeChild(i.firstChild)):i.innerHTML=r.toString(),/^\s/.test(i.innerHTML)&&(o=" "),/\s+$/.test(i.innerHTML)&&(u=" "),e.getInner=!0,e.content=n.isCollapsed()?"":o+n.serializer.serialize(i,e)+u,n.editor.fire("GetContent",e),e.content)},setContent:function(e,t){var n=this,r=n.getRng(),i,s=n.win.document,o,u;if(t=t||{format:"html"},t.set=!0,t.selection=!0,e=t.content=e,t.no_events||n.editor.fire("BeforeSetContent",t),e=t.content,r.insertNode){e+='<span id="__caret">_</span>',r.startContainer==s&&r.endContainer==s?s.body.innerHTML=e:(r.deleteContents(),0===s.body.childNodes.length?s.body.innerHTML=e:r.createContextualFragment?r.insertNode(r.createContextualFragment(e)):(o=s.createDocumentFragment(),u=s.createElement("div"),o.appendChild(u),u.outerHTML=e,r.insertNode(o))),i=n.dom.get("__caret"),r=s.createRange(),r.setStartBefore(i),r.setEndBefore(i),n.setRng(r),n.dom.remove("__caret");try{n.setRng(r)}catch(a){}}else r.item&&(s.execCommand("Delete",!1,null),r=n.getRng()),/^\s+/.test(e)?(r.pasteHTML('<span id="__mce_tmp">_</span>'+e),n.dom.remove("__mce_tmp")):r.pasteHTML(e);t.no_events||n.editor.fire("SetContent",t)},getStart:function(){var e=this,t=e.getRng(),n,r,i,s;if(t.duplicate||t.item){if(t.item)return t.item(0);for(i=t.duplicate(),i.collapse(1),n=i.parentElement(),n.ownerDocument!==e.dom.doc&&(n=e.dom.getRoot()),r=s=t.parentElement();s=s.parentNode;)if(s==n){n=r;break}return n}return n=t.startContainer,1==n.nodeType&&n.hasChildNodes()&&(n=n.childNodes[Math.min(n.childNodes.length-1,t.startOffset)]),n&&3==n.nodeType?n.parentNode:n},getEnd:function(){var e=this,t=e.getRng(),n,r;return t.duplicate||t.item?t.item?t.item(0):(t=t.duplicate(),t.collapse(0),n=t.parentElement(),n.ownerDocument!==e.dom.doc&&(n=e.dom.getRoot()),n&&"BODY"==n.nodeName?n.lastChild||n:n):(n=t.endContainer,r=t.endOffset,1==n.nodeType&&n.hasChildNodes()&&(n=n.childNodes[r>0?r-1:r]),n&&3==n.nodeType?n.parentNode:n)},getBookmark:function(e,t){return this.bookmarkManager.getBookmark(e,t)},moveToBookmark:function(e){return this.bookmarkManager.moveToBookmark(e)},select:function(e,t){var n=this,r=n.dom,i=r.createRng(),s;if(n.lastFocusBookmark=null,e){if(!t&&n.controlSelection.controlSelect(e))return;s=r.nodeIndex(e),i.setStart(e.parentNode,s),i.setEnd(e.parentNode,s+1),t&&(n._moveEndPoint(i,e,!0),n._moveEndPoint(i,e)),n.setRng(i)}return e},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!t||t.item?!1:t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!n||t.collapsed},collapse:function(e){var t=this,n=t.getRng(),r;n.item&&(r=n.item(0),n=t.win.document.body.createTextRange(),n.moveToElementText(r)),n.collapse(!!e),t.setRng(n)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(e){function t(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(r){return-1}}var n=this,r,i,s,o=n.win.document,u;if(!e&&n.lastFocusBookmark){var a=n.lastFocusBookmark;return a.startContainer?(i=o.createRange(),i.setStart(a.startContainer,a.startOffset),i.setEnd(a.endContainer,a.endOffset)):i=a,i}if(e&&n.tridentSel)return n.tridentSel.getRangeAt(0);try{(r=n.getSel())&&(i=r.rangeCount>0?r.getRangeAt(0):r.createRange?r.createRange():o.createRange())}catch(f){}if(c&&i&&i.setStart&&o.selection){try{u=o.selection.createRange()}catch(f){}u&&u.item&&(s=u.item(0),i=o.createRange(),i.setStartBefore(s),i.setEndAfter(s))}return i||(i=o.createRange?o.createRange():o.body.createTextRange()),i.setStart&&9===i.startContainer.nodeType&&i.collapsed&&(s=n.dom.getRoot(),i.setStart(s,0),i.setEnd(s,0)),n.selectedRange&&n.explicitRange&&(0===t(i.START_TO_START,i,n.selectedRange)&&0===t(i.END_TO_END,i,n.selectedRange)?i=n.explicitRange:(n.selectedRange=null,n.explicitRange=null)),i},setRng:function(e,t){var n=this,r;if(e.select)try{e.select()}catch(i){}else if(n.tridentSel){if(e.cloneRange)try{return void n.tridentSel.addRange(e)}catch(i){}}else if(r=n.getSel()){n.explicitRange=e;try{r.removeAllRanges(),r.addRange(e)}catch(i){}t===!1&&r.extend&&(r.collapse(e.endContainer,e.endOffset),r.extend(e.startContainer,e.startOffset)),n.selectedRange=r.rangeCount>0?r.getRangeAt(0):null}},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){function e(e,t){for(var n=e;e&&3===e.nodeType&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n}var t=this,n=t.getRng(),r,i=n.startContainer,s=n.endContainer,o=n.startOffset,u=n.endOffset,a=t.dom.getRoot();return n?n.setStart?(r=n.commonAncestorContainer,!n.collapsed&&(i==s&&2>u-o&&i.hasChildNodes()&&(r=i.childNodes[o]),3===i.nodeType&&3===s.nodeType&&(i=i.length===o?e(i.nextSibling,!0):i.parentNode,s=0===u?e(s.previousSibling,!1):s.parentNode,i&&i===s))?i:r&&3==r.nodeType?r.parentNode:r):(r=n.item?n.item(0):n.parentElement(),r.ownerDocument!==t.win.document&&(r=a),r):a},getSelectedBlocks:function(t,n){var r=this,i=r.dom,s,o,u=[];if(o=i.getRoot(),t=i.getParent(t||r.getStart(),i.isBlock),n=i.getParent(n||r.getEnd(),i.isBlock),t&&t!=o&&u.push(t),t&&n&&t!=n){s=t;for(var a=new e(t,o);(s=a.next())&&s!=n;)i.isBlock(s)&&u.push(s)}return n&&t!=n&&n!=o&&u.push(n),u},isForward:function(){var e=this.dom,t=this.getSel(),n,r;return t&&t.anchorNode&&t.focusNode?(n=e.createRng(),n.setStart(t.anchorNode,t.anchorOffset),n.collapse(!0),r=e.createRng(),r.setStart(t.focusNode,t.focusOffset),r.collapse(!0),n.compareBoundaryPoints(n.START_TO_START,r)<=0):!0},normalize:function(){var e=this,t=e.getRng();return!c&&(new i(e.dom)).normalize(t)&&e.setRng(t,e.isForward()),t},selectorChanged:function(e,t){var n=this,r;return n.selectorChangedData||(n.selectorChangedData={},r={},n.editor.on("NodeChange",function(e){var t=e.element,i=n.dom,s=i.getParents(t,null,i.getRoot()),o={};f(n.selectorChangedData,function(e,t){f(s,function(n){return i.is(n,t)?(r[t]||(f(e,function(e){e(!0,{node:n,selector:t,parents:s})}),r[t]=e),o[t]=e,!1):void 0})}),f(r,function(e,n){o[n]||(delete r[n],f(e,function(e){e(!1,{node:t,selector:n,parents:s})}))})})),n.selectorChangedData[e]||(n.selectorChangedData[e]=[]),n.selectorChangedData[e].push(t),n},getScrollContainer:function(){for(var e,t=this.dom.getRoot();t&&"BODY"!=t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:function(e){function t(e){for(var t=0,n=0,r=e;r&&r.nodeType;)t+=r.offsetLeft||0,n+=r.offsetTop||0,r=r.offsetParent;return{x:t,y:n}}var n,r,i=this,s=i.dom,o=s.getRoot(),u,a;if("BODY"!=o.nodeName){var f=i.getScrollContainer();if(f)return n=t(e).y-t(f).y,a=f.clientHeight,u=f.scrollTop,void ((u>n||n+25>u+a)&&(f.scrollTop=u>n?n:n-a+25))}r=s.getViewPort(i.editor.getWin()),n=s.getPos(e).y,u=r.y,a=r.h,(n<r.y||n+25>u+a)&&i.editor.getWin().scrollTo(0,u>n?n:n-a+25)},_moveEndPoint:function(t,n,r){var i=n,s=new e(n,i),u=this.dom.schema.getNonEmptyElements();do{if(3==n.nodeType&&0!==l(n.nodeValue).length)return void (r?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(u[n.nodeName])return void (r?t.setStartBefore(n):"BR"==n.nodeName?t.setEndBefore(n):t.setEndAfter(n));if(o.ie&&o.ie<11&&this.dom.isBlock(n)&&this.dom.isEmpty(n))return void (r?t.setStart(n,0):t.setEnd(n,0))}while(n=r?s.next():s.prev());"BODY"==i.nodeName&&(r?t.setStart(i,0):t.setEnd(i,i.childNodes.length))},destroy:function(){this.win=null,this.controlSelection.destroy()}},a}),r(H,[D,l],function(e,t){function n(t){this.compare=function(n,i){function s(e){var n={};return r(t.getAttribs(e),function(r){var i=r.nodeName.toLowerCase();0!==i.indexOf("_")&&"style"!==i&&"data-mce-style"!==i&&(n[i]=t.getAttrib(e,i))}),n}function o(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if(n=t[r],"undefined"==typeof n)return!1;if(e[r]!=n)return!1;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return!1;return!0}return n.nodeName!=i.nodeName?!1:o(s(n),s(i))&&o(t.parseStyle(t.getAttrib(n,"style")),t.parseStyle(t.getAttrib(i,"style")))?!e.isBookmarkNode(n)&&!e.isBookmarkNode(i):!1}}var r=t.each;return n}),r(B,[l],function(e){function t(e,t){function r(e){return e.replace(/%(\w+)/g,"")}var i,s,o=e.dom,u="",a,f;if(f=e.settings.preview_styles,f===!1)return"";if(f||(f="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"),"string"==typeof t){if(t=e.formatter.get(t),!t)return;t=t[0]}return i=t.block||t.inline||"span",s=o.create(i),n(t.styles,function(e,t){e=r(e),e&&o.setStyle(s,t,e)}),n(t.attributes,function(e,t){e=r(e),e&&o.setAttrib(s,t,e)}),n(t.classes,function(e){e=r(e),o.hasClass(s,e)||o.addClass(s,e)}),e.fire("PreviewFormats"),o.setStyles(s,{position:"absolute",left:-65535}),e.getBody().appendChild(s),a=o.getStyle(e.getBody(),"fontSize",!0),a=/px$/.test(a)?parseInt(a,10):0,n(f.split(" "),function(t){var n=o.getStyle(s,t,!0);if(!("background-color"==t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=o.getStyle(e.getBody(),t,!0),"#ffffff"==o.toHex(n).toLowerCase())||"color"==t&&"#000000"==o.toHex(n).toLowerCase())){if("font-size"==t&&/em|%$/.test(n)){if(0===a)return;n=parseFloat(n,10)/(/%$/.test(n)?100:1),n=n*a+"px"}"border"==t&&n&&(u+="padding:0 2px;"),u+=t+":"+n+";"}}),e.fire("AfterPreviewFormats"),o.remove(s),u}var n=e.each;return{getCssText:t}}),r(j,[d,E,D,H,l,B],function(e,t,n,r,i,s){return function(o){function u(e){return e.nodeType&&(e=e.nodeName),!!o.schema.getTextBlockElements()[e.toLowerCase()]}function a(e,t){return R.getParents(e,t,R.getRoot())}function f(e){return 1===e.nodeType&&"_mce_caret"===e.id}function l(){p({valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1,remove_similar:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1,remove_similar:!0},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(e,t,n){it(n,function(t,n){R.setAttrib(e,n,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),it("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){p(e,{block:e,remove:"all"})}),p(o.settings.formats)}function c(){o.addShortcut("ctrl+b","bold_desc","Bold"),o.addShortcut("ctrl+i","italic_desc","Italic"),o.addShortcut("ctrl+u","underline_desc","Underline");for(var e=1;6>=e;e++)o.addShortcut("ctrl+"+e,"",["FormatBlock",!1,"h"+e]);o.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),o.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),o.addShortcut("ctrl+9","",["FormatBlock",!1,"address"])}function h(e){return e?q[e]:q}function p(e,t){e&&("string"!=typeof e?it(e,function(e,t){p(t,e)}):(t=t.length?t:[t],it(t,function(e){e.deep===Z&&(e.deep=!e.selector),e.split===Z&&(e.split=!e.selector||e.inline),e.remove===Z&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),q[e]=t))}function d(e){var t;return o.dom.getParent(e,function(e){return t=o.dom.getStyle(e,"text-decoration"),t&&"none"!==t}),t}function v(e){var t;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(t=d(e.parentNode),o.dom.getStyle(e,"color")&&t?o.dom.setStyle(e,"text-decoration",t):o.dom.getStyle(e,"textdecoration")===t&&o.dom.setStyle(e,"text-decoration",null))}function m(t,n,r){function i(e,t){if(t=t||c,e){if(t.onformat&&t.onformat(e,t,n,r),it(t.styles,function(t,r){R.setStyle(e,r,A(t,n))}),t.styles){var i=R.getAttrib(e,"style");i&&e.setAttribute("data-mce-style",i)}it(t.attributes,function(t,r){R.setAttrib(e,r,A(t,n))}),it(t.classes,function(t){t=A(t,n),R.hasClass(e,t)||R.addClass(e,t)})}}function s(){function t(t,n){var i=new e(n);for(r=i.current();r;r=i.prev())if(r.childNodes.length>1||r==t||"BR"==r.tagName)return r}var n=o.selection.getRng(),i=n.startContainer,s=n.endContainer;if(i!=s&&0===n.endOffset){var u=t(i,s),a=3==u.nodeType?u.length:u.childNodes.length;n.setEnd(u,a)}return n}function a(e,r,s){var o=[],a,h,p=!0;a=c.inline||c.block,h=R.create(a),i(h),z.walk(e,function(e){function r(e){var v,m,y,w,E;return E=p,v=e.nodeName.toLowerCase(),m=e.parentNode.nodeName.toLowerCase(),1===e.nodeType&&et(e)&&(E=p,p="true"===et(e),w=!0),C(v,"br")?(d=0,void (c.block&&R.remove(e))):c.wrapper&&b(e,t,n)?void (d=0):p&&!w&&c.block&&!c.wrapper&&u(v)&&W(m,a)?(e=R.rename(e,a),i(e),o.push(e),void (d=0)):c.selector&&(it(l,function(t){"collapsed"in t&&t.collapsed!==g||R.is(e,t.selector)&&!f(e)&&(i(e,t),y=!0)}),!c.inline||y)?void (d=0):void (!p||w||!W(a,v)||!W(m,a)||!s&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)||f(e)||c.inline&&X(e)?(d=0,it(st(e.childNodes),r),w&&(p=E),d=0):(d||(d=R.clone(h,Q),e.parentNode.insertBefore(d,e),o.push(d)),d.appendChild(e)))}var d;it(e,r)}),c.wrap_links===!1&&it(o,function(e){function t(e){var n,r,i;if("A"===e.nodeName){for(r=R.clone(h,Q),o.push(r),i=st(e.childNodes),n=0;n<i.length;n++)r.appendChild(i[n]);e.appendChild(r)}it(st(e.childNodes),t)}t(e)}),it(o,function(e){function r(e){var t=0;return it(e.childNodes,function(e){O(e)||rt(e)||t++}),t}function s(e){var t,n;return it(e.childNodes,function(e){return 1!=e.nodeType||rt(e)||f(e)?void 0:(t=e,Q)}),t&&!rt(t)&&N(t,c)&&(n=R.clone(t,Q),i(n),R.replace(n,e,G),R.remove(t,1)),n||e}var u;if(u=r(e),(o.length>1||!X(e))&&0===u)return void R.remove(e,1);if(c.inline||c.wrapper){if(c.exact||1!==u||(e=s(e)),it(l,function(t){it(R.select(t.inline,e),function(e){var r;if(!rt(e)){if(t.wrap_links===!1){r=e.parentNode;do if("A"===r.nodeName)return;while(r=r.parentNode)}D(t,n,e,t.exact?e:null)}})}),b(e.parentNode,t,n))return R.remove(e,1),e=0,G;c.merge_with_parents&&R.getParent(e.parentNode,function(r){return b(r,t,n)?(R.remove(e,1),e=0,G):void 0}),e&&c.merge_siblings!==!1&&(e=B(H(e),e),e=B(e,H(e,G)))}})}var l=h(t),c=l[0],p,d,g=!r&&U.isCollapsed();if(c)if(r)r.nodeType?(d=R.createRng(),d.setStartBefore(r),d.setEndAfter(r),a(_(d,l),null,!0)):a(r,null,!0);else if(g&&c.inline&&!R.select("td.mce-item-selected,th.mce-item-selected").length)F("apply",t,n);else{var y=o.selection.getNode();V||!l[0].defaultBlock||R.getParent(y,R.isBlock)||m(l[0].defaultBlock),o.selection.setRng(s()),p=U.getBookmark(),a(_(U.getRng(G),l),p),c.styles&&(c.styles.color||c.styles.textDecoration)&&(ot(y,v,"childNodes"),v(y)),U.moveToBookmark(p),I(U.getRng(G)),o.nodeChanged()}}function g(e,t,n,r){function i(e){var n,r,s,o,u;if(1===e.nodeType&&et(e)&&(o=y,y="true"===et(e),u=!0),n=st(e.childNodes),y&&!u)for(r=0,s=p.length;s>r&&!D(p[r],t,e,e);r++);if(v.deep&&n.length){for(r=0,s=n.length;s>r;r++)i(n[r]);u&&(y=o)}}function s(n){var i;return it(a(n.parentNode).reverse(),function(n){var s;i||"_start"==n.id||"_end"==n.id||(s=b(n,e,t,r),s&&s.split!==!1&&(i=n))}),i}function u(e,n,r,i){var s,o,u,a,f,l;if(e){for(l=e.parentNode,s=n.parentNode;s&&s!=l;s=s.parentNode){for(o=R.clone(s,Q),f=0;f<p.length;f++)if(D(p[f],t,o,o)){o=0;break}o&&(u&&o.appendChild(u),a||(a=o),u=o)}!i||v.mixed&&X(e)||(n=R.split(e,n)),u&&(r.parentNode.insertBefore(u,r),a.appendChild(r))}return n}function f(e){return u(s(e),e,e,!0)}function l(e){var t=R.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return rt(n)&&(n=n[e?"firstChild":"lastChild"]),R.remove(t,!0),n}function c(e){var t,n,r=e.commonAncestorContainer;e=_(e,p,G),v.split&&(t=j(e,G),n=j(e),t!=n?(/^(TR|TH|TD)$/.test(t.nodeName)&&t.firstChild&&(t="TR"==t.nodeName?t.firstChild.firstChild||t:t.firstChild||t),r&&/^T(HEAD|BODY|FOOT|R)$/.test(r.nodeName)&&/^(TH|TD)$/.test(n.nodeName)&&n.firstChild&&(n=n.firstChild||n),t=M(t,"span",{id:"_start","data-mce-type":"bookmark"}),n=M(n,"span",{id:"_end","data-mce-type":"bookmark"}),f(t),f(n),t=l(G),n=l()):t=n=f(t),e.startContainer=t.parentNode,e.startOffset=$(t),e.endContainer=n.parentNode,e.endOffset=$(n)+1),z.walk(e,function(e){it(e,function(e){i(e),1===e.nodeType&&"underline"===o.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===d(e.parentNode)&&D({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}var p=h(e),v=p[0],m,g,y=!0;return n?void (n.nodeType?(g=R.createRng(),g.setStartBefore(n),g.setEndAfter(n),c(g)):c(n)):void (U.isCollapsed()&&v.inline&&!R.select("td.mce-item-selected,th.mce-item-selected").length?F("remove",e,t,r):(m=U.getBookmark(),c(U.getRng(G)),U.moveToBookmark(m),v.inline&&w(e,t,U.getStart())&&I(U.getRng(!0)),o.nodeChanged()))}function y(e,t,n){var r=h(e);!w(e,t,n)||"toggle"in r[0]&&!r[0].toggle?m(e,t,n):g(e,t,n)}function b(e,t,n,r){function i(e,t,i){var s,o,u=t[i],a;if(t.onmatch)return t.onmatch(e,t,i);if(u)if(u.length===Z){for(s in u)if(u.hasOwnProperty(s)){if(o="attributes"===i?R.getAttrib(e,s):k(e,s),r&&!o&&!t.exact)return;if((!r||t.exact)&&!C(o,L(A(u[s],n),s)))return}}else for(a=0;a<u.length;a++)if("attributes"===i?R.getAttrib(e,u[a]):k(e,u[a]))return t;return t}var s=h(t),o,u,a;if(s&&e)for(u=0;u<s.length;u++)if(o=s[u],N(e,o)&&i(e,o,"attributes")&&i(e,o,"styles")){if(a=o.classes)for(u=0;u<a.length;u++)if(!R.hasClass(e,a[u]))return;return o}}function w(e,t,n){function r(n){var r=R.getRoot();return n===r?!1:(n=R.getParent(n,function(n){return n.parentNode===r||!!b(n,e,t,!0)}),b(n,e,t))}var i;return n?r(n):(n=U.getNode(),r(n)?G:(i=U.getStart(),i!=n&&r(i)?G:Q))}function E(e,t){var n,r=[],i={};return n=U.getStart(),R.getParent(n,function(n){var s,o;for(s=0;s<e.length;s++)o=e[s],!i[o]&&b(n,o,t)&&(i[o]=!0,r.push(o))},R.getRoot()),r}function S(e){var t=h(e),n,r,i,s,o;if(t)for(n=U.getStart(),r=a(n),s=t.length-1;s>=0;s--){if(o=t[s].selector,!o||t[s].defaultBlock)return G;for(i=r.length-1;i>=0;i--)if(R.is(r[i],o))return G}return Q}function x(e,t,n){var r;return Y||(Y={},r={},o.on("NodeChange",function(e){var t=a(e.element),n={};t=i.grep(t,function(e){return!e.getAttribute("data-mce-bogus")}),it(Y,function(e,i){it(t,function(s){return b(s,i,{},e.similar)?(r[i]||(it(e,function(e){e(!0,{node:s,format:i,parents:t})}),r[i]=e),n[i]=e,!1):void 0})}),it(r,function(i,s){n[s]||(delete r[s],it(i,function(n){n(!1,{node:e.element,format:s,parents:t})}))})})),it(e.split(","),function(e){Y[e]||(Y[e]=[],Y[e].similar=n),Y[e].push(t)}),this}function T(e){return s.getCssText(o,e)}function N(e,t){return C(e,t.inline)?G:C(e,t.block)?G:t.selector?1==e.nodeType&&R.is(e,t.selector):void 0}function C(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function k(e,t){return L(R.getStyle(e,t),t)}function L(e,t){return("color"==t||"backgroundColor"==t)&&(e=R.toHex(e)),"fontWeight"==t&&700==e&&(e="bold"),"fontFamily"==t&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+e}function A(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e}function O(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function M(e,t,n){var r=R.create(t,n);return e.parentNode.insertBefore(r,e),r.appendChild(e),r}function _(t,n,r){function i(e){function t(e){return"BR"==e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling}var r,i,s,o,u;if(r=i=e?m:y,o=e?"previousSibling":"nextSibling",u=R.getRoot(),3==r.nodeType&&!O(r)&&(e?g>0:b<r.nodeValue.length))return r;for(;;){if(!n[0].block_expand&&X(i))return i;for(s=i[o];s;s=s[o])if(!rt(s)&&!O(s)&&!t(s))return i;if(i.parentNode==u){r=i;break}i=i.parentNode}return r}function s(e,t){for(t===Z&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)e=e.childNodes[t],e&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}}function f(e){for(var t=e;t;){if(1===t.nodeType&&et(t))return"false"===et(t)?t:e;t=t.parentNode}return e}function l(t,n,i){function s(e,t){var n,s,o=e.nodeValue;return"undefined"==typeof t&&(t=i?o.length:0),i?(n=o.lastIndexOf(" ",t),s=o.lastIndexOf(" ",t),n=n>s?n:s,-1===n||r||n++):(n=o.indexOf(" ",t),s=o.indexOf(" ",t),n=-1!==n&&(-1===s||s>n)?n:s),n}var u,a,f,l;if(3===t.nodeType){if(f=s(t,n),-1!==f)return{container:t,offset:f};l=t}for(u=new e(t,R.getParent(t,X)||o.getBody());a=u[i?"prev":"next"]();)if(3===a.nodeType){if(l=a,f=s(a),-1!==f)return{container:a,offset:f}}else if(X(a))break;return l?(n=i?0:l.length,{container:l,offset:n}):void 0}function c(e,r){var i,s,o,u;for(3==e.nodeType&&0===e.nodeValue.length&&e[r]&&(e=e[r]),i=a(e),s=0;s<i.length;s++)for(o=0;o<n.length;o++)if(u=n[o],!("collapsed"in u&&u.collapsed!==t.collapsed)&&R.is(i[s],u.selector))return i[s];return e}function h(e,t){var r,i=R.getRoot();if(n[0].wrapper||(r=R.getParent(e,n[0].block,i)),r||(r=R.getParent(3==e.nodeType?e.parentNode:e,function(e){return e!=i&&u(e)})),r&&n[0].wrapper&&(r=a(r,"ul,ol").reverse()[0]||r),!r)for(r=e;r[t]&&!X(r[t])&&(r=r[t],!C(r,"br")););return r||e}var p,d,v,m=t.startContainer,g=t.startOffset,y=t.endContainer,b=t.endOffset;if(1==m.nodeType&&m.hasChildNodes()&&(p=m.childNodes.length-1,m=m.childNodes[g>p?p:g],3==m.nodeType&&(g=0)),1==y.nodeType&&y.hasChildNodes()&&(p=y.childNodes.length-1,y=y.childNodes[b>p?p:b-1],3==y.nodeType&&(b=y.nodeValue.length)),m=f(m),y=f(y),(rt(m.parentNode)||rt(m))&&(m=rt(m)?m:m.parentNode,m=m.nextSibling||m,3==m.nodeType&&(g=0)),(rt(y.parentNode)||rt(y))&&(y=rt(y)?y:y.parentNode,y=y.previousSibling||y,3==y.nodeType&&(b=y.length)),n[0].inline&&(t.collapsed&&(v=l(m,g,!0),v&&(m=v.container,g=v.offset),v=l(y,b),v&&(y=v.container,b=v.offset)),d=s(y,b),d.node)){for(;d.node&&0===d.offset&&d.node.previousSibling;)d=s(d.node.previousSibling);d.node&&d.offset>0&&3===d.node.nodeType&&" "===d.node.nodeValue.charAt(d.offset-1)&&d.offset>1&&(y=d.node,y.splitText(d.offset-1))}return(n[0].inline||n[0].block_expand)&&(n[0].inline&&3==m.nodeType&&0!==g||(m=i(!0)),n[0].inline&&3==y.nodeType&&b!==y.nodeValue.length||(y=i())),n[0].selector&&n[0].expand!==Q&&!n[0].inline&&(m=c(m,"previousSibling"),y=c(y,"nextSibling")),(n[0].block||n[0].selector)&&(m=h(m,"previousSibling"),y=h(y,"nextSibling"),n[0].block&&(X(m)||(m=i(!0)),X(y)||(y=i()))),1==m.nodeType&&(g=$(m),m=m.parentNode),1==y.nodeType&&(b=$(y)+1,y=y.parentNode),{startContainer:m,startOffset:g,endContainer:y,endOffset:b}}function D(e,t,n,r){var i,s,o;if(!N(n,e))return Q;if("all"!=e.remove)for(it(e.styles,function(i,s){i=L(A(i,t),s),"number"==typeof s&&(s=i,r=0),(e.remove_similar||!r||C(k(r,s),i))&&R.setStyle(n,s,""),o=1}),o&&""===R.getAttrib(n,"style")&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style")),it(e.attributes,function(e,i){var s;if(e=A(e,t),"number"==typeof i&&(i=e,r=0),!r||C(R.getAttrib(r,i),e)){if("class"==i&&(e=R.getAttrib(n,i),e&&(s="",it(e.split(/\s+/),function(e){/mce\w+/.test(e)&&(s+=(s?" ":"")+e)}),s)))return void R.setAttrib(n,i,s);"class"==i&&n.removeAttribute("className"),K.test(i)&&n.removeAttribute("data-mce-"+i),n.removeAttribute(i)}}),it(e.classes,function(e){e=A(e,t),(!r||R.hasClass(r,e))&&R.removeClass(n,e)}),s=R.getAttribs(n),i=0;i<s.length;i++)if(0!==s[i].nodeName.indexOf("_"))return Q;return"none"!=e.remove?(P(n,e),G):void 0}function P(e,t){function n(e,t,n){return e=H(e,t,n),!e||"BR"==e.nodeName||X(e)}var r=e.parentNode,i;t.block&&(V?r==R.getRoot()&&(t.list_block&&C(e,t.list_block)||it(st(e.childNodes),function(e){W(V,e.nodeName.toLowerCase())?i?i.appendChild(e):(i=M(e,V),R.setAttribs(i,o.settings.forced_root_block_attrs)):i=0})):X(e)&&!X(r)&&(n(e,Q)||n(e.firstChild,G,1)||e.insertBefore(R.create("br"),e.firstChild),n(e,G)||n(e.lastChild,Q,1)||e.appendChild(R.create("br")))),t.selector&&t.inline&&!C(t.inline,e)||R.remove(e,1)}function H(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1==e.nodeType||!O(e))return e}function B(e,t){function n(e,t){for(i=e;i;i=i[t]){if(3==i.nodeType&&0!==i.nodeValue.length)return e;if(1==i.nodeType&&!rt(i))return i}return e}var i,s,o=new r(R);if(e&&t&&(e=n(e,"previousSibling"),t=n(t,"nextSibling"),o.compare(e,t))){for(i=e.nextSibling;i&&i!=t;)s=i,i=i.nextSibling,e.appendChild(s);return R.remove(t),it(st(t.childNodes),function(t){e.appendChild(t)}),e}return t}function j(t,n){var r,i,s;return r=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],1==r.nodeType&&(s=r.childNodes.length-1,!n&&i&&i--,r=r.childNodes[i>s?s:i]),3===r.nodeType&&n&&i>=r.nodeValue.length&&(r=(new e(r,o.getBody())).next()||r),3!==r.nodeType||n||0!==i||(r=(new e(r,o.getBody())).prev()||r),r}function F(t,n,r,i){function s(e){var t=R.create("span",{id:y,"data-mce-bogus":!0,style:w?"color:red":""});return e&&t.appendChild(o.getDoc().createTextNode(J)),t}function a(e,t){for(;e;){if(3===e.nodeType&&e.nodeValue!==J||e.childNodes.length>1)return!1;t&&1===e.nodeType&&t.push(e),e=e.firstChild}return!0}function f(e){for(;e;){if(e.id===y)return e;e=e.parentNode}}function l(t){var n;if(t)for(n=new e(t,t),t=n.current();t;t=n.next())if(3===t.nodeType)return t}function c(e,t){var n,r;if(e)r=U.getRng(!0),a(e)?(t!==!1&&(r.setStartBefore(e),r.setEndBefore(e)),R.remove(e)):(n=l(e),n.nodeValue.charAt(0)===J&&(n.deleteData(0,1),r.startContainer==n&&r.startOffset--,r.endContainer==n&&r.endOffset--),R.remove(e,1)),U.setRng(r);else if(e=f(U.getStart()),!e)for(;e=R.get(y);)c(e,!1)}function p(){var e,t,i,o,u,a,c;e=U.getRng(!0),o=e.startOffset,a=e.startContainer,c=a.nodeValue,t=f(U.getStart()),t&&(i=l(t)),c&&o>0&&o<c.length&&/\w/.test(c.charAt(o))&&/\w/.test(c.charAt(o-1))?(u=U.getBookmark(),e.collapse(!0),e=_(e,h(n)),e=z.split(e),m(n,r,e),U.moveToBookmark(u)):(t&&i.nodeValue===J?m(n,r,t):(t=s(!0),i=t.firstChild,e.insertNode(t),o=1,m(n,r,t)),U.setCursorLocation(i,o))}function d(){var e=U.getRng(!0),t,o,a,f,l,c,p=[],d,v;for(t=e.startContainer,o=e.startOffset,l=t,3==t.nodeType&&(o!=t.nodeValue.length&&(f=!0),l=l.parentNode);l;){if(b(l,n,r,i)){c=l;break}l.nextSibling&&(f=!0),p.push(l),l=l.parentNode}if(c)if(f)a=U.getBookmark(),e.collapse(!0),e=_(e,h(n),!0),e=z.split(e),g(n,r,e),U.moveToBookmark(a);else{for(v=s(),l=v,d=p.length-1;d>=0;d--)l.appendChild(R.clone(p[d],!1)),l=l.firstChild;l.appendChild(R.doc.createTextNode(J)),l=l.firstChild;var m=R.getParent(c,u);m&&R.isEmpty(m)?c.parentNode.replaceChild(v,c):R.insertAfter(v,c),U.setCursorLocation(l,1),R.isEmpty(c)&&R.remove(c)}}function v(){var e;e=f(U.getStart()),e&&!R.isEmpty(e)&&ot(e,function(e){1!=e.nodeType||e.id===y||R.isEmpty(e)||R.setAttrib(e,"data-mce-bogus",null)},"childNodes")}var y="_mce_caret",w=o.settings.caret_debug;o._hasCaretEvents||(nt=function(){var e=[],t;if(a(f(U.getStart()),e))for(t=e.length;t--;)R.setAttrib(e[t],"data-mce-bogus","1")},tt=function(e){var t=e.keyCode;c(),(8==t||37==t||39==t)&&c(f(U.getStart())),v()},o.on("SetContent",function(e){e.selection&&v()}),o._hasCaretEvents=!0),"apply"==t?p():d()}function I(t){var n=t.startContainer,r=t.startOffset,i,s,o,u,a;if(3==n.nodeType&&r>=n.nodeValue.length&&(r=$(n),n=n.parentNode,i=!0),1==n.nodeType)for(u=n.childNodes,n=u[Math.min(r,u.length-1)],s=new e(n,R.getParent(n,R.isBlock)),(r>u.length-1||i)&&s.next(),o=s.current();o;o=s.next())if(3==o.nodeType&&!O(o))return a=R.create("a",{"data-mce-bogus":"all"},J),o.parentNode.insertBefore(a,o),t.setStart(o,0),U.setRng(t),void R.remove(a)}var q={},R=o.dom,U=o.selection,z=new t(R),W=o.schema.isValidChild,X=R.isBlock,V=o.settings.forced_root_block,$=R.nodeIndex,J="﻿",K=/^(src|href|style)$/,Q=!1,G=!0,Y,Z,et=R.getContentEditable,tt,nt,rt=n.isBookmarkNode,it=i.each,st=i.grep,ot=i.walk,ut=i.extend;ut(this,{get:h,register:p,apply:m,remove:g,toggle:y,match:w,matchAll:E,matchNode:b,canApply:S,formatChanged:x,getCssText:T}),l(),c(),o.on("BeforeGetContent",function(){nt&&nt()}),o.on("mouseup keydown",function(e){tt&&tt(e)})}}),r(F,[c,l,N],function(e,t,n){var r=t.trim,i;return i=new RegExp(["<span[^>]+data-mce-bogus[^>]+>[​﻿]+<\\/span>",'\\s?data-mce-selected="[^"]+"'].join("|"),"gi"),function(t){function s(){var e=r(t.getContent({format:"raw",no_events:1})),s=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,o,u,a,f,l,c=t.schema;for(e=e.replace(i,""),l=c.getShortEndedElements();f=s.exec(e);)u=s.lastIndex,a=f[0].length,o=l[f[1]]?u:n.findEndTag(c,e,u),e=e.substring(0,u-a)+e.substring(o),s.lastIndex=u-a;return e}function o(e){u.typing=!1,u.add({},e)}var u=this,a=0,f=[],l,c,h=0;return t.on("init",function(){u.add()}),t.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&u.beforeChange()}),t.on("ExecCommand",function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&o(e)}),t.on("ObjectResizeStart",function(){u.beforeChange()}),t.on("SaveContent ObjectResized blur",o),t.on("DragEnd",o),t.on("KeyUp",function(n){var r=n.keyCode;(r>=33&&36>=r||r>=37&&40>=r||45==r||13==r||n.ctrlKey)&&(o(),t.nodeChanged()),(46==r||8==r||e.mac&&(91==r||93==r))&&t.nodeChanged(),c&&u.typing&&(t.isDirty()||(t.isNotDirty=!f[0]||s()==f[0].content,t.isNotDirty||t.fire("change",{level:f[0],lastLevel:null})),t.fire("TypingUndo"),c=!1,t.nodeChanged())}),t.on("KeyDown",function(e){var t=e.keyCode;return t>=33&&36>=t||t>=37&&40>=t||45==t?void (u.typing&&o(e)):void ((16>t||t>20)&&224!=t&&91!=t&&!u.typing&&(u.beforeChange(),u.typing=!0,u.add({},e),c=!0))}),t.on("MouseDown",function(e){u.typing&&o(e)}),t.addShortcut("ctrl+z","","Undo"),t.addShortcut("ctrl+y,ctrl+shift+z","","Redo"),t.on("AddUndo Undo Redo ClearUndos",function(e){e.isDefaultPrevented()||t.nodeChanged()}),u={data:f,typing:!1,beforeChange:function(){h||(l=t.selection.getBookmark(2,!0))},add:function(e,n){var r,i=t.settings,o;if(e=e||{},e.content=s(),h||t.removed)return null;if(o=f[a],t.fire("BeforeAddUndo",{level:e,lastLevel:o,originalEvent:n}).isDefaultPrevented())return null;if(o&&o.content==e.content)return null;if(f[a]&&(f[a].beforeBookmark=l),i.custom_undo_redo_levels&&f.length>i.custom_undo_redo_levels){for(r=0;r<f.length-1;r++)f[r]=f[r+1];f.length--,a=f.length}e.bookmark=t.selection.getBookmark(2,!0),a<f.length-1&&(f.length=a+1),f.push(e),a=f.length-1;var u={level:e,lastLevel:o,originalEvent:n};return t.fire("AddUndo",u),a>0&&(t.isNotDirty=!1,t.fire("change",u)),e},undo:function(){var e;return u.typing&&(u.add(),u.typing=!1),a>0&&(e=f[--a],0===a&&(t.isNotDirty=!0),t.setContent(e.content,{format:"raw"}),t.selection.moveToBookmark(e.beforeBookmark),t.fire("undo",{level:e})),e},redo:function(){var e;return a<f.length-1&&(e=f[++a],t.setContent(e.content,{format:"raw"}),t.selection.moveToBookmark(e.bookmark),t.fire("redo",{level:e})),e},clear:function(){f=[],a=0,u.typing=!1,t.fire("ClearUndos")},hasUndo:function(){return a>0||u.typing&&f[0]&&s()!=f[0].content},hasRedo:function(){return a<f.length-1&&!this.typing},transact:function(e){u.beforeChange();try{h++,e()}finally{h--}u.add()}}}}),r(I,[d,E,c],function(e,t,n){var r=n.ie&&n.ie<11;return function(i){function s(s){function h(e){return e&&o.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==o.getContentEditable(e)}function p(e){var t;o.isBlock(e)&&(t=u.getRng(),e.appendChild(o.create("span",null," ")),u.select(e),e.lastChild.outerHTML="",u.setRng(t))}function d(e){var t=e,n=[],r;if(t){for(;t=t.firstChild;){if(o.isBlock(t))return;1!=t.nodeType||c[t.nodeName.toLowerCase()]||n.push(t)}for(r=n.length;r--;)t=n[r],!t.hasChildNodes()||t.firstChild==t.lastChild&&""===t.firstChild.nodeValue?o.remove(t):"A"==t.nodeName&&" "===(t.innerText||t.textContent)&&o.remove(t)}}function v(t){function r(e){for(;e;){if(1==e.nodeType||3==e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}var i,s,a,f=t,l;if(t){if(n.ie&&n.ie<9&&O&&O.firstChild&&O.firstChild==O.lastChild&&"BR"==O.firstChild.tagName&&o.remove(O.firstChild),/^(LI|DT|DD)$/.test(t.nodeName)){var h=r(t.firstChild);h&&/^(UL|OL|DL)$/.test(h.nodeName)&&t.insertBefore(o.doc.createTextNode(" "),t.firstChild)}if(a=o.createRng(),n.ie||t.normalize(),t.hasChildNodes()){for(i=new e(t,t);s=i.current();){if(3==s.nodeType){a.setStart(s,0),a.setEnd(s,0);break}if(c[s.nodeName.toLowerCase()]){a.setStartBefore(s),a.setEndBefore(s);break}f=s,s=i.next()}s||(a.setStart(f,0),a.setEnd(f,0))}else"BR"==t.nodeName?t.nextSibling&&o.isBlock(t.nextSibling)?((!M||9>M)&&(l=o.create("br"),t.parentNode.insertBefore(l,t)),a.setStartBefore(t),a.setEndBefore(t)):(a.setStartAfter(t),a.setEndAfter(t)):(a.setStart(t,0),a.setEnd(t,0));u.setRng(a),o.remove(l),u.scrollIntoView(t)}}function m(e){var t=a.forced_root_block;t&&t.toLowerCase()===e.tagName.toLowerCase()&&o.setAttribs(e,a.forced_root_block_attrs)}function g(e){var t=L,n,i,s,u=l.getTextInlineElements();if(e||"TABLE"==B?(n=o.create(e||F),m(n)):n=O.cloneNode(!1),s=n,a.keep_styles!==!1)do if(u[t.nodeName]){if("_mce_caret"==t.id)continue;i=t.cloneNode(!1),o.setAttrib(i,"id",""),n.hasChildNodes()?(i.appendChild(n.firstChild),n.appendChild(i)):(s=i,n.appendChild(i))}while(t=t.parentNode);return r||(s.innerHTML='<br data-mce-bogus="1">'),n}function y(t){var n,r,i;if(3==L.nodeType&&(t?A>0:A<L.nodeValue.length))return!1;if(L.parentNode==O&&I&&!t)return!0;if(t&&1==L.nodeType&&L==O.firstChild)return!0;if("TABLE"===L.nodeName||L.previousSibling&&"TABLE"==L.previousSibling.nodeName)return I&&!t||!I&&t;for(n=new e(L,O),3==L.nodeType&&(t&&0===A?n.prev():t||A!=L.nodeValue.length||n.next());r=n.current();){if(1===r.nodeType){if(!r.getAttribute("data-mce-bogus")&&(i=r.nodeName.toLowerCase(),c[i]&&"br"!==i))return!1}else if(3===r.nodeType&&!/^[ \t\r\n]*$/.test(r.nodeValue))return!1;t?n.prev():n.next()}return!0}function b(e,t){var n,r,s,u,a,f,c=F||"P";if(r=o.getParent(e,o.isBlock),f=i.getBody().nodeName.toLowerCase(),!r||!h(r)){if(r=r||k,!r.hasChildNodes())return n=o.create(c),m(n),r.appendChild(n),N.setStart(n,0),N.setEnd(n,0),n;for(u=e;u.parentNode!=r;)u=u.parentNode;for(;u&&!o.isBlock(u);)s=u,u=u.previousSibling;if(s&&l.isValidChild(f,c.toLowerCase())){for(n=o.create(c),m(n),s.parentNode.insertBefore(n,s),u=s;u&&!o.isBlock(u);)a=u.nextSibling,n.appendChild(u),u=a;N.setStart(e,t),N.setEnd(e,t)}}return e}function w(){function e(e){for(var t=H[e?"firstChild":"lastChild"];t&&1!=t.nodeType;)t=t[e?"nextSibling":"previousSibling"];return t===O}function t(){var e=H.parentNode;return/^(LI|DT|DD)$/.test(e.nodeName)?e:H}var n=H.parentNode.nodeName;/^(OL|UL|LI)$/.test(n)&&(F="LI"),D=F?g(F):o.create("BR"),e(!0)&&e()?"LI"==n?o.insertAfter(D,t()):o.replace(D,H):e(!0)?"LI"==n?(o.insertAfter(D,t()),D.appendChild(o.doc.createTextNode(" ")),D.appendChild(H)):H.parentNode.insertBefore(D,H):e()?(o.insertAfter(D,t()),p(D)):(H=t(),C=N.cloneRange(),C.setStartAfter(O),C.setEndAfter(H),P=C.extractContents(),"LI"==F&&"LI"==P.firstChild.nodeName?(D=P.firstChild,o.insertAfter(P,H)):(o.insertAfter(P,H),o.insertAfter(D,H))),o.remove(O),v(D),f.add()}function E(){i.execCommand("InsertLineBreak",!1,s)}function S(e){do 3===e.nodeType&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)}function x(e){var t=o.getRoot(),n,r;for(n=e;n!==t&&"false"!==o.getContentEditable(n);)"true"===o.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==t?r:t}function T(e){var t;r||(e.normalize(),t=e.lastChild,(!t||/^(left|right)$/gi.test(o.getStyle(t,"float",!0)))&&o.add(e,"br"))}var N,C,k,L,A,O,M,_,D,P,H,B,j,F,I;if(N=u.getRng(!0),!s.isDefaultPrevented()){if(!N.collapsed)return void i.execCommand("Delete");if((new t(o)).normalize(N),L=N.startContainer,A=N.startOffset,F=(a.force_p_newlines?"p":"")||a.forced_root_block,F=F?F.toUpperCase():"",M=o.doc.documentMode,_=s.shiftKey,1==L.nodeType&&L.hasChildNodes()&&(I=A>L.childNodes.length-1,L=L.childNodes[Math.min(A,L.childNodes.length-1)]||L,A=I&&3==L.nodeType?L.nodeValue.length:0),k=x(L)){if(f.beforeChange(),!o.isBlock(k)&&k!=o.getRoot())return void ((!F||_)&&E());if((F&&!_||!F&&_)&&(L=b(L,A)),O=o.getParent(L,o.isBlock),H=O?o.getParent(O.parentNode,o.isBlock):null,B=O?O.nodeName.toUpperCase():"",j=H?H.nodeName.toUpperCase():"","LI"!=j||s.ctrlKey||(O=H,B=j),/^(LI|DT|DD)$/.test(B)){if(!F&&_)return void E();if(o.isEmpty(O))return void w()}if("PRE"==B&&a.br_in_pre!==!1){if(!_)return void E()}else if(!F&&!_&&"LI"!=B||F&&_)return void E();F&&O===i.getBody()||(F=F||"P",y()?(D=/^(H[1-6]|PRE|FIGURE)$/.test(B)&&"HGROUP"!=j?g(F):g(),a.end_container_on_empty_block&&h(H)&&o.isEmpty(O)?D=o.split(H,O):o.insertAfter(D,O),v(D)):y(!0)?(D=O.parentNode.insertBefore(g(),O),p(D),v(O)):(C=N.cloneRange(),C.setEndAfter(O),P=C.extractContents(),S(P),D=P.firstChild,o.insertAfter(P,O),d(D),T(O),v(D)),o.setAttrib(D,"id",""),i.fire("NewBlock",{newBlock:D}),f.add())}}}var o=i.dom,u=i.selection,a=i.settings,f=i.undoManager,l=i.schema,c=l.getNonEmptyElements();i.on("keydown",function(e){13==e.keyCode&&s(e)!==!1&&e.preventDefault()})}}),r(q,[],function(){return function(e){function t(){var t=i.getStart(),u=e.getBody(),a,f,l,c,h,p,d,v=-16777215,m,g,y,b,w;if(w=n.forced_root_block,t&&1===t.nodeType&&w){for(;t&&t!=u;){if(o[t.nodeName])return;t=t.parentNode}if(a=i.getRng(),a.setStart){f=a.startContainer,l=a.startOffset,c=a.endContainer,h=a.endOffset;try{g=e.getDoc().activeElement===u}catch(E){}}else a.item&&(t=a.item(0),a=e.getDoc().body.createTextRange(),a.moveToElementText(t)),g=a.parentElement().ownerDocument===e.getDoc(),y=a.duplicate(),y.collapse(!0),l=-1*y.move("character",v),y.collapsed||(y=a.duplicate(),y.collapse(!1),h=-1*y.move("character",v)-l);for(t=u.firstChild,b=u.nodeName.toLowerCase();t;)if((3===t.nodeType||1==t.nodeType&&!o[t.nodeName])&&s.isValidChild(b,w.toLowerCase())){if(3===t.nodeType&&0===t.nodeValue.length){d=t,t=t.nextSibling,r.remove(d);continue}p||(p=r.create(w,e.settings.forced_root_block_attrs),t.parentNode.insertBefore(p,t),m=!0),d=t,t=t.nextSibling,p.appendChild(d)}else p=null,t=t.nextSibling;if(m&&g){if(a.setStart)a.setStart(f,l),a.setEnd(c,h),i.setRng(a);else try{a=e.getDoc().body.createTextRange(),a.moveToElementText(u),a.collapse(!0),a.moveStart("character",l),h>0&&a.moveEnd("character",h),a.select()}catch(E){}e.nodeChanged()}}}var n=e.settings,r=e.dom,i=e.selection,s=e.schema,o=s.getBlockElements();n.forced_root_block&&e.on("NodeChange",t)}}),r(R,[L,c,l,H,E,d],function(e,n,r,i,s,o){var u=r.each,a=r.extend,f=r.map,l=r.inArray,c=r.explode,h=n.gecko,p=n.ie,d=n.ie&&n.ie<11,v=!0,m=!1;return function(r){function g(e,t,n){var r;return e=e.toLowerCase(),(r=L.exec[e])?(r(e,t,n),v):m}function y(e){var t;return e=e.toLowerCase(),(t=L.state[e])?t(e):-1}function b(e){var t;return e=e.toLowerCase(),(t=L.value[e])?t(e):m}function w(e,t){t=t||"exec",u(e,function(e,n){u(n.toLowerCase().split(","),function(n){L[t][n]=e})})}function E(e,n,i){return n===t&&(n=m),i===t&&(i=null),r.getDoc().execCommand(e,n,i)}function S(e){return O.match(e)}function x(e,n){O.toggle(e,n?{value:n}:t),r.nodeChanged()}function T(e){M=k.getBookmark(e)}function N(){k.moveToBookmark(M)}var C=r.dom,k=r.selection,L={state:{},exec:{},value:{}},A=r.settings,O=r.formatter,M;a(this,{execCommand:g,queryCommandState:y,queryCommandValue:b,addCommands:w}),w({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){r.undoManager.add()},"Cut,Copy,Paste":function(e){var t=r.getDoc(),i;try{E(e)}catch(s){i=v}if(i||!t.queryCommandSupported(e)){var o=r.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");n.mac&&(o=o.replace(/Ctrl\+/g,"⌘+")),r.windowManager.alert(o)}},unlink:function(){if(k.isCollapsed()){var e=k.getNode();return void ("A"==e.tagName&&r.dom.remove(e,!0))}O.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t=e.substring(7);"full"==t&&(t="justify"),u("left,center,right,justify".split(","),function(e){t!=e&&O.remove("align"+e)}),x("align"+t),g("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;E(e),t=C.getParent(k.getNode(),"ol,ul"),t&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(T(),C.split(n,t),N()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){x(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){x(e,n)},FontSize:function(e,t,n){var r,i;n>=1&&7>=n&&(i=c(A.font_size_style_values),r=c(A.font_size_classes),n=r?r[n-1]||n:i[n-1]||n),x(e,n)},RemoveFormat:function(e){O.remove(e)},mceBlockQuote:function(){x("blockquote")},FormatBlock:function(e,t,n){return x(n||"p")},mceCleanup:function(){var e=k.getBookmark();r.setContent(r.getContent({cleanup:v}),{cleanup:v}),k.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var i=n||k.getNode();i!=r.getBody()&&(T(),r.dom.remove(i,v),N())},mceSelectNodeDepth:function(e,t,n){var i=0;C.getParent(k.getNode(),function(e){return 1==e.nodeType&&i++==n?(k.select(e),m):void 0},r.getBody())},mceSelectNode:function(e,t,n){k.select(n)},mceInsertContent:function(t,n,s){function o(e){function t(e){return r[e]&&3==r[e].nodeType}var n,r,i;return n=k.getRng(!0),r=n.startContainer,i=n.startOffset,3==r.nodeType&&(i>0?e=e.replace(/^&nbsp;/," "):t("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),i<r.length?e=e.replace(/&nbsp;(<br>|)$/," "):t("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e}function a(e){if(S)for(b=e.firstChild;b;b=b.walk(!0))x[b.name]&&b.attr("data-mce-new","true")}function f(){if(S){var e=r.getBody(),t=new i(C);u(C.select("*[data-mce-new]"),function(n){n.removeAttribute("data-mce-new");for(var r=n.parentNode;r&&r!=e;r=r.parentNode)t.compare(r,n)&&C.remove(n,!0)})}}var l,c,h,d,v,m,g,y,b,w,E,S,x=r.schema.getTextInlineElements();"string"!=typeof s&&(S=s.merge,s=s.content),/^ | $/.test(s)&&(s=o(s)),l=r.parser,c=new e({},r.schema),E='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#200B;</span>',m={content:s,format:"html",selection:!0},r.fire("BeforeSetContent",m),s=m.content,-1==s.indexOf("{$caret}")&&(s+="{$caret}"),s=s.replace(/\{\$caret\}/,E),y=k.getRng();var T=y.startContainer||(y.parentElement?y.parentElement():null),N=r.getBody();T===N&&k.isCollapsed()&&C.isBlock(N.firstChild)&&C.isEmpty(N.firstChild)&&(y=C.createRng(),y.setStart(N.firstChild,0),y.setEnd(N.firstChild,0),k.setRng(y)),k.isCollapsed()||r.getDoc().execCommand("Delete",!1,null),h=k.getNode();var L={context:h.nodeName.toLowerCase()};if(v=l.parse(s,L),a(v),b=v.lastChild,"mce_marker"==b.attr("id"))for(g=b,b=b.prev;b;b=b.walk(!0))if(3==b.type||!C.isBlock(b.name)){b.parent.insert(g,b,"br"===b.name);break}if(L.invalid){for(k.setContent(E),h=k.getNode(),d=r.getBody(),9==h.nodeType?h=b=d:b=h;b!==d;)h=b,b=b.parentNode;s=h==d?d.innerHTML:C.getOuterHTML(h),s=c.serialize(l.parse(s.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return c.serialize(v)}))),h==d?C.setHTML(d,s):C.setOuterHTML(h,s)}else s=c.serialize(v),b=h.firstChild,w=h.lastChild,!b||b===w&&"BR"===b.nodeName?C.setHTML(h,s):k.setContent(s);f(),g=C.get("mce_marker"),k.scrollIntoView(g),y=C.createRng(),b=g.previousSibling,b&&3==b.nodeType?(y.setStart(b,b.nodeValue.length),p||(w=g.nextSibling,w&&3==w.nodeType&&(b.appendData(w.data),w.parentNode.removeChild(w)))):(y.setStartBefore(g),y.setEndBefore(g)),C.remove(g),k.setRng(y),r.fire("SetContent",m),r.addVisual()},mceInsertRawHTML:function(e,t,n){k.setContent("tiny_mce_marker"),r.setContent(r.getContent().replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(e,t,n){x(n)},mceSetContent:function(e,t,n){r.setContent(n)},"Indent,Outdent":function(e){var t,n,i;t=A.indentation,n=/[a-z%]+$/i.exec(t),t=parseInt(t,10),y("InsertUnorderedList")||y("InsertOrderedList")?E(e):(A.forced_root_block||C.getParent(k.getNode(),C.isBlock)||O.apply("div"),u(k.getSelectedBlocks(),function(s){if("LI"!=s.nodeName){var o=r.getParam("indent_use_margin",!1)?"margin":"padding";o+="rtl"==C.getStyle(s,"direction",!0)?"Right":"Left","outdent"==e?(i=Math.max(0,parseInt(s.style[o]||0,10)-t),C.setStyle(s,o,i?i+n:"")):(i=parseInt(s.style[o]||0,10)+t+n,C.setStyle(s,o,i))}}))},mceRepaint:function(){if(h)try{T(v),k.getSel()&&k.getSel().selectAllChildren(r.getBody()),k.collapse(v),N()}catch(e){}},InsertHorizontalRule:function(){r.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){r.hasVisual=!r.hasVisual,r.addVisual()},mceReplaceContent:function(e,t,n){r.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,k.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var r;"string"==typeof n&&(n={href:n}),r=C.getParent(k.getNode(),"a"),n.href=n.href.replace(" ","%20"),r&&n.href||O.remove("link"),n.href&&O.apply("link",n,r)},selectAll:function(){var e=C.getRoot(),t;k.getRng().setStart?(t=C.createRng(),t.setStart(e,0),t.setEnd(e,e.childNodes.length),k.setRng(t)):(t=k.getRng(),t.item||(t.moveToElementText(e),t.select()))},"delete":function(){E("Delete");var e=r.getBody();C.isEmpty(e)&&(r.setContent(""),e.firstChild&&C.isBlock(e.firstChild)?r.selection.setCursorLocation(e.firstChild,0):r.selection.setCursorLocation(e,0))},mceNewDocument:function(){r.setContent("")},InsertLineBreak:function(e,t,n){function i(){for(var e=new o(p,g),t,n=r.schema.getNonEmptyElements();t=e.next();)if(n[t.nodeName.toLowerCase()]||t.length>0)return!0}var u=n,a,f,l,c=k.getRng(!0);(new s(C)).normalize(c);var h=c.startOffset,p=c.startContainer;if(1==p.nodeType&&p.hasChildNodes()){var m=h>p.childNodes.length-1;p=p.childNodes[Math.min(h,p.childNodes.length-1)]||p,h=m&&3==p.nodeType?p.nodeValue.length:0}var g=C.getParent(p,C.isBlock),y=g?g.nodeName.toUpperCase():"",b=g?C.getParent(g.parentNode,C.isBlock):null,w=b?b.nodeName.toUpperCase():"",E=u&&u.ctrlKey;"LI"!=w||E||(g=b,y=w),p&&3==p.nodeType&&h>=p.nodeValue.length&&(d||i()||(a=C.create("br"),c.insertNode(a),c.setStartAfter(a),c.setEndAfter(a),f=!0)),a=C.create("br"),c.insertNode(a);var S=C.doc.documentMode;return d&&"PRE"==y&&(!S||8>S)&&a.parentNode.insertBefore(C.doc.createTextNode("\r"),a),l=C.create("span",{},"&nbsp;"),a.parentNode.insertBefore(l,a),k.scrollIntoView(l),C.remove(l),f?(c.setStartBefore(a),c.setEndBefore(a)):(c.setStartAfter(a),c.setEndAfter(a)),k.setRng(c),r.undoManager.add(),v}}),w({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t="align"+e.substring(7),n=k.isCollapsed()?[C.getParent(k.getNode(),C.isBlock)]:k.getSelectedBlocks(),r=f(n,function(e){return!!O.matchNode(e,t)});return-1!==l(r,v)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return S(e)},mceBlockQuote:function(){return S("blockquote")},Outdent:function(){var e;if(A.inline_styles){if((e=C.getParent(k.getStart(),C.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return v;if((e=C.getParent(k.getEnd(),C.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return v}return y("InsertUnorderedList")||y("InsertOrderedList")||!A.inline_styles&&!!C.getParent(k.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=C.getParent(k.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),w({"FontSize,FontName":function(e){var t=0,n;return(n=C.getParent(k.getNode(),"span"))&&(t="fontsize"==e?n.style.fontSize:n.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),t}},"value"),w({Undo:function(){r.undoManager.undo()},Redo:function(){r.undoManager.redo()}})}}),r(U,[l],function(e){function t(e,s){var o=this,u,a;if(e=r(e),s=o.settings=s||{},u=s.base_uri,/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void (o.source=e);var f=0===e.indexOf("//");0!==e.indexOf("/")||f||(e=(u?u.protocol||"http":"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(a=s.base_uri?s.base_uri.path:(new t(location.href)).directory,""===s.base_uri.protocol?e="//mce_host"+o.toAbsPath(a,e):(e=/([^#?]*)([#?]?.*)/.exec(e),e=(u&&u.protocol||"http")+"://mce_host"+o.toAbsPath(a,e[1])+e[2])),e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),n(i,function(t,n){var r=e[n];r&&(r=r.replace(/\(mce_at\)/g,"@@")),o[t]=r}),u&&(o.protocol||(o.protocol=u.protocol),o.userInfo||(o.userInfo=u.userInfo),o.port||"mce_host"!==o.host||(o.port=u.port),o.host&&"mce_host"!==o.host||(o.host=u.host),o.source=""),f&&(o.protocol="")}var n=e.each,r=e.trim,i="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),s={ftp:21,http:80,https:443,mailto:25};return t.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var n=this,r;if("./"===e)return e;if(e=new t(e,{base_uri:n}),"mce_host"!=e.host&&n.host!=e.host&&e.host||n.port!=e.port||n.protocol!=e.protocol&&""!==e.protocol)return e.getURI();var i=n.getURI(),s=e.getURI();return i==s||"/"==i.charAt(i.length-1)&&i.substr(0,i.length-1)==s?i:(r=n.toRelPath(n.path,e.path),e.query&&(r+="?"+e.query),e.anchor&&(r+="#"+e.anchor),r)},toAbsolute:function(e,n){return e=new t(e,{base_uri:this}),e.getURI(n&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=s[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,r=0,i="",s,o;if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/"),e.length>=n.length)for(s=0,o=e.length;o>s;s++)if(s>=n.length||e[s]!=n[s]){r=s+1;break}if(e.length<n.length)for(s=0,o=n.length;o>s;s++)if(s>=e.length||e[s]!=n[s]){r=s+1;break}if(1===r)return t;for(s=0,o=e.length-(r-1);o>s;s++)i+="../";for(s=r-1,o=n.length;o>s;s++)i+=s!=r-1?"/"+n[s]:n[s];return i},toAbsPath:function(e,t){var r,i=0,s=[],o,u;for(o=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),n(e,function(e){e&&s.push(e)}),e=s,r=t.length-1,s=[];r>=0;r--)0!==t[r].length&&"."!==t[r]&&(".."!==t[r]?i>0?i--:s.push(t[r]):i++);return r=e.length-i,u=0>=r?s.reverse().join("/"):e.slice(0,r).join("/")+"/"+s.reverse().join("/"),0!==u.indexOf("/")&&(u="/"+u),o&&u.lastIndexOf("/")!==u.length-1&&(u+=o),u},getURI:function(e){var t,n=this;return(!n.source||e)&&(t="",e||(t+=n.protocol?n.protocol+"://":"//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},t}),r(z,[l],function(e){function t(){}var n=e.each,r=e.extend,i,s;return t.extend=i=function(e){function t(){var e,t,n,r=this;if(!s&&(r.init&&r.init.apply(r,arguments),t=r.Mixins))for(e=t.length;e--;)n=t[e],n.init&&n.init.apply(r,arguments)}function o(){return this}function u(e,t){return function(){var n=this,r=n._super,i;return n._super=f[e],i=t.apply(n,arguments),n._super=r,i}}var a=this,f=a.prototype,l,c,h;s=!0,l=new a,s=!1,e.Mixins&&(n(e.Mixins,function(t){t=t;for(var n in t)"init"!==n&&(e[n]=t[n])}),f.Mixins&&(e.Mixins=f.Mixins.concat(e.Mixins))),e.Methods&&n(e.Methods.split(","),function(t){e[t]=o}),e.Properties&&n(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){var t=this,r;return e!==r?(t[n]=e,t):t[n]}}),e.Statics&&n(e.Statics,function(e,n){t[n]=e}),e.Defaults&&f.Defaults&&(e.Defaults=r({},f.Defaults,e.Defaults));for(c in e)h=e[c],l[c]="function"==typeof h&&f[c]?u(c,h):h;return t.prototype=l,t.constructor=t,t.extend=i,t},t}),r(W,[l],function(e){function t(e){function t(){return!1}function n(){return!0}function r(r,i){var o,u,a,c;if(r=r.toLowerCase(),i=i||{},i.type=r,i.target||(i.target=f),i.preventDefault||(i.preventDefault=function(){i.isDefaultPrevented=n},i.stopPropagation=function(){i.isPropagationStopped=n},i.stopImmediatePropagation=function(){i.isImmediatePropagationStopped=n},i.isDefaultPrevented=t,i.isPropagationStopped=t,i.isImmediatePropagationStopped=t),e.beforeFire&&e.beforeFire(i),o=l[r])for(u=0,a=o.length;a>u;u++){if(o[u]=c=o[u],c.once&&s(r,c),i.isImmediatePropagationStopped())return i.stopPropagation(),i;if(c.call(f,i)===!1)return i.preventDefault(),i}return i}function i(e,n,r){var i,s,o;if(n===!1&&(n=t),n)for(s=e.toLowerCase().split(" "),o=s.length;o--;)e=s[o],i=l[e],i||(i=l[e]=[],c(e,!0)),r?i.unshift(n):i.push(n);return a}function s(e,t){var n,r,i,s,o;if(e)for(s=e.toLowerCase().split(" "),n=s.length;n--;){if(e=s[n],r=l[e],!e){for(i in l)c(i,!1),delete l[i];return a}if(r){if(t)for(o=r.length;o--;)r[o]===t&&(r=r.slice(0,o).concat(r.slice(o+1)),l[e]=r);else r.length=0;r.length||(c(e,!1),delete l[e])}}else{for(e in l)c(e,!1);l={}}return a}function o(e,t,n){return t.once=!0,i(e,t,n)}function u(e){return e=e.toLowerCase(),!!l[e]&&0!==l[e].length}var a=this,f,l={},c;e=e||{},f=e.scope||a,c=e.toggleEvent||t,a.fire=r,a.on=i,a.off=s,a.once=o,a.has=u}var n=e.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate"," ");return t.isNative=function(e){return!!n[e.toLowerCase()]},t}),r(X,[z],function(e){function t(e){for(var t=[],n=e.length,r;n--;)r=e[n],r.__checked||(t.push(r),r.__checked=1);for(n=t.length;n--;)delete t[n].__checked;return t}var n=/^([\w\\*]+)?(?:#([\w\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,r=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,i=/^\s*|\s*$/g,s,o=e.extend({init:function(e){function t(e){return e?(e=e.toLowerCase(),function(t){return"*"===e||t.type===e}):void 0}function s(e){return e?function(t){return t._name===e}:void 0}function o(e){return e?(e=e.split("."),function(t){for(var n=e.length;n--;)if(!t.hasClass(e[n]))return!1;return!0}):void 0}function u(e,t,n){return e?function(r){var i=r[e]?r[e]():"";return t?"="===t?i===n:"*="===t?i.indexOf(n)>=0:"~="===t?(" "+i+" ").indexOf(" "+n+" ")>=0:"!="===t?i!=n:"^="===t?0===i.indexOf(n):"$="===t?i.substr(i.length-n.length)===n:!1:!!n}:void 0}function a(e){var t;return e?(e=/(?:not\((.+)\))|(.+)/i.exec(e),e[1]?(t=l(e[1],[]),function(e){return!c(e,t)}):(e=e[2],function(t,n,r){return"first"===e?0===n:"last"===e?n===r-1:"even"===e?n%2===0:"odd"===e?n%2===1:t[e]?t[e]():!1})):void 0}function f(e,r,f){function l(e){e&&r.push(e)}var c;return c=n.exec(e.replace(i,"")),l(t(c[1])),l(s(c[2])),l(o(c[3])),l(u(c[4],c[5],c[6])),l(a(c[7])),r.psuedo=!!c[7],r.direct=f,r}function l(e,t){var n=[],i,s,o;do if(r.exec(""),s=r.exec(e),s&&(e=s[3],n.push(s[1]),s[2])){i=s[3];break}while(s);for(i&&l(i,t),e=[],o=0;o<n.length;o++)">"!=n[o]&&e.push(f(n[o],[],">"===n[o-1]));return t.push(e),t}var c=this.match;this._selectors=l(e,[])},match:function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d;for(t=t||this._selectors,n=0,r=t.length;r>n;n++){for(o=t[n],s=o.length,d=e,p=0,i=s-1;i>=0;i--)for(f=o[i];d;){if(f.psuedo)for(h=d.parent().items(),l=c=h.length;l--&&h[l]!==d;);for(u=0,a=f.length;a>u;u++)if(!f[u](d,l,c)){u=a+1;break}if(u===a){p++;break}if(i===s-1)break;d=d.parent()}if(p===s)return!0}return!1},find:function(e){function n(e,t,i){var s,o,u,a,f,l=t[i];for(s=0,o=e.length;o>s;s++){for(f=e[s],u=0,a=l.length;a>u;u++)if(!l[u](f,s,o)){u=a+1;break}if(u===a)i==t.length-1?r.push(f):f.items&&n(f.items(),t,i+1);else if(l.direct)return;f.items&&n(f.items(),t,i)}}var r=[],i,u,a=this._selectors;if(e.items){for(i=0,u=a.length;u>i;i++)n(e.items(),a[i],0);u>1&&(r=t(r))}return s||(s=o.Collection),new s(r)}});return o}),r(V,[l,X,z],function(e,t,n){var r,i,s=Array.prototype.push,o=Array.prototype.slice;return i={length:0,init:function(e){e&&this.add(e)},add:function(t){var n=this;return e.isArray(t)?s.apply(n,t):t instanceof r?n.add(t.toArray()):s.call(n,t),n},set:function(e){var t=this,n=t.length,r;for(t.length=0,t.add(e),r=t.length;n>r;r++)delete t[r];return t},filter:function(e){var n=this,i,s,o=[],u,a;for("string"==typeof e?(e=new t(e),a=function(t){return e.match(t)}):a=e,i=0,s=n.length;s>i;i++)u=n[i],a(u)&&o.push(u);return new r(o)},slice:function(){return new r(o.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(t){return e.each(this,t),this},toArray:function(){return e.toArray(this)},indexOf:function(e){for(var t=this,n=t.length;n--&&t[n]!==e;);return n},reverse:function(){return new r(e.toArray(this).reverse())},hasClass:function(e){return this[0]?this[0].hasClass(e):!1},prop:function(e,t){var n=this,r,i;return t!==r?(n.each(function(n){n[e]&&n[e](t)}),n):(i=n[0],i&&i[e]?i[e]():void 0)},exec:function(t){var n=this,r=e.toArray(arguments).slice(1);return n.each(function(e){e[t]&&e[t].apply(e,r)}),n},remove:function(){for(var e=this.length;e--;)this[e].remove();return this}},e.each("fire on off show hide addClass removeClass append prepend before after reflow".split(" "),function(t){i[t]=function(){var n=e.toArray(arguments);return this.each(function(e){t in e&&e[t].apply(e,n)}),this}}),e.each("text name disabled active selected checked visible parent value data".split(" "),function(e){i[e]=function(t){return this.prop(e,t)}}),r=n.extend(i),t.Collection=r,r}),r($,[l,y],function(e,t){var n=0;return{id:function(){return"mceu_"+n++},createFragment:function(e){return t.DOM.createFragment(e)},getWindowSize:function(){return t.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var r=e.getBoundingClientRect();t=Math.max(r.width||r.right-r.left,e.offsetWidth),n=Math.max(r.height||r.bottom-r.bottom,e.offsetHeight)}else t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}},getPos:function(e,n){return t.DOM.getPos(e,n)},getViewPort:function(e){return t.DOM.getViewPort(e)},get:function(e){return document.getElementById(e)},addClass:function(e,n){return t.DOM.addClass(e,n)},removeClass:function(e,n){return t.DOM.removeClass(e,n)},hasClass:function(e,n){return t.DOM.hasClass(e,n)},toggleClass:function(e,n,r){return t.DOM.toggleClass(e,n,r)},css:function(e,n,r){return t.DOM.setStyle(e,n,r)},on:function(e,n,r,i){return t.DOM.bind(e,n,r,i)},off:function(e,n,r){return t.DOM.unbind(e,n,r)},fire:function(e,n,r){return t.DOM.fire(e,n,r)},innerHtml:function(e,n){t.DOM.setHTML(e,n)}}}),r(J,[z,l,W,V,$],function(e,t,n,r,i){function s(e){return e._eventDispatcher||(e._eventDispatcher=new n({scope:e,toggleEvent:function(t,r){r&&n.isNative(t)&&(e._nativeEvents||(e._nativeEvents={}),e._nativeEvents[t]=!0,e._rendered&&e.bindPendingEvents())}})),e._eventDispatcher}var o={},u="onmousewheel"in document,a=!1,f="mce-",l=e.extend({Statics:{elementIdCache:o,classPrefix:f},isRtl:function(){return l.rtl},classPrefix:f,init:function(e){var n=this,r,s;if(n.settings=e=t.extend({},n.Defaults,e),n._id=e.id||i.id(),n._text=n._name="",n._width=n._height=0,n._aria={role:e.role},r=e.classes)for(r=r.split(" "),r.map={},s=r.length;s--;)r.map[r[s]]=!0;n._classes=r||[],n.visible(!0),t.each("title text width height name classes visible disabled active value".split(" "),function(t){var r=e[t],i;r!==i?n[t](r):n["_"+t]===i&&(n["_"+t]=!1)}),n.on("click",function(){return n.disabled()?!1:void 0}),e.classes&&t.each(e.classes.split(" "),function(e){n.addClass(e)}),n.settings=e,n._borderBox=n.parseBox(e.border),n._paddingBox=n.parseBox(e.padding),n._marginBox=n.parseBox(e.margin),e.hidden&&n.hide()},Properties:"parent,title,text,width,height,disabled,active,name,value",Methods:"renderHtml",getContainerElm:function(){return document.body},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},parseBox:function(e){var t,n=10;if(e)return"number"==typeof e?(e=e||0,{top:e,left:e,bottom:e,right:e}):(e=e.split(" "),t=e.length,1===t?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],n)||0,right:parseInt(e[1],n)||0,bottom:parseInt(e[2],n)||0,left:parseInt(e[3],n)||0})},borderBox:function(){return this._borderBox},paddingBox:function(){return this._paddingBox},marginBox:function(){return this._marginBox},measureBox:function(e,t){function n(t){var n=document.defaultView;return n?(t=t.replace(/[A-Z]/g,function(e){return"-"+e}),n.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle[t]}function r(e){var t=parseFloat(n(e),10);return isNaN(t)?0:t}return{top:r(t+"TopWidth"),right:r(t+"RightWidth"),bottom:r(t+"BottomWidth"),left:r(t+"LeftWidth")}},initLayoutRect:function(){var e=this,t=e.settings,n,r,s=e.getEl(),o,u,a,f,l,c,h,p;n=e._borderBox=e._borderBox||e.measureBox(s,"border"),e._paddingBox=e._paddingBox||e.measureBox(s,"padding"),e._marginBox=e._marginBox||e.measureBox(s,"margin"),p=i.getSize(s),c=t.minWidth,h=t.minHeight,a=c||p.width,f=h||p.height,o=t.width,u=t.height,l=t.autoResize,l="undefined"!=typeof l?l:!o&&!u,o=o||a,u=u||f;var d=n.left+n.right,v=n.top+n.bottom,m=t.maxWidth||65535,g=t.maxHeight||65535;return e._layoutRect=r={x:t.x||0,y:t.y||0,w:o,h:u,deltaW:d,deltaH:v,contentW:o-d,contentH:u-v,innerW:o-d,innerH:u-v,startMinWidth:c||0,startMinHeight:h||0,minW:Math.min(a,m),minH:Math.min(f,g),maxW:m,maxH:g,autoResize:l,scrollW:0},e._lastLayoutRect={},r},layoutRect:function(e){var t=this,n=t._layoutRect,r,i,s,o,u,a;return n||(n=t.initLayoutRect()),e?(s=n.deltaW,o=n.deltaH,e.x!==u&&(n.x=e.x),e.y!==u&&(n.y=e.y),e.minW!==u&&(n.minW=e.minW),e.minH!==u&&(n.minH=e.minH),i=e.w,i!==u&&(i=i<n.minW?n.minW:i,i=i>n.maxW?n.maxW:i,n.w=i,n.innerW=i-s),i=e.h,i!==u&&(i=i<n.minH?n.minH:i,i=i>n.maxH?n.maxH:i,n.h=i,n.innerH=i-o),i=e.innerW,i!==u&&(i=i<n.minW-s?n.minW-s:i,i=i>n.maxW-s?n.maxW-s:i,n.innerW=i,n.w=i+s),i=e.innerH,i!==u&&(i=i<n.minH-o?n.minH-o:i,i=i>n.maxH-o?n.maxH-o:i,n.innerH=i,n.h=i+o),e.contentW!==u&&(n.contentW=e.contentW),e.contentH!==u&&(n.contentH=e.contentH),r=t._lastLayoutRect,(r.x!==n.x||r.y!==n.y||r.w!==n.w||r.h!==n.h)&&(a=l.repaintControls,a&&a.map&&!a.map[t._id]&&(a.push(t),a.map[t._id]=!0),r.x=n.x,r.y=n.y,r.w=n.w,r.h=n.h),t):n},repaint:function(){var e=this,t,n,r,i,s=0,o=0,u,a;a=document.createRange?function(e){return e}:Math.round,t=e.getEl().style,r=e._layoutRect,u=e._lastRepaintRect||{},i=e._borderBox,s=i.left+i.right,o=i.top+i.bottom,r.x!==u.x&&(t.left=a(r.x)+"px",u.x=r.x),r.y!==u.y&&(t.top=a(r.y)+"px",u.y=r.y),r.w!==u.w&&(t.width=a(r.w-s)+"px",u.w=r.w),r.h!==u.h&&(t.height=a(r.h-o)+"px",u.h=r.h),e._hasBody&&r.innerW!==u.innerW&&(n=e.getEl("body").style,n.width=a(r.innerW)+"px",u.innerW=r.innerW),e._hasBody&&r.innerH!==u.innerH&&(n=n||e.getEl("body").style,n.height=a(r.innerH)+"px",u.innerH=r.innerH),e._lastRepaintRect=u,e.fire("repaint",{},!1)},on:function(e,t){function n(e){var t,n;return"string"!=typeof e?e:function(i){return t||r.parentsAndSelf().each(function(r){var i=r.settings.callbacks;return i&&(t=i[e])?(n=r,!1):void 0}),t.call(n,i)}}var r=this;return s(r).on(e,n(t)),r},off:function(e,t){return s(this).off(e,t),this},fire:function(e,t,n){var r=this;if(t=t||{},t.control||(t.control=r),t=s(r).fire(e,t),n!==!1&&r.parent)for(var i=r.parent();i&&!t.isPropagationStopped();)i.fire(e,t,!1),i=i.parent();return t},hasEventListeners:function(e){return s(this).has(e)},parents:function(e){var t=this,n,i=new r;for(n=t.parent();n;n=n.parent())i.add(n);return e&&(i=i.filter(e)),i},parentsAndSelf:function(e){return(new r(this)).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},findCommonAncestor:function(e,t){for(var n;e;){for(n=t;n&&e!=n;)n=n.parent();if(e==n)break;e=e.parent()}return e},hasClass:function(e,t){var n=this._classes[t||"control"];return e=this.classPrefix+e,n&&!!n.map[e]},addClass:function(e,t){var n=this,r,i;return e=this.classPrefix+e,r=n._classes[t||"control"],r||(r=[],r.map={},n._classes[t||"control"]=r),r.map[e]||(r.map[e]=e,r.push(e),n._rendered&&(i=n.getEl(t),i&&(i.className=r.join(" ")))),n},removeClass:function(e,t){var n=this,r,i,s;if(e=this.classPrefix+e,r=n._classes[t||"control"],r&&r.map[e])for(delete r.map[e],i=r.length;i--;)r[i]===e&&r.splice(i,1);return n._rendered&&(s=n.getEl(t),s&&(s.className=r.join(" "))),n},toggleClass:function(e,t,n){var r=this;return t?r.addClass(e,n):r.removeClass(e,n),r},classes:function(e){var t=this._classes[e||"control"];return t?t.join(" "):""},innerHtml:function(e){return i.innerHtml(this.getEl(),e),this},getEl:function(e,t){var n,r=e?this._id+"-"+e:this._id;return n=o[r]=(t===!0?null:o[r])||i.get(r)},visible:function(e){var t=this,n;return"undefined"!=typeof e?(t._visible!==e&&(t._rendered&&(t.getEl().style.display=e?"":"none"),t._visible=e,n=t.parent(),n&&(n._lastRect=null),t.fire(e?"show":"hide")),t):t._visible},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this,r=n.getEl(n.ariaTarget);return"undefined"==typeof t?n._aria[e]:(n._aria[e]=t,n._rendered&&r.setAttribute("role"==e?e:"aria-"+e,t),n)},encode:function(e,t){return t!==!1&&(e=this.translate(e)),(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},translate:function(e){return l.translate?l.translate(e):e},before:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t),!0),t},after:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t)),t},remove:function(){var e=this,t=e.getEl(),n=e.parent(),r,s;if(e.items){var u=e.items().toArray();for(s=u.length;s--;)u[s].remove()}n&&n.items&&(r=[],n.items().each(function(t){t!==e&&r.push(t)}),n.items().set(r),n._lastRect=null),e._eventsRoot&&e._eventsRoot==e&&i.off(t);var a=e.getRoot().controlIdLookup;if(a&&delete a[e._id],delete o[e._id],t&&t.parentNode){var f=t.getElementsByTagName("*");for(s=f.length;s--;)delete o[f[s].id];t.parentNode.removeChild(t)}return e._rendered=!1,e},renderBefore:function(e){var t=this;return e.parentNode.insertBefore(i.createFragment(t.renderHtml()),e),t.postRender(),t},renderTo:function(e){var t=this;return e=e||t.getContainerElm(),e.appendChild(i.createFragment(t.renderHtml())),t.postRender(),t},postRender:function(){var e=this,t=e.settings,n,r,s,o,u;for(o in t)0===o.indexOf("on")&&e.on(o.substr(2),t[o]);if(e._eventsRoot){for(s=e.parent();!u&&s;s=s.parent())u=s._eventsRoot;if(u)for(o in u._nativeEvents)e._nativeEvents[o]=!0}e.bindPendingEvents(),t.style&&(n=e.getEl(),n&&(n.setAttribute("style",t.style),n.style.cssText=t.style)),e._visible||i.css(e.getEl(),"display","none"),e.settings.border&&(r=e.borderBox(),i.css(e.getEl(),{"border-top-width":r.top,"border-right-width":r.right,"border-bottom-width":r.bottom,"border-left-width":r.left}));var a=e.getRoot();a.controlIdLookup||(a.controlIdLookup={}),a.controlIdLookup[e._id]=e;for(var f in e._aria)e.aria(f,e._aria[f]);e.fire("postrender",{},!1)},scrollIntoView:function(e){function t(e,t){var n,r,i=e;for(n=r=0;i&&i!=t&&i.nodeType;)n+=i.offsetLeft||0,r+=i.offsetTop||0,i=i.offsetParent;return{x:n,y:r}}var n=this.getEl(),r=n.parentNode,i,s,o,u,a,f,l=t(n,r);return i=l.x,s=l.y,o=n.offsetWidth,u=n.offsetHeight,a=r.clientWidth,f=r.clientHeight,"end"==e?(i-=a-o,s-=f-u):"center"==e&&(i-=a/2-o/2,s-=f/2-u/2),r.scrollLeft=i,r.scrollTop=s,this},bindPendingEvents:function(){function e(e){var t=s.getParentCtrl(e.target);t&&t.fire(e.type,e)}function t(){var e=c._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),c._lastHoverCtrl=null)}function n(e){var t=s.getParentCtrl(e.target),n=c._lastHoverCtrl,r=0,i,o,u;if(t!==n){if(c._lastHoverCtrl=t,o=t.parents().toArray().reverse(),o.push(t),n){for(u=n.parents().toArray().reverse(),u.push(n),r=0;r<u.length&&o[r]===u[r];r++);for(i=u.length-1;i>=r;i--)n=u[i],n.fire("mouseleave",{target:n.getEl()})}for(i=r;i<o.length;i++)t=o[i],t.fire("mouseenter",{target:t.getEl()})}}function r(e){e.preventDefault(),"mousewheel"==e.type?(e.deltaY=-1/40*e.wheelDelta,e.wheelDeltaX&&(e.deltaX=-1/40*e.wheelDeltaX)):(e.deltaX=0,e.deltaY=e.detail),e=s.fire("wheel",e)}var s=this,o,f,l,c,h,p;if(s._rendered=!0,h=s._nativeEvents){for(l=s.parents().toArray(),l.unshift(s),o=0,f=l.length;!c&&f>o;o++)c=l[o]._eventsRoot;for(c||(c=l[l.length-1]||s),s._eventsRoot=c,f=o,o=0;f>o;o++)l[o]._eventsRoot=c;var d=c._delegates;d||(d=c._delegates={});for(p in h){if(!h)return!1;"wheel"!==p||a?("mouseenter"===p||"mouseleave"===p?c._hasMouseEnter||(i.on(c.getEl(),"mouseleave",t),i.on(c.getEl(),"mouseover",n),c._hasMouseEnter=1):d[p]||(i.on(c.getEl(),p,e),d[p]=!0),h[p]=!1):u?i.on(s.getEl(),"mousewheel",r):i.on(s.getEl(),"DOMMouseScroll",r)}}},getRoot:function(){for(var e=this,t,n=[];e;){if(e.rootControl){t=e.rootControl;break}n.push(e),t=e,e=e.parent()}t||(t=this);for(var r=n.length;r--;)n[r].rootControl=t;return t},reflow:function(){return this.repaint(),this}});return l}),r(K,[],function(){var e={},t;return{add:function(t,n){e[t.toLowerCase()]=n},has:function(t){return!!e[t.toLowerCase()]},create:function(n,r){var i,s,o;if(!t){o=tinymce.ui;for(s in o)e[s.toLowerCase()]=o[s];t=!0}if("string"==typeof n?(r=r||{},r.type=n):(r=n,n=r.type),n=n.toLowerCase(),i=e[n],!i)throw new Error("Could not find control by type: "+n);return i=new i(r),i.type=n,i}}}),r(Q,[],function(){return function(e){function t(e){return e=e||b,e&&e.getAttribute("role")}function n(e){for(var n,r=e||b;r=r.parentNode;)if(n=t(r))return n}function r(e){var t=b;return t?t.getAttribute("aria-"+e):void 0}function i(e){var t=e.tagName.toUpperCase();return"INPUT"==t||"TEXTAREA"==t}function s(e){return i(e)&&!e.hidden?!0:/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell)$/.test(t(e))?!0:!1}function o(e){function t(e){if(1==e.nodeType&&"none"!=e.style.display){s(e)&&n.push(e);for(var r=0;r<e.childNodes.length;r++)t(e.childNodes[r])}}var n=[];return t(e||y.getEl()),n}function u(e){var t,n;e=e||w,n=e.parents().toArray(),n.unshift(e);for(var r=0;r<n.length&&(t=n[r],!t.settings.ariaRoot);r++);return t}function a(e){var t=u(e),n=o(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?f(t.lastAriaIndex,n):f(0,n)}function f(e,t){return 0>e?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function l(e,t){var n=-1,r=u();t=t||o(r.getEl());for(var i=0;i<t.length;i++)t[i]===b&&(n=i);n+=e,r.lastAriaIndex=f(n,t)}function c(){var e=n();"tablist"==e?l(-1,o(b.parentNode)):w.parent().submenu?m():l(-1)}function h(){var e=t(),i=n();"tablist"==i?l(1,o(b.parentNode)):"menuitem"==e&&"menu"==i&&r("haspopup")?g():l(1)}function p(){l(-1)}function d(){var e=t(),i=n();"menuitem"==e&&"menubar"==i?g():"button"==e&&r("haspopup")?g({key:"down"}):l(1)}function v(e){var t=n();if("tablist"==t){var r=o(w.getEl("body"))[0];r&&r.focus()}else l(e.shiftKey?-1:1)}function m(){w.fire("cancel")}function g(e){e=e||{},w.fire("click",{target:b,aria:e})}var y=e.root,b,w;try{b=document.activeElement}catch(E){b=document.body}return w=y.getParentCtrl(b),y.on("keydown",function(e){function t(e,t){i(b)||t(e)!==!1&&e.preventDefault()}if(!e.isDefaultPrevented())switch(e.keyCode){case 37:t(e,c);break;case 39:t(e,h);break;case 38:t(e,p);break;case 40:t(e,d);break;case 27:m();break;case 14:case 13:case 32:t(e,g);break;case 9:v(e)!==!1&&e.preventDefault()}}),y.on("focusin",function(e){b=e.target,w=e.control}),{focusFirst:a}}}),r(G,[J,V,X,K,Q,l,$],function(e,t,n,r,i,s,o){var u={};return e.extend({layout:"",innerClass:"container-inner",init:function(e){var n=this;n._super(e),e=n.settings,n._fixed=e.fixed,n._items=new t,n.isRtl()&&n.addClass("rtl"),n.addClass("container"),n.addClass("container-body","body"),e.containerCls&&n.addClass(e.containerCls),n._layout=r.create((e.layout||n.layout)+"layout"),n.settings.items&&n.add(n.settings.items),n._hasBody=!0},items:function(){return this._items},find:function(e){return e=u[e]=u[e]||new n(e),e.find(this)},add:function(e){var t=this;return t.items().add(t.create(e)).parent(t),t},focus:function(e){var t=this,n,r,i;return e&&(r=t.keyboardNav||t.parents().eq(-1)[0].keyboardNav)?void r.focusFirst(t):(i=t.find("*"),t.statusbar&&i.add(t.statusbar.items()),i.each(function(e){return e.settings.autofocus?(n=null,!1):void (e.canFocus&&(n=n||e))}),n&&n.focus(),t)},replace:function(e,t){for(var n,r=this.items(),i=r.length;i--;)if(r[i]===e){r[i]=t;break}i>=0&&(n=t.getEl(),n&&n.parentNode.removeChild(n),n=e.getEl(),n&&n.parentNode.removeChild(n)),t.parent(this)},create:function(t){var n=this,i,o=[];return s.isArray(t)||(t=[t]),s.each(t,function(t){t&&(t instanceof e||("string"==typeof t&&(t={type:t}),i=s.extend({},n.settings.defaults,t),t.type=i.type=i.type||t.type||n.settings.defaultType||(i.defaults?i.defaults.type:null),t=r.create(i)),o.push(t))}),o},renderNew:function(){var e=this;return e.items().each(function(t,n){var r,i;t.parent(e),t._rendered||(r=e.getEl("body"),i=o.createFragment(t.renderHtml()),r.hasChildNodes()&&n<=r.childNodes.length-1?r.insertBefore(i,r.childNodes[n]):r.appendChild(i),t.postRender())}),e._layout.applyClasses(e),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){var t=this;return t.items().set(t.create(e).concat(t.items().toArray())),t.renderNew()},insert:function(e,t,n){var r=this,i,s,o;return e=r.create(e),i=r.items(),!n&&t<i.length-1&&(t+=1),t>=0&&t<i.length&&(s=i.slice(0,t).toArray(),o=i.slice(t).toArray(),i.set(s.concat(e,o))),r.renderNew()},fromJSON:function(e){var t=this;for(var n in e)t.find("#"+n).value(e[n]);return t},toJSON:function(){var e=this,t={};return e.find("*").each(function(e){var n=e.name(),r=e.value();n&&"undefined"!=typeof r&&(t[n]=r)}),t},preRender:function(){},renderHtml:function(){var e=this,t=e._layout,n=this.settings.role;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'"'+(n?' role="'+this.settings.role+'"':"")+'><div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this,t;return e.items().exec("postRender"),e._super(),e._layout.postRender(e),e._rendered=!0,e.settings.style&&o.css(e.getEl(),e.settings.style),e.settings.border&&(t=e.borderBox(),o.css(e.getEl(),{"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left})),e.parent()||(e.keyboardNav=new i({root:e})),e},initLayoutRect:function(){var e=this,t=e._super();return e._layout.recalc(e),t},recalc:function(){var e=this,t=e._layoutRect,n=e._lastRect;return n&&n.w==t.w&&n.h==t.h?void 0:(e._layout.recalc(e),t=e.layoutRect(),e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0)},reflow:function(){var t;if(this.visible()){for(e.repaintControls=[],e.repaintControls.map={},this.recalc(),t=e.repaintControls.length;t--;)e.repaintControls[t].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),e.repaintControls=[]}return this}})}),r(Y,[$],function(e){function t(){var e=document,t,n,r,i,s,o,u,a,f=Math.max;return t=e.documentElement,n=e.body,r=f(t.scrollWidth,n.scrollWidth),i=f(t.clientWidth,n.clientWidth),s=f(t.offsetWidth,n.offsetWidth),o=f(t.scrollHeight,n.scrollHeight),u=f(t.clientHeight,n.clientHeight),a=f(t.offsetHeight,n.offsetHeight),{width:s>r?i:r,height:a>o?u:o}}return function(n,r){function i(){return o.getElementById(r.handle||n)}var s,o=document,u,a,f,l,c,h;r=r||{},a=function(n){var a=t(),p,d;n.preventDefault(),u=n.button,p=i(),c=n.screenX,h=n.screenY,d=window.getComputedStyle?window.getComputedStyle(p,null).getPropertyValue("cursor"):p.runtimeStyle.cursor,s=o.createElement("div"),e.css(s,{position:"absolute",top:0,left:0,width:a.width,height:a.height,zIndex:2147483647,opacity:1e-4,cursor:d}),o.body.appendChild(s),e.on(o,"mousemove",l),e.on(o,"mouseup",f),r.start(n)},l=function(e){return e.button!==u?f(e):(e.deltaX=e.screenX-c,e.deltaY=e.screenY-h,e.preventDefault(),void r.drag(e))},f=function(t){e.off(o,"mousemove",l),e.off(o,"mouseup",f),s.parentNode.removeChild(s),r.stop&&r.stop(t)},this.destroy=function(){e.off(i())},e.on(i(),"mousedown",a)}}),r(Z,[$,Y],function(e,t){return{init:function(){var e=this;e.on("repaint",e.renderScroll)},renderScroll:function(){function n(){function t(t,o,u,a,f,l){var c,h,p,d,v,m,g,y,b;if(h=i.getEl("scroll"+t)){if(y=o.toLowerCase(),b=u.toLowerCase(),i.getEl("absend")&&e.css(i.getEl("absend"),y,i.layoutRect()[a]-1),!f)return void e.css(h,"display","none");e.css(h,"display","block"),c=i.getEl("body"),p=i.getEl("scroll"+t+"t"),d=c["client"+u]-2*s,d-=n&&r?h["client"+l]:0,v=c["scroll"+u],m=d/v,g={},g[y]=c["offset"+o]+s,g[b]=d,e.css(h,g),g={},g[y]=c["scroll"+o]*m,g[b]=d*m,e.css(p,g)}}var n,r,o;o=i.getEl("body"),n=o.scrollWidth>o.clientWidth,r=o.scrollHeight>o.clientHeight,t("h","Left","Width","contentW",n,"Height"),t("v","Top","Height","contentH",r,"Width")}function r(){function n(n,r,o,u,a){var f,l=i._id+"-scroll"+n,c=i.classPrefix;i.getEl().appendChild(e.createFragment('<div id="'+l+'" class="'+c+"scrollbar "+c+"scrollbar-"+n+'"><div id="'+l+'t" class="'+c+'scrollbar-thumb"></div></div>')),i.draghelper=new t(l+"t",{start:function(){f=i.getEl("body")["scroll"+r],e.addClass(e.get(l),c+"active")},drag:function(e){var t,l,c,h,p=i.layoutRect();l=p.contentW>p.innerW,c=p.contentH>p.innerH,h=i.getEl("body")["client"+o]-2*s,h-=l&&c?i.getEl("scroll"+n)["client"+a]:0,t=h/i.getEl("body")["scroll"+o],i.getEl("body")["scroll"+r]=f+e["delta"+u]/t},stop:function(){e.removeClass(e.get(l),c+"active")}})}i.addClass("scroll"),n("v","Top","Height","Y","Width"),n("h","Left","Width","X","Height")}var i=this,s=2;i.settings.autoScroll&&(i._hasScroll||(i._hasScroll=!0,r(),i.on("wheel",function(e){var t=i.getEl("body");t.scrollLeft+=10*(e.deltaX||0),t.scrollTop+=10*e.deltaY,n()}),e.on(i.getEl("body"),"scroll",n)),n())}}}),r(et,[G,Z],function(e,t){return e.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[t],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),"undefined"==typeof n?n='<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+t.renderHtml(e)+"</div>":("function"==typeof n&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}})}),r(tt,[$],function(e){function t(t,n,r){var i,s,o,u,a,f,l,c,h,p;return h=e.getViewPort(),s=e.getPos(n),o=s.x,u=s.y,t._fixed&&(o-=h.x,u-=h.y),i=t.getEl(),p=e.getSize(i),a=p.width,f=p.height,p=e.getSize(n),l=p.width,c=p.height,r=(r||"").split(""),"b"===r[0]&&(u+=c),"r"===r[1]&&(o+=l),"c"===r[0]&&(u+=Math.round(c/2)),"c"===r[1]&&(o+=Math.round(l/2)),"b"===r[3]&&(u-=f),"r"===r[4]&&(o-=a),"c"===r[3]&&(u-=Math.round(f/2)),"c"===r[4]&&(o-=Math.round(a/2)),{x:o,y:u,w:a,h:f}}return{testMoveRel:function(n,r){for(var i=e.getViewPort(),s=0;s<r.length;s++){var o=t(this,n,r[s]);if(this._fixed){if(o.x>0&&o.x+o.w<i.w&&o.y>0&&o.y+o.h<i.h)return r[s]}else if(o.x>i.x&&o.x+o.w<i.w+i.x&&o.y>i.y&&o.y+o.h<i.h+i.y)return r[s]}return r[0]},moveRel:function(e,n){"string"!=typeof n&&(n=this.testMoveRel(e,n));var r=t(this,e,n);return this.moveTo(r.x,r.y)},moveBy:function(e,t){var n=this,r=n.layoutRect();return n.moveTo(r.x+e,r.y+t),n},moveTo:function(t,n){function r(e,t,n){return 0>e?0:e+n>t?(e=t-n,0>e?0:e):e}var i=this;if(i.settings.constrainToViewport){var s=e.getViewPort(window),o=i.layoutRect();t=r(t,s.w+s.x,o.w),n=r(n,s.h+s.y,o.h)}return i._rendered?i.layoutRect({x:t,y:n}).repaint():(i.settings.x=t,i.settings.y=n),i.fire("move",{x:t,y:n}),i}}}),r(nt,[$],function(e){return{resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(t,n){if(1>=t||1>=n){var r=e.getWindowSize();t=1>=t?t*r.w:t,n=1>=n?n*r.h:n}return this._layoutRect.autoResize=!1,this.layoutRect({minW:t,minH:n,w:t,h:n}).reflow()},resizeBy:function(e,t){var n=this,r=n.layoutRect();return n.resizeTo(r.w+e,r.h+t)}}}),r(rt,[et,tt,nt,$],function(e,t,n,r){function i(){function e(e,t){for(;e;){if(e==t)return!0;e=e.parent()}}f||(f=function(t){if(2!=t.button)for(var n=h.length;n--;){var r=h[n],i=r.getParentCtrl(t.target);if(r.settings.autohide){if(i&&(e(i,r)||r.parent()===i))continue;t=r.fire("autohide",{target:t.target}),t.isDefaultPrevented()||r.hide()}}},r.on(document,"click",f))}function s(){l||(l=function(){var e;for(e=h.length;e--;)u(h[e])},r.on(window,"scroll",l))}function o(){c||(c=function(){v.hideAll()},r.on(window,"resize",c))}function u(e){function t(t,n){for(var r,i=0;i<h.length;i++)if(h[i]!=e)for(r=h[i].parent();r&&(r=r.parent());)r==e&&h[i].fixed(t).moveBy(0,n).repaint()}var n=r.getViewPort().y;e.settings.autofix&&(e._fixed?e._autoFixY>n&&(e.fixed(!1).layoutRect({y:e._autoFixY}).repaint(),t(!1,e._autoFixY-n)):(e._autoFixY=e.layoutRect().y,e._autoFixY<n&&(e.fixed(!0).layoutRect({y:0}).repaint(),t(!0,n-e._autoFixY))))}function a(e){var t;for(t=h.length;t--;)h[t]===e&&h.splice(t,1);for(t=p.length;t--;)p[t]===e&&p.splice(t,1)}var f,l,c,h=[],p=[],d,v=e.extend({Mixins:[t,n],init:function(e){function t(){var e,t=v.zIndex||65535,i;if(p.length)for(e=0;e<p.length;e++)p[e].modal&&(t++,i=p[e]),p[e].getEl().style.zIndex=t,p[e].zIndex=t,t++;var s=document.getElementById(n.classPrefix+"modal-block");i?r.css(s,"z-index",i.zIndex-1):s&&(s.parentNode.removeChild(s),d=!1),v.currentZIndex=t}var n=this;n._super(e),n._eventsRoot=n,n.addClass("floatpanel"),e.autohide&&(i(),o(),h.push(n)),e.autofix&&(s(),n.on("move",function(){u(this)})),n.on("postrender show",function(e){if(e.control==n){var i,s=n.classPrefix;n.modal&&!d&&(i=r.createFragment('<div id="'+s+'modal-block" class="'+s+"reset "+s+'fade"></div>'),i=i.firstChild,n.getContainerElm().appendChild(i),setTimeout(function(){r.addClass(i,s+"in"),r.addClass(n.getEl(),s+"in")},0),d=!0),p.push(n),t()}}),n.on("close hide",function(e){if(e.control==n){for(var r=p.length;r--;)p[r]===n&&p.splice(r,1);t()}}),n.on("show",function(){n.parents().each(function(e){return e._fixed?(n.fixed(!0),!1):void 0})}),e.popover&&(n._preBodyHtml='<div class="'+n.classPrefix+'arrow"></div>',n.addClass("popover").addClass("bottom").addClass(n.isRtl()?"end":"start"))},fixed:function(e){var t=this;if(t._fixed!=e){if(t._rendered){var n=r.getViewPort();e?t.layoutRect().y-=n.y:t.layoutRect().y+=n.y}t.toggleClass("fixed",e),t._fixed=e}return t},show:function(){var e=this,t,n=e._super();for(t=h.length;t--&&h[t]!==e;);return-1===t&&h.push(e),n},hide:function(){return a(this),this._super()},hideAll:function(){v.hideAll()},close:function(){var e=this;return e.fire("close"),e.remove()},remove:function(){a(this),this._super()},postRender:function(){var e=this;return e.settings.bodyRole&&this.getEl("body").setAttribute("role",e.settings.bodyRole),e._super()}});return v.hideAll=function(){for(var e=h.length;e--;){var t=h[e];t&&t.settings.autohide&&(t.hide(),h.splice(e,1))}},v}),r(it,[rt,et,$,Y],function(e,t,n,r){var i=e.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var n=this;n._super(e),n.isRtl()&&n.addClass("rtl"),n.addClass("window"),n._fixed=!0,e.buttons&&(n.statusbar=new t({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:n.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),n.statusbar.addClass("foot"),n.statusbar.parent(n)),n.on("click",function(e){-1!=e.target.className.indexOf(n.classPrefix+"close")&&n.close()}),n.on("cancel",function(){n.close()}),n.aria("describedby",n.describedBy||n._id+"-none"),n.aria("label",e.title),n._fullscreen=!1},recalc:function(){var e=this,t=e.statusbar,r,i,s,o;e._fullscreen&&(e.layoutRect(n.getWindowSize()),e.layoutRect().contentH=e.layoutRect().innerH),e._super(),r=e.layoutRect(),e.settings.title&&!e._fullscreen&&(i=r.headerW,i>r.w&&(s=r.x-Math.max(0,i/2),e.layoutRect({w:i,x:s}),o=!0)),t&&(t.layoutRect({w:e.layoutRect().innerW}).recalc(),i=t.layoutRect().minW+r.deltaW,i>r.w&&(s=r.x-Math.max(0,i-r.w),e.layoutRect({w:i,x:s}),o=!0)),o&&e.recalc()},initLayoutRect:function(){var e=this,t=e._super(),r=0,i;if(e.settings.title&&!e._fullscreen){i=e.getEl("head");var s=n.getSize(i);t.headerW=s.width,t.headerH=s.height,r+=t.headerH}e.statusbar&&(r+=e.statusbar.layoutRect().h),t.deltaH+=r,t.minH+=r,t.h+=r;var o=n.getWindowSize();return t.x=Math.max(0,o.w/2-t.w/2),t.y=Math.max(0,o.h/2-t.h/2),t},renderHtml:function(){var e=this,t=e._layout,n=e._id,r=e.classPrefix,i=e.settings,s="",o="",u=i.html;return e.preRender(),t.preRender(e),i.title&&(s='<div id="'+n+'-head" class="'+r+'window-head"><div id="'+n+'-title" class="'+r+'title">'+e.encode(i.title)+'</div><button type="button" class="'+r+'close" aria-hidden="true">×</button><div id="'+n+'-dragh" class="'+r+'dragh"></div></div>'),i.url&&(u='<iframe src="'+i.url+'" tabindex="-1"></iframe>'),"undefined"==typeof u&&(u=t.renderHtml(e)),e.statusbar&&(o=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes()+'" hidefocus="1"><div class="'+e.classPrefix+'reset" role="application">'+s+'<div id="'+n+'-body" class="'+e.classes("body")+'">'+u+"</div>"+o+"</div></div>"},fullscreen:function(e){var t=this,r=document.documentElement,i,s=t.classPrefix,o;if(e!=t._fullscreen)if(n.on(window,"resize",function(){var e;if(t._fullscreen)if(i)t._timer||(t._timer=setTimeout(function(){var e=n.getWindowSize();t.moveTo(0,0).resizeTo(e.w,e.h),t._timer=0},50));else{e=(new Date).getTime();var r=n.getWindowSize();t.moveTo(0,0).resizeTo(r.w,r.h),(new Date).getTime()-e>50&&(i=!0)}}),o=t.layoutRect(),t._fullscreen=e,e){t._initial={x:o.x,y:o.y,w:o.w,h:o.h},t._borderBox=t.parseBox("0"),t.getEl("head").style.display="none",o.deltaH-=o.headerH+2,n.addClass(r,s+"fullscreen"),n.addClass(document.body,s+"fullscreen"),t.addClass("fullscreen");var u=n.getWindowSize();t.moveTo(0,0).resizeTo(u.w,u.h)}else t._borderBox=t.parseBox(t.settings.border),t.getEl("head").style.display="",o.deltaH+=o.headerH,n.removeClass(r,s+"fullscreen"),n.removeClass(document.body,s+"fullscreen"),t.removeClass("fullscreen"),t.moveTo(t._initial.x,t._initial.y).resizeTo(t._initial.w,t._initial.h);return t.reflow()},postRender:function(){var e=this,t;setTimeout(function(){e.addClass("in")},0),e._super(),e.statusbar&&e.statusbar.postRender(),e.focus(),this.dragHelper=new r(e._id+"-dragh",{start:function(){t={x:e.layoutRect().x,y:e.layoutRect().y}},drag:function(n){e.moveTo(t.x+n.deltaX,t.y+n.deltaY)}}),e.on("submit",function(t){t.isDefaultPrevented()||e.close()})},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e=this,t=e.classPrefix;e.dragHelper.destroy(),e._super(),e.statusbar&&this.statusbar.remove(),e._fullscreen&&(n.removeClass(document.documentElement,t+"fullscreen"),n.removeClass(document.body,t+"fullscreen"))},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});return i}),r(st,[it],function(e){var t=e.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(n){var r,i=n.callback||function(){};switch(n.buttons){case t.OK_CANCEL:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close(),i(!0)}},{type:"button",text:"Cancel",onClick:function(e){e.control.parents()[1].close(),i(!1)}}];break;case t.YES_NO:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close(),i(!0)}}];break;case t.YES_NO_CANCEL:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close()}}];break;default:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close(),i(!0)}}]}return(new e({padding:20,x:n.x,y:n.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:r,title:n.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:n.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:n.onClose,onCancel:function(){i(!1)}})).renderTo(document.body).reflow()},alert:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,t.msgBox(e)},confirm:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,e.buttons=t.OK_CANCEL,t.msgBox(e)}}});return t}),r(ot,[it,st],function(e,t){return function(n){function r(){return s.length?s[s.length-1]:void 0}var i=this,s=[];i.windows=s,i.open=function(t,r){var i;return n.editorManager.activeEditor=n,t.title=t.title||" ",t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){i.find("form")[0].submit()}},{text:"Cancel",onclick:function(){i.close()}}]),i=new e(t),s.push(i),i.on("close",function(){for(var e=s.length;e--;)s[e]===i&&s.splice(e,1);n.focus()}),t.data&&i.on("postRender",function(){this.find("*").each(function(e){var n=e.name();n in t.data&&e.value(t.data[n])})}),i.features=t||{},i.params=r||{},n.nodeChanged(),i.renderTo().reflow()},i.alert=function(e,r,i){t.alert(e,function(){r?r.call(i||this):n.focus()})},i.confirm=function(e,n,r){t.confirm(e,function(e){n.call(r||this,e)})},i.close=function(){r()&&r().close()},i.getParams=function(){return r()?r().params:null},i.setParams=function(e){r()&&(r().params=e)},i.getWindows=function(){return s}}}),r(ut,[M,E,x,m,c,l],function(e,t,n,r,i,s){return function(o){function u(e,t){try{o.getDoc().execCommand(e,!1,t)}catch(n){}}function a(){var e=o.getDoc().documentMode;return e?e:6}function f(e){return e.isDefaultPrevented()}function l(){function t(e){var t=new i(function(){});s.each(o.getBody().getElementsByTagName("*"),function(e){"SPAN"==e.tagName&&e.setAttribute("mce-data-marked",1),!e.hasAttribute("data-mce-style")&&e.hasAttribute("style")&&o.dom.setAttrib(e,"style",e.getAttribute("style"))}),t.observe(o.getDoc(),{childList:!0,attributes:!0,subtree:!0,attributeFilter:["style"]}),o.getDoc().execCommand(e?"ForwardDelete":"Delete",!1,null);var n=o.selection.getRng(),r=n.startContainer.parentNode;s.each(t.takeRecords(),function(e){if(X.isChildOf(e.target,o.getBody())){if("style"==e.attributeName){var t=e.target.getAttribute("data-mce-style");t?e.target.setAttribute("style",t):e.target.removeAttribute("style")}s.each(e.addedNodes,function(e){if("SPAN"==e.nodeName&&!e.getAttribute("mce-data-marked")){var t,i;e==r&&(t=n.startOffset,i=e.firstChild),X.remove(e,!0),i&&(n.setStart(i,t),n.setEnd(i,t),o.selection.setRng(n))}})}}),t.disconnect(),s.each(o.dom.select("span[mce-data-marked]"),function(e){e.removeAttribute("mce-data-marked")})}var n=o.getDoc(),r="data:text/mce-internal,",i=window.MutationObserver,u,a;i||(u=!0,i=function(){function e(e){var t=e.relatedNode||e.target;n.push({target:t,addedNodes:[t]})}function t(e){var t=e.relatedNode||e.target;n.push({target:t,attributeName:e.attrName})}var n=[],r;this.observe=function(n){r=n,r.addEventListener("DOMSubtreeModified",e,!1),r.addEventListener("DOMNodeInsertedIntoDocument",e,!1),r.addEventListener("DOMNodeInserted",e,!1),r.addEventListener("DOMAttrModified",t,!1)},this.disconnect=function(){r.removeEventListener("DOMSubtreeModified",e,!1),r.removeEventListener("DOMNodeInsertedIntoDocument",e,!1),r.removeEventListener("DOMNodeInserted",e,!1),r.removeEventListener("DOMAttrModified",t,!1)},this.takeRecords=function(){return n}}),o.on("keydown",function(n){var r=n.keyCode==W,i=e.metaKeyPressed(n);if(!f(n)&&(r||n.keyCode==z)){var s=o.selection.getRng(),u=s.startContainer,a=s.startOffset;if(!i&&s.collapsed&&3==u.nodeType&&(r?a<u.data.length:a>0))return;n.preventDefault(),i&&o.selection.getSel().modify("extend",r?"forward":"backward","word"),t(r)}}),o.on("keypress",function(n){f(n)||V.isCollapsed()||!n.charCode||e.metaKeyPressed(n)||(n.preventDefault(),t(!0),o.selection.setContent(String.fromCharCode(n.charCode)))}),o.addCommand("Delete",function(){t()}),o.addCommand("ForwardDelete",function(){t(!0)}),u||(o.on("dragstart",function(e){var t;o.selection.isCollapsed()&&"IMG"==e.target.tagName&&V.select(e.target),a=V.getRng(),t=o.selection.getContent(),t.length>0&&e.dataTransfer.setData("URL","data:text/mce-internal,"+escape(t))}),o.on("drop",function(e){if(!f(e)){var i=e.dataTransfer.getData("URL");if(!i||-1==i.indexOf(r)||!n.caretRangeFromPoint)return;i=unescape(i.substr(r.length)),n.caretRangeFromPoint&&(e.preventDefault(),window.setTimeout(function(){var r=n.caretRangeFromPoint(e.x,e.y);a&&(V.setRng(a),a=null),t(),V.setRng(r),o.insertContent(i)},0))}}),o.on("cut",function(e){!f(e)&&e.clipboardData&&(e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/html",o.selection.getContent()),e.clipboardData.setData("text/plain",o.selection.getContent({format:"text"})),t(!0))}))}function c(){function e(e){var t=X.create("body"),n=e.cloneContents();return t.appendChild(n),V.serializer.serialize(t,{format:"html"})}function n(n){if(!n.setStart){if(n.item)return!1;var r=n.duplicate();return r.moveToElementText(o.getBody()),t.compareRanges(n,r)}var i=e(n),s=X.createRng();s.selectNode(o.getBody());var u=e(s);return i===u}o.on("keydown",function(e){var t=e.keyCode,r,i;if(!f(e)&&(t==W||t==z)){if(r=o.selection.isCollapsed(),i=o.getBody(),r&&!X.isEmpty(i))return;if(!r&&!n(o.selection.getRng()))return;e.preventDefault(),o.setContent(""),i.firstChild&&X.isBlock(i.firstChild)?o.selection.setCursorLocation(i.firstChild,0):o.selection.setCursorLocation(i,0),o.nodeChanged()}})}function h(){o.on("keydown",function(t){!f(t)&&65==t.keyCode&&e.metaKeyPressed(t)&&(t.preventDefault(),o.execCommand("SelectAll"))})}function p(){o.settings.content_editable||(X.bind(o.getDoc(),"focusin",function(){V.setRng(V.getRng())}),X.bind(o.getDoc(),"mousedown",function(e){e.target==o.getDoc().documentElement&&(o.getBody().focus(),V.setRng(V.getRng()))}))}function d(){o.on("keydown",function(e){if(!f(e)&&e.keyCode===z){if(!o.getBody().getElementsByTagName("hr").length)return;if(V.isCollapsed()&&0===V.getRng(!0).startOffset){var t=V.getNode(),n=t.previousSibling;if("HR"==t.nodeName)return X.remove(t),void e.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(X.remove(n),e.preventDefault())}}})}function v(){window.Range.prototype.getClientRects||o.on("mousedown",function(e){if(!f(e)&&"HTML"===e.target.nodeName){var t=o.getBody();t.blur(),setTimeout(function(){t.focus()},0)}})}function m(){o.on("click",function(e){e=e.target,/^(IMG|HR)$/.test(e.nodeName)&&V.getSel().setBaseAndExtent(e,0,e,1),"A"==e.nodeName&&X.hasClass(e,"mce-item-anchor")&&V.select(e)})}function g(){function e(){var e=X.getAttribs(V.getStart().cloneNode(!1));return function(){var t=V.getStart();t!==o.getBody()&&(X.setAttrib(t,"style",null),U(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}}function t(){return!V.isCollapsed()&&X.getParent(V.getStart(),X.isBlock)!=X.getParent(V.getEnd(),X.isBlock)}o.on("keypress",function(n){var r;return f(n)||8!=n.keyCode&&46!=n.keyCode||!t()?void 0:(r=e(),o.getDoc().execCommand("delete",!1,null),r(),n.preventDefault(),!1)}),X.bind(o.getDoc(),"cut",function(n){var r;!f(n)&&t()&&(r=e(),setTimeout(function(){r()},0))})}function y(){var e,n;o.on("selectionchange",function(){n&&(clearTimeout(n),n=0),n=window.setTimeout(function(){if(!o.removed){var n=V.getRng();e&&t.compareRanges(n,e)||(o.nodeChanged(),e=n)}},50)})}function b(){document.body.setAttribute("role","application")}function w(){o.on("keydown",function(e){if(!f(e)&&e.keyCode===z&&V.isCollapsed()&&0===V.getRng(!0).startOffset){var t=V.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})}function E(){a()>7||(u("RespectVisibilityInDesign",!0),o.contentStyles.push(".mceHideBrInPre pre br {display: none}"),X.addClass(o.getBody(),"mceHideBrInPre"),J.addNodeFilter("pre",function(e){for(var t=e.length,r,i,s,o;t--;)for(r=e[t].getAll("br"),i=r.length;i--;)s=r[i],o=s.prev,o&&3===o.type&&"\n"!=o.value.charAt(o.value-1)?o.value+="\n":s.parent.insert(new n("#text",3),s,!0).value="\n"}),K.addNodeFilter("pre",function(e){for(var t=e.length,n,r,i,s;t--;)for(n=e[t].getAll("br"),r=n.length;r--;)i=n[r],s=i.prev,s&&3==s.type&&(s.value=s.value.replace(/\r?\n$/,""))}))}function S(){X.bind(o.getBody(),"mouseup",function(){var e,t=V.getNode();"IMG"==t.nodeName&&((e=X.getStyle(t,"width"))&&(X.setAttrib(t,"width",e.replace(/[^0-9%]+/g,"")),X.setStyle(t,"width","")),(e=X.getStyle(t,"height"))&&(X.setAttrib(t,"height",e.replace(/[^0-9%]+/g,"")),X.setStyle(t,"height","")))})}function x(){o.on("keydown",function(t){var n,r,i,s,u;if(!f(t)&&t.keyCode==e.BACKSPACE&&(n=V.getRng(),r=n.startContainer,i=n.startOffset,s=X.getRoot(),u=r,n.collapsed&&0===i)){for(;u&&u.parentNode&&u.parentNode.firstChild==u&&u.parentNode!=s;)u=u.parentNode;"BLOCKQUOTE"===u.tagName&&(o.formatter.toggle("blockquote",null,u),n=X.createRng(),n.setStart(r,0),n.setEnd(r,0),V.setRng(n))}})}function T(){function e(){o._refreshContentEditable(),u("StyleWithCSS",!1),u("enableInlineTableEditing",!1),$.object_resizing||u("enableObjectResizing",!1)}$.readonly||o.on("BeforeExecCommand MouseDown",e)}function N(){function e(){U(X.select("a"),function(e){var t=e.parentNode,n=X.getRoot();if(t.lastChild===e){for(;t&&!X.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}X.add(t,"br",{"data-mce-bogus":1})}})}o.on("SetContent ExecCommand",function(t){("setcontent"==t.type||"mceInsertLink"===t.command)&&e()})}function C(){$.forced_root_block&&o.on("init",function(){u("DefaultParagraphSeparator",$.forced_root_block)})}function k(){o.on("Undo Redo SetContent",function(e){e.initial||o.execCommand("mceRepaint")})}function L(){o.on("keydown",function(e){var t;f(e)||e.keyCode!=z||(t=o.getDoc().selection.createRange(),t&&t.item&&(e.preventDefault(),o.undoManager.beforeChange(),X.remove(t.item(0)),o.undoManager.add()))})}function A(){var e;a()>=10&&(e="",U("p div h1 h2 h3 h4 h5 h6".split(" "),function(t,n){e+=(n>0?",":"")+t+":empty"}),o.contentStyles.push(e+"{padding-right: 1px !important}"))}function O(){a()<9&&(J.addNodeFilter("noscript",function(e){for(var t=e.length,n,r;t--;)n=e[t],r=n.firstChild,r&&n.attr("data-mce-innertext",r.value)}),K.addNodeFilter("noscript",function(e){for(var t=e.length,i,s,o;t--;)i=e[t],s=e[t].firstChild,s?s.value=r.decode(s.value):(o=i.attributes.map["data-mce-innertext"],o&&(i.attr("data-mce-innertext",null),s=new n("#text",3),s.value=o,s.raw=!0,i.append(s)))}))}function M(){function e(e,t){var n=i.createTextRange();try{n.moveToPoint(e,t)}catch(r){n=null}return n}function t(t){var r;t.button?(r=e(t.x,t.y),r&&(r.compareEndPoints("StartToStart",o)>0?r.setEndPoint("StartToStart",o):r.setEndPoint("EndToEnd",o),r.select())):n()}function n(){var e=r.selection.createRange();o&&!e.item&&0===e.compareEndPoints("StartToEnd",e)&&o.select(),X.unbind(r,"mouseup",n),X.unbind(r,"mousemove",t),o=s=0}var r=X.doc,i=r.body,s,o,u;r.documentElement.unselectable=!0,X.bind(r,"mousedown contextmenu",function(i){if("HTML"===i.target.nodeName){if(s&&n(),u=r.documentElement,u.scrollHeight>u.clientHeight)return;s=1,o=e(i.x,i.y),o&&(X.bind(r,"mouseup",n),X.bind(r,"mousemove",t),X.getRoot().focus(),o.select())}})}function _(){o.on("keyup focusin mouseup",function(t){65==t.keyCode&&e.metaKeyPressed(t)||V.normalize()},!0)}function D(){o.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")}function P(){o.inline||o.on("keydown",function(){document.activeElement==document.body&&o.getWin().focus()})}function H(){o.inline||(o.contentStyles.push("body {min-height: 150px}"),o.on("click",function(e){"HTML"==e.target.nodeName&&(o.getBody().focus(),o.selection.normalize(),o.nodeChanged())}))}function B(){i.mac&&o.on("keydown",function(t){!e.metaKeyPressed(t)||37!=t.keyCode&&39!=t.keyCode||(t.preventDefault(),o.selection.getSel().modify("move",37==t.keyCode?"backward":"forward","word"))})}function j(){u("AutoUrlDetect",!1)}function F(){o.inline||o.on("focus blur beforegetcontent",function(){var e=o.dom.create("br");o.getBody().appendChild(e),e.parentNode.removeChild(e)},!0)}function I(){o.on("click",function(e){var t=e.target;do if("A"===t.tagName)return void e.preventDefault();while(t=t.parentNode)}),o.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")}function q(){o.on("init",function(){o.dom.bind(o.getBody(),"submit",function(e){e.preventDefault()})})}function R(){J.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"==e[t].attr("class")&&e[t].remove()})}var U=s.each,z=e.BACKSPACE,W=e.DELETE,X=o.dom,V=o.selection,$=o.settings,J=o.parser,K=o.serializer,Q=i.gecko,G=i.ie,Y=i.webkit;x(),c(),_(),Y&&(l(),p(),m(),C(),q(),w(),R(),i.iOS?(y(),P(),H(),I()):h()),G&&i.ie<11&&(d(),b(),E(),S(),L(),A(),O(),M()),i.ie>=11&&(H(),F(),w()),i.ie&&(h(),j()),Q&&(d(),v(),g(),T(),N(),k(),D(),B(),w())}}),r(at,[W],function(e){function t(t){return t._eventDispatcher||(t._eventDispatcher=new e({scope:t,toggleEvent:function(n,r){e.isNative(n)&&t.toggleNativeEvent&&t.toggleNativeEvent(n,r)}})),t._eventDispatcher}return{fire:function(e,n,r){var i=this;if(i.removed&&"remove"!==e)return n;if(n=t(i).fire(e,n,r),r!==!1&&i.parent)for(var s=i.parent();s&&!n.isPropagationStopped();)s.fire(e,n,!1),s=s.parent();return n},on:function(e,n,r){return t(this).on(e,n,r)},off:function(e,n){return t(this).off(e,n)},once:function(e,n){return t(this).once(e,n)},hasEventListeners:function(e){return t(this).has(e)}}}),r(ft,[at,y,l],function(e,t,n){function r(e,t){return"selectionchange"==t?e.getDoc():!e.inline&&/^mouse|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc():e.getBody()}function i(e,t){var n=e.settings.event_root,i=e.editorManager,o=i.eventRootElm||r(e,t);if(n){if(i.rootEvents||(i.rootEvents={},i.on("RemoveEditor",function(){i.activeEditor||(s.unbind(o),delete i.rootEvents)})),i.rootEvents[t])return;o==e.getBody()&&(o=s.select(n)[0],i.eventRootElm=o),i.rootEvents[t]=!0,s.bind(o,t,function(e){for(var n=e.target,r=i.editors,o=r.length;o--;){var u=r[o].getBody();(u===n||s.isChildOf(n,u))&&(r[o].hidden||r[o].fire(t,e))}})}else e.dom.bind(o,t,function(n){e.hidden||e.fire(t,n)})}var s=t.DOM,o={bindPendingEventDelegates:function(){var e=this;n.each(e._pendingNativeEvents,function(t){i(e,t)})},toggleNativeEvent:function(e,t){var n=this;n.settings.readonly||"focus"!=e&&"blur"!=e&&(t?n.initialized?i(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.dom.unbind(r(n,e),e))}};return o=n.extend({},e,o)}),r(lt,[l,c],function(e,t){var n=e.each,r=e.explode,i={f9:120,f10:121,f11:122};return function(s){var o=this,u={};s.on("keyup keypress keydown",function(e){(e.altKey||e.ctrlKey||e.metaKey)&&n(u,function(n){var r=t.mac?e.metaKey:e.ctrlKey;if(n.ctrl==r&&n.alt==e.altKey&&n.shift==e.shiftKey)return e.keyCode==n.keyCode||e.charCode&&e.charCode==n.charCode?(e.preventDefault(),"keydown"==e.type&&n.func.call(n.scope),!0):void 0})}),o.add=function(t,o,a,f){var l;return l=a,"string"==typeof a?a=function(){s.execCommand(l,!1,null)}:e.isArray(l)&&(a=function(){s.execCommand(l[0],l[1],l[2])}),n(r(t.toLowerCase()),function(e){var t={func:a,scope:f||s,desc:s.translate(o),alt:!1,ctrl:!1,shift:!1};n(r(e,"+"),function(e){switch(e){case"alt":case"ctrl":case"shift":t[e]=!0;break;default:/^[0-9]{2,}$/.test(e)?t.keyCode=parseInt(e,10):(t.charCode=e.charCodeAt(0),t.keyCode=i[e]||e.toUpperCase().charCodeAt(0))}}),u[(t.ctrl?"ctrl":"")+","+(t.alt?"alt":"")+","+(t.shift?"shift":"")+","+t.keyCode]=t}),!0}}}),r(ct,[y,h,w,S,x,A,L,P,j,F,I,q,R,U,b,f,ot,T,C,ut,c,l,ft,lt],function(e,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T){function N(e,t,i){var s=this,o,u;o=s.documentBaseUrl=i.documentBaseURL,u=i.baseURI,s.settings=t=A({id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:o,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:!0,entity_encoding:"named",url_converter:s.convertURL,url_converter_scope:s,ie7_compat:!0},t),r.language=t.language||"en",r.languageLoad=t.language_load,r.baseURL=i.baseURL,s.id=t.id=e,s.isNotDirty=!0,s.plugins={},s.documentBaseURI=new d(t.document_base_url||o,{base_uri:u}),s.baseURI=u,s.contentCSS=[],s.contentStyles=[],s.shortcuts=new T(s),s.execCommands={},s.queryStateCommands={},s.queryValueCommands={},s.loadedCSS={},s.suffix=i.suffix,s.editorManager=i,s.inline=t.inline,i.fire("SetupEditor",s),s.execCallback("setup",s),s.$=n.overrideDefaults(function(){return{context:s.inline?s.getBody():s.getDoc(),element:s.getBody()}})}var C=e.DOM,k=r.ThemeManager,L=r.PluginManager,A=S.extend,O=S.each,M=S.explode,_=S.inArray,D=S.trim,P=S.resolve,H=m.Event,B=E.gecko,j=E.ie;return N.prototype={render:function(){function e(){C.unbind(window,"ready",e),n.render()}function t(){var e=v.ScriptLoader;if(r.language&&"en"!=r.language&&!r.language_url&&(r.language_url=n.editorManager.baseURL+"/langs/"+r.language+".js"),r.language_url&&e.add(r.language_url),r.theme&&"function"!=typeof r.theme&&"-"!=r.theme.charAt(0)&&!k.urls[r.theme]){var t=r.theme_url;t=t?n.documentBaseURI.toAbsolute(t):"themes/"+r.theme+"/theme"+s+".js",k.load(r.theme,t)}S.isArray(r.plugins)&&(r.plugins=r.plugins.join(" ")),O(r.external_plugins,function(e,t){L.load(t,e),r.plugins+=" "+t}),O(r.plugins.split(/[ ,]/),function(e){if(e=D(e),e&&!L.urls[e])if("-"==e.charAt(0)){e=e.substr(1,e.length);var t=L.dependencies(e);O(t,function(e){var t={prefix:"plugins/",resource:e,suffix:"/plugin"+s+".js"};e=L.createUrl(t,e),L.load(e.resource,e)})}else L.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+s+".js"})}),e.loadQueue(function(){n.removed||n.init()})}var n=this,r=n.settings,i=n.id,s=n.suffix;if(!H.domLoaded)return void C.bind(window,"ready",e);if(n.getElement()&&E.contentEditable){r.inline?n.inline=!0:(n.orgVisibility=n.getElement().style.visibility,n.getElement().style.visibility="hidden");var o=n.getElement().form||C.getParent(i,"form");o&&(n.formElement=o,r.hidden_input&&!/TEXTAREA|INPUT/i.test(n.getElement().nodeName)&&(C.insertAfter(C.create("input",{type:"hidden",name:i}),i),n.hasHiddenInput=!0),n.formEventDelegate=function(e){n.fire(e.type,e)},C.bind(o,"submit reset",n.formEventDelegate),n.on("reset",function(){n.setContent(n.startContent,{format:"raw"})}),!r.submit_patch||o.submit.nodeType||o.submit.length||o._mceOldSubmit||(o._mceOldSubmit=o.submit,o.submit=function(){return n.editorManager.triggerSave(),n.isNotDirty=!0,o._mceOldSubmit(o)})),n.windowManager=new g(n),"xml"==r.encoding&&n.on("GetContent",function(e){e.save&&(e.content=C.encode(e.content))}),r.add_form_submit_trigger&&n.on("submit",function(){n.initialized&&n.save()}),r.add_unload_trigger&&(n._beforeUnload=function(){!n.initialized||n.destroyed||n.isHidden()||n.save({format:"raw",no_events:!0,set_dirty:!1})},n.editorManager.on("BeforeUnload",n._beforeUnload)),t()}},init:function(){function e(n){var r=L.get(n),i,s;i=L.urls[n]||t.documentBaseUrl.replace(/\/$/,""),n=D(n),r&&-1===_(v,n)&&(O(L.dependencies(n),function(t){e(t)}),s=new r(t,i,t.$),t.plugins[n]=s,s.init&&(s.init(t,i),v.push(n)))}var t=this,n=t.settings,r=t.getElement(),i,s,o,u,a,f,l,c,h,p,d,v=[];if(t.rtl=this.editorManager.i18n.rtl,t.editorManager.add(t),n.aria_label=n.aria_label||C.getAttrib(r,"aria-label",t.getLang("aria.rich_text_area")),n.theme&&("function"!=typeof n.theme?(n.theme=n.theme.replace(/-/,""),f=k.get(n.theme),t.theme=new f(t,k.urls[n.theme]),t.theme.init&&t.theme.init(t,k.urls[n.theme]||t.documentBaseUrl.replace(/\/$/,""),t.$)):t.theme=n.theme),O(n.plugins.replace(/\-/g,"").split(/[ ,]/),e),n.render_ui&&t.theme&&(t.orgDisplay=r.style.display,"function"!=typeof n.theme?(i=n.width||r.style.width||r.offsetWidth,s=n.height||r.style.height||r.offsetHeight,o=n.min_height||100,p=/^[0-9\.]+(|px)$/i,p.test(""+i)&&(i=Math.max(parseInt(i,10),100)),p.test(""+s)&&(s=Math.max(parseInt(s,10),o)),a=t.theme.renderUI({targetNode:r,width:i,height:s,deltaWidth:n.delta_width,deltaHeight:n.delta_height}),n.content_editable||(s=(a.iframeHeight||s)+("number"==typeof s?a.deltaHeight||0:""),o>s&&(s=o))):(a=n.theme(t,r),a.editorContainer.nodeType&&(a.editorContainer=a.editorContainer.id=a.editorContainer.id||t.id+"_parent"),a.iframeContainer.nodeType&&(a.iframeContainer=a.iframeContainer.id=a.iframeContainer.id||t.id+"_iframecontainer"),s=a.iframeHeight||r.offsetHeight),t.editorContainer=a.editorContainer),n.content_css&&O(M(n.content_css),function(e){t.contentCSS.push(t.documentBaseURI.toAbsolute(e))}),n.content_style&&t.contentStyles.push(n.content_style),n.content_editable)return r=u=a=null,t.initContentBody();for(t.iframeHTML=n.doctype+"<html><head>",n.document_base_url!=t.documentBaseUrl&&(t.iframeHTML+='<base href="'+t.documentBaseURI.getURI()+'" />'),!E.caretAfter&&n.ie7_compat&&(t.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'),t.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',d=0;d<t.contentCSS.length;d++){var m=t.contentCSS[d];t.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+m+'" />',t.loadedCSS[m]=!0}c=n.body_id||"tinymce",-1!=c.indexOf("=")&&(c=t.getParam("body_id","","hash"),c=c[t.id]||c),h=n.body_class||"",-1!=h.indexOf("=")&&(h=t.getParam("body_class","","hash"),h=h[t.id]||""),t.iframeHTML+='</head><body id="'+c+'" class="mce-content-body '+h+'" onload="window.parent.tinymce.get(\''+t.id+"').fire('load');\"><br></body></html>";var g='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+t.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody(true);})()';if(document.domain!=location.hostname&&(l=g),u=C.add(a.iframeContainer,"iframe",{id:t.id+"_ifr",src:l||'javascript:""',frameBorder:"0",allowTransparency:"true",title:t.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),style:{width:"100%",height:s,display:"block"}}),j)try{t.getDoc()}catch(y){u.src=l=g}t.contentAreaContainer=a.iframeContainer,a.editorContainer&&(C.get(a.editorContainer).style.display=t.orgDisplay),C.get(t.id).style.display="none",C.setAttrib(t.id,"aria-hidden",!0),l||t.initContentBody(),r=u=a=null},initContentBody:function(t){var n=this,r=n.settings,u=C.get(n.id),d=n.getDoc(),v,m;r.inline||(n.getElement().style.visibility=n.orgVisibility),t||r.content_editable||(d.open(),d.write(n.iframeHTML),d.close()),r.content_editable&&(n.on("remove",function(){var e=this.getBody();C.removeClass(e,"mce-content-body"),C.removeClass(e,"mce-edit-focus"),C.setAttrib(e,"contentEditable",null)}),C.addClass(u,"mce-content-body"),n.contentDocument=d=r.content_document||document,n.contentWindow=r.content_window||window,n.bodyElement=u,r.content_document=r.content_window=null,r.root_name=u.nodeName.toLowerCase()),v=n.getBody(),v.disabled=!0,r.readonly||(n.inline&&"static"==C.getStyle(v,"position",!0)&&(v.style.position="relative"),v.contentEditable=n.getParam("content_editable_state",!0)),v.disabled=!1,n.schema=new y(r),n.dom=new e(d,{keep_values:!0,url_converter:n.convertURL,url_converter_scope:n,hex_colors:r.force_hex_style_colors,class_filter:r.class_filter,update_styles:!0,root_element:r.content_editable?n.id:null,collect:r.content_editable,schema:n.schema,onSetAttrib:function(e){n.fire("SetAttrib",e)}}),n.parser=new b(r,n.schema),n.parser.addAttributeFilter("src,href,style,tabindex",function(e,t){for(var r=e.length,i,s=n.dom,o,u;r--;)i=e[r],o=i.attr(t),u="data-mce-"+t,i.attributes.map[u]||("style"===t?(o=s.serializeStyle(s.parseStyle(o),i.name),o.length||(o=null),i.attr(u,o),i.attr(t,o)):"tabindex"===t?(i.attr(u,o),i.attr(t,null)):i.attr(u,n.convertURL(o,t,i.name)))}),n.parser.addNodeFilter("script",function(e){for(var t=e.length,n;t--;)n=e[t],n.attr("type","mce-"+(n.attr("type")||"no/type"))}),n.parser.addNodeFilter("#cdata",function(e){for(var t=e.length,n;t--;)n=e[t],n.type=8,n.name="#comment",n.value="[CDATA["+n.value+"]]"}),n.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var t=e.length,r,i=n.schema.getNonEmptyElements();t--;)r=e[t],r.isEmpty(i)&&(r.append(new s("br",1)).shortEnded=!0)}),n.serializer=new o(r,n),n.selection=new a(n.dom,n.getWin(),n.serializer,n),n.formatter=new f(n),n.undoManager=new l(n),n.forceBlocks=new h(n),n.enterKey=new c(n),n.editorCommands=new p(n),n._nodeChangeDispatcher=new i(n),n.fire("PreInit"),r.browser_spellcheck||r.gecko_spellcheck||(d.body.spellcheck=!1,C.setAttrib(v,"spellcheck","false")),n.fire("PostRender"),n.quirks=new w(n),r.directionality&&(v.dir=r.directionality),r.nowrap&&(v.style.whiteSpace="nowrap"),r.protect&&n.on("BeforeSetContent",function(e){O(r.protect,function(t){e.content=e.content.replace(t,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),n.on("SetContent",function(){n.addVisual(n.getBody())}),r.padd_empty_editor&&n.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),n.load({initial:!0,format:"html"}),n.startContent=n.getContent({format:"raw"}),n.initialized=!0,n.bindPendingEventDelegates(),n.fire("init"),n.focus(!0),n.nodeChanged({initial:!0}),n.execCallback("init_instance_callback",n),n.contentStyles.length>0&&(m="",O(n.contentStyles,function(e){m+=e+"\r\n"}),n.dom.addStyle(m)),O(n.contentCSS,function(e){n.loadedCSS[e]||(n.dom.loadCSS(e),n.loadedCSS[e]=!0)}),r.auto_focus&&setTimeout(function(){var e=n.editorManager.get(r.auto_focus);e.selection.select(e.getBody(),1),e.selection.collapse(1),e.getBody().focus(),e.getWin().focus()},100),u=d=v=null},focus:function(e){var t,n=this,r=n.selection,i=n.settings.content_editable,s,o,u=n.getDoc(),a;if(!e){if(s=r.getRng(),s.item&&(o=s.item(0)),n._refreshContentEditable(),i||(E.opera||n.getBody().focus(),n.getWin().focus()),B||i){if(a=n.getBody(),a.setActive)try{a.setActive()}catch(f){a.focus()}else a.focus();i&&r.normalize()}o&&o.ownerDocument==u&&(s=u.body.createControlRange(),s.addElement(o),s.select())}n.editorManager.activeEditor!=n&&((t=n.editorManager.activeEditor)&&t.fire("deactivate",{relatedTarget:n}),n.fire("activate",{relatedTarget:t})),n.editorManager.activeEditor=n},execCallback:function(e){var t=this,n=t.settings[e],r;if(n)return t.callbackLookup&&(r=t.callbackLookup[e])&&(n=r.func,r=r.scope),"string"==typeof n&&(r=n.replace(/\.\w+$/,""),r=r?P(r):0,n=P(n),t.callbackLookup=t.callbackLookup||{},t.callbackLookup[e]={func:n,scope:r}),n.apply(r||t,Array.prototype.slice.call(arguments,1))},translate:function(e){var t=this.settings.language||"en",n=this.editorManager.i18n;return e?n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,r){return n.data[t+"."+r]||"{#"+r+"}"}):""},getLang:function(e,n){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(n!==t?n:"{#"+e+"}")},getParam:function(e,t,n){var r=e in this.settings?this.settings[e]:t,i;return"hash"===n?(i={},"string"==typeof r?O(r.split(r.indexOf("=")>0?/[;,](?![^=;,]*(?:[;,]|$))/:","),function(e){e=e.split("="),i[D(e[0])]=D(e.length>1?e[1]:e)}):i=r,i):r},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.text||t.icon||(t.icon=e),n.buttons=n.buttons||{},t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems=n.menuItems||{},n.menuItems[e]=t},addCommand:function(e,t,n){this.execCommands[e]={func:t,scope:n||this}},addQueryStateHandler:function(e,t,n){this.queryStateCommands[e]={func:t,scope:n||this}},addQueryValueHandler:function(e,t,n){this.queryValueCommands[e]={func:t,scope:n||this}},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,t,n,r){var i=this,s=0,o;if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(e)||r&&r.skip_focus||i.focus(),r=A({},r),r=i.fire("BeforeExecCommand",{command:e,ui:t,value:n}),r.isDefaultPrevented())return!1;if((o=i.execCommands[e])&&o.func.call(o.scope,t,n)!==!0)return i.fire("ExecCommand",{command:e,ui:t,value:n}),!0;if(O(i.plugins,function(r){return r.execCommand&&r.execCommand(e,t,n)?(i.fire("ExecCommand",{command:e,ui:t,value:n}),s=!0,!1):void 0}),s)return s;if(i.theme&&i.theme.execCommand&&i.theme.execCommand(e,t,n))return i.fire("ExecCommand",{command:e,ui:t,value:n}),!0;if(i.editorCommands.execCommand(e,t,n))return i.fire("ExecCommand",{command:e,ui:t,value:n}),!0;try{s=i.getDoc().execCommand(e,t,n)}catch(u){}return s?(i.fire("ExecCommand",{command:e,ui:t,value:n}),!0):!1},queryCommandState:function(e){var t=this,n,r;if(!t._isHidden()){if((n=t.queryStateCommands[e])&&(r=n.func.call(n.scope),r===!0||r===!1))return r;if(r=t.editorCommands.queryCommandState(e),-1!==r)return r;try{return t.getDoc().queryCommandState(e)}catch(i){}}},queryCommandValue:function(e){var n=this,r,i;if(!n._isHidden()){if((r=n.queryValueCommands[e])&&(i=r.func.call(r.scope),i!==!0))return i;if(i=n.editorCommands.queryCommandValue(e),i!==t)return i;try{return n.getDoc().queryCommandValue(e)}catch(s){}}},show:function(){var e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable=!0:(C.show(e.getContainer()),C.hide(e.id)),e.load(),e.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(j&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e==e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(C.hide(e.getContainer()),C.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var n=this,r=n.getElement(),i;return r?(e=e||{},e.load=!0,i=n.setContent(r.value!==t?r.value:r.innerHTML,e),e.element=r,e.no_events||n.fire("LoadContent",e),e.element=r=null,i):void 0},save:function(e){var t=this,n=t.getElement(),r,i;if(n&&t.initialized)return e=e||{},e.save=!0,e.element=n,r=e.content=t.getContent(e),e.no_events||t.fire("SaveContent",e),r=e.content,/TEXTAREA|INPUT/i.test(n.nodeName)?n.value=r:(t.inline||(n.innerHTML=r),(i=C.getParent(t.id,"form"))&&O(i.elements,function(e){return e.name==t.id?(e.value=r,!1):void 0})),e.element=n=null,e.set_dirty!==!1&&(t.isNotDirty=!0),r},setContent:function(e,t){var n=this,r=n.getBody(),i;return t=t||{},t.format=t.format||"html",t.set=!0,t.content=e,t.no_events||n.fire("BeforeSetContent",t),e=t.content,0===e.length||/^\s+$/.test(e)?(i=n.settings.forced_root_block,i&&n.schema.isValidChild(r.nodeName.toLowerCase(),i.toLowerCase())?(e=j&&11>j?"":'<br data-mce-bogus="1">',e=n.dom.createHTML(i,n.settings.forced_root_block_attrs,e)):j||(e='<br data-mce-bogus="1">'),n.dom.setHTML(r,e),n.fire("SetContent",t)):("raw"!==t.format&&(e=(new u({},n.schema)).serialize(n.parser.parse(e,{isRootContent:!0}))),t.content=D(e),n.dom.setHTML(r,t.content),t.no_events||n.fire("SetContent",t)),t.content},getContent:function(e){var t=this,n,r=t.getBody();return e=e||{},e.format=e.format||"html",e.get=!0,e.getInner=!0,e.no_events||t.fire("BeforeGetContent",e),n="raw"==e.format?r.innerHTML:"text"==e.format?r.innerText||r.textContent:t.serializer.serialize(r,e),e.content="text"!=e.format?D(n):n,e.no_events||t.fire("GetContent",e),e.content},insertContent:function(e,t){t&&(e=A({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},getContainer:function(){var e=this;return e.container||(e.container=C.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return C.get(this.settings.content_element||this.id)},getWin:function(){var e=this,t;return e.contentWindow||(t=C.get(e.id+"_ifr"),t&&(e.contentWindow=t.contentWindow)),e.contentWindow},getDoc:function(){var e=this,t;return e.contentDocument||(t=e.getWin(),t&&(e.contentDocument=t.document)),e.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var r=this,i=r.settings;return i.urlconverter_callback?r.execCallback("urlconverter_callback",e,n,!0,t):!i.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")||0===e.length?e:i.relative_urls?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,i.remove_script_host)},addVisual:function(e){var n=this,r=n.settings,i=n.dom,s;e=e||n.getBody(),n.hasVisual===t&&(n.hasVisual=r.visual),O(i.select("table,a",e),function(e){var t;switch(e.nodeName){case"TABLE":return s=r.visual_table_class||"mce-item-table",t=i.getAttrib(e,"border"),void (t&&"0"!=t||!n.hasVisual?i.removeClass(e,s):i.addClass(e,s));case"A":return void (i.getAttrib(e,"href",!1)||(t=i.getAttrib(e,"name")||e.id,s=r.visual_anchor_class||"mce-item-anchor",t&&n.hasVisual?i.addClass(e,s):i.removeClass(e,s)))}}),n.fire("VisualAid",{element:e,hasVisual:n.hasVisual})},remove:function(){var e=this;if(!e.removed){e.save(),e.removed=1,e.hasHiddenInput&&C.remove(e.getElement().nextSibling),e.inline||(j&&10>j&&e.getDoc().execCommand("SelectAll",!1,null),C.setStyle(e.id,"display",e.orgDisplay),e.getBody().onload=null,H.unbind(e.getWin()),H.unbind(e.getDoc()));var t=e.getContainer();H.unbind(e.getBody()),H.unbind(t),e.fire("remove"),e.editorManager.remove(e),C.remove(t),e.destroy()}},destroy:function(e){var t=this,n;if(!t.destroyed){if(!e&&!t.removed)return void t.remove();e&&B&&(H.unbind(t.getDoc()),H.unbind(t.getWin()),H.unbind(t.getBody())),e||(t.editorManager.off("beforeunload",t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),t.selection.destroy(),t.dom.destroy()),n=t.formElement,n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,n._mceOldSubmit=null),C.unbind(n,"submit reset",t.formEventDelegate)),t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.settings.content_element=t.bodyElement=t.contentDocument=t.contentWindow=null,t.selection&&(t.selection=t.selection.win=t.selection.dom=t.selection.dom.doc=null),t.destroyed=1}},_refreshContentEditable:function(){var e=this,t,n;e._isHidden()&&(t=e.getBody(),n=t.parentNode,n.removeChild(t),n.appendChild(t),t.focus())},_isHidden:function(){var e;return B?(e=this.selection.getSel(),!e||!e.rangeCount||0===e.rangeCount):0}},A(N.prototype,x),N}),r(ht,[],function(){var e={};return{rtl:!1,add:function(t,n){for(var r in n)e[r]=n[r];this.rtl=this.rtl||"rtl"===e._dir},translate:function(t){if("undefined"==typeof t)return t;if("string"!=typeof t&&t.raw)return t.raw;if(t.push){var n=t.slice(1);t=(e[t[0]]||t[0]).replace(/\{([^\}]+)\}/g,function(e,t){return n[t]})}return e[t]||t},data:e}}),r(pt,[y,c],function(e,t){function n(e){function u(){try{return document.activeElement}catch(e){return document.body}}function a(e,t){if(t&&t.startContainer){if(!e.isChildOf(t.startContainer,e.getRoot())||!e.isChildOf(t.endContainer,e.getRoot()))return;return{startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset}}return t}function f(e,t){var n;return t.startContainer?(n=e.getDoc().createRange(),n.setStart(t.startContainer,t.startOffset),n.setEnd(t.endContainer,t.endOffset)):n=t,n}function l(e){return!!o.getParent(e,n.isEditorUIElement)}function c(n){var c=n.editor;c.on("init",function(){(c.inline||t.ie)&&("onbeforedeactivate"in document&&t.ie<9?c.dom.bind(c.getBody(),"beforedeactivate",function(){try{c.lastRng=c.selection.getRng()}catch(e){}}):c.on("nodechange mouseup keyup",function(e){var t=u();"nodechange"==e.type&&e.selectionChange||(t&&t.id==c.id+"_ifr"&&(t=c.getBody()),c.dom.isChildOf(t,c.getBody())&&(c.lastRng=c.selection.getRng()))}),t.webkit&&!r&&(r=function(){var t=e.activeEditor;if(t&&t.selection){var n=t.selection.getRng();n&&!n.collapsed&&(c.lastRng=n)}},o.bind(document,"selectionchange",r)))}),c.on("setcontent",function(){c.lastRng=null}),c.on("mousedown",function(){c.selection.lastFocusBookmark=null}),c.on("focusin",function(){var t=e.focusedEditor;c.selection.lastFocusBookmark&&(c.selection.setRng(f(c,c.selection.lastFocusBookmark)),c.selection.lastFocusBookmark=null),t!=c&&(t&&t.fire("blur",{focusedEditor:c}),e.activeEditor=c,e.focusedEditor=c,c.fire("focus",{blurredEditor:t}),c.focus(!0)),c.lastRng=null}),c.on("focusout",function(){window.setTimeout(function(){var t=e.focusedEditor;l(u())||t!=c||(c.fire("blur",{focusedEditor:null}),e.focusedEditor=null,c.selection&&(c.selection.lastFocusBookmark=null))},0)}),i||(i=function(t){var n=e.activeEditor;n&&t.target.ownerDocument==document&&(n.selection&&t.target!=n.getBody()&&(n.selection.lastFocusBookmark=a(n.dom,n.lastRng)),l(t.target)||e.focusedEditor!=n||(n.fire("blur",{focusedEditor:null}),e.focusedEditor=null))},o.bind(document,"focusin",i)),c.inline&&!s&&(s=function(t){var n=e.activeEditor;if(n.inline&&!n.dom.isChildOf(t.target,n.getBody())){var r=n.selection.getRng();r.collapsed||(n.lastRng=r)}},o.bind(document,"mouseup",s))}function h(t){e.focusedEditor==t.editor&&(e.focusedEditor=null),e.activeEditor||(o.unbind(document,"selectionchange",r),o.unbind(document,"focusin",i),o.unbind(document,"mouseup",s),r=i=s=null)}e.on("AddEditor",c),e.on("RemoveEditor",h)}var r,i,s,o=e.DOM;return n.isEditorUIElement=function(e){return-1!==e.className.toString().indexOf("mce-")},n}),r(dt,[ct,h,y,U,c,l,at,ht,pt],function(e,t,n,r,i,s,o,u,a){function f(e){var t=g.editors,n;delete t[e.id];for(var r=0;r<t.length;r++)if(t[r]==e){t.splice(r,1),n=!0;break}return g.activeEditor==e&&(g.activeEditor=t[0]),g.focusedEditor==e&&(g.focusedEditor=null),n}function l(e){return e&&!(e.getContainer()||e.getBody()).parentNode&&(f(e),e.destroy(!0),e=null),e}var c=n.DOM,h=s.explode,p=s.each,d=s.extend,v=0,m,g;return g={$:t,majorVersion:"4",minorVersion:"1.1",releaseDate:"2014-07-08",editors:[],i18n:u,activeEditor:null,setup:function(){var e=this,t,n,i="",s,o;if(n=document.location.href,/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),s=window.tinymce||window.tinyMCEPreInit)t=s.base||s.baseURL,i=s.suffix;else{for(var u=document.getElementsByTagName("script"),f=0;f<u.length;f++)if(o=u[f].src,/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(o)){-1!=o.indexOf(".min")&&(i=".min"),t=o.substring(0,o.lastIndexOf("/"));break}!t&&document.currentScript&&(o=document.currentScript.src,-1!=o.indexOf(".min")&&(i=".min"),t=o.substring(0,o.lastIndexOf("/")))}e.baseURL=(new r(n)).toAbsolute(t),e.documentBaseURL=n,e.baseURI=new r(e.baseURL),e.suffix=i,e.focusManager=new a(e)},init:function(t){function n(e){var t=e.id;return t||(t=e.name,t=t&&!c.get(t)?e.name:c.uniqueId(),e.setAttribute("id",t)),t}function r(t,n){if(!l(u.get(t))){var r=new e(t,n,u);a.push(r),r.render()}}function i(e,t,n){var r=e[t];if(r)return r.apply(n||this,Array.prototype.slice.call(arguments,2))}function s(e,t){return t.constructor===RegExp?t.test(e.className):c.hasClass(e,t)}function o(){var l,m;if(c.unbind(window,"ready",o),i(t,"onpageload"),t.types)return void p(t.types,function(e){p(c.select(e.selector),function(i){r(n(i),d({},t,e))})});if(t.selector)return void p(c.select(t.selector),function(e){r(n(e),t)});switch(t.mode){case"exact":l=t.elements||"",l.length>0&&p(h(l),function(n){c.get(n)?(f=new e(n,t,u),a.push(f),f.render()):p(document.forms,function(e){p(e.elements,function(e){e.name===n&&(n="mce_editor_"+v++,c.setAttrib(e,"id",n),r(n,t))})})});break;case"textareas":case"specific_textareas":p(c.select("textarea"),function(e){t.editor_deselector&&s(e,t.editor_deselector)||(!t.editor_selector||s(e,t.editor_selector))&&r(n(e),t)})}t.oninit&&(l=m=0,p(a,function(e){m++,e.initialized?l++:e.on("init",function(){l++,l==m&&i(t,"oninit")}),l==m&&i(t,"oninit")}))}var u=this,a=[],f;u.settings=t,c.bind(window,"ready",o)},get:function(e){return arguments.length?e in this.editors?this.editors[e]:null:this.editors},add:function(e){var t=this,n=t.editors;return n[e.id]=e,n.push(e),t.activeEditor=e,t.fire("AddEditor",{editor:e}),m||(m=function(){t.fire("BeforeUnload")},c.bind(window,"beforeunload",m)),e},createEditor:function(t,n){return this.add(new e(t,n,this))},remove:function(e){var t=this,n,r=t.editors,i;if(e)return"string"==typeof e?(e=e.selector||e,void p(c.select(e),function(e){t.remove(r[e.id])})):(i=e,r[i.id]?(f(i)&&t.fire("RemoveEditor",{editor:i}),r.length||c.unbind(window,"beforeunload",m),i.remove(),i):null);for(n=r.length-1;n>=0;n--)t.remove(r[n])},execCommand:function(t,n,r){var i=this,s=i.get(r);switch(t){case"mceAddEditor":return i.get(r)||(new e(r,i.settings,i)).render(),!0;case"mceRemoveEditor":return s&&s.remove(),!0;case"mceToggleEditor":return s?(s.isHidden()?s.show():s.hide(),!0):(i.execCommand("mceAddEditor",0,r),!0)}return i.activeEditor?i.activeEditor.execCommand(t,n,r):!1},triggerSave:function(){p(this.editors,function(e){e.save()})},addI18n:function(e,t){u.add(e,t)},translate:function(e){return u.translate(e)}},d(g,o),g.setup(),window.tinymce=window.tinyMCE=g,g}),r(vt,[dt,l],function(e,t){var n=t.each,r=t.explode;e.on("AddEditor",function(e){var t=e.editor;t.on("preInit",function(){function e(e,t){n(t,function(t,n){t&&u.setStyle(e,n,t)}),u.rename(e,"span")}function i(e){u=t.dom,a.convert_fonts_to_spans&&n(u.select("font,u,strike",e.node),function(e){s[e.nodeName.toLowerCase()](u,e)})}var s,o,u,a=t.settings;a.inline_styles&&(o=r(a.font_size_legacy_values),s={font:function(t,n){e(n,{backgroundColor:n.style.backgroundColor,color:n.color,fontFamily:n.face,fontSize:o[parseInt(n.size,10)-1]})},u:function(t,n){e(n,{textDecoration:"underline"})},strike:function(t,n){e(n,{textDecoration:"line-through"})}},t.on("PreProcess SetContent",i))})})}),r(mt,[],function(){return{send:function(e){function t(){!e.async||4==n.readyState||r++>1e4?(e.success&&1e4>r&&200==n.status?e.success.call(e.success_scope,""+n.responseText,n,e):e.error&&e.error.call(e.error_scope,r>1e4?"TIMED_OUT":"GENERAL",n,e),n=null):setTimeout(t,10)}var n,r=0;if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async===!1?!1:!0,e.data=e.data||"",n=new XMLHttpRequest){if(n.overrideMimeType&&n.overrideMimeType(e.content_type),n.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(n.withCredentials=!0),e.content_type&&n.setRequestHeader("Content-Type",e.content_type),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(e.data),!e.async)return t();setTimeout(t,10)}}}}),r(gt,[],function(){function e(t,n){var r,i,s,o;if(n=n||'"',null===t)return"null";if(s=typeof t,"string"==s)return i="\bb	t\nn\ff\rr\"\"''\\\\",n+t.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){return'"'===n&&"'"===e?e:(r=i.indexOf(t),r+1?"\\"+i.charAt(r+1):(e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e))})+n;if("object"==s){if(t.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(t)){for(r=0,i="[";r<t.length;r++)i+=(r>0?",":"")+e(t[r],n);return i+"]"}i="{";for(o in t)t.hasOwnProperty(o)&&(i+="function"!=typeof t[o]?(i.length>1?","+n:n)+o+n+":"+e(t[o],n):"");return i+"}"}return""+t}return{serialize:e,parse:function(e){try{return window[String.fromCharCode(101)+"val"]("("+e+")")}catch(t){}}}}),r(yt,[gt,mt,l],function(e,t,n){function r(e){this.settings=i({},e),this.count=0}var i=n.extend;return r.sendRPC=function(e){return(new r).send(e)},r.prototype={send:function(n){var r=n.error,s=n.success;n=i(this.settings,n),n.success=function(t,i){t=e.parse(t),"undefined"==typeof t&&(t={error:"JSON Parse error."}),t.error?r.call(n.error_scope||n.scope,t.error,i):s.call(n.success_scope||n.scope,t.result)},n.error=function(e,t){r&&r.call(n.error_scope||n.scope,e,t)},n.data=e.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",t.send(n)}},r}),r(bt,[y],function(e){return{callbacks:{},count:0,send:function(n){var r=this,i=e.DOM,s=n.count!==t?n.count:r.count,o="tinymce_jsonp_"+s;r.callbacks[s]=function(e){i.remove(o),delete r.callbacks[s],n.callback(e)},i.add(i.doc.body,"script",{id:o,src:n.url,type:"text/javascript"}),r.count++}}}),r(wt,[],function(){function e(){u=[];for(var e in o)u.push(e);i.length=u.length}function n(){function n(e){var n,r;return r=e!==t?l+e:i.indexOf(",",l),-1===r||r>i.length?null:(n=i.substring(l,r),l=r+1,n)}var r,i,u,l=0;if(o={},f){s.load(a),i=s.getAttribute(a)||"";do{var c=n();if(null===c)break;if(r=n(parseInt(c,32)||0),null!==r){if(c=n(),null===c)break;u=n(parseInt(c,32)||0),r&&(o[r]=u)}}while(null!==r);e()}}function r(){var t,n="";if(f){for(var r in o)t=o[r],n+=(n?",":"")+r.length.toString(32)+","+r+","+t.length.toString(32)+","+t;s.setAttribute(a,n);try{s.save(a)}catch(i){}e()}}var i,s,o,u,a,f;try{if(window.localStorage)return localStorage}catch(l){}return a="tinymce",s=document.documentElement,f=!!s.addBehavior,f&&s.addBehavior("#default#userData"),i={key:function(e){return u[e]},getItem:function(e){return e in o?o[e]:null},setItem:function(e,t){o[e]=""+t,r()},removeItem:function(e){delete o[e],r()},clear:function(){o={},r()}},n(),i}),r(Et,[y,f,b,w,l,c],function(e,t,n,r,i,s){var o=window.tinymce;return o.DOM=e.DOM,o.ScriptLoader=n.ScriptLoader,o.PluginManager=r.PluginManager,o.ThemeManager=r.ThemeManager,o.dom=o.dom||{},o.dom.Event=t.Event,i.each(i,function(e,t){o[t]=e}),i.each("isOpera isWebKit isIE isGecko isMac".split(" "),function(e){o[e]=s[e.substr(2).toLowerCase()]}),{}}),r(St,[z,l],function(e,t){return e.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=t.extend({},this.Defaults,e)},preRender:function(e){e.addClass(this.settings.containerClass,"body")},applyClasses:function(e){var t=this,n=t.settings,r,i,s;r=e.items().filter(":visible"),i=n.firstControlClass,s=n.lastControlClass,r.each(function(e){e.removeClass(i).removeClass(s),n.controlClass&&e.addClass(n.controlClass)}),r.eq(0).addClass(i),r.eq(-1).addClass(s)},renderHtml:function(e){var t=this,n=t.settings,r,i="";return r=e.items(),r.eq(0).addClass(n.firstControlClass),r.eq(-1).addClass(n.lastControlClass),r.each(function(e){n.controlClass&&e.addClass(n.controlClass),i+=e.renderHtml()}),i},recalc:function(){},postRender:function(){}})}),r(xt,[St],function(e){return e.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}})}),r(Tt,[J,tt],function(e,t){return e.extend({Mixins:[t],Defaults:{classes:"widget tooltip tooltip-n"},text:function(e){var t=this;return"undefined"!=typeof e?(t._value=e,t._rendered&&(t.getEl().lastChild.innerHTML=t.encode(e)),t):t._value},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes()+'" role="presentation"><div class="'+t+'tooltip-arrow"></div><div class="'+t+'tooltip-inner">'+e.encode(e._text)+"</div></div>"},repaint:function(){var e=this,t,n;t=e.getEl().style,n=e._layoutRect,t.left=n.x+"px",t.top=n.y+"px",t.zIndex=131070}})}),r(Nt,[J,Tt],function(e,t){var n,r=e.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.canFocus=!0,e.tooltip&&r.tooltips!==!1&&(t.on("mouseenter",function(n){var r=t.tooltip().moveTo(-65535);if(n.control==t){var i=r.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);r.toggleClass("tooltip-n","bc-tc"==i),r.toggleClass("tooltip-nw","bc-tl"==i),r.toggleClass("tooltip-ne","bc-tr"==i),r.moveRel(t.getEl(),i)}else r.hide()}),t.on("mouseleave mousedown click",function(){t.tooltip().hide()})),t.aria("label",e.ariaLabel||e.tooltip)},tooltip:function(){return n||(n=new t({type:"tooltip"}),n.renderTo()),n},active:function(e){var t=this,n;return e!==n&&(t.aria("pressed",e),t.toggleClass("active",e)),t._super(e)},disabled:function(e){var t=this,n;return e!==n&&(t.aria("disabled",e),t.toggleClass("disabled",e)),t._super(e)},postRender:function(){var e=this,t=e.settings;e._rendered=!0,e._super(),e.parent()||!t.width&&!t.height||(e.initLayoutRect(),e.repaint()),t.autofocus&&e.focus()},remove:function(){this._super(),n&&(n.remove(),n=null)}});return r}),r(Ct,[Nt],function(e){return e.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t=this,n;t.on("click mousedown",function(e){e.preventDefault()}),t._super(e),n=e.size,e.subtype&&t.addClass(e.subtype),n&&t.addClass("btn-"+n)},icon:function(e){var t=this,n=t.classPrefix;if("undefined"==typeof e)return t.settings.icon;if(t.settings.icon=e,e=e?n+"ico "+n+"i-"+t.settings.icon:"",t._rendered){var r=t.getEl().firstChild,i=r.getElementsByTagName("i")[0];e?(i&&i==r.firstChild||(i=document.createElement("i"),r.insertBefore(i,r.firstChild)),i.className=e):i&&r.removeChild(i),t.text(t._text)}return t},repaint:function(){var e=this.getEl().firstChild.style;e.width=e.height="100%",this._super()},text:function(e){var t=this;if(t._rendered){var n=t.getEl().lastChild.lastChild;n&&(n.data=t.translate(e))}return t._super(e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.settings.icon,i;return i=e.settings.image,i?(r="none","string"!=typeof i&&(i=window.getSelection?i[0]:i[1]),i=" style=\"background-image: url('"+i+"')\""):i="",r=e.settings.icon?n+"ico "+n+"i-"+r:"",'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1" aria-labelledby="'+t+'"><button role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+i+"></i>":"")+(e._text?(r?" ":"")+e.encode(e._text):"")+"</button></div>"}})}),r(kt,[G],function(e){return e.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this,t=e._layout;return e.addClass("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'"><div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}),r(Lt,[Nt],function(e){return e.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){var t=this;return"undefined"!=typeof e?(e?t.addClass("checked"):t.removeClass("checked"),t._checked=e,t.aria("checked",e),t):t._checked},value:function(e){return this.checked(e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes()+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+n+"ico "+n+'i-checkbox"></i><span id="'+t+'-al" class="'+n+'label">'+e.encode(e._text)+"</span></div>"}})}),r(At,[Nt,K,$],function(e,t,n){return e.extend({init:function(e){var t=this;t._super(e),t.addClass("combobox"),t.subinput=!0,t.ariaTarget="inp",e=t.settings,e.menu=e.menu||e.values,e.menu&&(e.icon="caret"),t.on("click",function(n){for(var r=n.target,i=t.getEl();r&&r!=i;)r.id&&-1!=r.id.indexOf("-open")&&(t.fire("action"),e.menu&&(t.showMenu(),n.aria&&t.menu.items()[0].focus())),r=r.parentNode}),t.on("keydown",function(e){"INPUT"==e.target.nodeName&&13==e.keyCode&&t.parents().reverse().each(function(n){return e.preventDefault(),t.fire("change"),n.hasEventListeners("submit")&&n.toJSON?(n.fire("submit",{data:n.toJSON()}),!1):void 0})}),e.placeholder&&(t.addClass("placeholder"),t.on("focusin",function(){t._hasOnChange||(n.on(t.getEl("inp"),"change",function(){t.fire("change")}),t._hasOnChange=!0),t.hasClass("placeholder")&&(t.getEl("inp").value="",t.removeClass("placeholder"))}),t.on("focusout",function(){0===t.value().length&&(t.getEl("inp").value=e.placeholder,t.addClass("placeholder"))}))},showMenu:function(){var e=this,n=e.settings,r;e.menu||(r=n.menu||[],r.length?r={type:"menu",items:r}:r.type=r.type||"menu",e.menu=t.create(r).parent(e).renderTo(e.getContainerElm()),e.fire("createmenu"),e.menu.reflow(),e.menu.on("cancel",function(t){t.control===e.menu&&e.focus()}),e.menu.on("show hide",function(t){t.control.items().each(function(t){t.active(t.value()==e.value())})}).fire("show"),e.menu.on("select",function(t){e.value(t.control.value())}),e.on("focusin",function(t){"INPUT"==t.target.tagName.toUpperCase()&&e.menu.hide()}),e.aria("expanded",!0)),e.menu.show(),e.menu.layoutRect({w:e.layoutRect().w}),e.menu.moveRel(e.getEl(),e.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},value:function(e){var t=this;return"undefined"!=typeof e?(t._value=e,t.removeClass("placeholder"),t._rendered&&(t.getEl("inp").value=e),t):t._rendered?(e=t.getEl("inp").value,e!=t.settings.placeholder?e:""):t._value},disabled:function(e){var t=this;return t._rendered&&"undefined"!=typeof e&&(t.getEl("inp").disabled=e),t._super(e)},focus:function(){this.getEl("inp").focus()},repaint:function(){var e=this,t=e.getEl(),r=e.getEl("open"),i=e.layoutRect(),s,o;s=r?i.w-n.getSize(r).width-10:i.w-10;var u=document;return u.all&&(!u.documentMode||u.documentMode<=8)&&(o=e.layoutRect().h-2+"px"),n.css(t.firstChild,{width:s,lineHeight:o}),e._super(),e},postRender:function(){var e=this;return n.on(this.getEl("inp"),"change",function(){e.fire("change")}),e._super()},remove:function(){n.off(this.getEl("inp")),this._super()},renderHtml:function(){var e=this,t=e._id,n=e.settings,r=e.classPrefix,i=n.value||n.placeholder||"",s,o,u="",a="";return"spellcheck"in n&&(a+=' spellcheck="'+n.spellcheck+'"'),n.maxLength&&(a+=' maxlength="'+n.maxLength+'"'),n.size&&(a+=' size="'+n.size+'"'),n.subtype&&(a+=' type="'+n.subtype+'"'),e.disabled()&&(a+=' disabled="disabled"'),s=n.icon,s&&"caret"!=s&&(s=r+"ico "+r+"i-"+n.icon),o=e._text,(s||o)&&(u='<div id="'+t+'-open" class="'+r+"btn "+r+'open" tabIndex="-1" role="button"><button id="'+t+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!=s?'<i class="'+s+'"></i>':'<i class="'+r+'caret"></i>')+(o?(s?" ":"")+o:"")+"</button></div>",e.addClass("has-open")),'<div id="'+t+'" class="'+e.classes()+'"><input id="'+t+'-inp" class="'+r+"textbox "+r+'placeholder" value="'+i+'" hidefocus="1"'+a+" />"+u+"</div>"}})}),r(Ot,[At],function(e){return e.extend({init:function(e){var t=this;e.spellcheck=!1,e.icon="none",t._super(e),t.addClass("colorbox"),t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(e){this.getEl().getElementsByTagName("i")[0].style.background=e},value:function(e){var t=this;return"undefined"!=typeof e&&t._rendered&&t.repaintColor(e),t._super(e)}})}),r(Mt,[Ct,rt],function(e,t){return e.extend({showPanel:function(){var e=this,n=e.settings;if(e.active(!0),e.panel)e.panel.show();else{var r=n.panel;r.type&&(r={layout:"grid",items:r}),r.role=r.role||"dialog",r.popover=!0,r.autohide=!0,r.ariaRoot=!0,e.panel=(new t(r)).on("hide",function(){e.active(!1)}).on("cancel",function(t){t.stopPropagation(),e.focus(),e.hidePanel()}).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()}e.panel.moveRel(e.getEl(),n.popoverAlign||(e.isRtl()?["bc-tr","bc-tc"]:["bc-tl","bc-tc"]))},hidePanel:function(){var e=this;e.panel&&e.panel.hide()},postRender:function(){var e=this;return e.aria("haspopup",!0),e.on("click",function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():(e.showPanel(),e.panel.focus(!!t.aria)))}),e._super()}})}),r(_t,[Mt,y],function(e,t){var n=t.DOM;return e.extend({init:function(e){this._super(e),this.addClass("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",i=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"";return'<div id="'+t+'" class="'+e.classes()+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+i+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+(e._text?(r?" ":"")+e._text:"")+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(r){r.aria&&"down"==r.aria.key||r.control!=e||n.getParent(r.target,"."+e.classPrefix+"open")||(r.stopImmediatePropagation(),t.call(e,r))}),delete e.settings.onclick,e._super()}})}),r(Dt,[],function(){function e(e){function i(e,i,s){var o,u,a,f,l,c;return o=0,u=0,a=0,e/=255,i/=255,s/=255,l=t(e,t(i,s)),c=n(e,n(i,s)),l==c?(a=l,{h:0,s:0,v:100*a}):(f=e==l?i-s:s==l?e-i:s-e,o=e==l?3:s==l?1:5,o=60*(o-f/(c-l)),u=(c-l)/c,a=c,{h:r(o),s:r(100*u),v:r(100*a)})}function s(e,i,s){var o,u,a,f;if(e=(parseInt(e,10)||0)%360,i=parseInt(i,10)/100,s=parseInt(s,10)/100,i=n(0,t(i,1)),s=n(0,t(s,1)),0===i)return void (c=h=p=r(255*s));switch(o=e/60,u=s*i,a=u*(1-Math.abs(o%2-1)),f=s-u,Math.floor(o)){case 0:c=u,h=a,p=0;break;case 1:c=a,h=u,p=0;break;case 2:c=0,h=u,p=a;break;case 3:c=0,h=a,p=u;break;case 4:c=a,h=0,p=u;break;case 5:c=u,h=0,p=a;break;default:c=h=p=0}c=r(255*(c+f)),h=r(255*(h+f)),p=r(255*(p+f))}function o(){function e(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+e(c)+e(h)+e(p)}function u(){return{r:c,g:h,b:p}}function a(){return i(c,h,p)}function f(e){var t;return"object"==typeof e?"r"in e?(c=e.r,h=e.g,p=e.b):"v"in e&&s(e.h,e.s,e.v):(t=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(c=parseInt(t[1],10),h=parseInt(t[2],10),p=parseInt(t[3],10)):(t=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(c=parseInt(t[1],16),h=parseInt(t[2],16),p=parseInt(t[3],16)):(t=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(c=parseInt(t[1]+t[1],16),h=parseInt(t[2]+t[2],16),p=parseInt(t[3]+t[3],16)),c=0>c?0:c>255?255:c,h=0>h?0:h>255?255:h,p=0>p?0:p>255?255:p,l}var l=this,c=0,h=0,p=0;e&&f(e),l.toRgb=u,l.toHsv=a,l.toHex=o,l.parse=f}var t=Math.min,n=Math.max,r=Math.round;return e}),r(Pt,[Nt,Y,$,Dt],function(e,t,n,r){return e.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){function e(e,t){var r=n.getPos(e),i,s;return i=t.pageX-r.x,s=t.pageY-r.y,i=Math.max(0,Math.min(i/e.clientWidth,1)),s=Math.max(0,Math.min(s/e.clientHeight,1)),{x:i,y:s}}function i(e,t){var i=(360-e.h)/360;n.css(c,{top:100*i+"%"}),t||n.css(p,{left:e.s+"%",top:100-e.v+"%"}),h.style.background=(new r({s:100,v:100,h:e.h})).toHex(),u.color().parse({s:e.s,v:e.v,h:e.h})}function s(t){var n;n=e(h,t),f.s=100*n.x,f.v=100*(1-n.y),i(f),u.fire("change")}function o(t){var n;n=e(l,t),f=a.toHsv(),f.h=360*(1-n.y),i(f,!0),u.fire("change")}var u=this,a=u.color(),f,l,c,h,p;l=u.getEl("h"),c=u.getEl("hp"),h=u.getEl("sv"),p=u.getEl("svp"),u._repaint=function(){f=a.toHsv(),i(f)},u._super(),u._svdraghelper=new t(u._id+"-sv",{start:s,drag:s}),u._hdraghelper=new t(u._id+"-h",{start:o,drag:o}),u._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){var t=this;return arguments.length?(t.color().parse(e),void (t._rendered&&t._repaint())):t.color().toHex()},color:function(){return this._color||(this._color=new r),this._color},renderHtml:function(){function e(){var e,t,n="",i,o;for(i="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",o=s.split(","),e=0,t=o.length-1;t>e;e++)n+='<div class="'+r+'colorpicker-h-chunk" style="height:'+100/t+"%;"+i+o[e]+",endColorstr="+o[e+1]+");-ms-"+i+o[e]+",endColorstr="+o[e+1]+')"></div>';return n}var t=this,n=t._id,r=t.classPrefix,i,s="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000",o="background: -ms-linear-gradient(top,"+s+");background: linear-gradient(to bottom,"+s+");";return i='<div id="'+n+'-h" class="'+r+'colorpicker-h" style="'+o+'">'+e()+'<div id="'+n+'-hp" class="'+r+'colorpicker-h-marker"></div></div>','<div id="'+n+'" class="'+t.classes()+'"><div id="'+n+'-sv" class="'+r+'colorpicker-sv"><div class="'+r+'colorpicker-overlay1"><div class="'+r+'colorpicker-overlay2"><div id="'+n+'-svp" class="'+r+'colorpicker-selector1"><div class="'+r+'colorpicker-selector2"></div></div></div></div></div>'+i+"</div>"}})}),r(Ht,[Nt],function(e){return e.extend({init:function(e){var t=this;e.delimiter||(e.delimiter="»"),t._super(e),t.addClass("path"),t.canFocus=!0,t.on("click",function(e){var n,r=e.target;(n=r.getAttribute("data-index"))&&t.fire("select",{value:t.data()[n],index:n})})},focus:function(){var e=this;return e.getEl().firstChild.focus(),e},data:function(e){var t=this;return"undefined"!=typeof e?(t._data=e,t.update(),t):t._data},update:function(){this.innerHtml(this._getPathHtml())},postRender:function(){var e=this;e._super(),e.data(e.settings.data)},renderHtml:function(){var e=this;return'<div id="'+e._id+'" class="'+e.classes()+'">'+e._getPathHtml()+"</div>"},_getPathHtml:function(){var e=this,t=e._data||[],n,r,i="",s=e.classPrefix;for(n=0,r=t.length;r>n;n++)i+=(n>0?'<div class="'+s+'divider" aria-hidden="true"> '+e.settings.delimiter+" </div>":"")+'<div role="button" class="'+s+"path-item"+(n==r-1?" "+s+"last":"")+'" data-index="'+n+'" tabindex="-1" id="'+e._id+"-"+n+'" aria-level="'+n+'">'+t[n].name+"</div>";return i||(i='<div class="'+s+'path-item"> </div>'),i}})}),r(Bt,[Ht,dt],function(e,t){return e.extend({postRender:function(){function e(e){if(1===e.nodeType){if("BR"==e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1}var n=this,r=t.activeEditor;return n.on("select",function(e){r.focus(),r.selection.select(this.data()[e.index].element),r.nodeChanged()}),r.on("nodeChange",function(t){for(var i=[],s=t.parents,o=s.length;o--;)if(1==s[o].nodeType&&!e(s[o])){var u=r.fire("ResolveName",{name:s[o].nodeName.toLowerCase(),target:s[o]});if(u.isDefaultPrevented()||i.push({name:u.name,element:s[o]}),u.isPropagationStopped())break}n.data(i)}),n._super()}})}),r(jt,[G],function(e){return e.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.addClass("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}),r(Ft,[G,jt,l],function(e,t,n){return e.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:20,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this,r=e.items();e.settings.formItemDefaults||(e.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),r.each(function(r){var i,s=r.settings.label;s&&(i=new t(n.extend({items:{type:"label",id:r._id+"-l",text:s,flex:0,forId:r._id,disabled:r.disabled()}},e.settings.formItemDefaults)),i.type="formitem",r.aria("labelledby",r._id+"-l"),"undefined"==typeof r.settings.flex&&(r.settings.flex=1),e.replace(r,i),i.add(r))})},recalcLabels:function(){var e=this,t=0,n=[],r,i,s;if(e.settings.labelGapCalc!==!1)for(s="children"==e.settings.labelGapCalc?e.find("formitem"):e.items(),s.filter("formitem").each(function(e){var r=e.items()[0],i=r.getEl().clientWidth;t=i>t?i:t,n.push(r)}),i=e.settings.labelGap||0,r=n.length;r--;)n[r].settings.minWidth=t+i},visible:function(e){var t=this._super(e);return e===!0&&this._rendered&&this.recalcLabels(),t},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var e=this;e._super(),e.recalcLabels(),e.fromJSON(e.settings.data)}})}),r(It,[Ft],function(e){return e.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></fieldset>"}})}),r(qt,[At,l],function(e,t){return e.extend({init:function(e){var n=this,r=tinymce.activeEditor,i=r.settings,s,o,u;e.spellcheck=!1,u=i.file_picker_types||i.file_browser_callback_types,u&&(u=t.makeMap(u,/[, ]/)),(!u||u[e.filetype])&&(o=i.file_picker_callback,!o||u&&!u[e.filetype]?(o=i.file_browser_callback,!o||u&&!u[e.filetype]||(s=function(){o(n.getEl("inp").id,n.value(),e.filetype,window)})):s=function(){var i=n.fire("beforecall").meta;i=t.extend({filetype:e.filetype},i),o.call(r,function(e,t){n.value(e).fire("change",{meta:t})},n.value(),i)}),s&&(e.icon="browse",e.onaction=s),n._super(e)}})}),r(Rt,[xt],function(e){return e.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox();e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}})}),r(Ut,[xt],function(e){return e.extend({recalc:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g=[],y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q=Math.max,R=Math.min;for(r=e.items().filter(":visible"),i=e.layoutRect(),s=e._paddingBox,o=e.settings,h=e.isRtl()?o.direction||"row-reversed":o.direction,u=o.align,a=e.isRtl()?o.pack||"end":o.pack,f=o.spacing||0,("row-reversed"==h||"column-reverse"==h)&&(r=r.set(r.toArray().reverse()),h=h.split("-")[0]),"column"==h?(C="y",T="h",N="minH",k="maxH",A="innerH",L="top",O="deltaH",M="contentH",B="left",P="w",_="x",D="innerW",H="minW",j="right",F="deltaW",I="contentW"):(C="x",T="w",N="minW",k="maxW",A="innerW",L="left",O="deltaW",M="contentW",B="top",P="h",_="y",D="innerH",H="minH",j="bottom",F="deltaH",I="contentH"),c=i[A]-s[L]-s[L],x=l=0,t=0,n=r.length;n>t;t++)p=r[t],d=p.layoutRect(),v=p.settings,m=v.flex,c-=n-1>t?f:0,m>0&&(l+=m,d[k]&&g.push(p),d.flex=m),c-=d[N],y=s[B]+d[H]+s[j],y>x&&(x=y);if(E={},E[N]=0>c?i[N]-c+i[O]:i[A]-c+i[O],E[H]=x+i[F],E[M]=i[A]-c,E[I]=x,E.minW=R(E.minW,i.maxW),E.minH=R(E.minH,i.maxH),E.minW=q(E.minW,i.startMinWidth),E.minH=q(E.minH,i.startMinHeight),!i.autoResize||E.minW==i.minW&&E.minH==i.minH){for(w=c/l,t=0,n=g.length;n>t;t++)p=g[t],d=p.layoutRect(),b=d[k],y=d[N]+d.flex*w,y>b?(c-=d[k]-d[N],l-=d.flex,d.flex=0,d.maxFlexSize=b):d.maxFlexSize=0;for(w=c/l,S=s[L],E={},0===l&&("end"==a?S=c+s[L]:"center"==a?(S=Math.round(i[A]/2-(i[A]-c)/2)+s[L],0>S&&(S=s[L])):"justify"==a&&(S=s[L],f=Math.floor(c/(r.length-1)))),E[_]=s[B],t=0,n=r.length;n>t;t++)p=r[t],d=p.layoutRect(),y=d.maxFlexSize||d[N],"center"===u?E[_]=Math.round(i[D]/2-d[P]/2):"stretch"===u?(E[P]=q(d[H]||0,i[D]-s[B]-s[j]),E[_]=s[B]):"end"===u&&(E[_]=i[D]-d[P]-s.top),d.flex>0&&(y+=d.flex*w),E[T]=y,E[C]=S,p.layoutRect(E),p.recalc&&p.recalc(),S+=y+f}else if(E.w=E.minW,E.h=E.minH,e.layoutRect(E),this.recalc(e),null===e._lastRect){var U=e.parent();U&&(U._lastRect=null,U.recalc())}}})}),r(zt,[St],function(e){return e.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})}})}),r(Wt,[J,Nt,rt,l,dt,c],function(e,t,n,r,i,s){function o(e){function t(t,n){return function(){var r=this;e.on("nodeChange",function(i){var s=e.formatter,o=null;u(i.parents,function(e){return u(t,function(t){return n?s.matchNode(e,n,{value:t.value})&&(o=t.value):s.matchNode(e,t.value)&&(o=t.value),o?!1:void 0}),o?!1:void 0}),r.value(o)})}}function r(e){e=e.replace(/;$/,"").split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e}function i(){function t(e){var n=[];if(e)return u(e,function(e){var s={text:e.title,icon:e.icon};if(e.items)s.menu=t(e.items);else{var o=e.format||"custom"+r++;e.format||(e.name=o,i.push(e)),s.format=o,s.cmd=e.cmd}n.push(s)}),n}function n(){var n;return n=t(e.settings.style_formats_merge?e.settings.style_formats?s.concat(e.settings.style_formats):s:e.settings.style_formats||s)}var r=0,i=[],s=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}];return e.on("init",function(){u(i,function(t){e.formatter.register(t.name,t)})}),{type:"menu",items:n(),onPostRender:function(t){e.fire("renderFormatsMenu",{control:t.control})},itemDefaults:{preview:!0,textStyle:function(){return this.settings.format?e.formatter.getCssText(this.settings.format):void 0},onPostRender:function(){var t=this;t.parent().on("show",function(){var n,r;n=t.settings.format,n&&(t.disabled(!e.formatter.canApply(n)),t.active(e.formatter.match(n))),r=t.settings.cmd,r&&t.active(e.queryCommandState(r))})},onclick:function(){this.settings.format&&a(this.settings.format),this.settings.cmd&&e.execCommand(this.settings.cmd)}}}}function s(t){return function(){function n(){return e.undoManager?e.undoManager[t]():!1}var r=this;t="redo"==t?"hasRedo":"hasUndo",r.disabled(!n()),e.on("Undo Redo AddUndo TypingUndo ClearUndos",function(){r.disabled(!n())})}}function o(){var t=this;e.on("VisualAid",function(e){t.active(e.hasVisual)}),t.active(e.hasVisual)}function a(t){t.control&&(t=t.control.value()),t&&e.execCommand("mceToggleFormat",!1,t)}var f;f=i(),u({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(t,n){e.addButton(n,{tooltip:t,onPostRender:function(){var t=this;e.formatter?e.formatter.formatChanged(n,function(e){t.active(e)}):e.on("init",function(){e.formatter.formatChanged(n,function(e){t.active(e)})})},onclick:function(){a(n)}})}),u({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],hr:["Insert horizontal rule","InsertHorizontalRule"],removeformat:["Clear formatting","RemoveFormat"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1]})}),u({blockquote:["Blockquote","mceBlockQuote"],numlist:["Numbered list","InsertOrderedList"],bullist:["Bullet list","InsertUnorderedList"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1],onPostRender:function(){var t=this;e.formatter?e.formatter.formatChanged(n,function(e){t.active(e)}):e.on("init",function(){e.formatter.formatChanged(n,function(e){t.active(e)})})}})}),e.addButton("undo",{tooltip:"Undo",onPostRender:s("undo"),cmd:"undo"}),e.addButton("redo",{tooltip:"Redo",onPostRender:s("redo"),cmd:"redo"}),e.addMenuItem("newdocument",{text:"New document",shortcut:"Ctrl+N",icon:"newdocument",cmd:"mceNewDocument"}),e.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Ctrl+Z",onPostRender:s("undo"),cmd:"undo"}),e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Ctrl+Y",onPostRender:s("redo"),cmd:"redo"}),e.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:o,cmd:"mceToggleVisualAid"}),u({cut:["Cut","Cut","Ctrl+X"],copy:["Copy","Copy","Ctrl+C"],paste:["Paste","Paste","Ctrl+V"],selectall:["Select all","SelectAll","Ctrl+A"],bold:["Bold","Bold","Ctrl+B"],italic:["Italic","Italic","Ctrl+I"],underline:["Underline","Underline"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"]},function(t,n){e.addMenuItem(n,{text:t[0],icon:n,shortcut:t[2],cmd:t[1]})}),e.on("mousedown",function(){n.hideAll()}),e.addButton("styleselect",{type:"menubutton",text:"Formats",menu:f}),e.addButton("formatselect",function(){var n=[],i=r(e.settings.block_formats||"Paragraph=p;Address=address;Pre=pre;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6");return u(i,function(t){n.push({text:t[0],value:t[1],textStyle:function(){return e.formatter.getCssText(t[1])}})}),{type:"listbox",text:i[0][0],values:n,fixedWidth:!0,onselect:a,onPostRender:t(n)}}),e.addButton("fontselect",function(){var n="Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",i=[],s=r(e.settings.font_formats||n);return u(s,function(e){i.push({text:{raw:e[0]},value:e[1],textStyle:-1==e[1].indexOf("dings")?"font-family:"+e[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:i,fixedWidth:!0,onPostRender:t(i,"fontname"),onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}}),e.addButton("fontsizeselect",function(){var n=[],r="8pt 10pt 12pt 14pt 18pt 24pt 36pt",i=e.settings.fontsize_formats||r;return u(i.split(" "),function(e){var t=e,r=e,i=e.split("=");i.length>1&&(t=i[0],r=i[1]),n.push({text:t,value:r})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:n,fixedWidth:!0,onPostRender:t(n,"fontsize"),onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}}),e.addMenuItem("formats",{text:"Formats",menu:f})}var u=r.each;i.on("AddEditor",function(t){t.editor.rtl&&(e.rtl=!0),o(t.editor)}),e.translate=function(e){return i.translate(e)},t.tooltips=!s.iOS}),r(Xt,[xt],function(e){return e.extend({recalc:function(e){var t=e.settings,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T=[],N=[],C,k,L,A,O,M;t=e.settings,i=e.items().filter(":visible"),s=e.layoutRect(),r=t.columns||Math.ceil(Math.sqrt(i.length)),n=Math.ceil(i.length/r),y=t.spacingH||t.spacing||0,b=t.spacingV||t.spacing||0,w=t.alignH||t.align,E=t.alignV||t.align,m=e._paddingBox,O="reverseRows"in t?t.reverseRows:e.isRtl(),w&&"string"==typeof w&&(w=[w]),E&&"string"==typeof E&&(E=[E]);for(c=0;r>c;c++)T.push(0);for(h=0;n>h;h++)N.push(0);for(h=0;n>h;h++)for(c=0;r>c&&(l=i[h*r+c],l);c++)f=l.layoutRect(),C=f.minW,k=f.minH,T[c]=C>T[c]?C:T[c],N[h]=k>N[h]?k:N[h];for(L=s.innerW-m.left-m.right,S=0,c=0;r>c;c++)S+=T[c]+(c>0?y:0),L-=(c>0?y:0)+T[c];for(A=s.innerH-m.top-m.bottom,x=0,h=0;n>h;h++)x+=N[h]+(h>0?b:0),A-=(h>0?b:0)+N[h];if(S+=m.left+m.right,x+=m.top+m.bottom,a={},a.minW=S+(s.w-s.innerW),a.minH=x+(s.h-s.innerH),a.contentW=a.minW-s.deltaW,a.contentH=a.minH-s.deltaH,a.minW=Math.min(a.minW,s.maxW),a.minH=Math.min(a.minH,s.maxH),a.minW=Math.max(a.minW,s.startMinWidth),a.minH=Math.max(a.minH,s.startMinHeight),!s.autoResize||a.minW==s.minW&&a.minH==s.minH){s.autoResize&&(a=e.layoutRect(a),a.contentW=a.minW-s.deltaW,a.contentH=a.minH-s.deltaH);var _;_="start"==t.packV?0:A>0?Math.floor(A/n):0;var D=0,P=t.flexWidths;if(P)for(c=0;c<P.length;c++)D+=P[c];else D=r;var H=L/D;for(c=0;r>c;c++)T[c]+=P?P[c]*H:H;for(d=m.top,h=0;n>h;h++){for(p=m.left,u=N[h]+_,c=0;r>c&&(M=O?h*r+r-1-c:h*r+c,l=i[M],l);c++)v=l.settings,f=l.layoutRect(),o=Math.max(T[c],f.startMinWidth),f.x=p,f.y=d,g=v.alignH||(w?w[c]||w[0]:null),"center"==g?f.x=p+o/2-f.w/2:"right"==g?f.x=p+o-f.w:"stretch"==g&&(f.w=o),g=v.alignV||(E?E[c]||E[0]:null),"center"==g?f.y=d+u/2-f.h/2:"bottom"==g?f.y=d+u-f.h:"stretch"==g&&(f.h=u),l.layoutRect(f),p+=o+y,l.recalc&&l.recalc();d+=u+b}}else if(a.w=a.minW,a.h=a.minH,e.layoutRect(a),this.recalc(e),null===e._lastRect){var B=e.parent();B&&(B._lastRect=null,B.recalc())}}})}),r(Vt,[Nt],function(e){return e.extend({renderHtml:function(){var e=this;return e.addClass("iframe"),e.canFocus=!1,'<iframe id="'+e._id+'" class="'+e.classes()+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,t){var n=this,r=this.getEl().contentWindow.document.body;return r?(r.innerHTML=e,t&&t()):setTimeout(function(){n.html(e)},0),this}})}),r($t,[Nt,$],function(e,t){return e.extend({init:function(e){var t=this;t._super(e),t.addClass("widget"),t.addClass("label"),t.canFocus=!1,e.multiline&&t.addClass("autoscroll"),e.strong&&t.addClass("strong")},initLayoutRect:function(){var e=this,n=e._super();if(e.settings.multiline){var r=t.getSize(e.getEl());r.width>n.maxW&&(n.minW=n.maxW,e.addClass("multiline")),e.getEl().style.width=n.minW+"px",n.startMinH=n.h=n.minH=Math.min(n.maxH,t.getSize(e.getEl()).height)}return n},repaint:function(){var e=this;return e.settings.multiline||(e.getEl().style.lineHeight=e.layoutRect().h+"px"),e._super()},text:function(e){var t=this;return t._rendered&&e&&this.innerHtml(t.encode(e)),t._super(e)},renderHtml:function(){var e=this,t=e.settings.forId;return'<label id="'+e._id+'" class="'+e.classes()+'"'+(t?' for="'+t+'"':"")+">"+e.encode(e._text)+"</label>"}})}),r(Jt,[G],function(e){return e.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){var t=this;t._super(e),t.addClass("toolbar")},postRender:function(){var e=this;return e.items().addClass("toolbar-item"),e._super()}})}),r(Kt,[Jt],function(e){return e.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}})}),r(Qt,[Ct,K,Kt],function(e,t,n){function r(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}var i=e.extend({init:function(e){var t=this;t._renderOpen=!0,t._super(e),t.addClass("menubtn"),e.fixedWidth&&t.addClass("fixed-width"),t.aria("haspopup",!0),t.hasPopup=!0},showMenu:function(){var e=this,n=e.settings,r;return e.menu&&e.menu.visible()?e.hideMenu():(e.menu||(r=n.menu||[],r.length?r={type:"menu",items:r}:r.type=r.type||"menu",e.menu=t.create(r).parent(e).renderTo(),e.fire("createmenu"),e.menu.reflow(),e.menu.on("cancel",function(t){t.control.parent()===e.menu&&(t.stopPropagation(),e.focus(),e.hideMenu())}),e.menu.on("select",function(){e.focus()}),e.menu.on("show hide",function(t){t.control==e.menu&&e.activeMenu("show"==t.type),e.aria("expanded","show"==t.type)}).fire("show")),e.menu.show(),e.menu.layoutRect({w:e.layoutRect().w}),void e.menu.moveRel(e.getEl(),e.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]))},hideMenu:function(){var e=this;e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide())},activeMenu:function(e){this.toggleClass("active",e)},renderHtml:function(){var e=this,t=e._id,r=e.classPrefix,i=e.settings.icon?r+"ico "+r+"i-"+e.settings.icon:"";return e.aria("role",e.parent()instanceof n?"menuitem":"button"),'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1" aria-labelledby="'+t+'"><button id="'+t+'-open" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"></i>':"")+"<span>"+(e._text?(i?" ":"")+e.encode(e._text):"")+'</span> <i class="'+r+'caret"></i></button></div>'},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&r(t.target,e.getEl())&&(e.showMenu(),t.aria&&e.menu.items()[0].focus())}),e.on("mouseenter",function(t){var n=t.control,r=e.parent(),s;n&&r&&n instanceof i&&n.parent()==r&&(r.items().filter("MenuButton").each(function(e){e.hideMenu&&e!=n&&(e.menu&&e.menu.visible()&&(s=!0),e.hideMenu())}),s&&(n.focus(),n.showMenu()))}),e._super()},text:function(e){var t=this,n,r;if(t._rendered)for(r=t.getEl("open").getElementsByTagName("span"),n=0;n<r.length;n++)r[n].innerHTML=(t.settings.icon&&e?" ":"")+t.encode(e);return this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}});return i}),r(Gt,[Qt],function(e){return e.extend({init:function(e){function t(r){for(var o=0;o<r.length;o++){if(i=r[o].selected||e.value===r[o].value){s=s||r[o].text,n._value=r[o].value;break}r[o].menu&&t(r[o].menu)}}var n=this,r,i,s,o;n._values=r=e.values,r&&("undefined"!=typeof e.value&&t(r),!i&&r.length>0&&(s=r[0].text,n._value=r[0].value),e.menu=r),e.text=e.text||s||r[0].text,n._super(e),n.addClass("listbox"),n.on("select",function(t){var r=t.control;o&&(t.lastControl=o),e.multiple?r.active(!r.active()):n.value(t.control.settings.value),o=r})},value:function(e){function t(e,n){e.items().each(function(e){i=e.value()===n,i&&(s=s||e.text()),e.active(i),e.menu&&t(e.menu,n)})}function n(t){for(var r=0;r<t.length;r++)i=t[r].value==e,i&&(s=s||t[r].text),t[r].active=i,t[r].menu&&n(t[r].menu)}var r=this,i,s,o;return"undefined"!=typeof e&&(r.menu?t(r.menu,e):(o=r.settings.menu,n(o)),r.text(s||this.settings.text)),r._super(e)}})}),r(Yt,[Nt,K,c],function(e,t,n){return e.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t=this;t.hasPopup=!0,t._super(e),e=t.settings,t.addClass("menu-item"),e.menu&&t.addClass("menu-item-expand"),e.preview&&t.addClass("menu-item-preview"),("-"===t._text||"|"===t._text)&&(t.addClass("menu-item-sep"),t.aria("role","separator"),t._text="-"),e.selectable&&(t.aria("role","menuitemcheckbox"),t.addClass("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||t.addClass("menu-item-normal"),t.on("mousedown",function(e){e.preventDefault()}),e.menu&&!e.ariaHideMenu&&t.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e=this,n=e.settings,r,i=e.parent();if(i.items().each(function(t){t!==e&&t.hideMenu()}),n.menu){r=e.menu,r?r.show():(r=n.menu,r.length?r={type:"menu",items:r}:r.type=r.type||"menu",i.settings.itemDefaults&&(r.itemDefaults=i.settings.itemDefaults),r=e.menu=t.create(r).parent(e).renderTo(),r.reflow(),r.on("cancel",function(t){t.stopPropagation(),e.focus(),r.hide()}),r.on("show hide",function(e){e.control.items().each(function(e){e.active(e.settings.selected)})}).fire("show"),r.on("hide",function(t){t.control===r&&e.removeClass("selected")}),r.submenu=!0),r._parentMenu=i,r.addClass("menu-sub");var s=r.testMoveRel(e.getEl(),e.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);r.moveRel(e.getEl(),s),r.rel=s,s="menu-sub-"+s,r.removeClass(r._lastRel),r.addClass(s),r._lastRel=s,e.addClass("selected"),e.aria("expanded",!0)}},hideMenu:function(){var e=this;return e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide(),e.aria("expanded",!1)),e},renderHtml:function(){var e=this,t=e._id,r=e.settings,i=e.classPrefix,s=e.encode(e._text),o=e.settings.icon,u="",a=r.shortcut;return o&&e.parent().addClass("menu-has-icons"),r.image&&(o="none",u=" style=\"background-image: url('"+r.image+"')\""),a&&n.mac&&(a=a.replace(/ctrl\+alt\+/i,"&#x2325;&#x2318;"),a=a.replace(/ctrl\+/i,"&#x2318;"),a=a.replace(/alt\+/i,"&#x2325;"),a=a.replace(/shift\+/i,"&#x21E7;")),o=i+"ico "+i+"i-"+(e.settings.icon||"none"),'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1">'+("-"!==s?'<i class="'+o+'"'+u+"></i> ":"")+("-"!==s?'<span id="'+t+'-text" class="'+i+'text">'+s+"</span>":"")+(a?'<div id="'+t+'-shortcut" class="'+i+'menu-shortcut">'+a+"</div>":"")+(r.menu?'<div class="'+i+'caret"></div>':"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var r=e.getEl("text");r&&r.setAttribute("style",n)}return e.on("mouseenter click",function(n){n.control===e&&(t.menu||"click"!==n.type?(e.showMenu(),n.aria&&e.menu.focus(!0)):(e.fire("select"),e.parent().hideAll()))}),e._super(),e},active:function(e){return"undefined"!=typeof e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}})}),r(Zt,[rt,Yt,l],function(e,t,n){var r=e.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){var t=this;if(e.autohide=!0,e.constrainToViewport=!0,e.itemDefaults)for(var r=e.items,i=r.length;i--;)r[i]=n.extend({},e.itemDefaults,r[i]);t._super(e),t.addClass("menu")},repaint:function(){return this.toggleClass("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){var e=this;e.hideAll(),e.fire("select")},hideAll:function(){var e=this;return this.find("menuitem").exec("hideMenu"),e._super()},preRender:function(){var e=this;return e.items().each(function(t){var n=t.settings;return n.icon||n.selectable?(e._hasIcons=!0,!1):void 0}),e._super()}});return r}),r(en,[Lt],function(e){return e.extend({Defaults:{classes:"radio",role:"radio"}})}),r(tn,[Nt,Y],function(e,t){return e.extend({renderHtml:function(){var e=this,t=e.classPrefix;return e.addClass("resizehandle"),"both"==e.settings.direction&&e.addClass("resizehandle-both"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes()+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new t(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!=e.settings.direction&&(t.deltaX=0),e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}})}),r(nn,[Nt],function(e){return e.extend({renderHtml:function(){var e=this;return e.addClass("spacer"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes()+'"></div>'}})}),r(rn,[Qt,$],function(e,t){return e.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e=this,n=e.getEl(),r=e.layoutRect(),i,s;return e._super(),i=n.firstChild,s=n.lastChild,t.css(i,{width:r.w-t.getSize(s).width,height:r.h-2}),t.css(s,{height:r.h-2}),e},activeMenu:function(e){var n=this;t.toggleClass(n.getEl().lastChild,n.classPrefix+"active",e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"";return'<div id="'+t+'" class="'+e.classes()+'" role="button" tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(r?'<i class="'+r+'"></i>':"")+(e._text?(r?" ":"")+e._text:"")+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1">'+(e._menuBtnText?(r?" ":"")+e._menuBtnText:"")+' <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(e){var n=e.target;if(e.control==this)for(;n;){if(e.aria&&"down"!=e.aria.key||"BUTTON"==n.nodeName&&-1==n.className.indexOf("open"))return e.stopImmediatePropagation(),void t.call(this,e);n=n.parentNode}}),delete e.settings.onclick,e._super()}})}),r(sn,[zt],function(e){return e.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"}})}),r(on,[et,$],function(e,t){return e.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){var n;this.activeTabId&&(n=this.getEl(this.activeTabId),t.removeClass(n,this.classPrefix+"active"),n.setAttribute("aria-selected","false")),this.activeTabId="t"+e,n=this.getEl("t"+e),n.setAttribute("aria-selected","true"),t.addClass(n,this.classPrefix+"active"),this.items()[e].show().fire("showtab"),this.reflow(),this.items().each(function(t,n){e!=n&&t.hide()})},renderHtml:function(){var e=this,t=e._layout,n="",r=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each(function(t,i){var s=e._id+"-t"+i;t.aria("role","tabpanel"),t.aria("labelledby",s),n+='<div id="'+s+'" class="'+r+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+e.encode(t.settings.title)+"</div>"}),'<div id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1"><div id="'+e._id+'-head" class="'+r+'tabs" role="tablist">'+n+'</div><div id="'+e._id+'-body" class="'+e.classes("body")+'">'+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",function(t){var n=t.target.parentNode;if(t.target.parentNode.id==e._id+"-head")for(var r=n.childNodes.length;r--;)n.childNodes[r]==t.target&&e.activateTab(r)})},initLayoutRect:function(){var e=this,n,r,i;r=t.getSize(e.getEl("head")).width,r=0>r?0:r,i=0,e.items().each(function(e){r=Math.max(r,e.layoutRect().minW),i=Math.max(i,e.layoutRect().minH)}),e.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=r,e.settings.h=i,e.layoutRect({x:0,y:0,w:r,h:i})});var s=t.getSize(e.getEl("head")).height;return e.settings.minWidth=r,e.settings.minHeight=i+s,n=e._super(),n.deltaH+=s,n.innerH=n.h-n.deltaH,n}})}),r(un,[Nt,$],function(e,t){return e.extend({init:function(e){var t=this;t._super(e),t._value=e.value||"",t.addClass("textbox"),e.multiline?t.addClass("multiline"):t.on("keydown",function(e){13==e.keyCode&&t.parents().reverse().each(function(t){return e.preventDefault(),t.hasEventListeners("submit")&&t.toJSON?(t.fire("submit",{data:t.toJSON()}),!1):void 0})})},disabled:function(e){var t=this;return t._rendered&&"undefined"!=typeof e&&(t.getEl().disabled=e),t._super(e)},value:function(e){var t=this;return"undefined"!=typeof e?(t._value=e,t._rendered&&(t.getEl().value=e),t):t._rendered?t.getEl().value:t._value},repaint:function(){var e=this,t,n,r,i=0,s=0,o;t=e.getEl().style,n=e._layoutRect,o=e._lastRepaintRect||{};var u=document;return!e.settings.multiline&&u.all&&(!u.documentMode||u.documentMode<=8)&&(t.lineHeight=n.h-s+"px"),r=e._borderBox,i=r.left+r.right+8,s=r.top+r.bottom+(e.settings.multiline?8:0),n.x!==o.x&&(t.left=n.x+"px",o.x=n.x),n.y!==o.y&&(t.top=n.y+"px",o.y=n.y),n.w!==o.w&&(t.width=n.w-i+"px",o.w=n.w),n.h!==o.h&&(t.height=n.h-s+"px",o.h=n.h),e._lastRepaintRect=o,e.fire("repaint",{},!1),e},renderHtml:function(){var e=this,t=e._id,n=e.settings,r=e.encode(e._value,!1),i="";return"spellcheck"in n&&(i+=' spellcheck="'+n.spellcheck+'"'),n.maxLength&&(i+=' maxlength="'+n.maxLength+'"'),n.size&&(i+=' size="'+n.size+'"'),n.subtype&&(i+=' type="'+n.subtype+'"'),e.disabled()&&(i+=' disabled="disabled"'),n.multiline?'<textarea id="'+t+'" class="'+e.classes()+'" '+(n.rows?' rows="'+n.rows+'"':"")+' hidefocus="1"'+i+">"+r+"</textarea>":'<input id="'+t+'" class="'+e.classes()+'" value="'+r+'" hidefocus="1"'+i+" />"},postRender:function(){var e=this;return t.on(e.getEl(),"change",function(t){e.fire("change",t)}),e._super()},remove:function(){t.off(this.getEl()),this._super()}})}),r(an,[$,J],function(e,t){return function(n,r){var i=this,s,o=t.classPrefix;i.show=function(t){return i.hide(),s=!0,window.setTimeout(function(){s&&n.appendChild(e.createFragment('<div class="'+o+"throbber"+(r?" "+o+"throbber-inline":"")+'"></div>'))},t||0),i},i.hide=function(){var e=n.lastChild;return e&&-1!=e.className.indexOf("throbber")&&e.parentNode.removeChild(e),s=!1,i}}}),o([a,f,l,c,h,p,d,v,m,y,b,w,x,T,N,C,k,L,A,O,M,_,D,P,H,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut,at,ft,lt,ct,ht,pt,dt,vt,mt,gt,yt,bt,wt,Et,St,xt,Tt,Nt,Ct,kt,Lt,At,Ot,Mt,_t,Dt,Pt,Ht,Bt,jt,Ft,It,qt,Rt,Ut,zt,Wt,Xt,Vt,$t,Jt,Kt,Qt,Gt,Yt,Zt,en,tn,nn,rn,sn,on,un,an])}(this),define("tinymce",function(){}),define("jquery_tinymce",["jquery","tinymce"],function(e){!function(e){function t(){function t(e){"remove"===e&&this.each(function(e,t){var n=i(t);n&&n.remove()}),this.find("span.mceEditor,div.mceEditor").each(function(e,t){var n=tinymce.get(t.id.replace(/_parent$/,""));n&&n.remove()})}function r(e){var n,r=this;if(null!=e)t.call(r),r.each(function(t,n){var r;(r=tinymce.get(n.id))&&r.setContent(e)});else if(r.length>0&&(n=tinymce.get(r[0].id)))return n.getContent()}function i(e){var t=null;return e&&e.id&&s.tinymce&&(t=tinymce.get(e.id)),t}function o(e){return!!(e&&e.length&&s.tinymce&&e.is(":tinymce"))}var u={};e.each(["text","html","val"],function(t,s){var a=u[s]=e.fn[s],f="text"===s;e.fn[s]=function(t){var s=this;if(!o(s))return a.apply(s,arguments);if(t!==n)return r.call(s.filter(":tinymce"),t),a.apply(s.not(":tinymce"),arguments),s;var u="",l=arguments;return(f?s:s.eq(0)).each(function(t,n){var r=i(n);u+=r?f?r.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):r.getContent({save:!0}):a.apply(e(n),l)}),u}}),e.each(["append","prepend"],function(t,r){var s=u[r]=e.fn[r],a="prepend"===r;e.fn[r]=function(e){var t=this;return o(t)?e!==n?(t.filter(":tinymce").each(function(t,n){var r=i(n);r&&r.setContent(a?e+r.getContent():r.getContent()+e)}),s.apply(t.not(":tinymce"),arguments),t):void 0:s.apply(t,arguments)}}),e.each(["remove","replaceWith","replaceAll","empty"],function(n,r){var i=u[r]=e.fn[r];e.fn[r]=function(){return t.call(this,r),i.apply(this,arguments)}}),u.attr=e.fn.attr,e.fn.attr=function(t,s){var a=this,f=arguments;if(!t||"value"!==t||!o(a))return s!==n?u.attr.apply(a,f):u.attr.apply(a,f);if(s!==n)return r.call(a.filter(":tinymce"),s),u.attr.apply(a.not(":tinymce"),f),a;var l=a[0],h=i(l);return h?h.getContent({save:!0}):u.attr.apply(e(l),f)}}var n,r,i=[],s=window;e.fn.tinymce=function(n){function o(){var r=[],i=0;c||(t(),c=!0),h.each(function(e,t){var s,o=t.id,u=n.oninit;o||(t.id=o=tinymce.DOM.uniqueId()),tinymce.get(o)||(s=new tinymce.Editor(o,n,tinymce.EditorManager),r.push(s),s.on("init",function(){var e,t=u;h.css("visibility",""),u&&++i==r.length&&("string"==typeof t&&(e=-1===t.indexOf(".")?null:tinymce.resolve(t.replace(/\.\w+$/,"")),t=tinymce.resolve(t)),t.apply(e||tinymce,r))}))}),e.each(r,function(e,t){t.render()})}var u,f,l,c,h=this,p="";if(!h.length)return h;if(!n)return window.tinymce?tinymce.get(h[0].id):null;if(h.css("visibility","hidden"),s.tinymce||r||!(u=n.script_url))1===r?i.push(o):o();else{r=1,f=u.substring(0,u.lastIndexOf("/")),-1!=u.indexOf(".min")&&(p=".min"),s.tinymce=s.tinyMCEPreInit||{base:f,suffix:p},-1!=u.indexOf("gzip")&&(l=n.language||"en",u=u+(/\?/.test(u)?"&":"?")+"js=true&core=true&suffix="+escape(p)+"&themes="+escape(n.theme||"modern")+"&plugins="+escape(n.plugins||"")+"&languages="+(l||""),s.tinyMCE_GZ||(s.tinyMCE_GZ={start:function(){function t(e){tinymce.ScriptLoader.markDone(tinymce.baseURI.toAbsolute(e))}t("langs/"+l+".js"),t("themes/"+n.theme+"/theme"+p+".js"),t("themes/"+n.theme+"/langs/"+l+".js"),e.each(n.plugins.split(","),function(e,n){n&&(t("plugins/"+n+"/plugin"+p+".js"),t("plugins/"+n+"/langs/"+l+".js"))})},end:function(){}}));var d=document.createElement("script");d.type="text/javascript",d.onload=d.onreadystatechange=function(t){t=t||window.event,2===r||"load"!=t.type&&!/complete|loaded/.test(d.readyState)||(tinymce.dom.Event.domLoaded=1,r=2,n.script_loaded&&n.script_loaded(),o(),e.each(i,function(e,t){t()}))},d.src=u,document.body.appendChild(d)}return h},e.extend(e.expr[":"],{tinymce:function(e){return!!(e.id&&"tinymce"in window&&tinymce.get(e.id))}})}(e)}),define("modules/paragraphs",["jquery","helpers/toolbar","canTip","canToast","jquery_tinymce"],function(e,t){return{firstRun:function(e){var t="#ext_"+e+" .paragraphs";this.bind_tinymce(t)},init:function(){this.binder(),tinyMCE.baseURL=base_url+"files/js/app/plugins/tinymce",tinyMCE.suffix=".min",this.bind_tinymce(".paragraphs")},bind_tinymce:function(n){e(n).tinymce({inline:!0,language:"tr_TR",relative_urls:!1,remove_script_host:!1,convert_urls:!0,theme_advanced_resizing:!0,plugins:["hr textcolor autolink lists link image print anchor","searchreplace visualblocks code","media table contextmenu paste"],toolbar:"insertfile undo redo |  fontsizeselect styleselect | link unlink media imagebutton | bold underline italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | forecolor backcolor",setup:function(n){n.addButton("imagebutton",{title:"Fotograf Ekle",image:base_url+"files/js/app/plugins/tinymce/img/photo-icon.png",onclick:function(){t.photo_callback()}}),n.on("ObjectResized",function(t){var n=e(t.target).prop("tagName");if(n!="IMG")return!1;var r=e(t.target),i=r.attr("data-p_pic_id"),s=t.width,o=t.height,u=r.attr("src");e.post(base_url+"manage/paragraphs/resize",{site_id:site_id,p_pic_id:i,width:s,height:o},function(t){e.canToast(t);var n,i=(new Date).getTime(),s=u.split("?");s[0]?n=s[0]+"?"+i:n=u+"?"+i,r.attr("src",n)})})}})},binder:function(){var t=this;e("body").on("click",".paragraphs",function(){e(this).focus()}),e("body").on("focus",".paragraphs",function(){var n=e(this);e("#black_area").fadeIn();if(n.hasClass("editing"))return;var r=n.parent(),i=e("body")[0];e.data(i,"elementId",n.attr("id")),e("#black_area").one("click",function(){t.update()}),n.addClass("editing"),e("#black_area").fadeIn(),r.addClass("on"),e(this).find(".par_holder").remove()})},cancel:function(){e(".editing").each(function(){var t=e(this);t.html(e.data(t[0],"cache")),e.data(t[0],"cache","")}),this.restore()},update:function(){var t=e("#loading");e(".editing").each(function(){var n=e(this),r=n.attr("id");r=r.split("_"),r=r[1],n.find(".ui-resizable").resizable("destroy");var i=n.html();t.show(),e.post(base_url+"manage/paragraphs/set_html",{site_id:site_id,page_id:page_id,paragraph_id:r,html:i},function(r){var i=e.parseJSON(r);e.canToast(i.info),n.html(i.content),t.hide()})}),this.restore()},restore:function(){var t=e(".editing"),n=t.parent();t.removeClass("editing"),e("#black_area").fadeOut(),n.removeClass("on"),n.parent().find(".ext_bar").slideUp()}}}),define("modules/blog",["jquery","helpers/toolbar","jquery_tinymce"],function(e,t){return{firstRun:function(t){var n=e("#ext_"+t).find(".blog_cloud");cloud_id=n.data("blog-cloud-id"),this.open_edit_blog_form(cloud_id)},init:function(){var t=this;this.bind_delete(),this.bind_edit(),this.bind_hover(),e(".blogEditBut").canTip({html:"Blog ayarlarını güncellemek için tıklayın."}),e("body").on("click",".blogEditBut",function(){var n=e(this),r=e("#loading"),i=n.parent().next().children(":first").data("blog-cloud-id");return t.open_edit_blog_form(i),!1}),e("body").on("click",".add-post",function(){var n=e(this).parent().parent();return t.open_form(n),!1})},add_blog:function(){var t=e("#blog-name").val(),n=e("#btn-add-blog");if(t=="")return e.canToast('<div class="error">Lütfen blog için bir isim girin.</div>'),!1;n.attr("disabled","disabled"),e.post(base_url+"manage/blog/add_blog",{site_id:site_id,name:t,prefix:prefix},function(t){e("#blog-list").html(t),e.canToast('<div class="success">Yeni blog başarılı bir şekilde eklendi'),e("#blog-name").val(""),n.removeAttr("disabled")})},bind_add_blog:function(){var t=this;e("#btn-add-blog").click(function(){return t.add_blog(),!1}),e("#blog-name").keypress(function(e){if(e.keyCode==10||e.keyCode==13)t.add_blog(),e.preventDefault()})},bind_remove_blog:function(){e("#btn-delete-blog").click(function(){var t=e("#editCloudForm").find("[name=blog_cloud_id]").val(),n=e("#blogCloud_"+t).data("blog-id"),r=e("#blog-list").find("select").val();if(n==r)return e.canToast('<div class="error">İçinde bulunduğunuz blog\'u silemezsiniz.</div>'),!1;var i=confirm("Bu blogu silerseniz bağlı olan tüm yazılar da silinecektir. Silmek istiyor musunuz?");return i==0?!1:(e.post(base_url+"manage/blog/remove_blog",{site_id:site_id,blog_id:r,prefix:prefix},function(t){var n=e.parseJSON(t);n.statu=="success"?(e("#blog-list").html(n.dropdown),e.canToast('<div class="success">Blog başarılı bir şekilde silindi.</div>')):e.canToast(n.error_text)}),!1)})},open_edit_blog_form:function(t){var n=e("#loading"),r=this;n.show(),e.post(base_url+"manage/blog/edit_cloud",{site_id:site_id,blog_cloud_id:t,prefix:prefix},function(t){n.hide(),e("#modal").html(t).children(":first-child").modal(),r.bind_edit_cloud(),r.bind_remove_blog(),r.bind_add_blog()})},open_form:function(t){var n=this,r=e("#loading"),i=t.data("blog-cloud-id"),s=t.data("blog-id");return r.show(),e.post(base_url+"manage/blog/add",{site_id:site_id,cloud_id:i,blog_id:s},function(e){r.hide(),n.append_blog(e),n.bind_tinymce(),n.bind_post(i)}),!1},bind_edit_cloud:function(){e("#editCloudForm").submit(function(){var t=e(this),n=t.find("[type=submit]"),r=t.find("[name=blog_cloud_id]").val(),i=t.find("[name=blog_id]").val(),s=t.serialize();return e.post(base_url+"manage/blog/update_cloud",s,function(n){e.canToast('<div class="success"> Blog ayarları başarılı bir şekilde güncellenmiştir.</div>'),e("#blogCloud_"+r).html(n),e("#blogCloud_"+r).data("blog-id",i),t.modal("hide")}),!1})},bind_hover:function(){e("body").on("mouseenter",".post",function(){e(this).find(".btn-blog-group").fadeIn()}),e("body").on("mouseleave",".post",function(){e(this).find(".btn-blog-group").fadeOut()})},bind_edit_submit:function(t){e("#add-post").submit(function(){var n=e("#loading"),r=e(this).serialize();return e("#loading").show(),e("#blog-submit").attr("disabled","disabled"),e.post(base_url+"manage/blog/update",r,function(n){e("#loading").hide(),e("#blog-submit").removeAttr("disabled"),e.canToast('<div class="success">Blog yazınız başarılı bir şekilde güncellendi.</div>'),e("#blogCloud_"+t).html(n)}),!1})},bind_post:function(t){e("#add-post").submit(function(){var n=e("#loading"),r=e(this).serialize();return e("#loading").show(),e("#blog-submit").attr("disabled","disabled"),e.post(base_url+"manage/blog/post",r,function(n){e("#loading").hide(),e("#blog-submit").removeAttr("disabled"),e("#post-title").val(""),e("#post-content").val(""),e.canToast('<div class="success">Yeni blog yazınız başarılı bir şekilde eklendi.</div>'),e("#blogCloud_"+t).html(n)}),!1})},bind_delete:function(){var t=this;e("body").on("click",".delete-post",function(){var t=confirm("Bu blog yazısını gerçekten silmek istiyor musunuz?");if(t==0)return!1;var n=e(this).parent().parent().parent(),r=e("#loading"),i=n.data("blog-cloud-id"),s=n.data("blog-id"),o=e(this).data("post-id");return r.show(),e.post(base_url+"manage/blog/delete",{site_id:site_id,blog_cloud_id:i,blog_id:s,post_id:o},function(t){r.hide(),e.canToast('<div class="success">Seçtiğiniz yazı başarılı bir şekilde silindi.</div>'),e("#blogCloud_"+i).html(t)}),!1})},bind_edit:function(){var t=this;e("body").on("click",".edit-post",function(){var n=e(this).parent().parent().parent(),r=e("#loading"),i=n.data("blog-cloud-id"),s=n.data("blog-id"),o=e(this).data("post-id");return r.show(),e.post(base_url+"manage/blog/edit",{site_id:site_id,cloud_id:i,blog_id:s,post_id:o},function(e){r.hide(),t.append_blog(e),t.bind_edit_submit(i),t.bind_tinymce()}),!1})},append_blog:function(t){var n=this,r=e(document).width();e("body").append('<div id="blog-container" style="left:'+r+'px">'+t+"</div>"),e("#blog-container").animate({left:"0px"},500),e("#but-editor").removeClass("active"),e("#but-blog").show(),e("#but-editor, #cancel-post").click(function(){return n.close_editor(),!1})},close_editor:function(){var t=e(document).width();return e("#blog-container").animate({left:t+"px"},500,function(){e("#blog-container").remove()}),e("#but-editor").unbind("click"),e("#but-editor").addClass("active"),e("#but-blog").hide(),e("#post-content").tinymce().remove(),!1},bind_tinymce:function(){var n=this;e("#post-content").tinymce({language:"tr_TR",height:200,relative_urls:!1,remove_script_host:!1,convert_urls:!0,theme_advanced_resizing:!0,plugins:["fullscreen wordcount hr textcolor autolink lists link image print anchor","searchreplace visualblocks code","media table contextmenu paste"],toolbar:"fullscreen fontsizeselect styleselect | bullist, numlist | link unlink imagebutton | bold underline italic | alignleft aligncenter alignright alignjustify |  outdent indent | forecolor read_more",setup:function(n){n.addButton("imagebutton",{title:"Fotograf Ekle",image:base_url+"files/js/app/plugins/tinymce/img/photo-icon.png",onclick:function(){t.blog_photo_callback()}}),n.addButton("read_more",{title:"Devamını Oku Ekle",image:base_url+"files/js/app/plugins/tinymce/img/more-icon.png",onclick:function(){var e='<img class="read_more" src="'+base_url+'files/js/app/plugins/tinymce/img/read-more.png" data-mce-resize="false" data-mce-placeholder="1"/>';tinyMCE.execCommand("mceInsertContent",!1,e)}}),n.on("ObjectResized",function(t){var n=e(t.target).prop("tagName");if(n!="IMG")return!1;var r=e(t.target),i=r.attr("data-blog_pic_id"),s=t.width,o=t.height,u=r.attr("src");e.post(base_url+"manage/blog/resize",{site_id:site_id,blog_pic_id:i,width:s,height:o},function(t){e.canToast(t);var n,i=(new Date).getTime(),s=u.split("?");s[0]?n=s[0]+"?"+i:n=u+"?"+i,r.attr("src",n)})})}})}}});var SWFUpload;SWFUpload==undefined&&(SWFUpload=function(e){this.initSWFUpload(e)}),SWFUpload.prototype.initSWFUpload=function(e){try{this.customSettings={},this.settings=e,this.eventQueue=[],this.movieName="SWFUpload_"+SWFUpload.movieCount++,this.movieElement=null,SWFUpload.instances[this.movieName]=this,this.initSettings(),this.loadFlash(),this.displayDebugInfo()}catch(t){throw delete SWFUpload.instances[this.movieName],t}},SWFUpload.instances={},SWFUpload.movieCount=0,SWFUpload.version="2.2.0 2009-03-25",SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130},SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290},SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5},SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120},SWFUpload.CURSOR={ARROW:-1,HAND:-2},SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"},SWFUpload.completeURL=function(e){if(typeof e!="string"||e.match(/^https?:\/\//i)||e.match(/^\//))return e;var t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),n=window.location.pathname.lastIndexOf("/");return n<=0?path="/":path=window.location.pathname.substr(0,n)+"/",path+e},SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(e,t){this.settings[e]=this.settings[e]==undefined?t:this.settings[e]},this.ensureDefault("upload_url",""),this.ensureDefault("preserve_relative_urls",!1),this.ensureDefault("file_post_name","Filedata"),this.ensureDefault("post_params",{}),this.ensureDefault("use_query_string",!1),this.ensureDefault("requeue_on_error",!1),this.ensureDefault("http_success",[]),this.ensureDefault("assume_success_timeout",0),this.ensureDefault("file_types","*.*"),this.ensureDefault("file_types_description","All Files"),this.ensureDefault("file_size_limit",0),this.ensureDefault("file_upload_limit",0),this.ensureDefault("file_queue_limit",0),this.ensureDefault("flash_url","swfupload.swf"),this.ensureDefault("prevent_swf_caching",!0),this.ensureDefault("button_image_url",""),this.ensureDefault("button_width",1),this.ensureDefault("button_height",1),this.ensureDefault("button_text",""),this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;"),this.ensureDefault("button_text_top_padding",0),this.ensureDefault("button_text_left_padding",0),this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES),this.ensureDefault("button_disabled",!1),this.ensureDefault("button_placeholder_id",""),this.ensureDefault("button_placeholder",null),this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW),this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW),this.ensureDefault("debug",!1),this.settings.debug_enabled=this.settings.debug,this.settings.return_upload_start_handler=this.returnUploadStart,this.ensureDefault("swfupload_loaded_handler",null),this.ensureDefault("file_dialog_start_handler",null),this.ensureDefault("file_queued_handler",null),this.ensureDefault("file_queue_error_handler",null),this.ensureDefault("file_dialog_complete_handler",null),this.ensureDefault("upload_start_handler",null),this.ensureDefault("upload_progress_handler",null),this.ensureDefault("upload_error_handler",null),this.ensureDefault("upload_success_handler",null),this.ensureDefault("upload_complete_handler",null),this.ensureDefault("debug_handler",this.debugMessage),this.ensureDefault("custom_settings",{}),this.customSettings=this.settings.custom_settings,!this.settings.prevent_swf_caching||(this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+(new Date).getTime()),this.settings.preserve_relative_urls||(this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url),this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)),delete this.ensureDefault},SWFUpload.prototype.loadFlash=function(){var e,t;if(document.getElementById(this.movieName)!==null)throw"ID "+this.movieName+" is already in use. The Flash Object could not be added";e=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(e==undefined)throw"Could not find the placeholder element: "+this.settings.button_placeholder_id;t=document.createElement("div"),t.innerHTML=this.getFlashHTML(),e.parentNode.replaceChild(t.firstChild,e),window[this.movieName]==undefined&&(window[this.movieName]=this.getMovieElement())},SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")},SWFUpload.prototype.getFlashVars=function(){var e=this.buildParamString(),t=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(t),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(e),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")},SWFUpload.prototype.getMovieElement=function(){this.movieElement==undefined&&(this.movieElement=document.getElementById(this.movieName));if(this.movieElement===null)throw"Could not find Flash element";return this.movieElement},SWFUpload.prototype.buildParamString=function(){var e=this.settings.post_params,t=[];if(typeof e=="object")for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n.toString())+"="+encodeURIComponent(e[n].toString()));return t.join("&amp;")},SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,!1);var e=null;e=this.getMovieElement();if(e&&typeof e.CallFunction=="unknown"){for(var t in e)try{typeof e[t]=="function"&&(e[t]=null)}catch(n){}try{e.parentNode.removeChild(e)}catch(r){}}return window[this.movieName]=null,SWFUpload.instances[this.movieName]=null,delete SWFUpload.instances[this.movieName],this.movieElement=null,this.settings=null,this.customSettings=null,this.eventQueue=null,this.movieName=null,!0}catch(i){return!1}},SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","	","upload_url:               ",this.settings.upload_url,"\n","	","flash_url:                ",this.settings.flash_url,"\n","	","use_query_string:         ",this.settings.use_query_string.toString(),"\n","	","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","	","http_success:             ",this.settings.http_success.join(", "),"\n","	","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","	","file_post_name:           ",this.settings.file_post_name,"\n","	","post_params:              ",this.settings.post_params.toString(),"\n","	","file_types:               ",this.settings.file_types,"\n","	","file_types_description:   ",this.settings.file_types_description,"\n","	","file_size_limit:          ",this.settings.file_size_limit,"\n","	","file_upload_limit:        ",this.settings.file_upload_limit,"\n","	","file_queue_limit:         ",this.settings.file_queue_limit,"\n","	","debug:                    ",this.settings.debug.toString(),"\n","	","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","	","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","	","button_placeholder:       ",this.settings.button_placeholder?"Set":"Not Set","\n","	","button_image_url:         ",this.settings.button_image_url.toString(),"\n","	","button_width:             ",this.settings.button_width.toString(),"\n","	","button_height:            ",this.settings.button_height.toString(),"\n","	","button_text:              ",this.settings.button_text.toString(),"\n","	","button_text_style:        ",this.settings.button_text_style.toString(),"\n","	","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","	","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","	","button_action:            ",this.settings.button_action.toString(),"\n","	","button_disabled:          ",this.settings.button_disabled.toString(),"\n","	","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","	","swfupload_loaded_handler assigned:  ",(typeof this.settings.swfupload_loaded_handler=="function").toString(),"\n","	","file_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler=="function").toString(),"\n","	","file_queued_handler assigned:       ",(typeof this.settings.file_queued_handler=="function").toString(),"\n","	","file_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler=="function").toString(),"\n","	","upload_start_handler assigned:      ",(typeof this.settings.upload_start_handler=="function").toString(),"\n","	","upload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler=="function").toString(),"\n","	","upload_error_handler assigned:      ",(typeof this.settings.upload_error_handler=="function").toString(),"\n","	","upload_success_handler assigned:    ",(typeof this.settings.upload_success_handler=="function").toString(),"\n","	","upload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler=="function").toString(),"\n","	","debug_handler assigned:             ",(typeof this.settings.debug_handler=="function").toString(),"\n"].join(""))},SWFUpload.prototype.addSetting=function(e,t,n){return t==undefined?this.settings[e]=n:this.settings[e]=t},SWFUpload.prototype.getSetting=function(e){return this.settings[e]!=undefined?this.settings[e]:""},SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement(),returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>"),returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}return returnValue!=undefined&&typeof returnValue.post=="object"&&(returnValue=this.unescapeFilePostParams(returnValue)),returnValue},SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")},SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")},SWFUpload.prototype.startUpload=function(e){this.callFlash("StartUpload",[e])},SWFUpload.prototype.cancelUpload=function(e,t){t!==!1&&(t=!0),this.callFlash("CancelUpload",[e,t])},SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")},SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")},SWFUpload.prototype.setStats=function(e){this.callFlash("SetStats",[e])},SWFUpload.prototype.getFile=function(e){return typeof e=="number"?this.callFlash("GetFileByIndex",[e]):this.callFlash("GetFile",[e])},SWFUpload.prototype.addFileParam=function(e,t,n){return this.callFlash("AddFileParam",[e,t,n])},SWFUpload.prototype.removeFileParam=function(e,t){this.callFlash("RemoveFileParam",[e,t])},SWFUpload.prototype.setUploadURL=function(e){this.settings.upload_url=e.toString(),this.callFlash("SetUploadURL",[e])},SWFUpload.prototype.setPostParams=function(e){this.settings.post_params=e,this.callFlash("SetPostParams",[e])},SWFUpload.prototype.addPostParam=function(e,t){this.settings.post_params[e]=t,this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.removePostParam=function(e){delete this.settings.post_params[e],this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.setFileTypes=function(e,t){this.settings.file_types=e,this.settings.file_types_description=t,this.callFlash("SetFileTypes",[e,t])},SWFUpload.prototype.setFileSizeLimit=function(e){this.settings.file_size_limit=e,this.callFlash("SetFileSizeLimit",[e])},SWFUpload.prototype.setFileUploadLimit=function(e){this.settings.file_upload_limit=e,this.callFlash("SetFileUploadLimit",[e])},SWFUpload.prototype.setFileQueueLimit=function(e){this.settings.file_queue_limit=e,this.callFlash("SetFileQueueLimit",[e])},SWFUpload.prototype.setFilePostName=function(e){this.settings.file_post_name=e,this.callFlash("SetFilePostName",[e])},SWFUpload.prototype.setUseQueryString=function(e){this.settings.use_query_string=e,this.callFlash("SetUseQueryString",[e])},SWFUpload.prototype.setRequeueOnError=function(e){this.settings.requeue_on_error=e,this.callFlash("SetRequeueOnError",[e])},SWFUpload.prototype.setHTTPSuccess=function(e){typeof e=="string"&&(e=e.replace(" ","").split(",")),this.settings.http_success=e,this.callFlash("SetHTTPSuccess",[e])},SWFUpload.prototype.setAssumeSuccessTimeout=function(e){this.settings.assume_success_timeout=e,this.callFlash("SetAssumeSuccessTimeout",[e])},SWFUpload.prototype.setDebugEnabled=function(e){this.settings.debug_enabled=e,this.callFlash("SetDebugEnabled",[e])},SWFUpload.prototype.setButtonImageURL=function(e){e==undefined&&(e=""),this.settings.button_image_url=e,this.callFlash("SetButtonImageURL",[e])},SWFUpload.prototype.setButtonDimensions=function(e,t){this.settings.button_width=e,this.settings.button_height=t;var n=this.getMovieElement();n!=undefined&&(n.style.width=e+"px",n.style.height=t+"px"),this.callFlash("SetButtonDimensions",[e,t])},SWFUpload.prototype.setButtonText=function(e){this.settings.button_text=e,this.callFlash("SetButtonText",[e])},SWFUpload.prototype.setButtonTextPadding=function(e,t){this.settings.button_text_top_padding=t,this.settings.button_text_left_padding=e,this.callFlash("SetButtonTextPadding",[e,t])},SWFUpload.prototype.setButtonTextStyle=function(e){this.settings.button_text_style=e,this.callFlash("SetButtonTextStyle",[e])},SWFUpload.prototype.setButtonDisabled=function(e){this.settings.button_disabled=e,this.callFlash("SetButtonDisabled",[e])},SWFUpload.prototype.setButtonAction=function(e){this.settings.button_action=e,this.callFlash("SetButtonAction",[e])},SWFUpload.prototype.setButtonCursor=function(e){this.settings.button_cursor=e,this.callFlash("SetButtonCursor",[e])},SWFUpload.prototype.queueEvent=function(e,t){t==undefined?t=[]:t instanceof Array||(t=[t]);var n=this;if(typeof this.settings[e]=="function")this.eventQueue.push(function(){this.settings[e].apply(this,t)}),setTimeout(function(){n.executeNextEvent()},0);else if(this.settings[e]!==null)throw"Event handler "+e+" is unknown or is not a function"},SWFUpload.prototype.executeNextEvent=function(){var e=this.eventQueue?this.eventQueue.shift():null;typeof e=="function"&&e.apply(this)},SWFUpload.prototype.unescapeFilePostParams=function(e){var t=/[$]([0-9a-f]{4})/i,n={},r;if(e!=undefined){for(var i in e.post)if(e.post.hasOwnProperty(i)){r=i;var s;while((s=t.exec(r))!==null)r=r.replace(s[0],String.fromCharCode(parseInt("0x"+s[1],16)));n[r]=e.post[i]}e.post=n}return e},SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(e){return!1}},SWFUpload.prototype.flashReady=function(){var e=this.getMovieElement();if(!e){this.debug("Flash called back ready but the flash movie can't be found.");return}this.cleanUp(e),this.queueEvent("swfupload_loaded_handler")},SWFUpload.prototype.cleanUp=function(e){try{if(this.movieElement&&typeof e.CallFunction=="unknown"){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var t in e)try{typeof e[t]=="function"&&(e[t]=null)}catch(n){}}}catch(r){}window.__flash__removeCallback=function(e,t){try{e&&(e[t]=null)}catch(n){}}},SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")},SWFUpload.prototype.fileQueued=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("file_queued_handler",e)},SWFUpload.prototype.fileQueueError=function(e,t,n){e=this.unescapeFilePostParams(e),this.queueEvent("file_queue_error_handler",[e,t,n])},SWFUpload.prototype.fileDialogComplete=function(e,t,n){this.queueEvent("file_dialog_complete_handler",[e,t,n])},SWFUpload.prototype.uploadStart=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("return_upload_start_handler",e)},SWFUpload.prototype.returnUploadStart=function(e){var t;if(typeof this.settings.upload_start_handler=="function")e=this.unescapeFilePostParams(e),t=this.settings.upload_start_handler.call(this,e);else if(this.settings.upload_start_handler!=undefined)throw"upload_start_handler must be a function";t===undefined&&(t=!0),t=!!t,this.callFlash("ReturnUploadStart",[t])},SWFUpload.prototype.uploadProgress=function(e,t,n){e=this.unescapeFilePostParams(e),this.queueEvent("upload_progress_handler",[e,t,n])},SWFUpload.prototype.uploadError=function(e,t,n){e=this.unescapeFilePostParams(e),this.queueEvent("upload_error_handler",[e,t,n])},SWFUpload.prototype.uploadSuccess=function(e,t,n){e=this.unescapeFilePostParams(e),this.queueEvent("upload_success_handler",[e,t,n])},SWFUpload.prototype.uploadComplete=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("upload_complete_handler",e)},SWFUpload.prototype.debug=function(e){this.queueEvent("debug_handler",e)},SWFUpload.prototype.debugMessage=function(e){if(this.settings.debug){var t,n=[];if(typeof e=="object"&&typeof e.name=="string"&&typeof e.message=="string"){for(var r in e)e.hasOwnProperty(r)&&n.push(r+": "+e[r]);t=n.join("\n")||"",n=t.split("\n"),t="EXCEPTION: "+n.join("\nEXCEPTION: "),SWFUpload.Console.writeLine(t)}else SWFUpload.Console.writeLine(e)}},SWFUpload.Console={},SWFUpload.Console.writeLine=function(e){var t,n;try{t=document.getElementById("SWFUpload_Console"),t||(n=document.createElement("form"),document.getElementsByTagName("body")[0].appendChild(n),t=document.createElement("textarea"),t.id="SWFUpload_Console",t.style.fontFamily="monospace",t.setAttribute("wrap","off"),t.wrap="off",t.style.overflow="auto",t.style.width="700px",t.style.height="350px",t.style.margin="5px",n.appendChild(t)),t.value+=e+"\n",t.scrollTop=t.scrollHeight-t.clientHeight}catch(r){alert("Exception: "+r.name+" Message: "+r.message)}},define("swfupload",function(){}),define("plugins/jquery.swfupload",["jquery","swfupload"],function(e){(function(e){var t=["swfupload_loaded_handler","file_queued_handler","file_queue_error_handler","file_dialog_start_handler","file_dialog_complete_handler","upload_start_handler","upload_progress_handler","upload_error_handler","upload_success_handler","upload_complete_handler","queue_complete_handler"],n=[];e.fn.swfupload=function(){var r=e.makeArray(arguments);return this.each(function(){var i;if(r.length==1&&typeof r[0]=="object"){i=e(this).data("__swfu");if(!i){var s=r[0],o=e(this),u=[];e.merge(u,t),e.merge(u,n),e.each(u,function(t,n){var r=n.replace(/_handler$/,"").replace(/_([a-z])/g,function(){return arguments[1].toUpperCase()});s[n]=function(){var t=e.Event(r);return o.trigger(t,e.makeArray(arguments)),!t.isDefaultPrevented()}}),e(this).data("__swfu",new SWFUpload(s))}}else if(r.length>0&&typeof r[0]=="string"){var a=r.shift();i=e(this).data("__swfu"),i&&i[a]&&i[a].apply(i,r)}})},e.swfupload={additionalHandlers:function(){if(arguments.length===0)return n.slice();e(arguments).each(function(t,r){e.merge(n,e.makeArray(r))})},defaultHandlers:function(){return t.slice()},getInstance:function(t){return e(t).data("__swfu")}}})(e)}),define("helpers/files",["i18n!nls/photos.lang","plugins/jquery.swfupload"],function(e){return{multi:!0,init:function(){var e=this;$(".remove-document").canTip({html:"Dökümanı silmek için tıklayın."}),$("body").on("click",".remove-document",function(){var t=$(this).data("id"),n=$("#file_"+t),r=confirm("Bu dökümanı gerçekten silmek istiyor musunuz?");r==1&&e.del(n)}),$("body").on("focus",".rename-document",function(){var t=$(this);$("body").on("click.rename",function(n){var r=$(n.target);if(r.is(t))return!1;e.rename(t)})}),$("body").on("keydown",".rename-document",function(t){var n=t.keyCode?t.keyCode:t.which;if(n=="13")return e.rename($(this)),$(this).blur(),t.preventDefault(),!1}),$("body").on("click",".select-document",function(){var t=$(this);return t.hasClass("btn-success")?(t.removeClass("btn-success"),t.parent().parent().removeClass("success")):(e.reset_active(),t.addClass("btn-success"),t.parent().parent().addClass("success")),e.active_but(),!1})},rename:function(e){var t=e.data("id"),n=e.html(),r=base_url+"manage/files/rename";$.post(r,{site_id:site_id,file_id:t,name:n},function(e){$.canToast('<div class="success">Döküman adı başarılı bir şekilde güncellendi.</div>')}),$("body").off("click.rename")},active_but:function(){var e=$("#documentTable").find(".btn-success");e.length<1?$("#addDocumentBut").attr("disabled","disabled"):$("#addDocumentBut").removeAttr("disabled")},reset_active:function(){$("#documentTable").find(".success").removeClass("success"),$("#documentTable").find(".btn-success").removeClass("btn-success")},del:function(e){var t=e.attr("id"),n=this;t=t.split("_"),t=t[1],$.post(base_url+"manage/files/remove",{site_id:site_id,file_id:t},function(t){$.canToast(t),e.fadeOut("fast",function(){$(this).remove(),n.active_but()})})},add:function(e){e=typeof e!="undefined"?e:1,this.multi=e;var t=this,n=$("#loading");n.show(),$.ajax({url:base_url+"manage/files/add",type:"POST",async:!1,data:{site_id:site_id},success:function(e){$("#modal").html(e).children(":first-child").modal(),t.uploader(),n.hide()}})},get_selected_id:function(){var e=this,t=$("#documentTable").find(".btn-success");if(t.length<1)return!1;var n=t.data("id");return n},uploader:function(){var t=this;$("#swfupload-control").swfupload({upload_url:base_url+"manage/upload/upload_document",file_size_limit:"20240",file_types:"*.txt; .pdf; *.doc; *.docx; *.xls; *.odt; *.odp; *.ods; *.ppt; *.TXT; *.PDF; *.DOC; *.DOCX, *.XLS, *.ODT; *.ODP; *.ODS; *.PPT",file_types_description:"txt, pdf, doc, docx, xls, odt veya odp formatında dosyalar",file_upload_limit:"0",flash_url:base_url+"files/js/app/plugins/swfupload/swfupload.swf",button_image_url:base_url+"files/js/app/plugins/swfupload/upload-document.png",button_window_mode:"transparent",button_width:180,button_height:40,button_placeholder:$("#button")[0],debug:!1,post_params:{token:$("#token").val(),_token:_token}}).bind("swfuploadLoaded",function(e){$("#swfupload-control").animate({marginLeft:"+=1px"},500)}).bind("fileQueued",function(e,t){$(this).swfupload("startUpload")}).bind("fileQueueError",function(e,t,n,r){}).bind("fileDialogStart",function(e){}).bind("fileDialogComplete",function(e,t,n){}).bind("uploadStart",function(e,t){$("#swfupload-control").after('<div class="progress-bar"><div></div></div>')}).bind("uploadProgress",function(e,t,n,r){var i=100*n/r;i=Math.round(i),$(".progress-bar div").animate({width:i+"%"},{duration:500,queue:!1}).html(i+"%")}).bind("uploadSuccess",function(n,r,i){t.reset_active(),$(".progress-bar").remove();if(i=="storage_limit_error")return $.canToast('<div class="error">Dosya yükleme limiti aşıldı. Lütfen bazı dosyaları silip tekrar deneyiniz.</div>'),!1;$.canToast('<div class="success">'+e.info_success_upload+" {"+r.name+"}</div>");var s=$(i);s.hide(),$(".table-files").prepend(s),s.fadeIn("slow"),t.active_but()}).bind("uploadComplete",function(e,t){$(this).swfupload("startUpload")}).bind("uploadError",function(t,n,r,i){$(".progress-bar").remove(),$.canToast('<div class="error">'+e.info_error_upload+"</div>")})},id_splitter:function(e){return e=e.split("_"),e=e[1],e}}}),define("modules/documents",["jquery","helpers/files","bootstrap","canTip","canToast"],function(e,t){return{firstRun:function(n){var r=e("#ext_"+n).find(".documents").attr("id");r=t.id_splitter(r),t.add(0),this.bind_form(r)},init:function(){var n=this;t.init(),e(".documentEditBut").canTip({html:"Döküman eklemek için tıklayın."}),e(".rename-document").canTip({html:"Dökümanın adını değiştirmek için tıklayın."}),e("body").on("click",".documentEditBut",function(){t.add(0);var r=e(this).parent().parent().find(".documents").attr("id");r=t.id_splitter(r),n.bind_form(r)})},bind_form:function(n){e("#documentForm").submit(function(){var r=t.get_selected_id(),i=base_url+"manage/documents/update";return e.post(i,{site_id:site_id,document_id:n,file_id:r},function(t){e("#documentForm").modal("hide"),e("#document_"+n).html(t)}),!1})}}}),define("helpers/loader",["modules/htmls","modules/photo_cloud","modules/slider_cloud","modules/maps","modules/menus","modules/paragraphs","modules/blog","modules/documents"],function(e,t,n,r,i,s,o,u){return{canCallback:function(a,f){switch(a){case"htmls":e.firstRun(f);break;case"photo_cloud":t.firstRun(f);break;case"slider_cloud":n.firstRun(f);break;case"maps":r.firstRun(f);break;case"menu":i.firstRun(f);break;case"paragraphs":s.firstRun(f);break;case"blog_cloud":o.firstRun(f);break;case"documents":u.firstRun(f);break;default:}}}}),define("plugins/jquery.ui.resizeme",["jquery","jqueryui"],function(e){(function(e){e.widget("ui.resizeMe",e.ui.mouse,{options:{starX:null,element:null,nextElement:null,elWidth:null,nextWidth:null,maxSize:null},_create:function(){this._mouseInit()},_mouseStart:function(t){var n=this.options;n.startX=t.pageX,e("body").css("cursor","e-resize"),e("#black_area").fadeIn(),e("#middle").css("z-index","102"),n.element=this.element.prev(),n.nextElement=this.element.next(),n.elWidth=n.element.width(),n.nextWidth=n.nextElement.width(),n.maxSize=n.elWidth+n.nextWidth-100},_mouseDrag:function(e){var t=this.options,n=e.pageX-t.startX,r=t.elWidth+n;t.maxSize>r&&r>100?(t.element.removeClass("minLimit"),t.nextElement.removeClass("minLimit"),t.nextElement.hasClass("empty")&&t.nextElement.css("display","table-cell"),t.element.css("width",r),t.nextElement.css("width",t.nextWidth-n)):r>t.maxSize&&t.nextElement.hasClass("empty")?(t.element.css("width",t.maxSize+100),t.nextElement.css({width:0,display:"none"})):r>t.maxSize?(t.element.css("width",t.maxSize),t.nextElement.css("width",100),t.nextElement.addClass("minLimit")):r<50&&(t.element.css("width",100),t.nextElement.css("width",t.maxSize),t.element.addClass("minLimit"))},_mouseStop:function(){var t=this.options;t.element.removeClass("minLimit"),t.nextElement.removeClass("minLimit"),e("body").css("cursor","auto"),e("#black_area").fadeOut(),e("#middle").css("z-index","auto");var n="";t.element.parent().children().each(function(){if(!e(this).hasClass("dividerTd")&&!e(this).hasClass("empty")){var t=e(this).attr("id"),r=t.split("_");t=r[1],n+="width["+t+"]"+"="+e(this).width()+"&"}});var r=e("#loading");r.show(),e.ajax({type:"post",data:n+"site_id="+site_id,url:base_url+"manage/grids/set_width",success:function(t){e.canToast(t),r.hide()}})},destroy:function(){}})})(e)}),define("plugins/jquery.ui.touch-punch",["jquery","jqueryui"],function(e){(function(e){function s(e,t){if(e.originalEvent.touches.length>1)return;e.preventDefault();var n=e.originalEvent.changedTouches[0],r=document.createEvent("MouseEvents");r.initMouseEvent(t,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(r)}e.support.touch="ontouchend"in document;if(!e.support.touch)return;var t=e.ui.mouse.prototype,n=t._mouseInit,r=t._mouseDestroy,i;t._touchStart=function(e){var t=this;if(i||!t._mouseCapture(e.originalEvent.changedTouches[0]))return;i=!0,t._touchMoved=!1,s(e,"mouseover"),s(e,"mousemove"),s(e,"mousedown")},t._touchMove=function(e){if(!i)return;this._touchMoved=!0,s(e,"mousemove")},t._touchEnd=function(e){if(!i)return;s(e,"mouseup"),s(e,"mouseout"),this._touchMoved||s(e,"click"),i=!1},t._mouseInit=function(){var t=this;t.element.bind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),n.call(t)},t._mouseDestroy=function(){var t=this;t.element.unbind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),r.call(t)}})(e)}),define("modules/grids",["jquery","i18n!nls/grids.lang","helpers/loader","jqueryui","plugins/jquery.ui.resizeme","canTip","canToast","plugins/jquery.ui.touch-punch"],function(e,t,n){return{extBar:function(){e("body").on("mouseenter",".ext",function(){clearTimeout(e(this).data("timeout"));var t=e(this).find(".ext_bar"),n=setTimeout(function(){t.slideDown()},300);e(this).data("timeout",n)}),e("body").on("mouseleave",".ext",function(){if(e(this).children().hasClass("on"))return!1;clearTimeout(e(this).data("timeout"));var t=e(this).find(".ext_bar"),n=setTimeout(function(){t.slideUp()},300);e(this).data("timeout",n)})},init:function(){this.extBar(),this.emptyElements(),this.mergeGrids(),this.dragging(),this.rebinder()},rebinder:function(){var t=this,r=e("#loading");this.resizer(),e("table.grids td:not(.dividerTd)").sortable({placeholder:"extplaceholder",tolerance:"pointer",scroll:!0,handle:"h2",revert:150,start:function(t,n){e(document).disableSelection(),e("#middle").css("z-index","102"),e(this).sortable("refreshPositions"),e("#black_area").fadeIn()},stop:function(i,s){e(document).enableSelection(),e("#middle").css("z-index","auto"),e("body").css("cursor","auto");var o=s.item,u=o.parent(),a=u.attr("id"),f=!1,l;e("#black_area").fadeOut();if(o.hasClass("dragMe")==1){var c=o.attr("ext_type");r.show(),e.ajax({type:"post",async:!1,data:"site_id="+site_id+"&page_id="+page_id+"&ext_type="+c+"&prefix="+prefix,url:base_url+"manage/extensions/set_ext",success:function(t){var i=e.parseJSON(t),s=i.statu;s==1?(l=i.ext_id,o.after(i.html),n.canCallback(c,l),f=!0):(e.canToast(i.err),f=!1),o.remove(),r.hide()}})}else f=!0,l=o.attr("id"),l=l.split("_"),l=l[1];f==1&&(a=="firstGrid"||a=="lastGrid"?t.newTable(l,a):u.hasClass("empty")?t.newGrid(u,l):t.postGrid(u))}}).sortable("option","connectWith","table.grids td:not(.dividerTd)")},serialize:function(t){var n=t.children(),r="";return n.each(function(){var t=e(this).attr("id");t=t.split("_"),r+=t[0]+"[]="+t[1]+"&"}),r},convertId:function(e){return e=e.split("_"),e[1]},postGrid:function(t){var n=this.serialize(t),r=this.convertId(t.attr("id")),i=e("#loading");i.show(),e.ajax({type:"post",data:n+"&site_id="+site_id+"&grid_id="+r,url:base_url+"manage/grids/sort",success:function(t){e.canToast(t),i.hide()}})},dragging:function(){var t=0;e(".dragMe").draggable({cursor:"move",appendTo:"body",scroll:!0,helper:"clone",revert:"invalid",start:function(n,r){e(document).disableSelection(),e("#middle").css("z-index","102"),e(r.helper).appendTo("body"),e("body").css("cursor","move"),e("#black_area").fadeIn(),e("#dragHelp").fadeIn(),t=e("#middle").offset().top},drag:function(n,r){e(r.helper).offset().top>t?e("#dragHelp").fadeOut():e("#dragHelp").fadeIn()},stop:function(t,n){e("body").css("cursor","auto"),e("#black_area").fadeOut(),e("#dragHelp").fadeOut(),e(document).enableSelection(),e("#middle").css("z-index","auto")}}).draggable("option","connectToSortable","table.grids td:not(.dividerTd)")},newTable:function(n,r){var i=this,s=e("#loading"),o='<table class="grids"><tr class="parent_grid"><td class="grid" id="grid_new" style="width: 930px"></td></tr></table>',u=e(".dividerTd").first().clone().removeClass("hideDivider"),a=e('<td class="empty grid">'+t.str_drag_drop_here+"</td>").css({width:0,display:"none"});r=="firstGrid"&&e(".grids").first().after(o),r=="lastGrid"&&e(".grids").last().before(o),e("#grid_new").after(a),e("#grid_new").after(u),e("#ext_"+n).prependTo("#grid_new"),s.show(),e.post(base_url+"manage/grids/new_table",{site_id:site_id,page_id:page_id,ext_id:n,parId:r},function(t){e("#grid_new").attr("id","grid_"+t),i.rebinder(),s.hide()})},newGrid:function(t,n){var r=this,i=e("#loading"),s=t.prev().prev().attr("id");s=r.convertId(s);var o=t.prev().clone(),u=t.width()-30,a='<td class="grid" id="grid_new" style="width: '+u+'px"></td>';t.before(a),t.before(o),e("#ext_"+n).appendTo("#grid_new"),t.css({width:0,display:"none"}),r.rebinder(),i.show(),e.post(base_url+"manage/grids/new_grid",{site_id:site_id,before_id:s,ext_id:n,width:u},function(t){e("#grid_new").attr("id","grid_"+t),i.hide()})},resizer:function(){e(".dividerTd").resizeMe()},emptyElements:function(){e(".parent_grid").each(function(){var n=960,r="table-cell";e(this).children().each(function(){n-=e(this).width()}),n<30&&(r="none"),e(this).append('<td class="empty grid" style="width:'+n+"px; display:"+r+'">'+t.str_drag_drop_here+"</td>")})},mergeGrids:function(){var n=this;e("body").on("click",".mergeMe",function(){var r=confirm(t.confirm_merge);if(!r)return!1;var i=e(this).parent(),s=i.prev(),o=i.next(),u=s.children(),a=u.length,f=s.innerWidth()+o.innerWidth()+i.innerWidth(),l="delete";o.hasClass("empty")?a=="0"?(l="nochild",s.remove(),o.prev().remove(),o.css("width",f),o.css("display","table-cell"),o.parent().children().length==1&&o.parent().remove()):(l="stop",s.css("width",f),o.css({width:0,display:"none"})):(u.appendTo(o),i.remove(),s.remove(),o.css("width",f));var c=n.convertId(s.attr("id")),h=0;o.attr("id")!=undefined&&(h=n.convertId(o.attr("id")));var p=e("#loading");p.show(),e.post(base_url+"manage/grids/merge",{site_id:site_id,before_id:c,after_id:h,width:f,empty:l},function(t){e.canToast(t),p.hide()})})}}}),define("modules/extensions",["jquery","i18n!nls/extension.lang","modules/grids","bootstrap","canTip","canToast"],function(e,t,n){return{init:function(){n.init(),this.tooltip(),this.ext_delete_binder()},tooltip:function(){e(".mergeMe").canTip({html:t.str_merge}),e(".ext_delete").canTip({html:t.str_ext_delete})},ext_delete_binder:function(){e("body").on("click",".ext_delete",function(){var n=e(this).parent().parent(),r=n.attr("id");r=r.split("_"),r=r[1];var i=confirm(t.confirm_ext_delete);if(!i)return!1;var s=e("#loading");s.show(),e.post(base_url+"manage/extensions/delete",{site_id:site_id,ext_id:r},function(t){var r=e.parseJSON(t);e.canToast(r.html),r.error==0&&n.fadeOut(function(){e(this).remove()}),s.hide()})})}}}),define("nls/forms.lang",{root:{but_form_edit:"Formu düzenlemek için tıklayın.",str_edit_form:"Formu Düzenle",label_required:"Gerekli",label_new_field:"#Yeni Alan..."}}),define("common/forms",["jquery"],function(e){return{init:function(){this.binder()},refresh_captcha:function(t){var n=(new Date).getTime();t=t+"?"+n,e(".captcha").attr("src",t)},binder:function(){var t=this;e("body").on("click",".refresh_captcha",function(){var n=e(this).data("captcha");return t.refresh_captcha(n),!1}),e("body").on("submit",".formSend",function(){var n=e(this),r=!1;n.find(".formError, .phraseError").hide(),e(this).find(".required").each(function(){e(this).val()==""&&(n.find(".formError").fadeIn(),r=!0)});if(r==1)return!1;var i=n.serialize(),s=n.attr("data-action"),o=n.find(":submit");return o.attr("disabled","disabled"),e("body").css("cursor","wait"),e.post(s,i,function(r){o.removeAttr("disabled"),e("body").css("cursor","auto");if(r=="phrase_error")return n.find(".phraseError").fadeIn(),!1;alert(r);var i=n.data("captcha");t.refresh_captcha(i),n.find(":input").not(":button, :submit, :reset, :hidden").each(function(){e(this).val(""),o.removeAttr("disabled")})}),!1})}}}),define("modules/forms",["jquery","i18n!nls/forms.lang","common/forms","jqueryui","bootstrap","canTip","canToast"],function(e,t,n){return{init:function(){e(".formsEditBut").canTip({html:t.but_form_edit}),this.binder(),n.init()},do_sortable:function(){var t=this;e("#formEditDropList").sortable({placeholder:"formEditHolder",start:function(){e(document).disableSelection()},stop:function(n,r){var i=r.item;if(i.hasClass("dragForm")==1){var s=i.attr("data-item-type"),o=t.do_list_item(s);i.after(o),i.remove()}e(document).enableSelection()}}),e("#formEditDragList li").draggable({connectToSortable:"#formEditDropList",helper:"clone",revert:"invalid",start:function(){e(document).disableSelection()},stop:function(){e(document).enableSelection()}})},binder:function(){var t=this;e("body").on("click",".formsEditBut",function(){var n=e("#loading"),r=e(this).parent().next().attr("id");r=r.split("_"),r=r[1],n.show(),e.post(base_url+"manage/forms/edit",{site_id:site_id,form_id:r},function(r){n.hide(),e("#modal").html(r).children(":first-child").modal(),t.do_sortable(),t.edit_binder()})})},edit_binder:function(){e("#formEditDropList").on("change",".name-checkbox",function(){var t=e(this),n=0;t.is(":checked")&&(n=1),t.parent().parent().find(".name-required").val(n)}),e("#formEditDropList").on("click",".delete-field",function(){var t=e(this).parent();return t.hasClass("newItem")?t.fadeOut(function(){t.remove()}):(t.fadeOut(),t.find(".name-statu").val("delete")),!1}),e("#fieldsForm").submit(function(){var t=e(this),n=t.find("[type=submit]"),r=t.serialize(),i=t.find("[name=form_id]").val();return n.button("loading"),e.post(base_url+"manage/forms/edit_do",r,function(n){var r=e.parseJSON(n);e.canToast(r.info),e("#form_"+i).html(r.html),t.modal("hide")}),!1})},do_list_item:function(e){var n='<li class="newItem">\n';return n+='<input type="text" name="label[]" class="formEditLabel" value="'+t.label_new_field+'" />',e=="input"&&(n+=' <input type="text" name="type[]" class="span2" disabled="disabled" />'),e=="textarea"&&(n+=' <textarea class="span2" name="type[]" rows="2" disabled="disabled"></textarea>'),n+=' <label class="form-label label label-important"><input name="checkbox[]" class="name-checkbox" type="checkbox" value="1" /> '+t.label_required+"</label>",n+=' <a href="#" class="btn btn-danger btn-mini delete-field"><i class="icon-trash"></i></a>',n+='<input type="hidden" name="field_id[]" value="0" />',n+='<input type="hidden" class="name-statu" name="statu[]" value="'+e+'" />',n+='<input type="hidden" class="name-required" name="required[]" value="0" />',n+="</li>",n}}}),define("nls/cover_photo.lang",{root:{sample:"Örnek"}}),define("modules/cover_photo",["jquery","i18n!nls/cover_photo.lang","helpers/photos","bootstrap","canTip","canToast"],function(e,t,n){return{init:function(){this.binder()},binder:function(){var t=this;this.add_elements(),e("#no_cover").click("click",function(){return t.no_cover(),e("#cover_drop_down").dropdown("toggle"),!1}),e("#add_cover_photo").click(function(){return t.cover_add_binder(),e("#cover_drop_down").dropdown("toggle"),!1})},add_elements:function(){var t='<div class="btn-group btn-absolute">';t+='<button class="btn dropdown-toggle" data-toggle="dropdown" title="Kapak Fotoğrafı"><i class="icon-picture"></i>Kapak<span class="caret"></span></button>',t+='<ul class="dropdown-menu" id="cover_drop_down">',t+='<li><a id="no_cover" href="#">Kapak Yok</a></li>',t+='<li><a id="add_cover_photo" href="#">Fotoğraf Seç</a></li>',t+="</ul>",t+="</div>",e("#cover-photo").prepend(t)},edit_cover_binder:function(t){var n=this;e("#cover-photo").addClass("cover-max").addClass("cover-zindex"),e("#black_area").fadeIn();var r=e.parseJSON(t),i='<div id="cover-save-container">';i+='<a href="#" class="btn" id="save_cover"><i class="icon-ok"></i>Kaydet</a>',i+="</div>",$cover_photo=e("#cover-photo");var s='<img src="'+r.image+'" />';$cover_photo.html(i+'<div id="cover-drag" class="move-cursor"> '+s+'</div><div id="cover-info">Kapağı yeniden konumlandırmak için sürükle.</div>'),e("#cover-drag").draggable({axis:"y"}),e("#save_cover").click(function(){var t=e("#cover-drag").css("top");return e.ajax({type:"post",data:"site_id="+site_id+"&y="+t,url:base_url+"manage/cover/crop_image",success:function(t){n.binder(),e.canToast(t),e("#black_area").fadeOut(),e("#cover-drag").draggable("destroy"),e("#cover-drag").removeClass("move-cursor"),e("#cover-info").remove(),e("#cover-save-container").remove(),e("#cover-photo").removeClass("cover-zindex")}}),!1})},cover_add_binder:function(){var t=this;n.add(!1),e("#photoForm").submit(function(){var r=e(".active_pic").attr("id");return r=n.id_splitter(r),e(this).find("input[type=submit]").button("loading"),t.send_to_backend(r),!1})},send_to_backend:function(t){var n=this;e.ajax({type:"post",data:"site_id="+site_id+"&pic_id="+t,url:base_url+"manage/cover/update_image",success:function(t){e("#photoForm").modal("hide"),n.edit_cover_binder(t)}})},no_cover:function(){e.ajax({type:"post",data:"site_id="+site_id,url:base_url+"manage/cover/no_cover",success:function(t){e.canToast(t),$cover_photo=e("#cover-photo"),$cover_photo.removeClass("cover-max"),$cover_photo.find("img").remove()}})}}}),function(e,t){typeof exports=="object"?t(exports):typeof define=="function"&&define.amd?define("plugins/intro",["exports"],t):t(e)}(this,function(e){function n(e){this._targetElement=e,this._options={nextLabel:"İleri &rarr;",prevLabel:"&larr; Geri",skipLabel:"Atla",doneLabel:"Tamamlandı",tooltipPosition:"bottom",tooltipClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!0,keyboardNavigation:!0,showButtons:!0,showBullets:!0,scrollToElement:!0}}function r(e){var t=[],n=this;if(this._options.steps){var r=[];for(var s=0,f=this._options.steps.length;s<f;s++){var c=i(this._options.steps[s]);c.step=t.length+1,typeof c.element=="string"&&(c.element=document.querySelector(c.element));if(typeof c.element=="undefined"||c.element==null){var h=document.querySelector(".introjsFloatingElement");h==null&&(h=document.createElement("div"),h.className="introjsFloatingElement",document.body.appendChild(h)),c.element=h,c.position="floating"}c.element!=null&&t.push(c)}}else{var r=e.querySelectorAll("*[data-intro]");if(r.length<1)return!1;for(var s=0,p=r.length;s<p;s++){var d=r[s],m=parseInt(d.getAttribute("data-step"),10);m>0&&(t[m-1]={element:d,intro:d.getAttribute("data-intro"),step:parseInt(d.getAttribute("data-step"),10),tooltipClass:d.getAttribute("data-tooltipClass"),position:d.getAttribute("data-position")||this._options.tooltipPosition})}var g=0;for(var s=0,p=r.length;s<p;s++){var d=r[s];if(d.getAttribute("data-step")==null){for(;;){if(typeof t[g]=="undefined")break;g++}t[g]={element:d,intro:d.getAttribute("data-intro"),step:g+1,tooltipClass:d.getAttribute("data-tooltipClass"),position:d.getAttribute("data-position")||this._options.tooltipPosition}}}}var y=[];for(var b=0;b<t.length;b++)t[b]&&y.push(t[b]);t=y,t.sort(function(e,t){return e.step-t.step}),n._introItems=t;if(v.call(n,e)){o.call(n);var w=e.querySelector(".introjs-skipbutton"),E=e.querySelector(".introjs-nextbutton");n._onKeyDown=function(t){if(t.keyCode===27&&n._options.exitOnEsc==1)a.call(n,e),n._introExitCallback!=undefined&&n._introExitCallback.call(n);else if(t.keyCode===37)u.call(n);else if(t.keyCode===39||t.keyCode===13)o.call(n),t.preventDefault?t.preventDefault():t.returnValue=!1},n._onResize=function(e){l.call(n,document.querySelector(".introjs-helperLayer"))},window.addEventListener?(this._options.keyboardNavigation&&window.addEventListener("keydown",n._onKeyDown,!0),window.addEventListener("resize",n._onResize,!0)):document.attachEvent&&(this._options.keyboardNavigation&&document.attachEvent("onkeydown",n._onKeyDown),document.attachEvent("onresize",n._onResize))}return!1}function i(e){if(e==null||typeof e!="object"||typeof e.nodeType!="undefined")return e;var t={};for(var n in e)t[n]=i(e[n]);return t}function s(e){this._currentStep=e-2,typeof this._introItems!="undefined"&&o.call(this)}function o(){this._direction="forward",typeof this._currentStep=="undefined"?this._currentStep=0:++this._currentStep;if(this._introItems.length<=this._currentStep){typeof this._introCompleteCallback=="function"&&this._introCompleteCallback.call(this),a.call(this,this._targetElement);return}var e=this._introItems[this._currentStep];typeof this._introBeforeChangeCallback!="undefined"&&this._introBeforeChangeCallback.call(this,e.element),c.call(this,e)}function u(){this._direction="backward";if(this._currentStep===0)return!1;var e=this._introItems[--this._currentStep];typeof this._introBeforeChangeCallback!="undefined"&&this._introBeforeChangeCallback.call(this,e.element),c.call(this,e)}function a(e){var t=e.querySelector(".introjs-overlay");if(t==null)return;t.style.opacity=0,setTimeout(function(){t.parentNode&&t.parentNode.removeChild(t)},500);var n=e.querySelector(".introjs-helperLayer");n&&n.parentNode.removeChild(n);var r=document.querySelector(".introjsFloatingElement");r&&r.parentNode.removeChild(r);var i=document.querySelector(".introjs-showElement");i&&(i.className=i.className.replace(/introjs-[a-zA-Z]+/g,"").replace(/^\s+|\s+$/g,""));var s=document.querySelectorAll(".introjs-fixParent");if(s&&s.length>0)for(var o=s.length-1;o>=0;o--)s[o].className=s[o].className.replace(/introjs-fixParent/g,"").replace(/^\s+|\s+$/g,"");window.removeEventListener?window.removeEventListener("keydown",this._onKeyDown,!0):document.detachEvent&&document.detachEvent("onkeydown",this._onKeyDown),this._currentStep=undefined}function f(e,t,n,r){t.style.top=null,t.style.right=null,t.style.bottom=null,t.style.left=null,t.style.marginLeft=null,t.style.marginTop=null,n.style.display="inherit",typeof r!="undefined"&&r!=null&&(r.style.top=null,r.style.left=null);if(!this._introItems[this._currentStep])return;var i="",s=this._introItems[this._currentStep];typeof s.tooltipClass=="string"?i=s.tooltipClass:i=this._options.tooltipClass,t.className=("introjs-tooltip "+i).replace(/^\s+|\s+$/g,"");var i=this._options.tooltipClass,o=this._introItems[this._currentStep].position;switch(o){case"top":t.style.left="15px",t.style.top="-"+(m(t).height+10)+"px",n.className="introjs-arrow bottom";break;case"right":t.style.left=m(e).width+20+"px",n.className="introjs-arrow left";break;case"left":this._options.showStepNumbers==1&&(t.style.top="15px"),t.style.right=m(e).width+20+"px",n.className="introjs-arrow right";break;case"floating":n.style.display="none";var u=m(t);t.style.left="50%",t.style.top="50%",t.style.marginLeft="-"+u.width/2+"px",t.style.marginTop="-"+u.height/2+"px",typeof r!="undefined"&&r!=null&&(r.style.left="-"+(u.width/2+18)+"px",r.style.top="-"+(u.height/2+18)+"px");break;case"bottom":default:t.style.bottom="-"+(m(t).height+10)+"px",n.className="introjs-arrow top"}}function l(e){if(e){if(!this._introItems[this._currentStep])return;var t=this._introItems[this._currentStep],n=m(t.element),r=10;t.position=="floating"&&(r=0),e.setAttribute("style","width: "+(n.width+r)+"px; "+"height:"+(n.height+r)+"px; "+"top:"+(n.top-5)+"px;"+"left: "+(n.left-5)+"px;")}}function c(e){typeof this._introChangeCallback!="undefined"&&this._introChangeCallback.call(this,e.element);var t=this,n=document.querySelector(".introjs-helperLayer"),r=m(e.element);if(n!=null){var i=n.querySelector(".introjs-helperNumberLayer"),s=n.querySelector(".introjs-tooltiptext"),c=n.querySelector(".introjs-arrow"),v=n.querySelector(".introjs-tooltip"),g=n.querySelector(".introjs-skipbutton"),y=n.querySelector(".introjs-prevbutton"),b=n.querySelector(".introjs-nextbutton");v.style.opacity=0;if(i!=null){var w=this._introItems[e.step-2>=0?e.step-2:0];if(w!=null&&this._direction=="forward"&&w.position=="floating"||this._direction=="backward"&&e.position=="floating")i.style.opacity=0}l.call(t,n);var E=document.querySelectorAll(".introjs-fixParent");if(E&&E.length>0)for(var S=E.length-1;S>=0;S--)E[S].className=E[S].className.replace(/introjs-fixParent/g,"").replace(/^\s+|\s+$/g,"");var x=document.querySelector(".introjs-showElement");x.className=x.className.replace(/introjs-[a-zA-Z]+/g,"").replace(/^\s+|\s+$/g,""),t._lastShowElementTimer&&clearTimeout(t._lastShowElementTimer),t._lastShowElementTimer=setTimeout(function(){i!=null&&(i.innerHTML=e.step),s.innerHTML=e.intro,f.call(t,e.element,v,c,i),n.querySelector(".introjs-bullets li > a.active").className="",n.querySelector('.introjs-bullets li > a[data-stepnumber="'+e.step+'"]').className="active",v.style.opacity=1,i.style.opacity=1},350)}else{var T=document.createElement("div"),N=document.createElement("div"),C=document.createElement("div"),k=document.createElement("div"),L=document.createElement("div"),A=document.createElement("div");T.className="introjs-helperLayer",l.call(t,T),this._targetElement.appendChild(T),N.className="introjs-arrow",k.className="introjs-tooltiptext",k.innerHTML=e.intro,L.className="introjs-bullets",this._options.showBullets===!1&&(L.style.display="none");var O=document.createElement("ul");for(var S=0,M=this._introItems.length;S<M;S++){var _=document.createElement("li"),D=document.createElement("a");D.onclick=function(){t.goToStep(this.getAttribute("data-stepnumber"))},S===0&&(D.className="active"),D.href="javascript:void(0);",D.innerHTML="&nbsp;",D.setAttribute("data-stepnumber",this._introItems[S].step),_.appendChild(D),O.appendChild(_)}L.appendChild(O),A.className="introjs-tooltipbuttons",this._options.showButtons===!1&&(A.style.display="none"),C.className="introjs-tooltip",C.appendChild(k),C.appendChild(L);if(this._options.showStepNumbers==1){var P=document.createElement("span");P.className="introjs-helperNumberLayer",P.innerHTML=e.step,T.appendChild(P)}C.appendChild(N),T.appendChild(C);var b=document.createElement("a");b.onclick=function(){t._introItems.length-1!=t._currentStep&&o.call(t)},b.href="javascript:void(0);",b.innerHTML=this._options.nextLabel;var y=document.createElement("a");y.onclick=function(){t._currentStep!=0&&u.call(t)},y.href="javascript:void(0);",y.innerHTML=this._options.prevLabel;var g=document.createElement("a");g.className="introjs-button introjs-skipbutton",g.href="javascript:void(0);",g.innerHTML=this._options.skipLabel,g.onclick=function(){t._introItems.length-1==t._currentStep&&typeof t._introCompleteCallback=="function"&&t._introCompleteCallback.call(t),t._introItems.length-1!=t._currentStep&&typeof t._introExitCallback=="function"&&t._introExitCallback.call(t),a.call(t,t._targetElement)},A.appendChild(g),this._introItems.length>1&&(A.appendChild(y),A.appendChild(b)),C.appendChild(A),f.call(t,e.element,C,N,P)}this._currentStep==0&&this._introItems.length>1?(y.className="introjs-button introjs-prevbutton introjs-disabled",b.className="introjs-button introjs-nextbutton",g.innerHTML=this._options.skipLabel):this._introItems.length-1==this._currentStep||this._introItems.length==1?(g.innerHTML=this._options.doneLabel,y.className="introjs-button introjs-prevbutton",b.className="introjs-button introjs-nextbutton introjs-disabled"):(y.className="introjs-button introjs-prevbutton",b.className="introjs-button introjs-nextbutton",g.innerHTML=this._options.skipLabel),b.focus(),e.element.className+=" introjs-showElement";var H=h(e.element,"position");H!=="absolute"&&H!=="relative"&&(e.element.className+=" introjs-relativePosition");var B=e.element.parentNode;while(B!=null){if(B.tagName.toLowerCase()==="body")break;var j=h(B,"z-index"),F=parseFloat(h(B,"opacity"));if(/[0-9]+/.test(j)||F<1)B.className+=" introjs-fixParent";B=B.parentNode}if(!d(e.element)&&this._options.scrollToElement===!0){var I=e.element.getBoundingClientRect(),q=p().height,R=I.bottom-(I.bottom-I.top),U=I.bottom-q;R<0||e.element.clientHeight>q?window.scrollBy(0,R-30):window.scrollBy(0,U+100)}typeof this._introAfterChangeCallback!="undefined"&&this._introAfterChangeCallback.call(this,e.element)}function h(e,t){var n="";return e.currentStyle?n=e.currentStyle[t]:document.defaultView&&document.defaultView.getComputedStyle&&(n=document.defaultView.getComputedStyle(e,null).getPropertyValue(t)),n&&n.toLowerCase?n.toLowerCase():n}function p(){if(window.innerWidth!=undefined)return{width:window.innerWidth,height:window.innerHeight};var e=document.documentElement;return{width:e.clientWidth,height:e.clientHeight}}function d(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom+80<=window.innerHeight&&t.right<=window.innerWidth}function v(e){var t=document.createElement("div"),n="",r=this;t.className="introjs-overlay";if(e.tagName.toLowerCase()==="body")n+="top: 0;bottom: 0; left: 0;right: 0;position: fixed;",t.setAttribute("style",n);else{var i=m(e);i&&(n+="width: "+i.width+"px; height:"+i.height+"px; top:"+i.top+"px;left: "+i.left+"px;",t.setAttribute("style",n))}return e.appendChild(t),t.onclick=function(){r._options.exitOnOverlayClick==1&&(a.call(r,e),r._introExitCallback!=undefined&&r._introExitCallback.call(r))},setTimeout(function(){n+="opacity: .8;",t.setAttribute("style",n)},10),!0}function m(e){var t={};t.width=e.offsetWidth,t.height=e.offsetHeight;var n=0,r=0;while(e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop))n+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;return t.top=r,t.left=n,t}function g(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}var t="0.8.0",y=function(e){if(typeof e=="object")return new n(e);if(typeof e=="string"){var t=document.querySelector(e);if(t)return new n(t);throw new Error("There is no element with given selector.")}return new n(document.body)};return y.version=t,y.fn=n.prototype={clone:function(){return new n(this)},setOption:function(e,t){return this._options[e]=t,this},setOptions:function(e){return this._options=g(this._options,e),this},start:function(){return r.call(this,this._targetElement),this},goToStep:function(e){return s.call(this,e),this},nextStep:function(){return o.call(this),this},previousStep:function(){return u.call(this),this},exit:function(){a.call(this,this._targetElement)},refresh:function(){return l.call(this,document.querySelector(".introjs-helperLayer")),this},onbeforechange:function(e){if(typeof e!="function")throw new Error("Provided callback for onbeforechange was not a function");return this._introBeforeChangeCallback=e,this},onchange:function(e){if(typeof e!="function")throw new Error("Provided callback for onchange was not a function.");return this._introChangeCallback=e,this},onafterchange:function(e){if(typeof e!="function")throw new Error("Provided callback for onafterchange was not a function");return this._introAfterChangeCallback=e,this},oncomplete:function(e){if(typeof e!="function")throw new Error("Provided callback for oncomplete was not a function.");return this._introCompleteCallback=e,this},onexit:function(e){if(typeof e!="function")throw new Error("Provided callback for onexit was not a function.");return this._introExitCallback=e,this}},e.introJs=y,y}),define("modules/tour",["jquery","plugins/intro"],function(e,t){return{init:function(){var t=this;return!1},start:function(){e("#top_hr").css("marginTop","40px"),e("#fixed").css({position:"absolute",padding:"10px"}),e(".dragMe").css({backgroundColor:"#000"});var n=t().onexit(this.close).oncomplete(this.close);n.setOptions({exitOnEsc:!1,exitOnOverlayClick:!1,steps:[{intro:"Sincapp'a hoşgeldiniz. Bu kısa turu ile daha fazla bilgiye sahip olacaksınız."},{element:"#paragraph_but",intro:"Yazı alanı oluşturmak için bu eklentiyi sürükleyip bırakın."},{element:"#photo_but",intro:"Fotoğraf albümü oluşturmak için bu eklentiyi sürükleyip bırakın."},{element:"#slider_but",intro:"Dönen resimler oluşturmak için bu eklentiyi sürükleyip bırakın."},{element:"#form_but",intro:"İletişim formu oluşturmak için bu eklentiyi sürükleyip bırakın."},{element:"#maps_but",intro:"Harita oluşturmak için bu eklentiyi sürükleyip bırakın."},{element:"#html_but",intro:"Html&Javascript kodları oluşturmak için bu eklentiyi sürükleyip bırakın."},{element:"#logo",intro:"Logo yazısını değiştirmek için tıklayın. İsterseniz fotoğraf da ekleyebilirsiniz."},{element:"#pagesBut",intro:"Yeni sayfa yaratmak için bu tuşu kullanın. Varolan sayfaların sıralamasını sürükleyip bırakarak değiştirebilirsiniz",position:"left"},{element:"#extraBut",intro:"Tema değiştirmek veya çıkış yapmak için bu tuşu kullanın.",position:"left"}]}),n.start()},close:function(){e("#top_hr").css("marginTop","30px"),e("#fixed").css({position:"fixed"}),e("#fixed").animate({padding:"0px"}),e(".dragMe").css({backgroundColor:"transparent"}),e.post(base_url+"manage/settings/tourComplete","site_id="+site_id,function(){})}}}),define("modules/language",["jquery","canTip","canToast"],function(e,t){var n;return{init:function(){var e=this;e.binder(),language_setup==1&&e.open_dialog()},binder:function(){var t=this;e("#lang-select").canTip({html:"Çoklu dil eklemek için tıklayın."}),e("#lang-select").click(function(){e.post(base_url+"manage/language/get_modal",{site_id:site_id,prefix:prefix},function(n){e("#modal").html(n).children(":first-child").modal(),t.switch_binder()})})},open_dialog:function(){var t=this;e.post(base_url+"manage/language/get_setup",{site_id:site_id,prefix:prefix},function(n){e("#modal").html(n).children(":first-child").modal({backdrop:"static",keyboard:!0}),t.lang_setup_binder()})},lang_setup_binder:function(){e("#langSetupForm").submit(function(){var t=e("#langSetupSubmit"),n=e(this).serialize();return t.button("loading"),e.post(base_url+"manage/language/set_setup",n,function(t){e("#modal").children(":first-child").modal("hide")}),!1})},switch_binder:function(){var t;e(".switch-language").click(function(){var n=e(this);t=n.data("value"),t=="1"?(n.data("value",0),t=0,n.animate({left:"-56px"},200)):(n.data("value",1),t=1,n.animate({left:"0px"},200)),e("#languageLoading div").fadeIn(),e.post(base_url+"manage/language/set_language",{site_id:site_id,statu:t},function(n){t==1?e("#lang-changer").fadeIn():e("#lang-changer").fadeOut(),e("#languageLoading div").fadeOut(),e("#language").html(n)})}),e(".switch-change-site").click(function(){var t=e(this),n=t.data("value");n=="1"?(t.data("value",0),n=0,t.animate({left:"-56px"},200,function(){window.location=base_url+"manage/editor/wellcome/"+site_id+"/en"})):(t.data("value",1),n=1,t.animate({left:"0px"},200,function(){window.location=base_url+"manage/editor/wellcome/"+site_id}))})}}}),function(e){typeof define=="function"&&define.amd?define("plugins/jquery.mousewheel",["jquery"],e):typeof exports=="object"?module.exports=e:e(jQuery)}(function(e){function a(t){var n=t||window.event,o=r.call(arguments,1),u=0,a=0,c=0,h=0;t=e.event.fix(n),t.type="mousewheel","detail"in n&&(c=n.detail*-1),"wheelDelta"in n&&(c=n.wheelDelta),"wheelDeltaY"in n&&(c=n.wheelDeltaY),"wheelDeltaX"in n&&(a=n.wheelDeltaX*-1),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(a=c*-1,c=0),u=c===0?a:c,"deltaY"in n&&(c=n.deltaY*-1,u=c),"deltaX"in n&&(a=n.deltaX,c===0&&(u=a*-1));if(c===0&&a===0)return;if(n.deltaMode===1){var p=e.data(this,"mousewheel-line-height");u*=p,c*=p,a*=p}else if(n.deltaMode===2){var d=e.data(this,"mousewheel-page-height");u*=d,c*=d,a*=d}h=Math.max(Math.abs(c),Math.abs(a));if(!s||h<s)s=h,l(n,h)&&(s/=40);return l(n,h)&&(u/=40,a/=40,c/=40),u=Math[u>=1?"floor":"ceil"](u/s),a=Math[a>=1?"floor":"ceil"](a/s),c=Math[c>=1?"floor":"ceil"](c/s),t.deltaX=a,t.deltaY=c,t.deltaFactor=s,t.deltaMode=0,o.unshift(t,u,a,c),i&&clearTimeout(i),i=setTimeout(f,200),(e.event.dispatch||e.event.handle).apply(this,o)}function f(){s=null}function l(e,t){return u.settings.adjustOldDeltas&&e.type==="mousewheel"&&t%120===0}var t=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],n="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],r=Array.prototype.slice,i,s;if(e.event.fixHooks)for(var o=t.length;o;)e.event.fixHooks[t[--o]]=e.event.mouseHooks;var u=e.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var t=n.length;t;)this.addEventListener(n[--t],a,!1);else this.onmousewheel=a;e.data(this,"mousewheel-line-height",u.getLineHeight(this)),e.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=n.length;e;)this.removeEventListener(n[--e],a,!1);else this.onmousewheel=null},getLineHeight:function(t){return parseInt(e(t)["offsetParent"in e.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),function(e){typeof define=="function"&&define.amd?define("plugins/perfect-scrollbar",["jquery"],e):typeof exports=="object"?e(require("jquery")):e(jQuery)}(function(e){var t={wheelSpeed:10,wheelPropagation:!1,minScrollbarLength:null,maxScrollbarLength:null,useBothWheelAxes:!1,useKeyboard:!0,suppressScrollX:!1,suppressScrollY:!1,scrollXMarginOffset:0,scrollYMarginOffset:0,includePadding:!1},n=function(){var e=0;return function(){var t=e;return e+=1,".perfect-scrollbar-"+t}}();e.fn.perfectScrollbar=function(r,i){return this.each(function(){var s=e.extend(!0,{},t),o=e(this);typeof r=="object"?e.extend(!0,s,r):i=r;if(i==="update")return o.data("perfect-scrollbar-update")&&o.data("perfect-scrollbar-update")(),o;if(i==="destroy")return o.data("perfect-scrollbar-destroy")&&o.data("perfect-scrollbar-destroy")(),o;if(o.data("perfect-scrollbar"))return o.data("perfect-scrollbar");o.addClass("ps-container");var u=e("<div class='ps-scrollbar-x-rail'></div>").appendTo(o),a=e("<div class='ps-scrollbar-y-rail'></div>").appendTo(o),f=e("<div class='ps-scrollbar-x'></div>").appendTo(u),l=e("<div class='ps-scrollbar-y'></div>").appendTo(a),c,h,p,d,v,m,g,y,b=parseInt(u.css("bottom"),10),w=b===b,E=w?null:parseInt(u.css("top"),10),S,x,T=parseInt(a.css("right"),10),N=T===T,C=N?null:parseInt(a.css("left"),10),k=o.css("direction")==="rtl",L=n(),A=parseInt(u.css("borderLeftWidth"),10)+parseInt(u.css("borderRightWidth"),10),O=parseInt(u.css("borderTopWidth"),10)+parseInt(u.css("borderBottomWidth"),10),M=function(e,t){var n=e+t,r=d-S;n<0?x=0:n>r?x=r:x=n;var i=parseInt(x*(m-d)/(d-S),10);o.scrollTop(i),w?u.css({bottom:b-i}):u.css({top:E+i})},_=function(e,t){var n=e+t,r=p-g;n<0?y=0:n>r?y=r:y=n;var i=parseInt(y*(v-p)/(p-g),10);o.scrollLeft(i),N?a.css({right:T-i}):a.css({left:C+i})},D=function(e){return s.minScrollbarLength&&(e=Math.max(e,s.minScrollbarLength)),s.maxScrollbarLength&&(e=Math.min(e,s.maxScrollbarLength)),e},P=function(){var e={width:p,display:c?"inherit":"none"};k?e.left=o.scrollLeft()+p-v:e.left=o.scrollLeft(),w?e.bottom=b-o.scrollTop():e.top=E+o.scrollTop(),u.css(e);var t={top:o.scrollTop(),height:d,display:h?"inherit":"none"};N?k?t.right=v-o.scrollLeft()-T-l.outerWidth():t.right=T-o.scrollLeft():k?t.left=o.scrollLeft()+p*2-v-C-l.outerWidth():t.left=C+o.scrollLeft(),a.css(t),f.css({left:y,width:g-A}),l.css({top:x,height:S-O}),c?o.addClass("ps-active-x"):o.removeClass("ps-active-x"),h?o.addClass("ps-active-y"):o.removeClass("ps-active-y")},H=function(){p=s.includePadding?o.innerWidth():o.width(),d=s.includePadding?o.innerHeight():o.height(),v=o.prop("scrollWidth"),m=o.prop("scrollHeight"),!s.suppressScrollX&&p+s.scrollXMarginOffset<v?(c=!0,g=D(parseInt(p*p/v,10)),y=parseInt(o.scrollLeft()*(p-g)/(v-p),10)):(c=!1,g=0,y=0,o.scrollLeft(0)),!s.suppressScrollY&&d+s.scrollYMarginOffset<m?(h=!0,S=D(parseInt(d*d/m,10)),x=parseInt(o.scrollTop()*(d-S)/(m-d),10)):(h=!1,S=0,x=0,o.scrollTop(0)),x>=d-S&&(x=d-S),y>=p-g&&(y=p-g),P()},B=function(){var t,n;f.bind("mousedown"+L,function(e){n=e.pageX,t=f.position().left,u.addClass("in-scrolling"),e.stopPropagation(),e.preventDefault()}),e(document).bind("mousemove"+L,function(e){u.hasClass("in-scrolling")&&(_(t,e.pageX-n),e.stopPropagation(),e.preventDefault())}),e(document).bind("mouseup"+L,function(e){u.hasClass("in-scrolling")&&u.removeClass("in-scrolling")}),t=n=null},j=function(){var t,n;l.bind("mousedown"+L,function(e){n=e.pageY,t=l.position().top,a.addClass("in-scrolling"),e.stopPropagation(),e.preventDefault()}),e(document).bind("mousemove"+L,function(e){a.hasClass("in-scrolling")&&(M(t,e.pageY-n),e.stopPropagation(),e.preventDefault())}),e(document).bind("mouseup"+L,function(e){a.hasClass("in-scrolling")&&a.removeClass("in-scrolling")}),t=n=null},F=function(e,t){var n=o.scrollTop();if(e===0){if(!h)return!1;if(n===0&&t>0||n>=m-d&&t<0)return!s.wheelPropagation}var r=o.scrollLeft();if(t===0){if(!c)return!1;if(r===0&&e<0||r>=v-p&&e>0)return!s.wheelPropagation}return!0},I=function(){s.wheelSpeed/=10;var e=!1;o.bind("mousewheel"+L,function(t,n,r,i){var u=t.deltaX*t.deltaFactor||r,a=t.deltaY*t.deltaFactor||i;e=!1,s.useBothWheelAxes?h&&!c?(a?o.scrollTop(o.scrollTop()-a*s.wheelSpeed):o.scrollTop(o.scrollTop()+u*s.wheelSpeed),e=!0):c&&!h&&(u?o.scrollLeft(o.scrollLeft()+u*s.wheelSpeed):o.scrollLeft(o.scrollLeft()-a*s.wheelSpeed),e=!0):(o.scrollTop(o.scrollTop()-a*s.wheelSpeed),o.scrollLeft(o.scrollLeft()+u*s.wheelSpeed)),H(),e=e||F(u,a),e&&(t.stopPropagation(),t.preventDefault())}),o.bind("MozMousePixelScroll"+L,function(t){e&&t.preventDefault()})},q=function(){var t=!1;o.bind("mouseenter"+L,function(e){t=!0}),o.bind("mouseleave"+L,function(e){t=!1});var n=!1;e(document).bind("keydown"+L,function(r){if(r.isDefaultPrevented&&r.isDefaultPrevented())return;if(!t||e(document.activeElement).is(":input,[contenteditable]"))return;var i=0,s=0;switch(r.which){case 37:i=-30;break;case 38:s=30;break;case 39:i=30;break;case 40:s=-30;break;case 33:s=90;break;case 32:case 34:s=-90;break;case 35:s=-d;break;case 36:s=d;break;default:return}o.scrollTop(o.scrollTop()-s),o.scrollLeft(o.scrollLeft()+i),n=F(i,s),n&&r.preventDefault()})},R=function(){var e=function(e){e.stopPropagation()};l.bind("click"+L,e),a.bind("click"+L,function(e){var t=parseInt(S/2,10),n=e.pageY-a.offset().top-t,r=d-S,i=n/r;i<0?i=0:i>1&&(i=1),o.scrollTop((m-d)*i)}),f.bind("click"+L,e),u.bind("click"+L,function(e){var t=parseInt(g/2,10),n=e.pageX-u.offset().left-t,r=p-g,i=n/r;i<0?i=0:i>1&&(i=1),o.scrollLeft((v-p)*i)})},U=function(){var t=function(e,t){o.scrollTop(o.scrollTop()-t),o.scrollLeft(o.scrollLeft()-e),H()},n={},r=0,i={},s=null,u=!1;e(window).bind("touchstart"+L,function(e){u=!0}),e(window).bind("touchend"+L,function(e){u=!1}),o.bind("touchstart"+L,function(e){var t=e.originalEvent.targetTouches[0];n.pageX=t.pageX,n.pageY=t.pageY,r=(new Date).getTime(),s!==null&&clearInterval(s),e.stopPropagation()}),o.bind("touchmove"+L,function(e){if(!u&&e.originalEvent.targetTouches.length===1){var s=e.originalEvent.targetTouches[0],o={};o.pageX=s.pageX,o.pageY=s.pageY;var a=o.pageX-n.pageX,f=o.pageY-n.pageY;t(a,f),n=o;var l=(new Date).getTime(),c=l-r;c>0&&(i.x=a/c,i.y=f/c,r=l),e.preventDefault()}}),o.bind("touchend"+L,function(e){clearInterval(s),s=setInterval(function(){if(Math.abs(i.x)<.01&&Math.abs(i.y)<.01){clearInterval(s);return}t(i.x*30,i.y*30),i.x*=.8,i.y*=.8},10)})},z=function(){o.bind("scroll"+L,function(e){H()})},W=function(){o.unbind(L),e(window).unbind(L),e(document).unbind(L),o.data("perfect-scrollbar",null),o.data("perfect-scrollbar-update",null),o.data("perfect-scrollbar-destroy",null),f.remove(),l.remove(),u.remove(),a.remove(),u=a=f=l=c=h=p=d=v=m=g=y=b=w=E=S=x=T=N=C=k=L=null},X=function(t){o.addClass("ie").addClass("ie"+t);var n=function(){var t=function(){e(this).addClass("hover")},n=function(){e(this).removeClass("hover")};o.bind("mouseenter"+L,t).bind("mouseleave"+L,n),u.bind("mouseenter"+L,t).bind("mouseleave"+L,n),a.bind("mouseenter"+L,t).bind("mouseleave"+L,n),f.bind("mouseenter"+L,t).bind("mouseleave"+L,n),l.bind("mouseenter"+L,t).bind("mouseleave"+L,n)},r=function(){P=function(){var e={left:y+o.scrollLeft(),width:g};w?e.bottom=b:e.top=E,f.css(e);var t={top:x+o.scrollTop(),height:S};N?t.right=T:t.left=C,l.css(t),f.hide().show(),l.hide().show()}};t===6&&(n(),r())},V="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,J=function(){var e=navigator.userAgent.toLowerCase().match(/(msie) ([\w.]+)/);e&&e[1]==="msie"&&X(parseInt(e[2],10)),H(),z(),B(),j(),R(),V&&U(),o.mousewheel&&I(),s.useKeyboard&&q(),o.data("perfect-scrollbar",o),o.data("perfect-scrollbar-update",H),o.data("perfect-scrollbar-destroy",W)};return J(),o})}}),define("modules/layout",["jquery","bootstrap","canTip","plugins/jquery.mousewheel","plugins/perfect-scrollbar"],function(e){return{cache:{},init:function(){var t=this;t.mouse_events(),t.on_resize(),t.bind_switcher(),t.bind_cache(),t.bind_scroll_to(),e("#left-area").perfectScrollbar(),e(window).resize(function(){t.on_resize(),t.bind_cache()}),e(".dragMe").canTip({html:"Lütfen bu elementi sağ tarafa sürükleyip bırakın."}),e("#btn-basic").canTip({html:"Temel elementlere git."}),e("#btn-arch").canTip({html:"Mimari elementlere git."}),e("#btn-blog").canTip({html:"Blog elementlerine git."}),e("#btn-media").canTip({html:"Medya elementlerine git."})},bind_cache:function(){var t=this;e("#left-area").scrollTop(0),e(".scrollto").each(function(){var n=e(this).data("target");t.cache[n]=e(e(this).attr("href")).position().top})},bind_scroll_to:function(){var t=this;e(".scrollto").click(function(){var n=e(this).data("target"),r=t.cache[n];return e("#left-area").animate({scrollTop:r},1e3),!1}),e("#left-area").scroll(function(){var n=e("#left-area").scrollTop()+50;e.each(t.cache,function(t,r){if(r<=n){var i=e("#btn-"+t).parent();i.hasClass("active-scroll")||(e(".active-scroll").removeClass("active-scroll"),i.addClass("active-scroll"))}})})},bind_switcher:function(){e("body").on("change","#page-switcher",function(){var t=e(this).val(),n=base_url+"manage/editor/wellcome/"+site_id+"/"+t+".html";window.location=n})},on_resize:function(){var t=e("#left-area").hasClass("minified");e(window).width()<1200&&t==0&&(e("body").animate({marginLeft:"50px"}),e("#left-area").animate({width:"50px"}),e("#scrollnav").animate({width:"50px"}),e("#left-area").addClass("minified")),e(window).width()>1200&&t==1&&(e("body").animate({marginLeft:"250px"}),e("#left-area").animate({width:"250px"}),e("#scrollnav").animate({width:"250px"}),e("#left-area").removeClass("minified"))},mouse_events:function(){e("#scroll-area").hover(function(){clearTimeout(e(this).data("timeout")),e("#left-area").hasClass("minified")&&(e("body").animate({marginLeft:"250px"}),e("#left-area").animate({width:"250px"}),e("#scrollnav").animate({width:"250px"}))},function(){var t=setTimeout(function(){e("#left-area").hasClass("minified")&&(e("body").animate({marginLeft:"50px"}),e("#left-area").animate({width:"50px"}),e("#scrollnav").animate({width:"50px"}))},500);e(this).data("timeout",t)})}}}),!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define("plugins/card",e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.card=e()}}(function(){var e,t,n;return function r(e,t,n){function i(o,u){if(!t[o]){if(!e[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=t[o]={exports:{}};e[o][0].call(f.exports,function(t){var n=e[o][1][t];return i(n?n:t)},f,f.exports,r,e,t,n)}return t[o].exports}var s=typeof require=="function"&&require;for(var o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,n){(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w=[].slice,E=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};e=jQuery,e.payment={},e.payment.fn={},e.fn.payment=function(){var t,n;return n=arguments[0],t=2<=arguments.length?w.call(arguments,1):[],e.payment.fn[n].apply(this,t)},i=/(\d{1,4})/g,r=[{type:"visaelectron",pattern:/^4(026|17500|405|508|844|91[37])/,format:i,length:[16],cvcLength:[3],luhn:!0},{type:"maestro",pattern:/^(5(018|0[23]|[68])|6(39|7))/,format:i,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"forbrugsforeningen",pattern:/^600/,format:i,length:[16],cvcLength:[3],luhn:!0},{type:"dankort",pattern:/^5019/,format:i,length:[16],cvcLength:[3],luhn:!0},{type:"visa",pattern:/^4/,format:i,length:[13,16],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^5[0-5]/,format:i,length:[16],cvcLength:[3],luhn:!0},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"dinersclub",pattern:/^3[0689]/,format:i,length:[14],cvcLength:[3],luhn:!0},{type:"discover",pattern:/^6([045]|22)/,format:i,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^(62|88)/,format:i,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"jcb",pattern:/^35/,format:i,length:[16],cvcLength:[3],luhn:!0}],t=function(e){var t,n,i;e=(e+"").replace(/\D/g,"");for(n=0,i=r.length;n<i;n++){t=r[n];if(t.pattern.test(e))return t}},n=function(e){var t,n,i;for(n=0,i=r.length;n<i;n++){t=r[n];if(t.type===e)return t}},h=function(e){var t,n,r,i,s,o;r=!0,i=0,n=(e+"").split("").reverse();for(s=0,o=n.length;s<o;s++){t=n[s],t=parseInt(t,10);if(r=!r)t*=2;t>9&&(t-=9),i+=t}return i%10===0},c=function(e){var t;return e.prop("selectionStart")!=null&&e.prop("selectionStart")!==e.prop("selectionEnd")?!0:(typeof document!="undefined"&&document!==null?(t=document.selection)!=null?typeof t.createRange=="function"?t.createRange().text:void 0:void 0:void 0)?!0:!1},p=function(t){return setTimeout(function(){var n,r;return n=e(t.currentTarget),r=n.val(),r=e.payment.formatCardNumber(r),n.val(r)})},u=function(n){var r,i,s,o,u,a,f;s=String.fromCharCode(n.which);if(!/^\d+$/.test(s))return;r=e(n.currentTarget),f=r.val(),i=t(f+s),o=(f.replace(/\D/g,"")+s).length,a=16,i&&(a=i.length[i.length.length-1]);if(o>=a)return;if(r.prop("selectionStart")!=null&&r.prop("selectionStart")!==f.length)return;i&&i.type==="amex"?u=/^(\d{4}|\d{4}\s\d{6})$/:u=/(?:^|\s)(\d{4})$/;if(u.test(f))return n.preventDefault(),setTimeout(function(){return r.val(f+" "+s)});if(u.test(f+s))return n.preventDefault(),setTimeout(function(){return r.val(f+s+" ")})},s=function(t){var n,r;n=e(t.currentTarget),r=n.val();if(t.which!==8)return;if(n.prop("selectionStart")!=null&&n.prop("selectionStart")!==r.length)return;if(/\d\s$/.test(r))return t.preventDefault(),setTimeout(function(){return n.val(r.replace(/\d\s$/,""))});if(/\s\d?$/.test(r))return t.preventDefault(),setTimeout(function(){return n.val(r.replace(/\s\d?$/,""))})},d=function(t){return setTimeout(function(){var n,r;return n=e(t.currentTarget),r=n.val(),r=e.payment.formatExpiry(r),n.val(r)})},a=function(t){var n,r,i;r=String.fromCharCode(t.which);if(!/^\d+$/.test(r))return;n=e(t.currentTarget),i=n.val()+r;if(/^\d$/.test(i)&&i!=="0"&&i!=="1")return t.preventDefault(),setTimeout(function(){return n.val("0"+i+" / ")});if(/^\d\d$/.test(i))return t.preventDefault(),setTimeout(function(){return n.val(""+i+" / ")})},f=function(t){var n,r,i;r=String.fromCharCode(t.which);if(!/^\d+$/.test(r))return;n=e(t.currentTarget),i=n.val();if(/^\d\d$/.test(i))return n.val(""+i+" / ")},l=function(t){var n,r,i;i=String.fromCharCode(t.which);if(i!=="/"&&i!==" ")return;n=e(t.currentTarget),r=n.val();if(/^\d$/.test(r)&&r!=="0")return n.val("0"+r+" / ")},o=function(t){var n,r;n=e(t.currentTarget),r=n.val();if(t.which!==8)return;if(n.prop("selectionStart")!=null&&n.prop("selectionStart")!==r.length)return;if(/\s\/\s\d?$/.test(r))return t.preventDefault(),setTimeout(function(){return n.val(r.replace(/\s\/\s\d?$/,""))})},y=function(e){var t;return e.metaKey||e.ctrlKey?!0:e.which===32?!1:e.which===0?!0:e.which<33?!0:(t=String.fromCharCode(e.which),!!/[\d\s]/.test(t))},m=function(n){var r,i,s,o;r=e(n.currentTarget),s=String.fromCharCode(n.which);if(!/^\d+$/.test(s))return;if(c(r))return;return o=(r.val()+s).replace(/\D/g,""),i=t(o),i?o.length<=i.length[i.length.length-1]:o.length<=16},g=function(t){var n,r,i;n=e(t.currentTarget),r=String.fromCharCode(t.which);if(!/^\d+$/.test(r))return;if(c(n))return;i=n.val()+r,i=i.replace(/\D/g,"");if(i.length>6)return!1},v=function(t){var n,r,i;n=e(t.currentTarget),r=String.fromCharCode(t.which);if(!/^\d+$/.test(r))return;if(c(n))return;return i=n.val()+r,i.length<=4},b=function(t){var n,i,s,o,u;n=e(t.currentTarget),u=n.val(),o=e.payment.cardType(u)||"unknown";if(!n.hasClass(o))return i=function(){var e,t,n;n=[];for(e=0,t=r.length;e<t;e++)s=r[e],n.push(s.type);return n}(),n.removeClass("unknown"),n.removeClass(i.join(" ")),n.addClass(o),n.toggleClass("identified",o!=="unknown"),n.trigger("payment.cardType",o)},e.payment.fn.formatCardCVC=function(){return this.payment("restrictNumeric"),this.on("keypress",v),this},e.payment.fn.formatCardExpiry=function(){return this.payment("restrictNumeric"),this.on("keypress",g),this.on("keypress",a),this.on("keypress",l),this.on("keypress",f),this.on("keydown",o),this.on("change",d),this.on("input",d),this},e.payment.fn.formatCardNumber=function(){return this.payment("restrictNumeric"),this.on("keypress",m),this.on("keypress",u),this.on("keydown",s),this.on("keyup",b),this.on("paste",p),this.on("change",p),this.on("input",p),this.on("input",b),this},e.payment.fn.restrictNumeric=function(){return this.on("keypress",y),this},e.payment.fn.cardExpiryVal=function(){return e.payment.cardExpiryVal(e(this).val())},e.payment.cardExpiryVal=function(e){var t,n,r,i;return e=e.replace(/\s/g,""),i=e.split("/",2),t=i[0],r=i[1],(r!=null?r.length:void 0)===2&&/^\d+$/.test(r)&&(n=(new Date).getFullYear(),n=n.toString().slice(0,2),r=n+r),t=parseInt(t,10),r=parseInt(r,10),{month:t,year:r}},e.payment.validateCardNumber=function(e){var n,r;return e=(e+"").replace(/\s+|-/g,""),/^\d+$/.test(e)?(n=t(e),n?(r=e.length,E.call(n.length,r)>=0)&&(n.luhn===!1||h(e)):!1):!1},e.payment.validateCardExpiry=function(t,n){var r,i,s;return typeof t=="object"&&"month"in t&&(s=t,t=s.month,n=s.year),!t||!n?!1:(t=e.trim(t),n=e.trim(n),/^\d+$/.test(t)?/^\d+$/.test(n)?1<=t&&t<=12?(n.length===2&&(n<70?n="20"+n:n="19"+n),n.length!==4?!1:(i=new Date(n,t),r=new Date,i.setMonth(i.getMonth()-1),i.setMonth(i.getMonth()+1,1),i>r)):!1:!1:!1)},e.payment.validateCardCVC=function(t,r){var i,s;return t=e.trim(t),/^\d+$/.test(t)?(i=n(r),i!=null?(s=t.length,E.call(i.cvcLength,s)>=0):t.length>=3&&t.length<=4):!1},e.payment.cardType=function(e){var n;return e?((n=t(e))!=null?n.type:void 0)||null:null},e.payment.formatCardNumber=function(n){var r,i,s,o;r=t(n);if(!r)return n;s=r.length[r.length.length-1],n=n.replace(/\D/g,""),n=n.slice(0,s);if(r.format.global)return(o=n.match(r.format))!=null?o.join(" "):void 0;i=r.format.exec(n);if(i==null)return;return i.shift(),i=e.grep(i,function(e){return e}),i.join(" ")},e.payment.formatExpiry=function(e){var t,n,r,i;n=e.match(/^\D*(\d{1,2})(\D+)?(\d{1,4})?/);if(!n)return"";t=n[1]||"",r=n[2]||"",i=n[3]||"";if(i.length>0||r.length>0&&!/\ \/?\ ?/.test(r))r=" / ";return t.length===1&&t!=="0"&&t!=="1"&&(t="0"+t,r=" / "),t+r+i}}).call(this)},{}],2:[function(e,t,n){var r,i,s=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},o=[].slice;e("jquery.payment"),r=jQuery,r.card={},r.card.fn={},r.fn.card=function(e){return r.card.fn.construct.apply(this,e)},i=function(){function e(e,t){this.options=r.extend(!0,{},this.defaults,t),r.extend(this.options.messages,r.card.messages),r.extend(this.options.values,r.card.values),this.$el=r(e);if(!this.options.container){console.log("Please provide a container");return}this.$container=r(this.options.container),this.render(),this.attachHandlers(),this.handleInitialValues()}return e.prototype.cardTemplate='<div class="card-container">\n    <div class="card">\n        <div class="front">\n                <div class="card-logo visa">visa</div>\n                <div class="card-logo mastercard">MasterCard</div>\n                <div class="card-logo amex"></div>\n                <div class="card-logo discover">discover</div>\n            <div class="lower">\n                <div class="shiny"></div>\n                <div class="cvc display">{{cvc}}</div>\n                <div class="number display">{{number}}</div>\n                <div class="name display">{{name}}</div>\n                <div class="expiry display" data-before="{{monthYear}}" data-after="{{validDate}}">{{expiry}}</div>\n            </div>\n        </div>\n        <div class="back">\n            <div class="bar"></div>\n            <div class="cvc display">{{cvc}}</div>\n            <div class="shiny"></div>\n        </div>\n    </div>\n</div>',e.prototype.template=function(e,t){return e.replace(/\{\{(.*?)\}\}/g,function(e,n,r){return t[n]})},e.prototype.cardTypes=["maestro","dinersclub","laser","jcb","unionpay","discover","mastercard","amex","visa"],e.prototype.defaults={formatting:!0,formSelectors:{numberInput:'input[name="number"]',expiryInput:'input[name="expiry"]',cvcInput:'input[name="cvc"]',nameInput:'input[name="name"]'},cardSelectors:{cardContainer:".card-container",card:".card",numberDisplay:".number",expiryDisplay:".expiry",cvcDisplay:".cvc",nameDisplay:".name"},messages:{validDate:"valid\nthru",monthYear:"month/year"},values:{number:"&bull;&bull;&bull;&bull; &bull;&bull;&bull;&bull; &bull;&bull;&bull;&bull; &bull;&bull;&bull;&bull;",cvc:"&bull;&bull;&bull;",expiry:"&bull;&bull;/&bull;&bull;",name:"Full Name"},classes:{valid:"card-valid",invalid:"card-invalid"}},e.prototype.render=function(){var e,t;this.$container.append(this.template(this.cardTemplate,r.extend({},this.options.messages,this.options.values))),r.each(this.options.cardSelectors,function(e){return function(t,n){return e["$"+t]=e.$container.find(n)}}(this)),r.each(this.options.formSelectors,function(e){return function(t,n){var i;return e.options[t]?i=r(e.options[t]):i=e.$el.find(n),i.length||console.error("Card can't find a "+t+" in your form."),e["$"+t]=i}}(this)),this.options.formatting&&(this.$numberInput.payment("formatCardNumber"),this.$cvcInput.payment("formatCardCVC"),this.$expiryInput.length===1&&this.$expiryInput.payment("formatCardExpiry")),this.options.width&&(e=parseInt(this.$cardContainer.css("width")),this.$cardContainer.css("transform","scale("+this.options.width/e+")"));if(typeof navigator!="undefined"&&navigator!==null?navigator.userAgent:void 0)t=navigator.userAgent.toLowerCase(),t.indexOf("safari")!==-1&&t.indexOf("chrome")===-1&&this.$card.addClass("safari");(new Function("/*@cc_on return @_jscript_version; @*/"))()&&this.$card.addClass("ie-10");if(/rv:11.0/i.test(navigator.userAgent))return this.$card.addClass("ie-11")},e.prototype.attachHandlers=function(){var e;return this.$numberInput.bindVal(this.$numberDisplay,{fill:!1,filters:this.validToggler("cardNumber")}).on("payment.cardType",this.handle("setCardType")),e=[function(e){return e.replace(/(\s+)/g,"")}],this.$expiryInput.length===1&&e.push(this.validToggler("cardExpiry")),this.$expiryInput.bindVal(this.$expiryDisplay,{join:function(e){return e[0].length===2||e[1]?"/":""},filters:e}),this.$cvcInput.bindVal(this.$cvcDisplay,{filters:this.validToggler("cardCVC")}).on("focus",this.handle("flipCard")).on("blur",this.handle("flipCard")),this.$nameInput.bindVal(this.$nameDisplay,{fill:!1,filters:this.validToggler("cardHolderName"),join:" "}).on("keydown",this.handle("captureName"))},e.prototype.handleInitialValues=function(){return r.each(this.options.formSelectors,function(e){return function(t,n){var r;r=e["$"+t];if(r.val())return r.trigger("paste"),setTimeout(function(){return r.trigger("keyup")})}}(this))},e.prototype.handle=function(e){return function(t){return function(n){var i,s;return i=r(n.currentTarget),s=Array.prototype.slice.call(arguments),s.unshift(i),t.handlers[e].apply(t,s)}}(this)},e.prototype.validToggler=function(e){var t;return e==="cardExpiry"?t=function(e){var t;return t=r.payment.cardExpiryVal(e),r.payment.validateCardExpiry(t.month,t.year)}:e==="cardCVC"?t=function(e){return function(t){return r.payment.validateCardCVC(t,e.cardType)}}(this):e==="cardNumber"?t=function(e){return r.payment.validateCardNumber(e)}:e==="cardHolderName"&&(t=function(e){return e!==""}),function(e){return function(n,r,i){var s;return s=t(n),e.toggleValidClass(r,s),e.toggleValidClass(i,s),n}}(this)},e.prototype.toggleValidClass=function(e,t){return e.toggleClass(this.options.classes.valid,t),e.toggleClass(this.options.classes.invalid,!t)},e.prototype.handlers={setCardType:function(e,t,n){if(!this.$card.hasClass(n))return this.$card.removeClass("unknown"),this.$card.removeClass(this.cardTypes.join(" ")),this.$card.addClass(n),this.$card.toggleClass("identified",n!=="unknown"),this.cardType=n},flipCard:function(e,t){return this.$card.toggleClass("flipped")},captureName:function(e,t){var n,r,i;i=t.which||t.keyCode,r=[48,49,50,51,52,53,54,55,56,57,106,107,109,110,111,187,188,189,190,192],n=[189,109,190,110,222];if(r.indexOf(i)!==-1&&!(!t.shiftKey&&s.call(n,i)>=0))return t.preventDefault()}},r.fn.bindVal=function(e,t){var n,i,s,o,u;return t==null&&(t={}),t.fill=t.fill||!1,t.filters=t.filters||[],t.filters instanceof Array||(t.filters=[t.filters]),t.join=t.join||"",typeof t.join!="function"&&(s=t.join,t.join=function(){return s}),n=r(this),u=function(){var t,n,r;r=[];for(i=t=0,n=e.length;t<n;i=++t)o=e[i],r.push(e.eq(i).text());return r}(),n.on("focus",function(){return e.addClass("focused")}),n.on("blur",function(){return e.removeClass("focused")}),n.on("keyup change paste",function(s){var a,f,l,c,h,p,d,v,m,g;c=n.map(function(){return r(this).val()}).get(),f=t.join(c),c=c.join(f),c===f&&(c=""),m=t.filters;for(h=0,d=m.length;h<d;h++)a=m[h],c=a(c,n,e);g=[];for(i=p=0,v=e.length;p<v;i=++p)o=e[i],t.fill?l=c+u[i].substring(c.length):l=c||u[i],g.push(e.eq(i).text(l));return g}),n},e}(),r.fn.extend({card:function(){var e,t;return t=arguments[0],e=2<=arguments.length?o.call(arguments,1):[],this.each(function(){var n,s;n=r(this),s=n.data("card"),s||n.data("card",s=new i(this,t));if(typeof t=="string")return s[t].apply(s,e)})}})},{"jquery.payment":1}]},{},[2])(2)}),define("plugins/jquery.maskedinput.min",["jquery"],function(e){(function(e){function t(){var e=document.createElement("input"),t="onpaste";return e.setAttribute(t,""),"function"==typeof e[t]?"paste":"input"}var n,r=t()+".mask",i=navigator.userAgent,s=/iphone/i.test(i),o=/android/i.test(i);e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caret:function(e,t){var n;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof e?(t="number"==typeof t?t:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&(n=this.createTextRange(),n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(n=document.selection.createRange(),e=0-n.duplicate().moveStart("character",-1e5),t=e+n.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(t,i){var u,f,l,c,h,p;return!t&&this.length>0?(u=e(this[0]),u.data(e.mask.dataName)()):(i=e.extend({placeholder:e.mask.placeholder,completed:null},i),f=e.mask.definitions,l=[],c=p=t.length,h=null,e.each(t.split(""),function(e,t){"?"==t?(p--,c=e):f[t]?(l.push(RegExp(f[t])),null===h&&(h=l.length-1)):l.push(null)}),this.trigger("unmask").each(function(){function u(e){for(;p>++e&&!l[e];);return e}function d(e){for(;--e>=0&&!l[e];);return e}function v(e,t){var n,r;if(!(0>e)){for(n=e,r=u(t);p>n;n++)if(l[n]){if(!(p>r&&l[n].test(x[r])))break;x[n]=x[r],x[r]=i.placeholder,r=u(r)}w(),S.caret(Math.max(h,e))}}function m(e){var t,n,r,s;for(t=e,n=i.placeholder;p>t;t++)if(l[t]){if(r=u(t),s=x[t],x[t]=n,!(p>r&&l[r].test(s)))break;n=s}}function g(e){var t,n,r,i=e.which;8===i||46===i||s&&127===i?(t=S.caret(),n=t.begin,r=t.end,0===r-n&&(n=46!==i?d(n):r=u(n-1),r=46===i?u(r):r),b(n,r),v(n,r-1),e.preventDefault()):27==i&&(S.val(T),S.caret(0,E()),e.preventDefault())}function y(t){var n,r,s,a=t.which,f=S.caret();t.ctrlKey||t.altKey||t.metaKey||32>a||a&&(0!==f.end-f.begin&&(b(f.begin,f.end),v(f.begin,f.end-1)),n=u(f.begin-1),p>n&&(r=String.fromCharCode(a),l[n].test(r)&&(m(n),x[n]=r,w(),s=u(n),o?setTimeout(e.proxy(e.fn.caret,S,s),0):S.caret(s),i.completed&&s>=p&&i.completed.call(S))),t.preventDefault())}function b(e,t){var n;for(n=e;t>n&&p>n;n++)l[n]&&(x[n]=i.placeholder)}function w(){S.val(x.join(""))}function E(e){var t,n,r=S.val(),s=-1;for(t=0,pos=0;p>t;t++)if(l[t]){for(x[t]=i.placeholder;pos++<r.length;)if(n=r.charAt(pos-1),l[t].test(n)){x[t]=n,s=t;break}if(pos>r.length)break}else x[t]===r.charAt(pos)&&t!==c&&(pos++,s=t);return e?w():c>s+1?(S.val(""),b(0,p)):(w(),S.val(S.val().substring(0,s+1))),c?t:h}var S=e(this),x=e.map(t.split(""),function(e){return"?"!=e?f[e]?i.placeholder:e:void 0}),T=S.val();S.data(e.mask.dataName,function(){return e.map(x,function(e,t){return l[t]&&e!=i.placeholder?e:null}).join("")}),S.attr("readonly")||S.one("unmask",function(){S.unbind(".mask").removeData(e.mask.dataName)}).bind("focus.mask",function(){clearTimeout(n);var e;T=S.val(),e=E(),n=setTimeout(function(){w(),e==t.length?S.caret(0,e):S.caret(e)},10)}).bind("blur.mask",function(){E(),S.val()!=T&&S.change()}).bind("keydown.mask",g).bind("keypress.mask",y).bind(r,function(){setTimeout(function(){var e=E(!0);S.caret(e),i.completed&&e==S.val().length&&i.completed.call(S)},0)}),E()}))}})})(e)}),define("extra/buy",["jquery","bootstrap","plugins/card","plugins/jquery.maskedinput.min"],function(e){return{init:function(){e("body").prepend('<div id="buyModal"></div>'),e("#phone").mask("(999) 999-9999"),this.binder(),e(".card_wrapper").length>0&&this.card_binder(),e("body").on("click",".btn-print",function(){var t=e(".modal-body").html(),n=e('<iframe id="print-iframe"/>').on("load",function(){var e=jQuery(this).contents(),n='<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />';e.find("head").html(n),e.find("body").html(t);var r=document.getElementById("print-iframe").contentWindow;r.focus(),r.print()});e("#print-media").html("").append(n)})},detect_ie:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE "),n=e.indexOf("Trident/");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(n>0){var r=e.indexOf("rv:");return parseInt(e.substring(r+3,e.indexOf(".",r)),10)}return!1},card_binder:function(){var t=this,n=t.detect_ie();n<10&&n!=0&&e(".card_wrapper").hide(),e.card.values={number:"**** **** **** ****",name:"İsim Soyisim",expiry:"**/****",cvc:"***"},e("#pay_form").card({container:".card_wrapper",width:350,values:{number:"**** **** **** ****",name:"İsim Soyisim",expiry:"**/****",cvc:"***"},messages:{validDate:"valid\nthru",monthYear:"ay/yıl"}}),e("#inputNumber, #inputExpiry, #inputCvc, #inputName").keypress(function(){var t=e(this),n=t.parent().parent();n.hasClass("error")&&(n.removeClass("error"),t.next().fadeOut())}),e("#inputAgreement").click(function(){e("#inputAgreement").parent().next().hide()}),e("#pay_form").submit(function(){e("#inputNumber, #inputExpiry, #inputCvc, #inputName").each(function(t){var n=e(this);n.val().length==0&&n.addClass("card-invalid")});var t=e("input.card-invalid").length,n=!1;t&&(n=!0,e("input.card-invalid").next().css({display:"inline-block"}),e("input.card-invalid").parent().parent().addClass("error")),e("#inputAgreement").is(":checked")||(n=!0,e("#inputAgreement").parent().next().css({display:"inline-block"}));if(n!=0)return!1;e("#btnPay").attr("disabled","disabled"),e("#btnPay").html("Lütfen Bekleyin...")})},binder:function(){var t=this;e("body").on("click",".buy-but",function(){var n=e(this),r=n.attr("data-action");return n.button("loading"),e.get(r,function(r){e("#buyModal").html(r).children(":first-child").modal(),n.button("complete"),t.filter(),t.domainSearch()}),!1})},filter:function(){e("#domain").on("keypress",function(e){var t=String.fromCharCode(e.which);if(!t.match(/[a-z0-9+-]/)&&e.which!=8)return!1}),e("#domain").on("keyup",function(){e(this).val()!=""?e("#btn-search").removeAttr("disabled"):e("#btn-search").attr("disabled",!0)})},domainSearch:function(){e("body").on("click",".btn-existing-domain",function(){var t=e(this);e("#exist-notify").slideDown();var n=t.data("name"),r=t.data("href");e("#spanName").html(n),e("#btnContinue").attr("href",r)}),e("#domainSearch").submit(function(){var t=e("#btn-search"),n=e(this).serialize(),r=e(this).data("submit");return t.button("loading"),e.post(r,n,function(n){e("#domainList").html(n),t.button("complete")}),!1})}}}),define("extra/csrf",["jquery"],function(e){return{init:function(){e.ajaxSetup({headers:{"X-CSRF-Token":_token}})}}}),define("plugins/lightbox",["jquery"],function(e){(function(){var t=e,n=function(){function e(){this.fadeDuration=500,this.fitImagesInViewport=!0,this.resizeDuration=700,this.positionFromTop=50,this.showImageNumberLabel=!0,this.alwaysShowNavOnTouchDevices=!1,this.wrapAround=!1}return e.prototype.albumLabel=function(e,t){return"Fotoğraf "+e+" / "+t},e}(),r=function(){function e(e){this.options=e,this.album=[],this.currentImageIndex=void 0,this.init()}return e.prototype.init=function(){this.enable(),this.build()},e.prototype.enable=function(){var e=this;t("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(n){return e.start(t(n.currentTarget)),!1})},e.prototype.build=function(){var e=this;t("<div id='lightboxOverlay' class='lightboxOverlay'></div><div id='lightbox' class='lightbox'><div class='lb-outerContainer'><div class='lb-container'><img class='lb-image' src='' /><div class='lb-nav'><a class='lb-prev' href='' ></a><a class='lb-next' href='' ></a></div><div class='lb-loader'><a class='lb-cancel'></a></div></div></div><div class='lb-dataContainer'><div class='lb-data'><div class='lb-details'><span class='lb-caption'></span><span class='lb-number'></span></div><div class='lb-closeContainer'><a class='lb-close'></a></div></div></div></div>").appendTo(t("body")),this.$lightbox=t("#lightbox"),this.$overlay=t("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.containerTopPadding=parseInt(this.$container.css("padding-top"),10),this.containerRightPadding=parseInt(this.$container.css("padding-right"),10),this.containerBottomPadding=parseInt(this.$container.css("padding-bottom"),10),this.containerLeftPadding=parseInt(this.$container.css("padding-left"),10),this.$overlay.hide().on("click",function(){return e.end(),!1}),this.$lightbox.hide().on("click",function(n){return t(n.target).attr("id")==="lightbox"&&e.end(),!1}),this.$outerContainer.on("click",function(n){return t(n.target).attr("id")==="lightbox"&&e.end(),!1}),this.$lightbox.find(".lb-prev").on("click",function(){return e.currentImageIndex===0?e.changeImage(e.album.length-1):e.changeImage(e.currentImageIndex-1),!1}),this.$lightbox.find(".lb-next").on("click",function(){return e.currentImageIndex===e.album.length-1?e.changeImage(0):e.changeImage(e.currentImageIndex+1),!1}),this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return e.end(),!1})},e.prototype.start=function(e){function s(e){n.album.push({link:e.attr("href"),title:e.attr("data-title")||e.attr("title")})}var n=this,r=t(window);r.on("resize",t.proxy(this.sizeOverlay,this)),t("select, object, embed").css({visibility:"hidden"}),this.sizeOverlay(),this.album=[];var i=0,o=e.attr("data-lightbox"),u;if(o){u=t(e.prop("tagName")+'[data-lightbox="'+o+'"]');for(var a=0;a<u.length;a=++a)s(t(u[a])),u[a]===e[0]&&(i=a)}else if(e.attr("rel")==="lightbox")s(e);else{u=t(e.prop("tagName")+'[rel="'+e.attr("rel")+'"]');for(var f=0;f<u.length;f=++f)s(t(u[f])),u[f]===e[0]&&(i=f)}var l=r.scrollTop()+this.options.positionFromTop,c=r.scrollLeft();this.$lightbox.css({top:l+"px",left:c+"px"}).fadeIn(this.options.fadeDuration),this.changeImage(i)},e.prototype.changeImage=function(e){var n=this;this.disableKeyboardNav();var r=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration),t(".lb-loader").fadeIn("slow"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating");var i=new Image;i.onload=function(){var s,o,u,a,f,l,c;r.attr("src",n.album[e].link),s=t(i),r.width(i.width),r.height(i.height);if(n.options.fitImagesInViewport){c=t(window).width(),l=t(window).height(),f=c-n.containerLeftPadding-n.containerRightPadding-20,a=l-n.containerTopPadding-n.containerBottomPadding-120;if(i.width>f||i.height>a)i.width/f>i.height/a?(u=f,o=parseInt(i.height/(i.width/u),10),r.width(u),r.height(o)):(o=a,u=parseInt(i.width/(i.height/o),10),r.width(u),r.height(o))}n.sizeContainer(r.width(),r.height())},i.src=this.album[e].link,this.currentImageIndex=e},e.prototype.sizeOverlay=function(){this.$overlay.width(t(window).width()).height(t(document).height())},e.prototype.sizeContainer=function(e,t){function u(){n.$lightbox.find(".lb-dataContainer").width(s),n.$lightbox.find(".lb-prevLink").height(o),n.$lightbox.find(".lb-nextLink").height(o),n.showImage()}var n=this,r=this.$outerContainer.outerWidth(),i=this.$outerContainer.outerHeight(),s=e+this.containerLeftPadding+this.containerRightPadding,o=t+this.containerTopPadding+this.containerBottomPadding;r!==s||i!==o?this.$outerContainer.animate({width:s,height:o},this.options.resizeDuration,"swing",function(){u()}):u()},e.prototype.showImage=function(){this.$lightbox.find(".lb-loader").hide(),this.$lightbox.find(".lb-image").fadeIn("slow"),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},e.prototype.updateNav=function(){var e=!1;try{document.createEvent("TouchEvent"),e=this.options.alwaysShowNavOnTouchDevices?!0:!1}catch(t){}this.$lightbox.find(".lb-nav").show(),this.album.length>1&&(this.options.wrapAround?(e&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(this.currentImageIndex>0&&(this.$lightbox.find(".lb-prev").show(),e&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),e&&this.$lightbox.find(".lb-next").css("opacity","1"))))},e.prototype.updateDetails=function(){var e=this;typeof this.album[this.currentImageIndex].title!="undefined"&&this.album[this.currentImageIndex].title!==""&&this.$lightbox.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast").find("a").on("click",function(e){location.href=t(this).attr("href")}),this.album.length>1&&this.options.showImageNumberLabel?this.$lightbox.find(".lb-number").text(this.options.albumLabel(this.currentImageIndex+1,this.album.length)).fadeIn("fast"):this.$lightbox.find(".lb-number").hide(),this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return e.sizeOverlay()})},e.prototype.preloadNeighboringImages=function(){if(this.album.length>this.currentImageIndex+1){var e=new Image;e.src=this.album[this.currentImageIndex+1].link}if(this.currentImageIndex>0){var t=new Image;t.src=this.album[this.currentImageIndex-1].link}},e.prototype.enableKeyboardNav=function(){t(document).on("keyup.keyboard",t.proxy(this.keyboardAction,this))},e.prototype.disableKeyboardNav=function(){t(document).off(".keyboard")},e.prototype.keyboardAction=function(e){var t=27,n=37,r=39,i=e.keyCode,s=String.fromCharCode(i).toLowerCase();if(i===t||s.match(/x|o|c/))this.end();else if(s==="p"||i===n)this.currentImageIndex!==0?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&this.album.length>1&&this.changeImage(this.album.length-1);else if(s==="n"||i===r)this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&this.album.length>1&&this.changeImage(0)},e.prototype.end=function(){this.disableKeyboardNav(),t(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),t("select, object, embed").css({visibility:"visible"})},e}();t(function(){var e=new n,t=new r(e)})}).call(this)}),define("plugins/jquery.fitvids",["jquery"],function(e){(function(e){e.fn.fitVids=function(t){var n={customSelector:null,ignore:null};if(!document.getElementById("fit-vids-style")){var r=document.head||document.getElementsByTagName("head")[0],i=".fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}",s=document.createElement("div");s.innerHTML='<p>x</p><style id="fit-vids-style">'+i+"</style>",r.appendChild(s.childNodes[1])}return t&&e.extend(n,t),this.each(function(){var t=["iframe[src*='player.vimeo.com']","iframe[src*='youtube.com']","iframe[src*='youtube-nocookie.com']","iframe[src*='dailymotion.com']","iframe[src*='kickstarter.com'][src*='video.html']","object","embed"];n.customSelector&&t.push(n.customSelector);var r=".fitvidsignore";n.ignore&&(r=r+", "+n.ignore);var i=e(this).find(t.join(","));i=i.not("object object"),i=i.not(r),i.each(function(){var t=e(this);if(t.parents(r).length>0)return;if(this.tagName.toLowerCase()==="embed"&&t.parent("object").length||t.parent(".fluid-width-video-wrapper").length)return;!t.css("height")&&!t.css("width")&&(isNaN(t.attr("height"))||isNaN(t.attr("width")))&&(t.attr("height",9),t.attr("width",16));var n=this.tagName.toLowerCase()==="object"||t.attr("height")&&!isNaN(parseInt(t.attr("height"),10))?parseInt(t.attr("height"),10):t.height(),i=isNaN(parseInt(t.attr("width"),10))?t.width():parseInt(t.attr("width"),10),s=n/i;if(!t.attr("id")){var o="fitvid"+Math.floor(Math.random()*999999);t.attr("id",o)}t.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",s*100+"%"),t.removeAttr("height").removeAttr("width")})})}})(window.jQuery||window.Zepto)}),requirejs.config({paths:{jquery:"libraries/jquery.min",jqueryui:"plugins/jquery-ui-1.9.2.custom",swfupload:"plugins/swfupload/swfupload",bootstrap:"plugins/bootstrap",canTip:"plugins/jquery.cantip",canToast:"plugins/jquery.canToast",introjs:"plugins/intro",tinymce:"plugins/tinymce/tinymce.min",jquery_tinymce:"plugins/tinymce/jquery.tinymce.min","jquery.ui.widget":"../../../bower_components/blueimp-file-upload/js/vendor/jquery.ui.widget","jquery.fileupload":"../../../bower_components/blueimp-file-upload/js/jquery.fileupload","jquery.fileupload-process":"../../../bower_components/blueimp-file-upload/js/jquery.fileupload-process","jquery.fileupload.validate":"../../../bower_components/blueimp-file-upload/js/jquery.fileupload-validate"}}),require(["modules/logo","modules/pages","modules/settings","modules/social_media","modules/extensions","modules/paragraphs","modules/photo_cloud","modules/slider_cloud","modules/forms","modules/maps","modules/htmls","modules/cover_photo","modules/tour","modules/language","modules/menus","modules/layout","modules/blog","modules/long_menu","modules/documents","extra/buy","extra/csrf","plugins/lightbox","plugins/jquery.fitvids"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w){e.init(),t.init(),n.init(),r.init(),i.init(),s.init(),o.init(),u.init(),a.init(),f.init(),l.init(),c.init(),h.init(),p.init(),d.init(),v.init(),m.init(),g.init(),y.init(),b.init(),w.init(),$("#loading").hide(),$("#loading").ajaxError(function(e,t,n,r){if(t.status===406){var i='<div id="noaccess">';i+='<div class="alert alert-error">',i+="Güvenlik değişkeni hatalı.",i+='<a href="javascript:location.reload();" class="btn btn-primary">Lütfen Sayfayı Yenileyiniz.</a>',i+="</div>",i+="</div>",$("body").append(i)}else $("body").append(t.responseText)})}),define("main.development",function(){});